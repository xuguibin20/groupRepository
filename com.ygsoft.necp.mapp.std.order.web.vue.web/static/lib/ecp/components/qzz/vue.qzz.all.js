!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=46)}({46:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i18n,define){function require(){}window.qdefine=function(t,e){for(var i=arguments[0],s=[],n=0,o=i.length;n<o;n++){"ecp.utils.i18n"==i[n]?s.push(i18n):s.push(null)}"function"==typeof e&&e.apply(this,s)},
/*!
 * 基础控件类
 * ecp.qzz.base.js
 * 创建：qzz
 * 日期: 2014-03-1
 */
null==window.qdefine&&(window.qdefine=define),qdefine([],function(){null=="".trim&&(String.prototype.trim=function(){return this.replace(/^[ \n\t]+|[ \n\t]+$/g,"")});var t=!1;return null==window.qzz&&(window.qzz={}),null==window.ecp&&(window.ecp={}),window.qzz.index=0,window.qzz.Class=function(e,i,s){function n(){t||"function"==typeof this.init&&this.init.apply(this,arguments)}function o(t){return function(){var s=this.base;this.base=e.prototype[t];var n=i[t].apply(this,arguments);return this.base=s,n}}for(var h in"boolean"==typeof i&&(s=i),"object"===(void 0===e?"undefined":_typeof(e))&&(i=e,e=null),e&&(t=!0,n.prototype=new e,n.prototype.constructor=n,t=!1),i)i.hasOwnProperty(h)&&(e&&"function"==typeof i[h]&&"function"==typeof n.prototype[h]?n.prototype[h]=o(h):n.prototype[h]=i[h]);for(var h in e)"function"==typeof e[h]&&(n[h]=e[h]);if(s)for(var h in n.prototype)"function"==typeof n.prototype[h]&&(n.prototype[h]=n.prototype[h].bind(this));return n},window.qzz.space=function(t){for(var e=t.split("."),i=window.qzz,s=0,n=e.length;s<n;s++)null!=e[s]&&""!==e[s]&&(null==i[e[s]]&&(i[e[s]]={}),i=i[e[s]])},window.qzz.Class}),null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.base"],function(){var t=window.qzz;return t.hz2py=t.Class({init:function(t){this.dic={strChineseFirstPY:"YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY",oMultiDiff:{19969:"DZ",19975:"WM",19988:"QJ",20048:"YL",20056:"SC",20060:"NM",20094:"QG",20127:"QJ",20167:"QC",20193:"YG",20250:"KH",20256:"ZC",20282:"SC",20285:"QJG",20291:"TD",20314:"YD",20340:"NE",20375:"TD",20389:"YJ",20391:"CZ",20415:"PB",20446:"YS",20447:"SQ",20504:"TC",20608:"KG",20854:"QJ",20857:"ZC",20911:"PF",20985:"AW",21032:"PB",21048:"XQ",21049:"SC",21089:"YS",21119:"JC",21242:"SB",21273:"SC",21305:"YP",21306:"QO",21330:"ZC",21333:"SDC",21345:"QK",21378:"CA",21397:"SC",21414:"XS",21442:"SC",21477:"JG",21480:"TD",21484:"ZS",21494:"YX",21505:"YX",21512:"HG",21523:"XH",21537:"PB",21542:"PF",21549:"KH",21571:"E",21574:"DA",21588:"TD",21589:"O",21618:"ZC",21621:"KHA",21632:"ZJ",21654:"KG",21679:"LKG",21683:"KH",21710:"A",21719:"YH",21734:"WOE",21769:"A",21780:"WN",21804:"XH",21834:"A",21899:"ZD",21903:"RN",21908:"WO",21939:"ZC",21956:"SA",21964:"YA",21970:"TD",22003:"A",22031:"JG",22040:"XS",22060:"ZC",22066:"ZC",22079:"MH",22129:"XJ",22179:"XA",22237:"NJ",22244:"TD",22280:"JQ",22300:"YH",22313:"XW",22331:"YQ",22343:"YJ",22351:"PH",22395:"DC",22412:"TD",22484:"PB",22500:"PB",22534:"ZD",22549:"DH",22561:"PB",22612:"TD",22771:"KQ",22831:"HB",22841:"JG",22855:"QJ",22865:"XQ",23013:"ML",23081:"WM",23487:"SX",23558:"QJ",23561:"YW",23586:"YW",23614:"YW",23615:"SN",23631:"PB",23646:"ZS",23663:"ZT",23673:"YG",23762:"TD",23769:"ZS",23780:"QJ",23884:"QK",24055:"XH",24113:"DC",24162:"ZC",24191:"GA",24273:"QJ",24324:"NL",24377:"TD",24378:"QJ",24439:"PF",24554:"ZS",24683:"TD",24694:"WE",24733:"LK",24925:"TN",25094:"ZG",25100:"XQ",25103:"XH",25153:"PB",25170:"PB",25179:"KG",25203:"PB",25240:"ZS",25282:"FB",25303:"NA",25324:"KG",25341:"ZY",25373:"WZ",25375:"XJ",25384:"A",25457:"A",25528:"SD",25530:"SC",25552:"TD",25774:"ZC",25874:"ZC",26044:"YW",26080:"WM",26292:"PB",26333:"PB",26355:"ZY",26366:"CZ",26397:"ZC",26399:"QJ",26415:"ZS",26451:"SB",26526:"ZC",26552:"JG",26561:"TD",26588:"JG",26597:"CZ",26629:"ZS",26638:"YL",26646:"XQ",26653:"KG",26657:"XJ",26727:"HG",26894:"ZC",26937:"ZS",26946:"ZC",26999:"KJ",27099:"KJ",27449:"YQ",27481:"XS",27542:"ZS",27663:"ZS",27748:"TS",27784:"SC",27788:"ZD",27795:"TD",27812:"O",27850:"PB",27852:"MB",27895:"SL",27898:"PL",27973:"QJ",27981:"KH",27986:"HX",27994:"XJ",28044:"YC",28065:"WG",28177:"SM",28267:"QJ",28291:"KH",28337:"ZQ",28463:"TL",28548:"DC",28601:"TD",28689:"PB",28805:"JG",28820:"QG",28846:"PB",28952:"TD",28975:"ZC",29100:"A",29325:"QJ",29575:"SL",29602:"FB",30010:"TD",30044:"CX",30058:"PF",30091:"YSP",30111:"YN",30229:"XJ",30427:"SC",30465:"SX",30631:"YQ",30655:"QJ",30684:"QJG",30707:"SD",30729:"XH",30796:"LG",30917:"PB",31074:"NM",31085:"JZ",31109:"SC",31181:"ZC",31192:"MLB",31293:"JQ",31400:"YX",31584:"YJ",31896:"ZN",31909:"ZY",31995:"XJ",32321:"PF",32327:"ZY",32418:"HG",32420:"XQ",32421:"HG",32438:"LG",32473:"GJ",32488:"TD",32521:"QJ",32527:"PB",32562:"ZSQ",32564:"JZ",32735:"ZD",32793:"PB",33071:"PF",33098:"XL",33100:"YA",33152:"PB",33261:"CX",33324:"BP",33333:"TD",33406:"YA",33426:"WM",33432:"PB",33445:"JG",33486:"ZN",33493:"TS",33507:"QJ",33540:"QJ",33544:"ZC",33564:"XQ",33617:"YT",33632:"QJ",33636:"XH",33637:"YX",33694:"WG",33705:"PF",33728:"YW",33882:"SR",34067:"WM",34074:"YW",34121:"QJ",34255:"ZC",34259:"XL",34425:"JH",34430:"XH",34485:"KH",34503:"YS",34532:"HG",34552:"XS",34558:"YE",34593:"ZL",34660:"YQ",34892:"XH",34928:"SC",34999:"QJ",35048:"PB",35059:"SC",35098:"ZC",35203:"TQ",35265:"JX",35299:"JX",35782:"SZ",35828:"YS",35830:"E",35843:"TD",35895:"YG",35977:"MH",36158:"JG",36228:"QJ",36426:"XQ",36466:"DC",36710:"JC",36711:"ZYG",36767:"PB",36866:"SK",36951:"YW",37034:"YX",37063:"XH",37218:"ZC",37325:"ZC",38063:"PB",38079:"TD",38085:"QY",38107:"DC",38116:"TD",38123:"YD",38224:"HG",38241:"XTC",38271:"ZC",38415:"YE",38426:"KH",38461:"YD",38463:"AE",38466:"PB",38477:"XJ",38518:"YT",38551:"WK",38585:"ZC",38704:"XS",38739:"LJ",38761:"GJ",38808:"SQ",39048:"JG",39049:"XJ",39052:"HG",39076:"CZ",39271:"XT",39534:"TD",39552:"TD",39584:"PB",39647:"SB",39730:"LG",39748:"TPB",40109:"ZQ",40479:"ND",40516:"HG",40536:"HG",40583:"QJ",40765:"YQ",40784:"QJ",40840:"YK",40863:"QJG"},pinyinDic:{"啊":"a","阿":"a","锕":"a","埃":"ai","挨":"ai","哎":"ai","唉":"ai","哀":"ai","皑":"ai","癌":"ai","蔼":"ai","矮":"ai","艾":"ai","碍":"ai","爱":"ai","隘":"ai","诶":"ai","捱":"ai","嗳":"ai","嗌":"ai","嫒":"ai","瑷":"ai","暧":"ai","砹":"ai","锿":"ai","霭":"ai","鞍":"an","氨":"an","安":"an","俺":"an","按":"an","暗":"an","岸":"an","胺":"an","案":"an","谙":"an","埯":"an","揞":"an","犴":"an","庵":"an","桉":"an","铵":"an","鹌":"an","顸":"an","黯":"an","肮":"ang","昂":"ang","盎":"ang","凹":"ao","敖":"ao","熬":"ao","翱":"ao","袄":"ao","傲":"ao","奥":"ao","懊":"ao","澳":"ao","坳":"ao","拗":"ao","嗷":"ao","噢":"ao","岙":"ao","廒":"ao","遨":"ao","媪":"ao","骜":"ao","聱":"ao","螯":"ao","鏊":"ao","鳌":"ao","鏖":"ao","芭":"ba","捌":"ba","扒":"ba","叭":"ba","吧":"ba","笆":"ba","八":"ba","疤":"ba","巴":"ba","拔":"ba","跋":"ba","靶":"ba","把":"ba","耙":"ba","坝":"ba","霸":"ba","罢":"ba","爸":"ba","茇":"ba","菝":"ba","萆":"ba","捭":"ba","岜":"ba","灞":"ba","杷":"ba","钯":"ba","粑":"ba","鲅":"ba","魃":"ba","白":"bai","柏":"bai","百":"bai","摆":"bai","佰":"bai","败":"bai","拜":"bai","稗":"bai","薜":"bai","掰":"bai","鞴":"bai","斑":"ban","班":"ban","搬":"ban","扳":"ban","般":"ban","颁":"ban","板":"ban","版":"ban","扮":"ban","拌":"ban","伴":"ban","瓣":"ban","半":"ban","办":"ban","绊":"ban","阪":"ban","坂":"ban","豳":"ban","钣":"ban","瘢":"ban","癍":"ban","舨":"ban","邦":"bang","帮":"bang","梆":"bang","榜":"bang","膀":"bang","绑":"bang","棒":"bang","磅":"bang","蚌":"bang","镑":"bang","傍":"bang","谤":"bang","蒡":"bang","螃":"bang","苞":"bao","胞":"bao","包":"bao","褒":"bao","雹":"bao","保":"bao","堡":"bao","饱":"bao","宝":"bao","抱":"bao","报":"bao","暴":"bao","豹":"bao","鲍":"bao","爆":"bao","勹":"bao","葆":"bao","宀":"bao","孢":"bao","煲":"bao","鸨":"bao","褓":"bao","趵":"bao","龅":"bao","剥":"bo","薄":"bo","玻":"bo","菠":"bo","播":"bo","拨":"bo","钵":"bo","波":"bo","博":"bo","勃":"bo","搏":"bo","铂":"bo","箔":"bo","伯":"bo","帛":"bo","舶":"bo","脖":"bo","膊":"bo","渤":"bo","泊":"bo","驳":"bo","亳":"bo","蕃":"bo","啵":"bo","饽":"bo","檗":"bo","擘":"bo","礴":"bo","钹":"bo","鹁":"bo","簸":"bo","跛":"bo","杯":"bei","碑":"bei","悲":"bei","卑":"bei","北":"bei","辈":"bei","背":"bei","贝":"bei","钡":"bei","倍":"bei","狈":"bei","备":"bei","惫":"bei","焙":"bei","被":"bei","孛":"bei","陂":"bei","邶":"bei","埤":"bei","蓓":"bei","呗":"bei","怫":"bei","悖":"bei","碚":"bei","鹎":"bei","褙":"bei","鐾":"bei","奔":"ben","苯":"ben","本":"ben","笨":"ben","畚":"ben","坌":"ben","锛":"ben","崩":"beng","绷":"beng","甭":"beng","泵":"beng","蹦":"beng","迸":"beng","唪":"beng","嘣":"beng","甏":"beng","逼":"bi","鼻":"bi","比":"bi","鄙":"bi","笔":"bi","彼":"bi","碧":"bi","蓖":"bi","蔽":"bi","毕":"bi","毙":"bi","毖":"bi","币":"bi","庇":"bi","痹":"bi","闭":"bi","敝":"bi","弊":"bi","必":"bi","辟":"bi","壁":"bi","臂":"bi","避":"bi","陛":"bi","匕":"bi","仳":"bi","俾":"bi","芘":"bi","荜":"bi","荸":"bi","吡":"bi","哔":"bi","狴":"bi","庳":"bi","愎":"bi","滗":"bi","濞":"bi","弼":"bi","妣":"bi","婢":"bi","嬖":"bi","璧":"bi","贲":"bi","畀":"bi","铋":"bi","秕":"bi","裨":"bi","筚":"bi","箅":"bi","篦":"bi","舭":"bi","襞":"bi","跸":"bi","髀":"bi","鞭":"bian","边":"bian","编":"bian","贬":"bian","扁":"bian","便":"bian","变":"bian","卞":"bian","辨":"bian","辩":"bian","辫":"bian","遍":"bian","匾":"bian","弁":"bian","苄":"bian","忭":"bian","汴":"bian","缏":"bian","煸":"bian","砭":"bian","碥":"bian","稹":"bian","窆":"bian","蝙":"bian","笾":"bian","鳊":"bian","标":"biao","彪":"biao","膘":"biao","表":"biao","婊":"biao","骠":"biao","飑":"biao","飙":"biao","飚":"biao","灬":"biao","镖":"biao","镳":"biao","瘭":"biao","裱":"biao","鳔":"biao","鳖":"bie","憋":"bie","别":"bie","瘪":"bie","蹩":"bie","鳘":"bie","彬":"bin","斌":"bin","濒":"bin","滨":"bin","宾":"bin","摈":"bin","傧":"bin","浜":"bin","缤":"bin","玢":"bin","殡":"bin","膑":"bin","镔":"bin","髌":"bin","鬓":"bin","兵":"bing","冰":"bing","柄":"bing","丙":"bing","秉":"bing","饼":"bing","炳":"bing","病":"bing","并":"bing","禀":"bing","邴":"bing","摒":"bing","绠":"bing","枋":"bing","槟":"bing","燹":"bing","捕":"bu","卜":"bu","哺":"bu","补":"bu","埠":"bu","不":"bu","布":"bu","步":"bu","簿":"bu","部":"bu","怖":"bu","拊":"bu","卟":"bu","逋":"bu","瓿":"bu","晡":"bu","钚":"bu","醭":"bu","擦":"ca","嚓":"ca","礤":"ca","猜":"cai","裁":"cai","材":"cai","才":"cai","财":"cai","睬":"cai","踩":"cai","采":"cai","彩":"cai","菜":"cai","蔡":"cai","餐":"can","参":"can","蚕":"can","残":"can","惭":"can","惨":"can","灿":"can","骖":"can","璨":"can","粲":"can","黪":"can","苍":"cang","舱":"cang","仓":"cang","沧":"cang","藏":"cang","伧":"cang","操":"cao","糙":"cao","槽":"cao","曹":"cao","草":"cao","艹":"cao","嘈":"cao","漕":"cao","螬":"cao","艚":"cao","厕":"ce","策":"ce","侧":"ce","册":"ce","测":"ce","刂":"ce","帻":"ce","恻":"ce","层":"ceng","蹭":"ceng","噌":"ceng","插":"cha","叉":"cha","茬":"cha","茶":"cha","查":"cha","碴":"cha","搽":"cha","察":"cha","岔":"cha","差":"cha","诧":"cha","猹":"cha","馇":"cha","汊":"cha","姹":"cha","杈":"cha","楂":"cha","槎":"cha","檫":"cha","钗":"cha","锸":"cha","镲":"cha","衩":"cha","拆":"chai","柴":"chai","豺":"chai","侪":"chai","茈":"chai","瘥":"chai","虿":"chai","龇":"chai","搀":"chan","掺":"chan","蝉":"chan","馋":"chan","谗":"chan","缠":"chan","铲":"chan","产":"chan","阐":"chan","颤":"chan","冁":"chan","谄":"chan","谶":"chan","蒇":"chan","廛":"chan","忏":"chan","潺":"chan","澶":"chan","孱":"chan","羼":"chan","婵":"chan","嬗":"chan","骣":"chan","觇":"chan","禅":"chan","镡":"chan","裣":"chan","蟾":"chan","躔":"chan","昌":"chang","猖":"chang","场":"chang","尝":"chang","常":"chang","长":"chang","偿":"chang","肠":"chang","厂":"chang","敞":"chang","畅":"chang","唱":"chang","倡":"chang","伥":"chang","鬯":"chang","苌":"chang","菖":"chang","徜":"chang","怅":"chang","惝":"chang","阊":"chang","娼":"chang","嫦":"chang","昶":"chang","氅":"chang","鲳":"chang","超":"chao","抄":"chao","钞":"chao","朝":"chao","嘲":"chao","潮":"chao","巢":"chao","吵":"chao","炒":"chao","怊":"chao","绉":"chao","晁":"chao","耖":"chao","车":"che","扯":"che","撤":"che","掣":"che","彻":"che","澈":"che","坼":"che","屮":"che","砗":"che","郴":"chen","臣":"chen","辰":"chen","尘":"chen","晨":"chen","忱":"chen","沉":"chen","陈":"chen","趁":"chen","衬":"chen","称":"chen","谌":"chen","抻":"chen","嗔":"chen","宸":"chen","琛":"chen","榇":"chen","肜":"chen","胂":"chen","碜":"chen","龀":"chen","撑":"cheng","城":"cheng","橙":"cheng","成":"cheng","呈":"cheng","乘":"cheng","程":"cheng","惩":"cheng","澄":"cheng","诚":"cheng","承":"cheng","逞":"cheng","骋":"cheng","秤":"cheng","埕":"cheng","嵊":"cheng","徵":"cheng","浈":"cheng","枨":"cheng","柽":"cheng","樘":"cheng","晟":"cheng","塍":"cheng","瞠":"cheng","铖":"cheng","裎":"cheng","蛏":"cheng","酲":"cheng","吃":"chi","痴":"chi","持":"chi","匙":"chi","池":"chi","迟":"chi","弛":"chi","驰":"chi","耻":"chi","齿":"chi","侈":"chi","尺":"chi","赤":"chi","翅":"chi","斥":"chi","炽":"chi","傺":"chi","墀":"chi","芪":"chi","茌":"chi","搋":"chi","叱":"chi","哧":"chi","啻":"chi","嗤":"chi","彳":"chi","饬":"chi","沲":"chi","媸":"chi","敕":"chi","胝":"chi","眙":"chi","眵":"chi","鸱":"chi","瘛":"chi","褫":"chi","蚩":"chi","螭":"chi","笞":"chi","篪":"chi","豉":"chi","踅":"chi","踟":"chi","魑":"chi","充":"chong","冲":"chong","虫":"chong","崇":"chong","宠":"chong","茺":"chong","忡":"chong","憧":"chong","铳":"chong","艟":"chong","抽":"chou","酬":"chou","畴":"chou","踌":"chou","稠":"chou","愁":"chou","筹":"chou","仇":"chou","绸":"chou","瞅":"chou","丑":"chou","俦":"chou","圳":"chou","帱":"chou","惆":"chou","溴":"chou","妯":"chou","瘳":"chou","雠":"chou","鲋":"chou","臭":"chu","初":"chu","出":"chu","橱":"chu","厨":"chu","躇":"chu","锄":"chu","雏":"chu","滁":"chu","除":"chu","楚":"chu","础":"chu","储":"chu","矗":"chu","搐":"chu","触":"chu","处":"chu","亍":"chu","刍":"chu","憷":"chu","绌":"chu","杵":"chu","楮":"chu","樗":"chu","蜍":"chu","蹰":"chu","黜":"chu","揣":"chuan","川":"chuan","穿":"chuan","椽":"chuan","传":"chuan","船":"chuan","喘":"chuan","串":"chuan","掾":"chuan","舛":"chuan","惴":"chuan","遄":"chuan","巛":"chuan","氚":"chuan","钏":"chuan","镩":"chuan","舡":"chuan","疮":"chuang","窗":"chuang","幢":"chuang","床":"chuang","闯":"chuang","创":"chuang","怆":"chuang","吹":"chui","炊":"chui","捶":"chui","锤":"chui","垂":"chui","陲":"chui","棰":"chui","槌":"chui","春":"chun","椿":"chun","醇":"chun","唇":"chun","淳":"chun","纯":"chun","蠢":"chun","促":"chun","莼":"chun","沌":"chun","肫":"chun","朐":"chun","鹑":"chun","蝽":"chun","戳":"chuo","绰":"chuo","蔟":"chuo","辶":"chuo","辍":"chuo","镞":"chuo","踔":"chuo","龊":"chuo","疵":"ci","茨":"ci","磁":"ci","雌":"ci","辞":"ci","慈":"ci","瓷":"ci","词":"ci","此":"ci","刺":"ci","赐":"ci","次":"ci","荠":"ci","呲":"ci","嵯":"ci","鹚":"ci","螅":"ci","糍":"ci","趑":"ci","聪":"cong","葱":"cong","囱":"cong","匆":"cong","从":"cong","丛":"cong","偬":"cong","苁":"cong","淙":"cong","骢":"cong","琮":"cong","璁":"cong","枞":"cong","凑":"cu","粗":"cu","醋":"cu","簇":"cu","猝":"cu","殂":"cu","蹙":"cu","蹿":"cuan","篡":"cuan","窜":"cuan","汆":"cuan","撺":"cuan","昕":"cuan","爨":"cuan","摧":"cui","崔":"cui","催":"cui","脆":"cui","瘁":"cui","粹":"cui","淬":"cui","翠":"cui","萃":"cui","悴":"cui","璀":"cui","榱":"cui","隹":"cui","村":"cun","存":"cun","寸":"cun","磋":"cun","忖":"cun","皴":"cun","撮":"cuo","搓":"cuo","措":"cuo","挫":"cuo","错":"cuo","厝":"cuo","脞":"cuo","锉":"cuo","矬":"cuo","痤":"cuo","鹾":"cuo","蹉":"cuo","躜":"cuo","搭":"da","达":"da","答":"da","瘩":"da","打":"da","大":"da","耷":"da","哒":"da","嗒":"da","怛":"da","妲":"da","疸":"da","褡":"da","笪":"da","靼":"da","鞑":"da","呆":"dai","歹":"dai","傣":"dai","戴":"dai","带":"dai","殆":"dai","代":"dai","贷":"dai","袋":"dai","待":"dai","逮":"dai","怠":"dai","埭":"dai","甙":"dai","呔":"dai","岱":"dai","迨":"dai","逯":"dai","骀":"dai","绐":"dai","玳":"dai","黛":"dai","耽":"dan","担":"dan","丹":"dan","单":"dan","郸":"dan","掸":"dan","胆":"dan","旦":"dan","氮":"dan","但":"dan","惮":"dan","淡":"dan","诞":"dan","弹":"dan","蛋":"dan","亻":"dan","儋":"dan","卩":"dan","萏":"dan","啖":"dan","澹":"dan","檐":"dan","殚":"dan","赕":"dan","眈":"dan","瘅":"dan","聃":"dan","箪":"dan","当":"dang","挡":"dang","党":"dang","荡":"dang","档":"dang","谠":"dang","凼":"dang","菪":"dang","宕":"dang","砀":"dang","铛":"dang","裆":"dang","刀":"dao","捣":"dao","蹈":"dao","倒":"dao","岛":"dao","祷":"dao","导":"dao","到":"dao","稻":"dao","悼":"dao","道":"dao","盗":"dao","叨":"dao","啁":"dao","忉":"dao","洮":"dao","氘":"dao","焘":"dao","忑":"dao","纛":"dao","德":"de","得":"de","的":"de","锝":"de","蹬":"deng","灯":"deng","登":"deng","等":"deng","瞪":"deng","凳":"deng","邓":"deng","噔":"deng","嶝":"deng","戥":"deng","磴":"deng","镫":"deng","簦":"deng","堤":"di","低":"di","滴":"di","迪":"di","敌":"di","笛":"di","狄":"di","涤":"di","翟":"di","嫡":"di","抵":"di","底":"di","地":"di","蒂":"di","第":"di","帝":"di","弟":"di","递":"di","缔":"di","氐":"di","籴":"di","诋":"di","谛":"di","邸":"di","坻":"di","莜":"di","荻":"di","嘀":"di","娣":"di","柢":"di","棣":"di","觌":"di","砥":"di","碲":"di","睇":"di","镝":"di","羝":"di","骶":"di","颠":"dian","掂":"dian","滇":"dian","碘":"dian","点":"dian","典":"dian","靛":"dian","垫":"dian","电":"dian","佃":"dian","甸":"dian","店":"dian","惦":"dian","奠":"dian","淀":"dian","殿":"dian","丶":"dian","阽":"dian","坫":"dian","埝":"dian","巅":"dian","玷":"dian","癜":"dian","癫":"dian","簟":"dian","踮":"dian","碉":"diao","叼":"diao","雕":"diao","凋":"diao","刁":"diao","掉":"diao","吊":"diao","钓":"diao","调":"diao","轺":"diao","铞":"diao","蜩":"diao","粜":"diao","貂":"diao","跌":"die","爹":"die","碟":"die","蝶":"die","迭":"die","谍":"die","叠":"die","佚":"die","垤":"die","堞":"die","揲":"die","喋":"die","渫":"die","轶":"die","牒":"die","瓞":"die","褶":"die","耋":"die","蹀":"die","鲽":"die","鳎":"die","丁":"ding","盯":"ding","叮":"ding","钉":"ding","顶":"ding","鼎":"ding","锭":"ding","定":"ding","订":"ding","丢":"ding","仃":"ding","啶":"ding","玎":"ding","腚":"ding","碇":"ding","町":"ding","铤":"ding","疔":"ding","耵":"ding","酊":"ding","东":"dong","冬":"dong","董":"dong","懂":"dong","动":"dong","栋":"dong","侗":"dong","恫":"dong","冻":"dong","洞":"dong","垌":"dong","咚":"dong","岽":"dong","峒":"dong","夂":"dong","氡":"dong","胨":"dong","胴":"dong","硐":"dong","鸫":"dong","兜":"dou","抖":"dou","斗":"dou","陡":"dou","豆":"dou","逗":"dou","痘":"dou","蔸":"dou","钭":"dou","窦":"dou","窬":"dou","蚪":"dou","篼":"dou","酡":"dou","都":"du","督":"du","毒":"du","犊":"du","独":"du","读":"du","堵":"du","睹":"du","赌":"du","杜":"du","镀":"du","肚":"du","度":"du","渡":"du","妒":"du","芏":"du","嘟":"du","渎":"du","椟":"du","橐":"du","牍":"du","蠹":"du","笃":"du","髑":"du","黩":"du","端":"duan","短":"duan","锻":"duan","段":"duan","断":"duan","缎":"duan","彖":"duan","椴":"duan","煅":"duan","簖":"duan","堆":"dui","兑":"dui","队":"dui","对":"dui","怼":"dui","憝":"dui","碓":"dui","墩":"dun","吨":"dun","蹲":"dun","敦":"dun","顿":"dun","囤":"dun","钝":"dun","盾":"dun","遁":"dun","炖":"dun","砘":"dun","礅":"dun","盹":"dun","镦":"dun","趸":"dun","掇":"duo","哆":"duo","多":"duo","夺":"duo","垛":"duo","躲":"duo","朵":"duo","跺":"duo","舵":"duo","剁":"duo","惰":"duo","堕":"duo","咄":"duo","哚":"duo","缍":"duo","柁":"duo","铎":"duo","裰":"duo","踱":"duo","蛾":"e","峨":"e","鹅":"e","俄":"e","额":"e","讹":"e","娥":"e","恶":"e","厄":"e","扼":"e","遏":"e","鄂":"e","饿":"e","噩":"e","谔":"e","垩":"e","垭":"e","苊":"e","莪":"e","萼":"e","呃":"e","愕":"e","屙":"e","婀":"e","轭":"e","曷":"e","腭":"e","硪":"e","锇":"e","锷":"e","鹗":"e","颚":"e","鳄":"e","恩":"en","蒽":"en","摁":"en","唔":"en","嗯":"en","而":"er","儿":"er","耳":"er","尔":"er","饵":"er","洱":"er","二":"er","贰":"er","迩":"er","珥":"er","铒":"er","鸸":"er","鲕":"er","发":"fa","罚":"fa","筏":"fa","伐":"fa","乏":"fa","阀":"fa","法":"fa","珐":"fa","垡":"fa","砝":"fa","藩":"fan","帆":"fan","番":"fan","翻":"fan","樊":"fan","矾":"fan","钒":"fan","繁":"fan","凡":"fan","烦":"fan","反":"fan","返":"fan","范":"fan","贩":"fan","犯":"fan","饭":"fan","泛":"fan","蘩":"fan","幡":"fan","犭":"fan","梵":"fan","攵":"fan","燔":"fan","畈":"fan","蹯":"fan","坊":"fang","芳":"fang","方":"fang","肪":"fang","房":"fang","防":"fang","妨":"fang","仿":"fang","访":"fang","纺":"fang","放":"fang","匚":"fang","邡":"fang","彷":"fang","钫":"fang","舫":"fang","鲂":"fang","菲":"fei","非":"fei","啡":"fei","飞":"fei","肥":"fei","匪":"fei","诽":"fei","吠":"fei","肺":"fei","废":"fei","沸":"fei","费":"fei","芾":"fei","狒":"fei","悱":"fei","淝":"fei","妃":"fei","绋":"fei","绯":"fei","榧":"fei","腓":"fei","斐":"fei","扉":"fei","祓":"fei","砩":"fei","镄":"fei","痱":"fei","蜚":"fei","篚":"fei","翡":"fei","霏":"fei","鲱":"fei","芬":"fen","酚":"fen","吩":"fen","氛":"fen","分":"fen","纷":"fen","坟":"fen","焚":"fen","汾":"fen","粉":"fen","奋":"fen","份":"fen","忿":"fen","愤":"fen","粪":"fen","偾":"fen","瀵":"fen","棼":"fen","愍":"fen","鲼":"fen","鼢":"fen","丰":"feng","封":"feng","枫":"feng","蜂":"feng","峰":"feng","锋":"feng","风":"feng","疯":"feng","烽":"feng","逢":"feng","冯":"feng","缝":"feng","讽":"feng","奉":"feng","凤":"feng","俸":"feng","酆":"feng","葑":"feng","沣":"feng","砜":"feng","佛":"fu","否":"fu","夫":"fu","敷":"fu","肤":"fu","孵":"fu","扶":"fu","拂":"fu","辐":"fu","幅":"fu","氟":"fu","符":"fu","伏":"fu","俘":"fu","服":"fu","浮":"fu","涪":"fu","福":"fu","袱":"fu","弗":"fu","甫":"fu","抚":"fu","辅":"fu","俯":"fu","釜":"fu","斧":"fu","脯":"fu","腑":"fu","府":"fu","腐":"fu","赴":"fu","副":"fu","覆":"fu","赋":"fu","复":"fu","傅":"fu","付":"fu","阜":"fu","父":"fu","腹":"fu","负":"fu","富":"fu","讣":"fu","附":"fu","妇":"fu","缚":"fu","咐":"fu","匐":"fu","凫":"fu","郛":"fu","芙":"fu","苻":"fu","茯":"fu","莩":"fu","菔":"fu","呋":"fu","幞":"fu","滏":"fu","艴":"fu","孚":"fu","驸":"fu","绂":"fu","桴":"fu","赙":"fu","黻":"fu","黼":"fu","罘":"fu","稃":"fu","馥":"fu","虍":"fu","蚨":"fu","蜉":"fu","蝠":"fu","蝮":"fu","麸":"fu","趺":"fu","跗":"fu","鳆":"fu","噶":"ga","嘎":"ga","蛤":"ga","尬":"ga","呷":"ga","尕":"ga","尜":"ga","旮":"ga","钆":"ga","该":"gai","改":"gai","概":"gai","钙":"gai","盖":"gai","溉":"gai","丐":"gai","陔":"gai","垓":"gai","戤":"gai","赅":"gai","胲":"gai","干":"gan","甘":"gan","杆":"gan","柑":"gan","竿":"gan","肝":"gan","赶":"gan","感":"gan","秆":"gan","敢":"gan","赣":"gan","坩":"gan","苷":"gan","尴":"gan","擀":"gan","泔":"gan","淦":"gan","澉":"gan","绀":"gan","橄":"gan","旰":"gan","矸":"gan","疳":"gan","酐":"gan","冈":"gang","刚":"gang","钢":"gang","缸":"gang","肛":"gang","纲":"gang","岗":"gang","港":"gang","戆":"gang","罡":"gang","颃":"gang","筻":"gang","杠":"gong","工":"gong","攻":"gong","功":"gong","恭":"gong","龚":"gong","供":"gong","躬":"gong","公":"gong","宫":"gong","弓":"gong","巩":"gong","汞":"gong","拱":"gong","贡":"gong","共":"gong","蕻":"gong","廾":"gong","咣":"gong","珙":"gong","肱":"gong","蚣":"gong","蛩":"gong","觥":"gong","篙":"gao","皋":"gao","高":"gao","膏":"gao","羔":"gao","糕":"gao","搞":"gao","镐":"gao","稿":"gao","告":"gao","睾":"gao","诰":"gao","郜":"gao","蒿":"gao","藁":"gao","缟":"gao","槔":"gao","槁":"gao","杲":"gao","锆":"gao","哥":"ge","歌":"ge","搁":"ge","戈":"ge","鸽":"ge","胳":"ge","疙":"ge","割":"ge","革":"ge","葛":"ge","格":"ge","阁":"ge","隔":"ge","铬":"ge","个":"ge","各":"ge","鬲":"ge","仡":"ge","哿":"ge","塥":"ge","嗝":"ge","纥":"ge","搿":"ge","膈":"ge","硌":"ge","铪":"ge","镉":"ge","袼":"ge","颌":"ge","虼":"ge","舸":"ge","骼":"ge","髂":"ge","给":"gei","根":"gen","跟":"gen","亘":"gen","茛":"gen","哏":"gen","艮":"gen","耕":"geng","更":"geng","庚":"geng","羹":"geng","埂":"geng","耿":"geng","梗":"geng","哽":"geng","赓":"geng","鲠":"geng","钩":"gou","勾":"gou","沟":"gou","苟":"gou","狗":"gou","垢":"gou","构":"gou","购":"gou","够":"gou","佝":"gou","诟":"gou","岣":"gou","遘":"gou","媾":"gou","缑":"gou","觏":"gou","彀":"gou","鸲":"gou","笱":"gou","篝":"gou","鞲":"gou","辜":"gu","菇":"gu","咕":"gu","箍":"gu","估":"gu","沽":"gu","孤":"gu","姑":"gu","鼓":"gu","古":"gu","蛊":"gu","骨":"gu","谷":"gu","股":"gu","故":"gu","顾":"gu","固":"gu","雇":"gu","嘏":"gu","诂":"gu","菰":"gu","哌":"gu","崮":"gu","汩":"gu","梏":"gu","轱":"gu","牯":"gu","牿":"gu","胍":"gu","臌":"gu","毂":"gu","瞽":"gu","罟":"gu","钴":"gu","锢":"gu","瓠":"gu","鸪":"gu","鹄":"gu","痼":"gu","蛄":"gu","酤":"gu","觚":"gu","鲴":"gu","骰":"gu","鹘":"gu","刮":"gua","瓜":"gua","剐":"gua","寡":"gua","挂":"gua","褂":"gua","卦":"gua","诖":"gua","呱":"gua","栝":"gua","鸹":"gua","乖":"guai","拐":"guai","怪":"guai","哙":"guai","棺":"guan","关":"guan","官":"guan","冠":"guan","观":"guan","管":"guan","馆":"guan","罐":"guan","惯":"guan","灌":"guan","贯":"guan","倌":"guan","莞":"guan","掼":"guan","涫":"guan","盥":"guan","鹳":"guan","鳏":"guan","光":"guang","广":"guang","逛":"guang","犷":"guang","桄":"guang","胱":"guang","疒":"guang","瑰":"gui","规":"gui","圭":"gui","硅":"gui","归":"gui","龟":"gui","闺":"gui","轨":"gui","鬼":"gui","诡":"gui","癸":"gui","桂":"gui","柜":"gui","跪":"gui","贵":"gui","刽":"gui","匦":"gui","刿":"gui","庋":"gui","宄":"gui","妫":"gui","桧":"gui","炅":"gui","晷":"gui","皈":"gui","簋":"gui","鲑":"gui","鳜":"gui","辊":"gun","滚":"gun","棍":"gun","丨":"gun","衮":"gun","绲":"gun","磙":"gun","鲧":"gun","锅":"guo","郭":"guo","国":"guo","果":"guo","裹":"guo","过":"guo","馘":"guo","蠃":"guo","埚":"guo","掴":"guo","呙":"guo","囗":"guo","帼":"guo","崞":"guo","猓":"guo","椁":"guo","虢":"guo","锞":"guo","聒":"guo","蜮":"guo","蜾":"guo","蝈":"guo","哈":"ha","骸":"hai","孩":"hai","海":"hai","氦":"hai","亥":"hai","害":"hai","骇":"hai","咴":"hai","嗨":"hai","颏":"hai","醢":"hai","酣":"han","憨":"han","邯":"han","韩":"han","含":"han","涵":"han","寒":"han","函":"han","喊":"han","罕":"han","翰":"han","撼":"han","捍":"han","旱":"han","憾":"han","悍":"han","焊":"han","汗":"han","汉":"han","邗":"han","菡":"han","撖":"han","阚":"han","瀚":"han","晗":"han","焓":"han","颔":"han","蚶":"han","鼾":"han","夯":"hen","痕":"hen","很":"hen","狠":"hen","恨":"hen","杭":"hang","航":"hang","沆":"hang","绗":"hang","珩":"hang","桁":"hang","壕":"hao","嚎":"hao","豪":"hao","毫":"hao","郝":"hao","好":"hao","耗":"hao","号":"hao","浩":"hao","薅":"hao","嗥":"hao","嚆":"hao","濠":"hao","灏":"hao","昊":"hao","皓":"hao","颢":"hao","蚝":"hao","呵":"he","喝":"he","荷":"he","菏":"he","核":"he","禾":"he","和":"he","何":"he","合":"he","盒":"he","貉":"he","阂":"he","河":"he","涸":"he","赫":"he","褐":"he","鹤":"he","贺":"he","诃":"he","劾":"he","壑":"he","藿":"he","嗑":"he","嗬":"he","阖":"he","盍":"he","蚵":"he","翮":"he","嘿":"hei","黑":"hei","哼":"heng","亨":"heng","横":"heng","衡":"heng","恒":"heng","訇":"heng","蘅":"heng","轰":"hong","哄":"hong","烘":"hong","虹":"hong","鸿":"hong","洪":"hong","宏":"hong","弘":"hong","红":"hong","黉":"hong","讧":"hong","荭":"hong","薨":"hong","闳":"hong","泓":"hong","喉":"hou","侯":"hou","猴":"hou","吼":"hou","厚":"hou","候":"hou","后":"hou","堠":"hou","後":"hou","逅":"hou","瘊":"hou","篌":"hou","糇":"hou","鲎":"hou","骺":"hou","呼":"hu","乎":"hu","忽":"hu","瑚":"hu","壶":"hu","葫":"hu","胡":"hu","蝴":"hu","狐":"hu","糊":"hu","湖":"hu","弧":"hu","虎":"hu","唬":"hu","护":"hu","互":"hu","沪":"hu","户":"hu","冱":"hu","唿":"hu","囫":"hu","岵":"hu","猢":"hu","怙":"hu","惚":"hu","浒":"hu","滹":"hu","琥":"hu","槲":"hu","轷":"hu","觳":"hu","烀":"hu","煳":"hu","戽":"hu","扈":"hu","祜":"hu","鹕":"hu","鹱":"hu","笏":"hu","醐":"hu","斛":"hu","花":"hua","哗":"hua","华":"hua","猾":"hua","滑":"hua","画":"hua","划":"hua","化":"hua","话":"hua","劐":"hua","浍":"hua","骅":"hua","桦":"hua","铧":"hua","稞":"hua","槐":"huai","徊":"huai","怀":"huai","淮":"huai","坏":"huai","还":"huai","踝":"huai","欢":"huan","环":"huan","桓":"huan","缓":"huan","换":"huan","患":"huan","唤":"huan","痪":"huan","豢":"huan","焕":"huan","涣":"huan","宦":"huan","幻":"huan","郇":"huan","奂":"huan","垸":"huan","擐":"huan","圜":"huan","洹":"huan","浣":"huan","漶":"huan","寰":"huan","逭":"huan","缳":"huan","锾":"huan","鲩":"huan","鬟":"huan","荒":"huang","慌":"huang","黄":"huang","磺":"huang","蝗":"huang","簧":"huang","皇":"huang","凰":"huang","惶":"huang","煌":"huang","晃":"huang","幌":"huang","恍":"huang","谎":"huang","隍":"huang","徨":"huang","湟":"huang","潢":"huang","遑":"huang","璜":"huang","肓":"huang","癀":"huang","蟥":"huang","篁":"huang","鳇":"huang","灰":"hui","挥":"hui","辉":"hui","徽":"hui","恢":"hui","蛔":"hui","回":"hui","毁":"hui","悔":"hui","慧":"hui","卉":"hui","惠":"hui","晦":"hui","贿":"hui","秽":"hui","会":"hui","烩":"hui","汇":"hui","讳":"hui","诲":"hui","绘":"hui","诙":"hui","茴":"hui","荟":"hui","蕙":"hui","哕":"hui","喙":"hui","隳":"hui","洄":"hui","彗":"hui","缋":"hui","珲":"hui","晖":"hui","恚":"hui","虺":"hui","蟪":"hui","麾":"hui","荤":"hun","昏":"hun","婚":"hun","魂":"hun","浑":"hun","混":"hun","诨":"hun","馄":"hun","阍":"hun","溷":"hun","缗":"hun","豁":"huo","活":"huo","伙":"huo","火":"huo","获":"huo","或":"huo","惑":"huo","霍":"huo","货":"huo","祸":"huo","攉":"huo","嚯":"huo","夥":"huo","钬":"huo","锪":"huo","镬":"huo","耠":"huo","蠖":"huo","击":"ji","圾":"ji","基":"ji","机":"ji","畸":"ji","稽":"ji","积":"ji","箕":"ji","肌":"ji","饥":"ji","迹":"ji","激":"ji","讥":"ji","鸡":"ji","姬":"ji","绩":"ji","缉":"ji","吉":"ji","极":"ji","棘":"ji","辑":"ji","籍":"ji","集":"ji","及":"ji","急":"ji","疾":"ji","汲":"ji","即":"ji","嫉":"ji","级":"ji","挤":"ji","几":"ji","脊":"ji","己":"ji","蓟":"ji","技":"ji","冀":"ji","季":"ji","伎":"ji","祭":"ji","剂":"ji","悸":"ji","济":"ji","寄":"ji","寂":"ji","计":"ji","记":"ji","既":"ji","忌":"ji","际":"ji","妓":"ji","继":"ji","纪":"ji","居":"ji","丌":"ji","乩":"ji","剞":"ji","佶":"ji","佴":"ji","脔":"ji","墼":"ji","芨":"ji","芰":"ji","萁":"ji","蒺":"ji","蕺":"ji","掎":"ji","叽":"ji","咭":"ji","哜":"ji","唧":"ji","岌":"ji","嵴":"ji","洎":"ji","彐":"ji","屐":"ji","骥":"ji","畿":"ji","玑":"ji","楫":"ji","殛":"ji","戟":"ji","戢":"ji","赍":"ji","觊":"ji","犄":"ji","齑":"ji","矶":"ji","羁":"ji","嵇":"ji","稷":"ji","瘠":"ji","瘵":"ji","虮":"ji","笈":"ji","笄":"ji","暨":"ji","跻":"ji","跽":"ji","霁":"ji","鲚":"ji","鲫":"ji","髻":"ji","麂":"ji","嘉":"jia","枷":"jia","夹":"jia","佳":"jia","家":"jia","加":"jia","荚":"jia","颊":"jia","贾":"jia","甲":"jia","钾":"jia","假":"jia","稼":"jia","价":"jia","架":"jia","驾":"jia","嫁":"jia","伽":"jia","郏":"jia","拮":"jia","岬":"jia","浃":"jia","迦":"jia","珈":"jia","戛":"jia","胛":"jia","恝":"jia","铗":"jia","镓":"jia","痂":"jia","蛱":"jia","笳":"jia","袈":"jia","跏":"jia","歼":"jian","监":"jian","坚":"jian","尖":"jian","笺":"jian","间":"jian","煎":"jian","兼":"jian","肩":"jian","艰":"jian","奸":"jian","缄":"jian","茧":"jian","检":"jian","柬":"jian","碱":"jian","硷":"jian","拣":"jian","捡":"jian","简":"jian","俭":"jian","剪":"jian","减":"jian","荐":"jian","槛":"jian","鉴":"jian","践":"jian","贱":"jian","见":"jian","键":"jian","箭":"jian","件":"jian","健":"jian","舰":"jian","剑":"jian","饯":"jian","渐":"jian","溅":"jian","涧":"jian","建":"jian","僭":"jian","谏":"jian","谫":"jian","菅":"jian","蒹":"jian","搛":"jian","囝":"jian","湔":"jian","蹇":"jian","謇":"jian","缣":"jian","枧":"jian","柙":"jian","楗":"jian","戋":"jian","戬":"jian","牮":"jian","犍":"jian","毽":"jian","腱":"jian","睑":"jian","锏":"jian","鹣":"jian","裥":"jian","笕":"jian","箴":"jian","翦":"jian","趼":"jian","踺":"jian","鲣":"jian","鞯":"jian","僵":"jiang","姜":"jiang","将":"jiang","浆":"jiang","江":"jiang","疆":"jiang","蒋":"jiang","桨":"jiang","奖":"jiang","讲":"jiang","匠":"jiang","酱":"jiang","降":"jiang","茳":"jiang","洚":"jiang","绛":"jiang","缰":"jiang","犟":"jiang","礓":"jiang","耩":"jiang","糨":"jiang","豇":"jiang","蕉":"jiao","椒":"jiao","礁":"jiao","焦":"jiao","胶":"jiao","交":"jiao","郊":"jiao","浇":"jiao","骄":"jiao","娇":"jiao","嚼":"jiao","搅":"jiao","铰":"jiao","矫":"jiao","侥":"jiao","脚":"jiao","狡":"jiao","角":"jiao","饺":"jiao","缴":"jiao","绞":"jiao","剿":"jiao","教":"jiao","酵":"jiao","轿":"jiao","较":"jiao","叫":"jiao","佼":"jiao","僬":"jiao","茭":"jiao","挢":"jiao","噍":"jiao","峤":"jiao","徼":"jiao","姣":"jiao","纟":"jiao","敫":"jiao","皎":"jiao","鹪":"jiao","蛟":"jiao","醮":"jiao","跤":"jiao","鲛":"jiao","窖":"jie","揭":"jie","接":"jie","皆":"jie","秸":"jie","街":"jie","阶":"jie","截":"jie","劫":"jie","节":"jie","桔":"jie","杰":"jie","捷":"jie","睫":"jie","竭":"jie","洁":"jie","结":"jie","解":"jie","姐":"jie","戒":"jie","藉":"jie","芥":"jie","界":"jie","借":"jie","介":"jie","疥":"jie","诫":"jie","届":"jie","偈":"jie","讦":"jie","诘":"jie","喈":"jie","嗟":"jie","獬":"jie","婕":"jie","孑":"jie","桀":"jie","獒":"jie","碣":"jie","锴":"jie","疖":"jie","袷":"jie","颉":"jie","蚧":"jie","羯":"jie","鲒":"jie","骱":"jie","髫":"jie","巾":"jin","筋":"jin","斤":"jin","金":"jin","今":"jin","津":"jin","襟":"jin","紧":"jin","锦":"jin","仅":"jin","谨":"jin","进":"jin","靳":"jin","晋":"jin","禁":"jin","近":"jin","烬":"jin","浸":"jin","尽":"jin","卺":"jin","荩":"jin","堇":"jin","噤":"jin","馑":"jin","廑":"jin","妗":"jin","缙":"jin","瑾":"jin","槿":"jin","赆":"jin","觐":"jin","钅":"jin","锓":"jin","衿":"jin","矜":"jin","劲":"jing","荆":"jing","兢":"jing","茎":"jing","睛":"jing","晶":"jing","鲸":"jing","京":"jing","惊":"jing","精":"jing","粳":"jing","经":"jing","井":"jing","警":"jing","景":"jing","颈":"jing","静":"jing","境":"jing","敬":"jing","镜":"jing","径":"jing","痉":"jing","靖":"jing","竟":"jing","竞":"jing","净":"jing","刭":"jing","儆":"jing","阱":"jing","菁":"jing","獍":"jing","憬":"jing","泾":"jing","迳":"jing","弪":"jing","婧":"jing","肼":"jing","胫":"jing","腈":"jing","旌":"jing","炯":"jiong","窘":"jiong","冂":"jiong","迥":"jiong","扃":"jiong","揪":"jiu","究":"jiu","纠":"jiu","玖":"jiu","韭":"jiu","久":"jiu","灸":"jiu","九":"jiu","酒":"jiu","厩":"jiu","救":"jiu","旧":"jiu","臼":"jiu","舅":"jiu","咎":"jiu","就":"jiu","疚":"jiu","僦":"jiu","啾":"jiu","阄":"jiu","柩":"jiu","桕":"jiu","鹫":"jiu","赳":"jiu","鬏":"jiu","鞠":"ju","拘":"ju","狙":"ju","疽":"ju","驹":"ju","菊":"ju","局":"ju","咀":"ju","矩":"ju","举":"ju","沮":"ju","聚":"ju","拒":"ju","据":"ju","巨":"ju","具":"ju","距":"ju","踞":"ju","锯":"ju","俱":"ju","句":"ju","惧":"ju","炬":"ju","剧":"ju","倨":"ju","讵":"ju","苣":"ju","苴":"ju","莒":"ju","掬":"ju","遽":"ju","屦":"ju","琚":"ju","枸":"ju","椐":"ju","榘":"ju","榉":"ju","橘":"ju","犋":"ju","飓":"ju","钜":"ju","锔":"ju","窭":"ju","裾":"ju","趄":"ju","醵":"ju","踽":"ju","龃":"ju","雎":"ju","鞫":"ju","捐":"juan","鹃":"juan","娟":"juan","倦":"juan","眷":"juan","卷":"juan","绢":"juan","鄄":"juan","狷":"juan","涓":"juan","桊":"juan","蠲":"juan","锩":"juan","镌":"juan","隽":"juan","撅":"jue","攫":"jue","抉":"jue","掘":"jue","倔":"jue","爵":"jue","觉":"jue","决":"jue","诀":"jue","绝":"jue","厥":"jue","劂":"jue","谲":"jue","矍":"jue","蕨":"jue","噘":"jue","崛":"jue","獗":"jue","孓":"jue","珏":"jue","桷":"jue","橛":"jue","爝":"jue","镢":"jue","蹶":"jue","觖":"jue","均":"jun","菌":"jun","钧":"jun","军":"jun","君":"jun","峻":"jun","俊":"jun","竣":"jun","浚":"jun","郡":"jun","骏":"jun","捃":"jun","狻":"jun","皲":"jun","筠":"jun","麇":"jun","喀":"ka","咖":"ka","卡":"ka","佧":"ka","咔":"ka","胩":"ka","咯":"ke","坷":"ke","苛":"ke","柯":"ke","棵":"ke","磕":"ke","颗":"ke","科":"ke","壳":"ke","咳":"ke","可":"ke","渴":"ke","克":"ke","刻":"ke","客":"ke","课":"ke","岢":"ke","恪":"ke","溘":"ke","骒":"ke","缂":"ke","珂":"ke","轲":"ke","氪":"ke","瞌":"ke","钶":"ke","疴":"ke","窠":"ke","蝌":"ke","髁":"ke","开":"kai","揩":"kai","楷":"kai","凯":"kai","慨":"kai","剀":"kai","垲":"kai","蒈":"kai","忾":"kai","恺":"kai","铠":"kai","锎":"kai","刊":"kan","堪":"kan","勘":"kan","坎":"kan","砍":"kan","看":"kan","侃":"kan","凵":"kan","莰":"kan","莶":"kan","戡":"kan","龛":"kan","瞰":"kan","康":"kang","慷":"kang","糠":"kang","扛":"kang","抗":"kang","亢":"kang","炕":"kang","坑":"kang","伉":"kang","闶":"kang","钪":"kang","考":"kao","拷":"kao","烤":"kao","靠":"kao","尻":"kao","栲":"kao","犒":"kao","铐":"kao","肯":"ken","啃":"ken","垦":"ken","恳":"ken","垠":"ken","裉":"ken","颀":"ken","吭":"keng","忐":"keng","铿":"keng","空":"kong","恐":"kong","孔":"kong","控":"kong","倥":"kong","崆":"kong","箜":"kong","抠":"kou","口":"kou","扣":"kou","寇":"kou","芤":"kou","蔻":"kou","叩":"kou","眍":"kou","筘":"kou","枯":"ku","哭":"ku","窟":"ku","苦":"ku","酷":"ku","库":"ku","裤":"ku","刳":"ku","堀":"ku","喾":"ku","绔":"ku","骷":"ku","夸":"kua","垮":"kua","挎":"kua","跨":"kua","胯":"kua","侉":"kua","块":"kuai","筷":"kuai","侩":"kuai","快":"kuai","蒯":"kuai","郐":"kuai","蒉":"kuai","狯":"kuai","脍":"kuai","宽":"kuan","款":"kuan","髋":"kuan","匡":"kuang","筐":"kuang","狂":"kuang","框":"kuang","矿":"kuang","眶":"kuang","旷":"kuang","况":"kuang","诓":"kuang","诳":"kuang","邝":"kuang","圹":"kuang","夼":"kuang","哐":"kuang","纩":"kuang","贶":"kuang","亏":"kui","盔":"kui","岿":"kui","窥":"kui","葵":"kui","奎":"kui","魁":"kui","傀":"kui","馈":"kui","愧":"kui","溃":"kui","馗":"kui","匮":"kui","夔":"kui","隗":"kui","揆":"kui","喹":"kui","喟":"kui","悝":"kui","愦":"kui","阕":"kui","逵":"kui","暌":"kui","睽":"kui","聩":"kui","蝰":"kui","篑":"kui","臾":"kui","跬":"kui","坤":"kun","昆":"kun","捆":"kun","困":"kun","悃":"kun","阃":"kun","琨":"kun","锟":"kun","醌":"kun","鲲":"kun","髡":"kun","括":"kuo","扩":"kuo","廓":"kuo","阔":"kuo","蛞":"kuo","垃":"la","拉":"la","喇":"la","蜡":"la","腊":"la","辣":"la","啦":"la","剌":"la","摺":"la","邋":"la","旯":"la","砬":"la","瘌":"la","莱":"lai","来":"lai","赖":"lai","崃":"lai","徕":"lai","涞":"lai","濑":"lai","赉":"lai","睐":"lai","铼":"lai","癞":"lai","籁":"lai","蓝":"lan","婪":"lan","栏":"lan","拦":"lan","篮":"lan","阑":"lan","兰":"lan","澜":"lan","谰":"lan","揽":"lan","览":"lan","懒":"lan","缆":"lan","烂":"lan","滥":"lan","啉":"lan","岚":"lan","懔":"lan","漤":"lan","榄":"lan","斓":"lan","罱":"lan","镧":"lan","褴":"lan","琅":"lang","榔":"lang","狼":"lang","廊":"lang","郎":"lang","朗":"lang","浪":"lang","莨":"lang","蒗":"lang","啷":"lang","阆":"lang","锒":"lang","稂":"lang","螂":"lang","捞":"lao","劳":"lao","牢":"lao","老":"lao","佬":"lao","姥":"lao","酪":"lao","烙":"lao","涝":"lao","唠":"lao","崂":"lao","栳":"lao","铑":"lao","铹":"lao","痨":"lao","醪":"lao","勒":"le","乐":"le","肋":"le","仂":"le","叻":"le","嘞":"le","泐":"le","鳓":"le","雷":"lei","镭":"lei","蕾":"lei","磊":"lei","累":"lei","儡":"lei","垒":"lei","擂":"lei","类":"lei","泪":"lei","羸":"lei","诔":"lei","荽":"lei","咧":"lei","漯":"lei","嫘":"lei","缧":"lei","檑":"lei","耒":"lei","酹":"lei","棱":"ling","冷":"ling","拎":"ling","玲":"ling","菱":"ling","零":"ling","龄":"ling","铃":"ling","伶":"ling","羚":"ling","凌":"ling","灵":"ling","陵":"ling","岭":"ling","领":"ling","另":"ling","令":"ling","酃":"ling","塄":"ling","苓":"ling","呤":"ling","囹":"ling","泠":"ling","绫":"ling","柃":"ling","棂":"ling","瓴":"ling","聆":"ling","蛉":"ling","翎":"ling","鲮":"ling","楞":"leng","愣":"leng","厘":"li","梨":"li","犁":"li","黎":"li","篱":"li","狸":"li","离":"li","漓":"li","理":"li","李":"li","里":"li","鲤":"li","礼":"li","莉":"li","荔":"li","吏":"li","栗":"li","丽":"li","厉":"li","励":"li","砾":"li","历":"li","利":"li","傈":"li","例":"li","俐":"li","痢":"li","立":"li","粒":"li","沥":"li","隶":"li","力":"li","璃":"li","哩":"li","俪":"li","俚":"li","郦":"li","坜":"li","苈":"li","莅":"li","蓠":"li","藜":"li","捩":"li","呖":"li","唳":"li","喱":"li","猁":"li","溧":"li","澧":"li","逦":"li","娌":"li","嫠":"li","骊":"li","缡":"li","珞":"li","枥":"li","栎":"li","轹":"li","戾":"li","砺":"li","詈":"li","罹":"li","锂":"li","鹂":"li","疠":"li","疬":"li","蛎":"li","蜊":"li","蠡":"li","笠":"li","篥":"li","粝":"li","醴":"li","跞":"li","雳":"li","鲡":"li","鳢":"li","黧":"li","俩":"lian","联":"lian","莲":"lian","连":"lian","镰":"lian","廉":"lian","怜":"lian","涟":"lian","帘":"lian","敛":"lian","脸":"lian","链":"lian","恋":"lian","炼":"lian","练":"lian","挛":"lian","蔹":"lian","奁":"lian","潋":"lian","濂":"lian","娈":"lian","琏":"lian","楝":"lian","殓":"lian","臁":"lian","膦":"lian","裢":"lian","蠊":"lian","鲢":"lian","粮":"liang","凉":"liang","梁":"liang","粱":"liang","良":"liang","两":"liang","辆":"liang","量":"liang","晾":"liang","亮":"liang","谅":"liang","墚":"liang","椋":"liang","踉":"liang","靓":"liang","魉":"liang","撩":"liao","聊":"liao","僚":"liao","疗":"liao","燎":"liao","寥":"liao","辽":"liao","潦":"liao","了":"liao","撂":"liao","镣":"liao","廖":"liao","料":"liao","蓼":"liao","尥":"liao","嘹":"liao","獠":"liao","寮":"liao","缭":"liao","钌":"liao","鹩":"liao","耢":"liao","列":"lie","裂":"lie","烈":"lie","劣":"lie","猎":"lie","冽":"lie","埒":"lie","洌":"lie","趔":"lie","躐":"lie","鬣":"lie","琳":"lin","林":"lin","磷":"lin","霖":"lin","临":"lin","邻":"lin","鳞":"lin","淋":"lin","凛":"lin","赁":"lin","吝":"lin","蔺":"lin","嶙":"lin","廪":"lin","遴":"lin","檩":"lin","辚":"lin","瞵":"lin","粼":"lin","躏":"lin","麟":"lin","溜":"liu","琉":"liu","榴":"liu","硫":"liu","馏":"liu","留":"liu","刘":"liu","瘤":"liu","流":"liu","柳":"liu","六":"liu","抡":"liu","偻":"liu","蒌":"liu","泖":"liu","浏":"liu","遛":"liu","骝":"liu","绺":"liu","旒":"liu","熘":"liu","锍":"liu","镏":"liu","鹨":"liu","鎏":"liu","龙":"long","聋":"long","咙":"long","笼":"long","窿":"long","隆":"long","垄":"long","拢":"long","陇":"long","弄":"long","垅":"long","茏":"long","泷":"long","珑":"long","栊":"long","胧":"long","砻":"long","癃":"long","楼":"lou","娄":"lou","搂":"lou","篓":"lou","漏":"lou","陋":"lou","喽":"lou","嵝":"lou","镂":"lou","瘘":"lou","耧":"lou","蝼":"lou","髅":"lou","芦":"lu","卢":"lu","颅":"lu","庐":"lu","炉":"lu","掳":"lu","卤":"lu","虏":"lu","鲁":"lu","麓":"lu","碌":"lu","露":"lu","路":"lu","赂":"lu","鹿":"lu","潞":"lu","禄":"lu","录":"lu","陆":"lu","戮":"lu","垆":"lu","摅":"lu","撸":"lu","噜":"lu","泸":"lu","渌":"lu","漉":"lu","璐":"lu","栌":"lu","橹":"lu","轳":"lu","辂":"lu","辘":"lu","氇":"lu","胪":"lu","镥":"lu","鸬":"lu","鹭":"lu","簏":"lu","舻":"lu","鲈":"lu","驴":"lv","吕":"lv","铝":"lv","侣":"lv","旅":"lv","履":"lv","屡":"lv","缕":"lv","虑":"lv","氯":"lv","律":"lv","率":"lv","滤":"lv","绿":"lv","捋":"lv","闾":"lv","榈":"lv","膂":"lv","稆":"lv","褛":"lv","峦":"luan","孪":"luan","滦":"luan","卵":"luan","乱":"luan","栾":"luan","鸾":"luan","銮":"luan","掠":"lue","略":"lue","锊":"lue","轮":"lun","伦":"lun","仑":"lun","沦":"lun","纶":"lun","论":"lun","囵":"lun","萝":"luo","螺":"luo","罗":"luo","逻":"luo","锣":"luo","箩":"luo","骡":"luo","裸":"luo","落":"luo","洛":"luo","骆":"luo","络":"luo","倮":"luo","荦":"luo","摞":"luo","猡":"luo","泺":"luo","椤":"luo","脶":"luo","镙":"luo","瘰":"luo","雒":"luo","妈":"ma","麻":"ma","玛":"ma","码":"ma","蚂":"ma","马":"ma","骂":"ma","嘛":"ma","吗":"ma","唛":"ma","犸":"ma","嬷":"ma","杩":"ma","麽":"ma","埋":"mai","买":"mai","麦":"mai","卖":"mai","迈":"mai","脉":"mai","劢":"mai","荬":"mai","咪":"mai","霾":"mai","瞒":"man","馒":"man","蛮":"man","满":"man","蔓":"man","曼":"man","慢":"man","漫":"man","谩":"man","墁":"man","幔":"man","缦":"man","熳":"man","镘":"man","颟":"man","螨":"man","鳗":"man","鞔":"man","芒":"mang","茫":"mang","盲":"mang","忙":"mang","莽":"mang","邙":"mang","漭":"mang","朦":"mang","硭":"mang","蟒":"mang","氓":"meng","萌":"meng","蒙":"meng","檬":"meng","盟":"meng","锰":"meng","猛":"meng","梦":"meng","孟":"meng","勐":"meng","甍":"meng","瞢":"meng","懵":"meng","礞":"meng","虻":"meng","蜢":"meng","蠓":"meng","艋":"meng","艨":"meng","黾":"meng","猫":"miao","苗":"miao","描":"miao","瞄":"miao","藐":"miao","秒":"miao","渺":"miao","庙":"miao","妙":"miao","喵":"miao","邈":"miao","缈":"miao","缪":"miao","杪":"miao","淼":"miao","眇":"miao","鹋":"miao","蜱":"miao","茅":"mao","锚":"mao","毛":"mao","矛":"mao","铆":"mao","卯":"mao","茂":"mao","冒":"mao","帽":"mao","貌":"mao","贸":"mao","侔":"mao","袤":"mao","勖":"mao","茆":"mao","峁":"mao","瑁":"mao","昴":"mao","牦":"mao","耄":"mao","旄":"mao","懋":"mao","瞀":"mao","蛑":"mao","蝥":"mao","蟊":"mao","髦":"mao","么":"me","玫":"mei","枚":"mei","梅":"mei","酶":"mei","霉":"mei","煤":"mei","没":"mei","眉":"mei","媒":"mei","镁":"mei","每":"mei","美":"mei","昧":"mei","寐":"mei","妹":"mei","媚":"mei","坶":"mei","莓":"mei","嵋":"mei","猸":"mei","浼":"mei","湄":"mei","楣":"mei","镅":"mei","鹛":"mei","袂":"mei","魅":"mei","门":"men","闷":"men","们":"men","扪":"men","玟":"men","焖":"men","懑":"men","钔":"men","眯":"mi","醚":"mi","靡":"mi","糜":"mi","迷":"mi","谜":"mi","弥":"mi","米":"mi","秘":"mi","觅":"mi","泌":"mi","蜜":"mi","密":"mi","幂":"mi","芈":"mi","冖":"mi","谧":"mi","蘼":"mi","嘧":"mi","猕":"mi","獯":"mi","汨":"mi","宓":"mi","弭":"mi","脒":"mi","敉":"mi","糸":"mi","縻":"mi","麋":"mi","棉":"mian","眠":"mian","绵":"mian","冕":"mian","免":"mian","勉":"mian","娩":"mian","缅":"mian","面":"mian","沔":"mian","湎":"mian","腼":"mian","眄":"mian","蔑":"mie","灭":"mie","咩":"mie","蠛":"mie","篾":"mie","民":"min","抿":"min","皿":"min","敏":"min","悯":"min","闽":"min","苠":"min","岷":"min","闵":"min","泯":"min","珉":"min","明":"ming","螟":"ming","鸣":"ming","铭":"ming","名":"ming","命":"ming","冥":"ming","茗":"ming","溟":"ming","暝":"ming","瞑":"ming","酩":"ming","谬":"miu","摸":"mo","摹":"mo","蘑":"mo","模":"mo","膜":"mo","磨":"mo","摩":"mo","魔":"mo","抹":"mo","末":"mo","莫":"mo","墨":"mo","默":"mo","沫":"mo","漠":"mo","寞":"mo","陌":"mo","谟":"mo","茉":"mo","蓦":"mo","馍":"mo","嫫":"mo","镆":"mo","秣":"mo","瘼":"mo","耱":"mo","蟆":"mo","貊":"mo","貘":"mo","谋":"mou","牟":"mou","某":"mou","厶":"mou","哞":"mou","婺":"mou","眸":"mou","鍪":"mou","拇":"mu","牡":"mu","亩":"mu","姆":"mu","母":"mu","墓":"mu","暮":"mu","幕":"mu","募":"mu","慕":"mu","木":"mu","目":"mu","睦":"mu","牧":"mu","穆":"mu","仫":"mu","苜":"mu","呒":"mu","沐":"mu","毪":"mu","钼":"mu","拿":"na","哪":"na","呐":"na","钠":"na","那":"na","娜":"na","纳":"na","内":"na","捺":"na","肭":"na","镎":"na","衲":"na","箬":"na","氖":"nai","乃":"nai","奶":"nai","耐":"nai","奈":"nai","鼐":"nai","艿":"nai","萘":"nai","柰":"nai","南":"nan","男":"nan","难":"nan","囊":"nan","喃":"nan","囡":"nan","楠":"nan","腩":"nan","蝻":"nan","赧":"nan","挠":"nao","脑":"nao","恼":"nao","闹":"nao","孬":"nao","垴":"nao","猱":"nao","瑙":"nao","硇":"nao","铙":"nao","蛲":"nao","淖":"ne","呢":"ne","讷":"ne","馁":"nei","嫩":"nen","能":"neng","枘":"nen","恁":"nen","妮":"ni","霓":"ni","倪":"ni","泥":"ni","尼":"ni","拟":"ni","你":"ni","匿":"ni","腻":"ni","逆":"ni","溺":"ni","伲":"ni","坭":"ni","猊":"ni","怩":"ni","滠":"ni","昵":"ni","旎":"ni","祢":"ni","慝":"ni","睨":"ni","铌":"ni","鲵":"ni","蔫":"nian","拈":"nian","年":"nian","碾":"nian","撵":"nian","捻":"nian","念":"nian","廿":"nian","辇":"nian","黏":"nian","鲇":"nian","鲶":"nian","娘":"niang","酿":"niang","鸟":"niao","尿":"niao","茑":"niao","嬲":"niao","脲":"niao","袅":"niao","捏":"nie","聂":"nie","孽":"nie","啮":"nie","镊":"nie","镍":"nie","涅":"nie","乜":"nie","陧":"nie","蘖":"nie","嗫":"nie","肀":"nie","颞":"nie","臬":"nie","蹑":"nie","您":"nin","柠":"nin","狞":"ning","凝":"ning","宁":"ning","拧":"ning","泞":"ning","佞":"ning","蓥":"ning","咛":"ning","甯":"ning","聍":"ning","牛":"niu","扭":"niu","钮":"niu","纽":"niu","狃":"niu","忸":"niu","妞":"niu","蚴":"niu","脓":"nong","浓":"nong","农":"nong","侬":"nong","奴":"nu","努":"nu","怒":"nu","呶":"nu","帑":"nu","弩":"nu","胬":"nu","孥":"nu","驽":"nu","女":"nv","恧":"nv","钕":"nv","衄":"nv","暖":"nuan","虐":"nuenue","疟":"nue","谑":"nue","挪":"nuo","懦":"nuo","糯":"nuo","诺":"nuo","傩":"nuo","搦":"nuo","喏":"nuo","锘":"nuo","哦":"ou","欧":"ou","鸥":"ou","殴":"ou","藕":"ou","呕":"ou","偶":"ou","沤":"ou","怄":"ou","瓯":"ou","耦":"ou","啪":"pa","趴":"pa","爬":"pa","帕":"pa","怕":"pa","琶":"pa","葩":"pa","筢":"pa","拍":"pai","排":"pai","牌":"pai","徘":"pai","湃":"pai","派":"pai","俳":"pai","蒎":"pai","攀":"pan","潘":"pan","盘":"pan","磐":"pan","盼":"pan","畔":"pan","判":"pan","叛":"pan","爿":"pan","泮":"pan","袢":"pan","襻":"pan","蟠":"pan","蹒":"pan","乓":"pang","庞":"pang","旁":"pang","耪":"pang","胖":"pang","滂":"pang","逄":"pang","抛":"pao","咆":"pao","刨":"pao","炮":"pao","袍":"pao","跑":"pao","泡":"pao","匏":"pao","狍":"pao","庖":"pao","脬":"pao","疱":"pao","呸":"pei","胚":"pei","培":"pei","裴":"pei","赔":"pei","陪":"pei","配":"pei","佩":"pei","沛":"pei","掊":"pei","辔":"pei","帔":"pei","淠":"pei","旆":"pei","锫":"pei","醅":"pei","霈":"pei","喷":"pen","盆":"pen","湓":"pen","砰":"peng","抨":"peng","烹":"peng","澎":"peng","彭":"peng","蓬":"peng","棚":"peng","硼":"peng","篷":"peng","膨":"peng","朋":"peng","鹏":"peng","捧":"peng","碰":"peng","坯":"peng","堋":"peng","嘭":"peng","怦":"peng","蟛":"peng","砒":"pi","霹":"pi","批":"pi","披":"pi","劈":"pi","琵":"pi","毗":"pi","啤":"pi","脾":"pi","疲":"pi","皮":"pi","匹":"pi","痞":"pi","僻":"pi","屁":"pi","譬":"pi","丕":"pi","陴":"pi","邳":"pi","郫":"pi","圮":"pi","鼙":"pi","擗":"pi","噼":"pi","庀":"pi","媲":"pi","纰":"pi","枇":"pi","甓":"pi","睥":"pi","罴":"pi","铍":"pi","痦":"pi","癖":"pi","疋":"pi","蚍":"pi","貔":"pi","篇":"pian","偏":"pian","片":"pian","骗":"pian","谝":"pian","骈":"pian","犏":"pian","胼":"pian","褊":"pian","翩":"pian","蹁":"pian","飘":"piao","漂":"piao","瓢":"piao","票":"piao","剽":"piao","嘌":"piao","嫖":"piao","缥":"piao","殍":"piao","瞟":"piao","螵":"piao","撇":"pie","瞥":"pie","丿":"pie","苤":"pie","氕":"pie","拼":"pin","频":"pin","贫":"pin","品":"pin","聘":"pin","拚":"pin","姘":"pin","嫔":"pin","榀":"pin","牝":"pin","颦":"pin","乒":"ping","坪":"ping","苹":"ping","萍":"ping","平":"ping","凭":"ping","瓶":"ping","评":"ping","屏":"ping","俜":"ping","娉":"ping","枰":"ping","鲆":"ping","坡":"po","泼":"po","颇":"po","婆":"po","破":"po","魄":"po","迫":"po","粕":"po","叵":"po","鄱":"po","溥":"po","珀":"po","钋":"po","钷":"po","皤":"po","笸":"po","剖":"pou","裒":"pou","踣":"pou","扑":"pu","铺":"pu","仆":"pu","莆":"pu","葡":"pu","菩":"pu","蒲":"pu","埔":"pu","朴":"pu","圃":"pu","普":"pu","浦":"pu","谱":"pu","曝":"pu","瀑":"pu","匍":"pu","噗":"pu","濮":"pu","璞":"pu","氆":"pu","镤":"pu","镨":"pu","蹼":"pu","期":"qi","欺":"qi","栖":"qi","戚":"qi","妻":"qi","七":"qi","凄":"qi","漆":"qi","柒":"qi","沏":"qi","其":"qi","棋":"qi","奇":"qi","歧":"qi","畦":"qi","崎":"qi","脐":"qi","齐":"qi","旗":"qi","祈":"qi","祁":"qi","骑":"qi","起":"qi","岂":"qi","乞":"qi","企":"qi","启":"qi","契":"qi","砌":"qi","器":"qi","气":"qi","迄":"qi","弃":"qi","汽":"qi","泣":"qi","讫":"qi","亟":"qi","亓":"qi","圻":"qi","芑":"qi","萋":"qi","葺":"qi","嘁":"qi","屺":"qi","岐":"qi","汔":"qi","淇":"qi","骐":"qi","绮":"qi","琪":"qi","琦":"qi","杞":"qi","桤":"qi","槭":"qi","欹":"qi","祺":"qi","憩":"qi","碛":"qi","蛴":"qi","蜞":"qi","綦":"qi","綮":"qi","趿":"qi","蹊":"qi","鳍":"qi","麒":"qi","掐":"qia","恰":"qia","洽":"qia","葜":"qia","牵":"qian","扦":"qian","钎":"qian","铅":"qian","千":"qian","迁":"qian","签":"qian","仟":"qian","谦":"qian","乾":"qian","黔":"qian","钱":"qian","钳":"qian","前":"qian","潜":"qian","遣":"qian","浅":"qian","谴":"qian","堑":"qian","嵌":"qian","欠":"qian","歉":"qian","佥":"qian","阡":"qian","芊":"qian","芡":"qian","荨":"qian","掮":"qian","岍":"qian","悭":"qian","慊":"qian","骞":"qian","搴":"qian","褰":"qian","缱":"qian","椠":"qian","肷":"qian","愆":"qian","钤":"qian","虔":"qian","箝":"qian","枪":"qiang","呛":"qiang","腔":"qiang","羌":"qiang","墙":"qiang","蔷":"qiang","强":"qiang","抢":"qiang","嫱":"qiang","樯":"qiang","戗":"qiang","炝":"qiang","锖":"qiang","锵":"qiang","镪":"qiang","襁":"qiang","蜣":"qiang","羟":"qiang","跫":"qiang","跄":"qiang","橇":"qiao","锹":"qiao","敲":"qiao","悄":"qiao","桥":"qiao","瞧":"qiao","乔":"qiao","侨":"qiao","巧":"qiao","鞘":"qiao","撬":"qiao","翘":"qiao","峭":"qiao","俏":"qiao","窍":"qiao","劁":"qiao","诮":"qiao","谯":"qiao","荞":"qiao","愀":"qiao","憔":"qiao","缲":"qiao","樵":"qiao","毳":"qiao","硗":"qiao","跷":"qiao","鞒":"qiao","切":"qie","茄":"qie","且":"qie","怯":"qie","窃":"qie","郄":"qie","唼":"qie","惬":"qie","妾":"qie","挈":"qie","锲":"qie","箧":"qie","钦":"qin","侵":"qin","亲":"qin","秦":"qin","琴":"qin","勤":"qin","芹":"qin","擒":"qin","禽":"qin","寝":"qin","沁":"qin","芩":"qin","蓁":"qin","蕲":"qin","揿":"qin","吣":"qin","嗪":"qin","噙":"qin","溱":"qin","檎":"qin","螓":"qin","衾":"qin","青":"qing","轻":"qing","氢":"qing","倾":"qing","卿":"qing","清":"qing","擎":"qing","晴":"qing","氰":"qing","情":"qing","顷":"qing","请":"qing","庆":"qing","倩":"qing","苘":"qing","圊":"qing","檠":"qing","磬":"qing","蜻":"qing","罄":"qing","箐":"qing","謦":"qing","鲭":"qing","黥":"qing","琼":"qiong","穷":"qiong","邛":"qiong","茕":"qiong","穹":"qiong","筇":"qiong","銎":"qiong","秋":"qiu","丘":"qiu","邱":"qiu","球":"qiu","求":"qiu","囚":"qiu","酋":"qiu","泅":"qiu","俅":"qiu","氽":"qiu","巯":"qiu","艽":"qiu","犰":"qiu","湫":"qiu","逑":"qiu","遒":"qiu","楸":"qiu","赇":"qiu","鸠":"qiu","虬":"qiu","蚯":"qiu","蝤":"qiu","裘":"qiu","糗":"qiu","鳅":"qiu","鼽":"qiu","趋":"qu","区":"qu","蛆":"qu","曲":"qu","躯":"qu","屈":"qu","驱":"qu","渠":"qu","取":"qu","娶":"qu","龋":"qu","趣":"qu","去":"qu","诎":"qu","劬":"qu","蕖":"qu","蘧":"qu","岖":"qu","衢":"qu","阒":"qu","璩":"qu","觑":"qu","氍":"qu","祛":"qu","磲":"qu","癯":"qu","蛐":"qu","蠼":"qu","麴":"qu","瞿":"qu","黢":"qu","圈":"quan","颧":"quan","权":"quan","醛":"quan","泉":"quan","全":"quan","痊":"quan","拳":"quan","犬":"quan","券":"quan","劝":"quan","诠":"quan","荃":"quan","獾":"quan","悛":"quan","绻":"quan","辁":"quan","畎":"quan","铨":"quan","蜷":"quan","筌":"quan","鬈":"quan","缺":"que","炔":"que","瘸":"que","却":"que","鹊":"que","榷":"que","确":"que","雀":"que","阙":"que","悫":"que","裙":"qun","群":"qun","逡":"qun","然":"ran","燃":"ran","冉":"ran","染":"ran","苒":"ran","髯":"ran","瓤":"rang","壤":"rang","攘":"rang","嚷":"rang","让":"rang","禳":"rang","穰":"rang","饶":"rao","扰":"rao","绕":"rao","荛":"rao","娆":"rao","桡":"rao","惹":"ruo","若":"ruo","弱":"ruo","热":"re","偌":"re","壬":"ren","仁":"ren","人":"ren","忍":"ren","韧":"ren","任":"ren","认":"ren","刃":"ren","妊":"ren","纫":"ren","仞":"ren","荏":"ren","葚":"ren","饪":"ren","轫":"ren","稔":"ren","衽":"ren","扔":"reng","仍":"reng","日":"ri","戎":"rong","茸":"rong","蓉":"rong","荣":"rong","融":"rong","熔":"rong","溶":"rong","容":"rong","绒":"rong","冗":"rong","嵘":"rong","狨":"rong","缛":"rong","榕":"rong","蝾":"rong","揉":"rou","柔":"rou","肉":"rou","糅":"rou","蹂":"rou","鞣":"rou","茹":"ru","蠕":"ru","儒":"ru","孺":"ru","如":"ru","辱":"ru","乳":"ru","汝":"ru","入":"ru","褥":"ru","蓐":"ru","薷":"ru","嚅":"ru","洳":"ru","溽":"ru","濡":"ru","铷":"ru","襦":"ru","颥":"ru","软":"ruan","阮":"ruan","朊":"ruan","蕊":"rui","瑞":"rui","锐":"rui","芮":"rui","蕤":"rui","睿":"rui","蚋":"rui","闰":"run","润":"run","撒":"sa","洒":"sa","萨":"sa","卅":"sa","仨":"sa","挲":"sa","飒":"sa","腮":"sai","鳃":"sai","塞":"sai","赛":"sai","噻":"sai","三":"san","叁":"san","伞":"san","散":"san","彡":"san","馓":"san","氵":"san","毵":"san","糁":"san","霰":"san","桑":"sang","嗓":"sang","丧":"sang","搡":"sang","磉":"sang","颡":"sang","搔":"sao","骚":"sao","扫":"sao","嫂":"sao","埽":"sao","臊":"sao","瘙":"sao","鳋":"sao","瑟":"se","色":"se","涩":"se","啬":"se","铩":"se","铯":"se","穑":"se","森":"sen","僧":"seng","莎":"sha","砂":"sha","杀":"sha","刹":"sha","沙":"sha","纱":"sha","傻":"sha","啥":"sha","煞":"sha","脎":"sha","歃":"sha","痧":"sha","裟":"sha","霎":"sha","鲨":"sha","筛":"shai","晒":"shai","酾":"shai","珊":"shan","苫":"shan","杉":"shan","山":"shan","删":"shan","煽":"shan","衫":"shan","闪":"shan","陕":"shan","擅":"shan","赡":"shan","膳":"shan","善":"shan","汕":"shan","扇":"shan","缮":"shan","剡":"shan","讪":"shan","鄯":"shan","埏":"shan","芟":"shan","潸":"shan","姗":"shan","骟":"shan","膻":"shan","钐":"shan","疝":"shan","蟮":"shan","舢":"shan","跚":"shan","鳝":"shan","墒":"shang","伤":"shang","商":"shang","赏":"shang","晌":"shang","上":"shang","尚":"shang","裳":"shang","垧":"shang","绱":"shang","殇":"shang","熵":"shang","觞":"shang","梢":"shao","捎":"shao","稍":"shao","烧":"shao","芍":"shao","勺":"shao","韶":"shao","少":"shao","哨":"shao","邵":"shao","绍":"shao","劭":"shao","苕":"shao","潲":"shao","蛸":"shao","笤":"shao","筲":"shao","艄":"shao","奢":"she","赊":"she","蛇":"she","舌":"she","舍":"she","赦":"she","摄":"she","射":"she","慑":"she","涉":"she","社":"she","设":"she","厍":"she","佘":"she","猞":"she","畲":"she","麝":"she","砷":"shen","申":"shen","呻":"shen","伸":"shen","身":"shen","深":"shen","娠":"shen","绅":"shen","神":"shen","沈":"shen","审":"shen","婶":"shen","甚":"shen","肾":"shen","慎":"shen","渗":"shen","诜":"shen","谂":"shen","吲":"shen","哂":"shen","渖":"shen","椹":"shen","矧":"shen","蜃":"shen","声":"sheng","生":"sheng","甥":"sheng","牲":"sheng","升":"sheng","绳":"sheng","省":"sheng","盛":"sheng","剩":"sheng","胜":"sheng","圣":"sheng","丞":"sheng","渑":"sheng","媵":"sheng","眚":"sheng","笙":"sheng","师":"shi","失":"shi","狮":"shi","施":"shi","湿":"shi","诗":"shi","尸":"shi","虱":"shi","十":"shi","石":"shi","拾":"shi","时":"shi","什":"shi","食":"shi","蚀":"shi","实":"shi","识":"shi","史":"shi","矢":"shi","使":"shi","屎":"shi","驶":"shi","始":"shi","式":"shi","示":"shi","士":"shi","世":"shi","柿":"shi","事":"shi","拭":"shi","誓":"shi","逝":"shi","势":"shi","是":"shi","嗜":"shi","噬":"shi","适":"shi","仕":"shi","侍":"shi","释":"shi","饰":"shi","氏":"shi","市":"shi","恃":"shi","室":"shi","视":"shi","试":"shi","谥":"shi","埘":"shi","莳":"shi","蓍":"shi","弑":"shi","唑":"shi","饣":"shi","轼":"shi","耆":"shi","贳":"shi","炻":"shi","礻":"shi","铈":"shi","铊":"shi","螫":"shi","舐":"shi","筮":"shi","豕":"shi","鲥":"shi","鲺":"shi","收":"shou","手":"shou","首":"shou","守":"shou","寿":"shou","授":"shou","售":"shou","受":"shou","瘦":"shou","兽":"shou","扌":"shou","狩":"shou","绶":"shou","艏":"shou","蔬":"shu","枢":"shu","梳":"shu","殊":"shu","抒":"shu","输":"shu","叔":"shu","舒":"shu","淑":"shu","疏":"shu","书":"shu","赎":"shu","孰":"shu","熟":"shu","薯":"shu","暑":"shu","曙":"shu","署":"shu","蜀":"shu","黍":"shu","鼠":"shu","属":"shu","术":"shu","述":"shu","树":"shu","束":"shu","戍":"shu","竖":"shu","墅":"shu","庶":"shu","数":"shu","漱":"shu","恕":"shu","倏":"shu","塾":"shu","菽":"shu","忄":"shu","沭":"shu","涑":"shu","澍":"shu","姝":"shu","纾":"shu","毹":"shu","腧":"shu","殳":"shu","镯":"shu","秫":"shu","鹬":"shu","刷":"shua","耍":"shua","唰":"shua","涮":"shua","摔":"shuai","衰":"shuai","甩":"shuai","帅":"shuai","蟀":"shuai","栓":"shuan","拴":"shuan","闩":"shuan","霜":"shuang","双":"shuang","爽":"shuang","孀":"shuang","谁":"shui","水":"shui","睡":"shui","税":"shui","吮":"shun","瞬":"shun","顺":"shun","舜":"shun","恂":"shun","说":"shuo","硕":"shuo","朔":"shuo","烁":"shuo","蒴":"shuo","搠":"shuo","嗍":"shuo","濯":"shuo","妁":"shuo","槊":"shuo","铄":"shuo","斯":"si","撕":"si","嘶":"si","思":"si","私":"si","司":"si","丝":"si","死":"si","肆":"si","寺":"si","嗣":"si","四":"si","伺":"si","似":"si","饲":"si","巳":"si","厮":"si","俟":"si","兕":"si","菥":"si","咝":"si","汜":"si","泗":"si","澌":"si","姒":"si","驷":"si","缌":"si","祀":"si","祠":"si","锶":"si","鸶":"si","耜":"si","蛳":"si","笥":"si","松":"song","耸":"song","怂":"song","颂":"song","送":"song","宋":"song","讼":"song","诵":"song","凇":"song","菘":"song","崧":"song","嵩":"song","忪":"song","悚":"song","淞":"song","竦":"song","搜":"sou","艘":"sou","擞":"sou","嗽":"sou","叟":"sou","嗖":"sou","嗾":"sou","馊":"sou","溲":"sou","飕":"sou","瞍":"sou","锼":"sou","螋":"sou","苏":"su","酥":"su","俗":"su","素":"su","速":"su","粟":"su","僳":"su","塑":"su","溯":"su","宿":"su","诉":"su","肃":"su","夙":"su","谡":"su","蔌":"su","嗉":"su","愫":"su","簌":"su","觫":"su","稣":"su","酸":"suan","蒜":"suan","算":"suan","虽":"sui","隋":"sui","随":"sui","绥":"sui","髓":"sui","碎":"sui","岁":"sui","穗":"sui","遂":"sui","隧":"sui","祟":"sui","蓑":"sui","冫":"sui","谇":"sui","濉":"sui","邃":"sui","燧":"sui","眭":"sui","睢":"sui","孙":"sun","损":"sun","笋":"sun","荪":"sun","狲":"sun","飧":"sun","榫":"sun","跣":"sun","隼":"sun","梭":"suo","唆":"suo","缩":"suo","琐":"suo","索":"suo","锁":"suo","所":"suo","唢":"suo","嗦":"suo","娑":"suo","桫":"suo","睃":"suo","羧":"suo","塌":"ta","他":"ta","它":"ta","她":"ta","塔":"ta","獭":"ta","挞":"ta","蹋":"ta","踏":"ta","闼":"ta","溻":"ta","遢":"ta","榻":"ta","沓":"ta","胎":"tai","苔":"tai","抬":"tai","台":"tai","泰":"tai","酞":"tai","太":"tai","态":"tai","汰":"tai","邰":"tai","薹":"tai","肽":"tai","炱":"tai","钛":"tai","跆":"tai","鲐":"tai","坍":"tan","摊":"tan","贪":"tan","瘫":"tan","滩":"tan","坛":"tan","檀":"tan","痰":"tan","潭":"tan","谭":"tan","谈":"tan","坦":"tan","毯":"tan","袒":"tan","碳":"tan","探":"tan","叹":"tan","炭":"tan","郯":"tan","蕈":"tan","昙":"tan","钽":"tan","锬":"tan","覃":"tan","汤":"tang","塘":"tang","搪":"tang","堂":"tang","棠":"tang","膛":"tang","唐":"tang","糖":"tang","傥":"tang","饧":"tang","溏":"tang","瑭":"tang","铴":"tang","镗":"tang","耥":"tang","螗":"tang","螳":"tang","羰":"tang","醣":"tang","倘":"thang","躺":"thang","淌":"thang","趟":"theng","烫":"theng","掏":"tao","涛":"tao","滔":"tao","绦":"tao","萄":"tao","桃":"tao","逃":"tao","淘":"tao","陶":"tao","讨":"tao","套":"tao","挑":"tao","鼗":"tao","啕":"tao","韬":"tao","饕":"tao","特":"te","藤":"teng","腾":"teng","疼":"teng","誊":"teng","滕":"teng","梯":"ti","剔":"ti","踢":"ti","锑":"ti","提":"ti","题":"ti","蹄":"ti","啼":"ti","体":"ti","替":"ti","嚏":"ti","惕":"ti","涕":"ti","剃":"ti","屉":"ti","荑":"ti","悌":"ti","逖":"ti","绨":"ti","缇":"ti","鹈":"ti","裼":"ti","醍":"ti","天":"tian","添":"tian","填":"tian","田":"tian","甜":"tian","恬":"tian","舔":"tian","腆":"tian","掭":"tian","忝":"tian","阗":"tian","殄":"tian","畋":"tian","钿":"tian","蚺":"tian","条":"tiao","迢":"tiao","眺":"tiao","跳":"tiao","佻":"tiao","祧":"tiao","铫":"tiao","窕":"tiao","龆":"tiao","鲦":"tiao","贴":"tie","铁":"tie","帖":"tie","萜":"tie","餮":"tie","厅":"ting","听":"ting","烃":"ting","汀":"ting","廷":"ting","停":"ting","亭":"ting","庭":"ting","挺":"ting","艇":"ting","莛":"ting","葶":"ting","婷":"ting","梃":"ting","蜓":"ting","霆":"ting","通":"tong","桐":"tong","酮":"tong","瞳":"tong","同":"tong","铜":"tong","彤":"tong","童":"tong","桶":"tong","捅":"tong","筒":"tong","统":"tong","痛":"tong","佟":"tong","僮":"tong","仝":"tong","茼":"tong","嗵":"tong","恸":"tong","潼":"tong","砼":"tong","偷":"tou","投":"tou","头":"tou","透":"tou","亠":"tou","凸":"tu","秃":"tu","突":"tu","图":"tu","徒":"tu","途":"tu","涂":"tu","屠":"tu","土":"tu","吐":"tu","兔":"tu","堍":"tu","荼":"tu","菟":"tu","钍":"tu","酴":"tu","湍":"tuan","团":"tuan","疃":"tuan","推":"tui","颓":"tui","腿":"tui","蜕":"tui","褪":"tui","退":"tui","忒":"tui","煺":"tui","吞":"tun","屯":"tun","臀":"tun","饨":"tun","暾":"tun","豚":"tun","窀":"tun","拖":"tuo","托":"tuo","脱":"tuo","鸵":"tuo","陀":"tuo","驮":"tuo","驼":"tuo","椭":"tuo","妥":"tuo","拓":"tuo","唾":"tuo","乇":"tuo","佗":"tuo","坨":"tuo","庹":"tuo","沱":"tuo","柝":"tuo","砣":"tuo","箨":"tuo","舄":"tuo","跎":"tuo","鼍":"tuo","挖":"wa","哇":"wa","蛙":"wa","洼":"wa","娃":"wa","瓦":"wa","袜":"wa","佤":"wa","娲":"wa","腽":"wa","歪":"wai","外":"wai","豌":"wan","弯":"wan","湾":"wan","玩":"wan","顽":"wan","丸":"wan","烷":"wan","完":"wan","碗":"wan","挽":"wan","晚":"wan","皖":"wan","惋":"wan","宛":"wan","婉":"wan","万":"wan","腕":"wan","剜":"wan","芄":"wan","苋":"wan","菀":"wan","纨":"wan","绾":"wan","琬":"wan","脘":"wan","畹":"wan","蜿":"wan","箢":"wan","汪":"wang","王":"wang","亡":"wang","枉":"wang","网":"wang","往":"wang","旺":"wang","望":"wang","忘":"wang","妄":"wang","罔":"wang","尢":"wang","惘":"wang","辋":"wang","魍":"wang","威":"wei","巍":"wei","微":"wei","危":"wei","韦":"wei","违":"wei","桅":"wei","围":"wei","唯":"wei","惟":"wei","为":"wei","潍":"wei","维":"wei","苇":"wei","萎":"wei","委":"wei","伟":"wei","伪":"wei","尾":"wei","纬":"wei","未":"wei","蔚":"wei","味":"wei","畏":"wei","胃":"wei","喂":"wei","魏":"wei","位":"wei","渭":"wei","谓":"wei","尉":"wei","慰":"wei","卫":"wei","倭":"wei","偎":"wei","诿":"wei","隈":"wei","葳":"wei","薇":"wei","帏":"wei","帷":"wei","崴":"wei","嵬":"wei","猥":"wei","猬":"wei","闱":"wei","沩":"wei","洧":"wei","涠":"wei","逶":"wei","娓":"wei","玮":"wei","韪":"wei","軎":"wei","炜":"wei","煨":"wei","熨":"wei","痿":"wei","艉":"wei","鲔":"wei","瘟":"wen","温":"wen","蚊":"wen","文":"wen","闻":"wen","纹":"wen","吻":"wen","稳":"wen","紊":"wen","问":"wen","刎":"wen","愠":"wen","阌":"wen","汶":"wen","璺":"wen","韫":"wen","殁":"wen","雯":"wen","嗡":"weng","翁":"weng","瓮":"weng","蓊":"weng","蕹":"weng","挝":"wo","蜗":"wo","涡":"wo","窝":"wo","我":"wo","斡":"wo","卧":"wo","握":"wo","沃":"wo","莴":"wo","幄":"wo","渥":"wo","杌":"wo","肟":"wo","龌":"wo","巫":"wu","呜":"wu","钨":"wu","乌":"wu","污":"wu","诬":"wu","屋":"wu","无":"wu","芜":"wu","梧":"wu","吾":"wu","吴":"wu","毋":"wu","武":"wu","五":"wu","捂":"wu","午":"wu","舞":"wu","伍":"wu","侮":"wu","坞":"wu","戊":"wu","雾":"wu","晤":"wu","物":"wu","勿":"wu","务":"wu","悟":"wu","误":"wu","兀":"wu","仵":"wu","阢":"wu","邬":"wu","圬":"wu","芴":"wu","庑":"wu","怃":"wu","忤":"wu","浯":"wu","寤":"wu","迕":"wu","妩":"wu","骛":"wu","牾":"wu","焐":"wu","鹉":"wu","鹜":"wu","蜈":"wu","鋈":"wu","鼯":"wu","昔":"xi","熙":"xi","析":"xi","西":"xi","硒":"xi","矽":"xi","晰":"xi","嘻":"xi","吸":"xi","锡":"xi","牺":"xi","稀":"xi","息":"xi","希":"xi","悉":"xi","膝":"xi","夕":"xi","惜":"xi","熄":"xi","烯":"xi","溪":"xi","汐":"xi","犀":"xi","檄":"xi","袭":"xi","席":"xi","习":"xi","媳":"xi","喜":"xi","铣":"xi","洗":"xi","系":"xi","隙":"xi","戏":"xi","细":"xi","僖":"xi","兮":"xi","隰":"xi","郗":"xi","茜":"xi","葸":"xi","蓰":"xi","奚":"xi","唏":"xi","徙":"xi","饩":"xi","阋":"xi","浠":"xi","淅":"xi","屣":"xi","嬉":"xi","玺":"xi","樨":"xi","曦":"xi","觋":"xi","欷":"xi","熹":"xi","禊":"xi","禧":"xi","钸":"xi","皙":"xi","穸":"xi","蜥":"xi","蟋":"xi","舾":"xi","羲":"xi","粞":"xi","翕":"xi","醯":"xi","鼷":"xi","瞎":"xia","虾":"xia","匣":"xia","霞":"xia","辖":"xia","暇":"xia","峡":"xia","侠":"xia","狭":"xia","下":"xia","厦":"xia","夏":"xia","吓":"xia","掀":"xia","葭":"xia","嗄":"xia","狎":"xia","遐":"xia","瑕":"xia","硖":"xia","瘕":"xia","罅":"xia","黠":"xia","锨":"xian","先":"xian","仙":"xian","鲜":"xian","纤":"xian","咸":"xian","贤":"xian","衔":"xian","舷":"xian","闲":"xian","涎":"xian","弦":"xian","嫌":"xian","显":"xian","险":"xian","现":"xian","献":"xian","县":"xian","腺":"xian","馅":"xian","羡":"xian","宪":"xian","陷":"xian","限":"xian","线":"xian","冼":"xian","藓":"xian","岘":"xian","猃":"xian","暹":"xian","娴":"xian","氙":"xian","祆":"xian","鹇":"xian","痫":"xian","蚬":"xian","筅":"xian","籼":"xian","酰":"xian","跹":"xian","相":"xiang","厢":"xiang","镶":"xiang","香":"xiang","箱":"xiang","襄":"xiang","湘":"xiang","乡":"xiang","翔":"xiang","祥":"xiang","详":"xiang","想":"xiang","响":"xiang","享":"xiang","项":"xiang","巷":"xiang","橡":"xiang","像":"xiang","向":"xiang","象":"xiang","芗":"xiang","葙":"xiang","饷":"xiang","庠":"xiang","骧":"xiang","缃":"xiang","蟓":"xiang","鲞":"xiang","飨":"xiang","萧":"xiao","硝":"xiao","霄":"xiao","削":"xiao","哮":"xiao","嚣":"xiao","销":"xiao","消":"xiao","宵":"xiao","淆":"xiao","晓":"xiao","小":"xiao","孝":"xiao","校":"xiao","肖":"xiao","啸":"xiao","笑":"xiao","效":"xiao","哓":"xiao","咻":"xiao","崤":"xiao","潇":"xiao","逍":"xiao","骁":"xiao","绡":"xiao","枭":"xiao","枵":"xiao","筱":"xiao","箫":"xiao","魈":"xiao","楔":"xie","些":"xie","歇":"xie","蝎":"xie","鞋":"xie","协":"xie","挟":"xie","携":"xie","邪":"xie","斜":"xie","胁":"xie","谐":"xie","写":"xie","械":"xie","卸":"xie","蟹":"xie","懈":"xie","泄":"xie","泻":"xie","谢":"xie","屑":"xie","偕":"xie","亵":"xie","勰":"xie","燮":"xie","薤":"xie","撷":"xie","廨":"xie","瀣":"xie","邂":"xie","绁":"xie","缬":"xie","榭":"xie","榍":"xie","歙":"xie","躞":"xie","薪":"xin","芯":"xin","锌":"xin","欣":"xin","辛":"xin","新":"xin","忻":"xin","心":"xin","信":"xin","衅":"xin","囟":"xin","馨":"xin","莘":"xin","歆":"xin","铽":"xin","鑫":"xin","星":"xing","腥":"xing","猩":"xing","惺":"xing","兴":"xing","刑":"xing","型":"xing","形":"xing","邢":"xing","行":"xing","醒":"xing","幸":"xing","杏":"xing","性":"xing","姓":"xing","陉":"xing","荇":"xing","荥":"xing","擤":"xing","悻":"xing","硎":"xing","兄":"xiong","凶":"xiong","胸":"xiong","匈":"xiong","汹":"xiong","雄":"xiong","熊":"xiong","芎":"xiong","休":"xiu","修":"xiu","羞":"xiu","朽":"xiu","嗅":"xiu","锈":"xiu","秀":"xiu","袖":"xiu","绣":"xiu","莠":"xiu","岫":"xiu","馐":"xiu","庥":"xiu","鸺":"xiu","貅":"xiu","髹":"xiu","墟":"xu","戌":"xu","需":"xu","虚":"xu","嘘":"xu","须":"xu","徐":"xu","许":"xu","蓄":"xu","酗":"xu","叙":"xu","旭":"xu","序":"xu","畜":"xu","恤":"xu","絮":"xu","婿":"xu","绪":"xu","续":"xu","讴":"xu","诩":"xu","圩":"xu","蓿":"xu","怵":"xu","洫":"xu","溆":"xu","顼":"xu","栩":"xu","煦":"xu","砉":"xu","盱":"xu","胥":"xu","糈":"xu","醑":"xu","轩":"xuan","喧":"xuan","宣":"xuan","悬":"xuan","旋":"xuan","玄":"xuan","选":"xuan","癣":"xuan","眩":"xuan","绚":"xuan","儇":"xuan","谖":"xuan","萱":"xuan","揎":"xuan","馔":"xuan","泫":"xuan","洵":"xuan","渲":"xuan","漩":"xuan","璇":"xuan","楦":"xuan","暄":"xuan","炫":"xuan","煊":"xuan","碹":"xuan","铉":"xuan","镟":"xuan","痃":"xuan","靴":"xue","薛":"xue","学":"xue","穴":"xue","雪":"xue","血":"xue","噱":"xue","泶":"xue","鳕":"xue","勋":"xun","熏":"xun","循":"xun","旬":"xun","询":"xun","寻":"xun","驯":"xun","巡":"xun","殉":"xun","汛":"xun","训":"xun","讯":"xun","逊":"xun","迅":"xun","巽":"xun","埙":"xun","荀":"xun","薰":"xun","峋":"xun","徇":"xun","浔":"xun","曛":"xun","窨":"xun","醺":"xun","鲟":"xun","压":"ya","押":"ya","鸦":"ya","鸭":"ya","呀":"ya","丫":"ya","芽":"ya","牙":"ya","蚜":"ya","崖":"ya","衙":"ya","涯":"ya","雅":"ya","哑":"ya","亚":"ya","讶":"ya","伢":"ya","揠":"ya","吖":"ya","岈":"ya","迓":"ya","娅":"ya","琊":"ya","桠":"ya","氩":"ya","砑":"ya","睚":"ya","痖":"ya","焉":"yan","咽":"yan","阉":"yan","烟":"yan","淹":"yan","盐":"yan","严":"yan","研":"yan","蜒":"yan","岩":"yan","延":"yan","言":"yan","颜":"yan","阎":"yan","炎":"yan","沿":"yan","奄":"yan","掩":"yan","眼":"yan","衍":"yan","演":"yan","艳":"yan","堰":"yan","燕":"yan","厌":"yan","砚":"yan","雁":"yan","唁":"yan","彦":"yan","焰":"yan","宴":"yan","谚":"yan","验":"yan","厣":"yan","靥":"yan","赝":"yan","俨":"yan","偃":"yan","兖":"yan","讠":"yan","谳":"yan","郾":"yan","鄢":"yan","芫":"yan","菸":"yan","崦":"yan","恹":"yan","闫":"yan","阏":"yan","洇":"yan","湮":"yan","滟":"yan","妍":"yan","嫣":"yan","琰":"yan","晏":"yan","胭":"yan","腌":"yan","焱":"yan","罨":"yan","筵":"yan","酽":"yan","魇":"yan","餍":"yan","鼹":"yan","殃":"yang","央":"yang","鸯":"yang","秧":"yang","杨":"yang","扬":"yang","佯":"yang","疡":"yang","羊":"yang","洋":"yang","阳":"yang","氧":"yang","仰":"yang","痒":"yang","养":"yang","样":"yang","漾":"yang","徉":"yang","怏":"yang","泱":"yang","炀":"yang","烊":"yang","恙":"yang","蛘":"yang","鞅":"yang","邀":"yao","腰":"yao","妖":"yao","瑶":"yao","摇":"yao","尧":"yao","遥":"yao","窑":"yao","谣":"yao","姚":"yao","咬":"yao","舀":"yao","药":"yao","要":"yao","耀":"yao","夭":"yao","爻":"yao","吆":"yao","崾":"yao","徭":"yao","瀹":"yao","幺":"yao","珧":"yao","杳":"yao","曜":"yao","肴":"yao","鹞":"yao","窈":"yao","繇":"yao","鳐":"yao","椰":"ye","噎":"ye","耶":"ye","爷":"ye","野":"ye","冶":"ye","也":"ye","页":"ye","掖":"ye","业":"ye","叶":"ye","曳":"ye","腋":"ye","夜":"ye","液":"ye","谒":"ye","邺":"ye","揶":"ye","馀":"ye","晔":"ye","烨":"ye","铘":"ye","一":"yi","壹":"yi","医":"yi","揖":"yi","铱":"yi","依":"yi","伊":"yi","衣":"yi","颐":"yi","夷":"yi","遗":"yi","移":"yi","仪":"yi","胰":"yi","疑":"yi","沂":"yi","宜":"yi","姨":"yi","彝":"yi","椅":"yi","蚁":"yi","倚":"yi","已":"yi","乙":"yi","矣":"yi","以":"yi","艺":"yi","抑":"yi","易":"yi","邑":"yi","屹":"yi","亿":"yi","役":"yi","臆":"yi","逸":"yi","肄":"yi","疫":"yi","亦":"yi","裔":"yi","意":"yi","毅":"yi","忆":"yi","义":"yi","益":"yi","溢":"yi","诣":"yi","议":"yi","谊":"yi","译":"yi","异":"yi","翼":"yi","翌":"yi","绎":"yi","刈":"yi","劓":"yi","佾":"yi","诒":"yi","圪":"yi","圯":"yi","埸":"yi","懿":"yi","苡":"yi","薏":"yi","弈":"yi","奕":"yi","挹":"yi","弋":"yi","呓":"yi","咦":"yi","咿":"yi","噫":"yi","峄":"yi","嶷":"yi","猗":"yi","饴":"yi","怿":"yi","怡":"yi","悒":"yi","漪":"yi","迤":"yi","驿":"yi","缢":"yi","殪":"yi","贻":"yi","旖":"yi","熠":"yi","钇":"yi","镒":"yi","镱":"yi","痍":"yi","瘗":"yi","癔":"yi","翊":"yi","衤":"yi","蜴":"yi","舣":"yi","羿":"yi","翳":"yi","酏":"yi","黟":"yi","茵":"yin","荫":"yin","因":"yin","殷":"yin","音":"yin","阴":"yin","姻":"yin","吟":"yin","银":"yin","淫":"yin","寅":"yin","饮":"yin","尹":"yin","引":"yin","隐":"yin","印":"yin","胤":"yin","鄞":"yin","堙":"yin","茚":"yin","喑":"yin","狺":"yin","夤":"yin","氤":"yin","铟":"yin","瘾":"yin","蚓":"yin","霪":"yin","龈":"yin","英":"ying","樱":"ying","婴":"ying","鹰":"ying","应":"ying","缨":"ying","莹":"ying","萤":"ying","营":"ying","荧":"ying","蝇":"ying","迎":"ying","赢":"ying","盈":"ying","影":"ying","颖":"ying","硬":"ying","映":"ying","嬴":"ying","郢":"ying","茔":"ying","莺":"ying","萦":"ying","撄":"ying","嘤":"ying","膺":"ying","滢":"ying","潆":"ying","瀛":"ying","瑛":"ying","璎":"ying","楹":"ying","鹦":"ying","瘿":"ying","颍":"ying","罂":"ying","哟":"yo","唷":"yo","拥":"yong","佣":"yong","臃":"yong","痈":"yong","庸":"yong","雍":"yong","踊":"yong","蛹":"yong","咏":"yong","泳":"yong","涌":"yong","永":"yong","恿":"yong","勇":"yong","用":"yong","俑":"yong","壅":"yong","墉":"yong","慵":"yong","邕":"yong","镛":"yong","甬":"yong","鳙":"yong","饔":"yong","幽":"you","优":"you","悠":"you","忧":"you","尤":"you","由":"you","邮":"you","铀":"you","犹":"you","油":"you","游":"you","酉":"you","有":"you","友":"you","右":"you","佑":"you","釉":"you","诱":"you","又":"you","幼":"you","卣":"you","攸":"you","侑":"you","莸":"you","呦":"you","囿":"you","宥":"you","柚":"you","猷":"you","牖":"you","铕":"you","疣":"you","蝣":"you","鱿":"you","黝":"you","鼬":"you","迂":"yu","淤":"yu","于":"yu","盂":"yu","榆":"yu","虞":"yu","愚":"yu","舆":"yu","余":"yu","俞":"yu","逾":"yu","鱼":"yu","愉":"yu","渝":"yu","渔":"yu","隅":"yu","予":"yu","娱":"yu","雨":"yu","与":"yu","屿":"yu","禹":"yu","宇":"yu","语":"yu","羽":"yu","玉":"yu","域":"yu","芋":"yu","郁":"yu","吁":"yu","遇":"yu","喻":"yu","峪":"yu","御":"yu","愈":"yu","欲":"yu","狱":"yu","育":"yu","誉":"yu","浴":"yu","寓":"yu","裕":"yu","预":"yu","豫":"yu","驭":"yu","禺":"yu","毓":"yu","伛":"yu","俣":"yu","谀":"yu","谕":"yu","萸":"yu","蓣":"yu","揄":"yu","喁":"yu","圄":"yu","圉":"yu","嵛":"yu","狳":"yu","饫":"yu","庾":"yu","阈":"yu","妪":"yu","妤":"yu","纡":"yu","瑜":"yu","昱":"yu","觎":"yu","腴":"yu","欤":"yu","於":"yu","煜":"yu","燠":"yu","聿":"yu","钰":"yu","鹆":"yu","瘐":"yu","瘀":"yu","窳":"yu","蝓":"yu","竽":"yu","舁":"yu","雩":"yu","龉":"yu","鸳":"yuan","渊":"yuan","冤":"yuan","元":"yuan","垣":"yuan","袁":"yuan","原":"yuan","援":"yuan","辕":"yuan","园":"yuan","员":"yuan","圆":"yuan","猿":"yuan","源":"yuan","缘":"yuan","远":"yuan","苑":"yuan","愿":"yuan","怨":"yuan","院":"yuan","塬":"yuan","沅":"yuan","媛":"yuan","瑗":"yuan","橼":"yuan","爰":"yuan","眢":"yuan","鸢":"yuan","螈":"yuan","鼋":"yuan","曰":"yue","约":"yue","越":"yue","跃":"yue","钥":"yue","岳":"yue","粤":"yue","月":"yue","悦":"yue","阅":"yue","龠":"yue","樾":"yue","刖":"yue","钺":"yue","耘":"yun","云":"yun","郧":"yun","匀":"yun","陨":"yun","允":"yun","运":"yun","蕴":"yun","酝":"yun","晕":"yun","韵":"yun","孕":"yun","郓":"yun","芸":"yun","狁":"yun","恽":"yun","纭":"yun","殒":"yun","昀":"yun","氲":"yun","匝":"za","砸":"za","杂":"za","拶":"za","咂":"za","栽":"zai","哉":"zai","灾":"zai","宰":"zai","载":"zai","再":"zai","在":"zai","咱":"zai","崽":"zai","甾":"zai","攒":"zan","暂":"zan","赞":"zan","瓒":"zan","昝":"zan","簪":"zan","糌":"zan","趱":"zan","錾":"zan","赃":"zang","脏":"zang","葬":"zang","奘":"zang","戕":"zang","臧":"zang","遭":"zao","糟":"zao","凿":"zao","藻":"zao","枣":"zao","早":"zao","澡":"zao","蚤":"zao","躁":"zao","噪":"zao","造":"zao","皂":"zao","灶":"zao","燥":"zao","唣":"zao","缫":"zao","责":"ze","择":"ze","则":"ze","泽":"ze","仄":"ze","赜":"ze","啧":"ze","迮":"ze","昃":"ze","笮":"ze","箦":"ze","舴":"ze","贼":"zei","怎":"zen","谮":"zen","增":"zeng","憎":"zeng","曾":"zeng","赠":"zeng","缯":"zeng","甑":"zeng","罾":"zeng","锃":"zeng","扎":"zha","喳":"zha","渣":"zha","札":"zha","轧":"zha","铡":"zha","闸":"zha","眨":"zha","栅":"zha","榨":"zha","咋":"zha","乍":"zha","炸":"zha","诈":"zha","揸":"zha","吒":"zha","咤":"zha","哳":"zha","怍":"zha","砟":"zha","痄":"zha","蚱":"zha","齄":"zha","摘":"zhai","斋":"zhai","宅":"zhai","窄":"zhai","债":"zhai","寨":"zhai","砦":"zhai","瞻":"zhan","毡":"zhan","詹":"zhan","粘":"zhan","沾":"zhan","盏":"zhan","斩":"zhan","辗":"zhan","崭":"zhan","展":"zhan","蘸":"zhan","栈":"zhan","占":"zhan","战":"zhan","站":"zhan","湛":"zhan","绽":"zhan","谵":"zhan","搌":"zhan","旃":"zhan","樟":"zhang","章":"zhang","彰":"zhang","漳":"zhang","张":"zhang","掌":"zhang","涨":"zhang","杖":"zhang","丈":"zhang","帐":"zhang","账":"zhang","仗":"zhang","胀":"zhang","瘴":"zhang","障":"zhang","仉":"zhang","鄣":"zhang","幛":"zhang","嶂":"zhang","獐":"zhang","嫜":"zhang","璋":"zhang","蟑":"zhang","招":"zhao","昭":"zhao","找":"zhao","沼":"zhao","赵":"zhao","照":"zhao","罩":"zhao","兆":"zhao","肇":"zhao","召":"zhao","爪":"zhao","诏":"zhao","棹":"zhao","钊":"zhao","笊":"zhao","遮":"zhe","折":"zhe","哲":"zhe","蛰":"zhe","辙":"zhe","者":"zhe","锗":"zhe","蔗":"zhe","这":"zhe","浙":"zhe","谪":"zhe","陬":"zhe","柘":"zhe","辄":"zhe","磔":"zhe","鹧":"zhe","褚":"zhe","蜇":"zhe","赭":"zhe","珍":"zhen","斟":"zhen","真":"zhen","甄":"zhen","砧":"zhen","臻":"zhen","贞":"zhen","针":"zhen","侦":"zhen","枕":"zhen","疹":"zhen","诊":"zhen","震":"zhen","振":"zhen","镇":"zhen","阵":"zhen","缜":"zhen","桢":"zhen","榛":"zhen","轸":"zhen","赈":"zhen","胗":"zhen","朕":"zhen","祯":"zhen","畛":"zhen","鸩":"zhen","蒸":"zheng","挣":"zheng","睁":"zheng","征":"zheng","狰":"zheng","争":"zheng","怔":"zheng","整":"zheng","拯":"zheng","正":"zheng","政":"zheng","帧":"zheng","症":"zheng","郑":"zheng","证":"zheng","诤":"zheng","峥":"zheng","钲":"zheng","铮":"zheng","筝":"zheng","芝":"zhi","枝":"zhi","支":"zhi","吱":"zhi","蜘":"zhi","知":"zhi","肢":"zhi","脂":"zhi","汁":"zhi","之":"zhi","织":"zhi","职":"zhi","直":"zhi","植":"zhi","殖":"zhi","执":"zhi","值":"zhi","侄":"zhi","址":"zhi","指":"zhi","止":"zhi","趾":"zhi","只":"zhi","旨":"zhi","纸":"zhi","志":"zhi","挚":"zhi","掷":"zhi","至":"zhi","致":"zhi","置":"zhi","帜":"zhi","峙":"zhi","制":"zhi","智":"zhi","秩":"zhi","稚":"zhi","质":"zhi","炙":"zhi","痔":"zhi","滞":"zhi","治":"zhi","窒":"zhi","卮":"zhi","陟":"zhi","郅":"zhi","埴":"zhi","芷":"zhi","摭":"zhi","帙":"zhi","忮":"zhi","彘":"zhi","咫":"zhi","骘":"zhi","栉":"zhi","枳":"zhi","栀":"zhi","桎":"zhi","轵":"zhi","轾":"zhi","攴":"zhi","贽":"zhi","膣":"zhi","祉":"zhi","祗":"zhi","黹":"zhi","雉":"zhi","鸷":"zhi","痣":"zhi","蛭":"zhi","絷":"zhi","酯":"zhi","跖":"zhi","踬":"zhi","踯":"zhi","豸":"zhi","觯":"zhi","中":"zhong","盅":"zhong","忠":"zhong","钟":"zhong","衷":"zhong","终":"zhong","种":"zhong","肿":"zhong","重":"zhong","仲":"zhong","众":"zhong","冢":"zhong","锺":"zhong","螽":"zhong","舂":"zhong","舯":"zhong","踵":"zhong","舟":"zhou","周":"zhou","州":"zhou","洲":"zhou","诌":"zhou","粥":"zhou","轴":"zhou","肘":"zhou","帚":"zhou","咒":"zhou","皱":"zhou","宙":"zhou","昼":"zhou","骤":"zhou","啄":"zhou","着":"zhou","倜":"zhou","诹":"zhou","荮":"zhou","鬻":"zhou","纣":"zhou","胄":"zhou","碡":"zhou","籀":"zhou","舳":"zhou","酎":"zhou","鲷":"zhou","珠":"zhu","株":"zhu","蛛":"zhu","朱":"zhu","猪":"zhu","诸":"zhu","诛":"zhu","逐":"zhu","竹":"zhu","烛":"zhu","煮":"zhu","拄":"zhu","瞩":"zhu","嘱":"zhu","主":"zhu","著":"zhu","柱":"zhu","助":"zhu","蛀":"zhu","贮":"zhu","铸":"zhu","筑":"zhu","住":"zhu","注":"zhu","祝":"zhu","驻":"zhu","伫":"zhu","侏":"zhu","邾":"zhu","苎":"zhu","茱":"zhu","洙":"zhu","渚":"zhu","潴":"zhu","驺":"zhu","杼":"zhu","槠":"zhu","橥":"zhu","炷":"zhu","铢":"zhu","疰":"zhu","瘃":"zhu","蚰":"zhu","竺":"zhu","箸":"zhu","翥":"zhu","躅":"zhu","麈":"zhu","抓":"zhua","拽":"zhuai","专":"zhuan","砖":"zhuan","转":"zhuan","撰":"zhuan","赚":"zhuan","篆":"zhuan","抟":"zhuan","啭":"zhuan","颛":"zhuan","桩":"zhuang","庄":"zhuang","装":"zhuang","妆":"zhuang","撞":"zhuang","壮":"zhuang","状":"zhuang","丬":"zhuang","椎":"zhui","锥":"zhui","追":"zhui","赘":"zhui","坠":"zhui","缀":"zhui","萑":"zhui","骓":"zhui","缒":"zhui","谆":"zhun","准":"zhun","捉":"zhuo","拙":"zhuo","卓":"zhuo","桌":"zhuo","琢":"zhuo","茁":"zhuo","酌":"zhuo","灼":"zhuo","浊":"zhuo","倬":"zhuo","诼":"zhuo","廴":"zhuo","蕞":"zhuo","擢":"zhuo","啜":"zhuo","浞":"zhuo","涿":"zhuo","杓":"zhuo","焯":"zhuo","禚":"zhuo","斫":"zhuo","兹":"zi","咨":"zi","资":"zi","姿":"zi","滋":"zi","淄":"zi","孜":"zi","紫":"zi","仔":"zi","籽":"zi","滓":"zi","子":"zi","自":"zi","渍":"zi","字":"zi","谘":"zi","嵫":"zi","姊":"zi","孳":"zi","缁":"zi","梓":"zi","辎":"zi","赀":"zi","恣":"zi","眦":"zi","锱":"zi","秭":"zi","耔":"zi","笫":"zi","粢":"zi","觜":"zi","訾":"zi","鲻":"zi","髭":"zi","鬃":"zong","棕":"zong","踪":"zong","宗":"zong","综":"zong","总":"zong","纵":"zong","腙":"zong","粽":"zong","邹":"zou","走":"zou","奏":"zou","揍":"zou","鄹":"zou","鲰":"zou","租":"zu","足":"zu","卒":"zu","族":"zu","祖":"zu","诅":"zu","阻":"zu","组":"zu","俎":"zu","菹":"zu","啐":"zu","徂":"zu","驵":"zu","蹴":"zu","钻":"zuan","纂":"zuan","攥":"zuan","缵":"zuan","嘴":"zui","醉":"zui","最":"zui","罪":"zui","尊":"zun","遵":"zun","撙":"zun","樽":"zun","鳟":"zun","昨":"zuo","左":"zuo","佐":"zuo","柞":"zuo","做":"zuo","作":"zuo","坐":"zuo","座":"zuo","阝":"zuo","阼":"zuo","胙":"zuo","祚":"zuo","酢":"zuo","薮":"cou","楱":"cou","辏":"cou","腠":"cou","攮":"nang","哝":"nang","囔":"nang","馕":"nang","曩":"nang","喔":"o","嗲":"dia","嘬":"chuai","膪":"chuai","踹":"chuai","岑":"cen","涔":"cen","铥":"diu","耨":"nou","缶":"fou","髟":"bia"}}},toPinYin:function(t,e){if("string"==typeof t){for(var i=[],s=0,n=t.length;s<n;s++){var o=t.charAt(s);i.push(this._check(o))}var h=this._init(i);return h=null==e?h.join("").toUpperCase():h.length>e?h[e].toUpperCase():""}},transToPinYin:function(t,e){return t instanceof Array?this.translate(t,e):"string"==typeof t?this.convert(t,e):"number"==typeof t?t+"":t},translate:function(t,e){for(var i=[],s=0;s<t.length;s++)i[s]=this.convert(t[s]);return i},convert:function(t,e){for(var i="",s=0,n=t.length;s<n;s++){var o=t.substr(s,1),h=this.dic.pinyinDic[o];i+=null==h?o:h}return i},_check:function(t){var e=t.charCodeAt(0);return e>40869||e<19968?t:this.dic.oMultiDiff[e]?this.dic.oMultiDiff[e]:this.dic.strChineseFirstPY.charAt(e-19968)},_init:function(t){for(var e=[""],i=0,s=t.length;i<s;i++){var n=t[i],o=n.length;if(1==o)for(var h=0;h<e.length;h++)e[h]+=n;else{var l=e.slice(0);for(e=[],h=0;h<o;h++){for(var a=l.slice(0),r=0;r<a.length;r++)a[r]+=n.charAt(h);e=e.concat(a)}}}return e}}),t.hz2py.instance=null,t.hz2py.getInstance=function(){return null==t.hz2py.instance&&(t.hz2py.instance=new t.hz2py,t.hz2py.instance._notFree=!0),t.hz2py.instance},t.hz2py}),
/*!
 * 基础控件类
 * ecp.qzz.object.js
 * 创建：qzz
 * 日期: 2014-03-1
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["ecp.utils.i18n","qzz.base"],function(t){var e=window.qzz;return require(["qzz.hz2py"],function(){e.hz2pyloaded=!0}),e.object=e.Class({init:function(e){try{this.index=window.qzz.index++;var i=this.getDefaultOption();this.option=this.isEmpty(i)?e||{}:this.extend(i,e),this._i18n=t,this.isComponent=!0,(e=e||{})&&e._merger&&(e=e.inputer.option),this.numUnit={perthousand:.001,percent:.01,one:1,ten:10,hundred:100,thousand:1e3,tenThousand:1e4,hundredThousand:1e5,million:1e6},this.className="Object",this._events={},this._create()}catch(t){this.logError("init error:"+t.message+t.stack)}},getI18n:function(t,e){return t=t.replace("qzz.",""),null==this._i18n||null==this._i18n.qzz||null==this._i18n.qzz[t]||""===this._i18n.qzz[t]?e:this._i18n.qzz[t]},_create:function(){this.beginDate=null,this._lockDestroy=!1,this._hasDestroy=!1},click:function(t,e){this.bind("click",t,e,!0)},bindEcpEvent:function(t,e,i,s,n){this.bind(t,e,i,s,n)},bind:function(t,e,i,s,n){if("function"==typeof e&&(n=s,s=i,i=e,e=null),"boolean"==typeof s&&(n=s,s=null),this.isEmpty(this._events[t])||!0===n)this._events[t]=[{func:i,event:e,owner:s}],i._funcSourceId=0;else{var o=this._events[t].length;this._events[t].push({func:i,event:e,owner:s}),i._funcSourceId=o}},unbind:function(t,e){if(this.isEmpty(t))return!1;"string"==typeof t&&(t=[t],e=[e]);for(var i=0,s=t.length;i<s;i++){var n=t[i],o=e[i];if(this.isNotEmpty(this._events[n])&&this.isNotEmpty(n))if(this.isEmpty(o))this._events[n]=[];else if(this.isNotEmpty(o._funcSourceId)){for(var h=this._events[n].length,l=-1,a=0;a<h;a++){var r=this._events[n][a];if(null!=r.func&&r.func._funcSourceId===o._funcSourceId){l=a;break}}l>=0&&this._events[n].splice(l,1)}n=null,o=null}return!0},hasbind:function(t){return null!=this._events[t]&&""!==this._events[t]},hasBind:function(t){return this.isNotEmpty(this._events[t])},triggerEcpEvent:function(t){return this.trigger.apply(this,Array.prototype.slice.call(arguments))},triggerEvent:function(t){return this.trigger.apply(this,Array.prototype.slice.call(arguments))},trigger:function(t){var e=this._events[t];if(null!=e){for(var i=null,s=0,n=e.length;s<n;s++){var o=e[s];if(null!=o&&"function"==typeof o.func){var h=arguments[1];null!=o.event&&h.splice(0,0,o.event),null==o.owner&&(o.owner=this);try{this.logInfo("begin to trigger event "+t),this.logInfo(h);var l=o.func.apply(o.owner,h);this.logInfo("finish the event "+t)}catch(e){this.logError(t+" event fire error "+e.message+e.stack)}null!=l&&(null==i?i=l:this.isArray(i)?i.push(l):(i=[i]).push(l))}}return i}},logError:function(t,e){if(null!=window.console){null==e&&(e=new Date);var i=e.getHours(),s=e.getMinutes(),n=e.getSeconds(),o=e.getMilliseconds();e=null;t="["+i+":"+s+":"+n+"."+o+"]["+this.index+":"+this.className+"]"+t;if(null==window.console.logStack)window.console.error(t);else{var h=window.console.logStack.join("\n");setTimeout(function(){window.console.info(h),window.console.error(t)},0),window.console.logStack=[]}}},logInfo:function(t,e,i){if("boolean"==typeof e&&(i=e,e=null),null!=window.console&&(!0===window.qzzlog||!0===i)){null==e&&(e=new Date);var s=e.getHours(),n=e.getMinutes(),o=e.getSeconds(),h=e.getMilliseconds();e=null;t="["+s+":"+n+":"+o+"."+h+"]["+this.index+":"+this.className+"]"+t;if(null==window.console.logStack)window.console.logStack=[t];else if(window.console.logStack.length<10)window.console.logStack.push(t);else{window.console.logStack.push(t);var l=window.console.logStack.join("\n");setTimeout(function(){window.console.info(l)},0),window.console.logStack=[]}}},logBegin:function(t){this.beginDate=new Date,this.logInfo("[BEGIN]"+t,this.beginDate)},logEnd:function(t){if(null!=this.beginDate){var e=this.beginDate.getHours(),i=this.beginDate.getMinutes(),s=this.beginDate.getSeconds(),n=this.beginDate.getMilliseconds(),o=new Date,h=o.getHours()-e,l=o.getMinutes()-i;l<0&&(h--,l+=60);var a=o.getSeconds()-s;a<0&&(l--,a+=60);var r=o.getMilliseconds()-n;r<0&&(a--,r+=1e3),o=null;var d=1e3*(3600*h+60*l+a)+r;this.logInfo("[END]"+t+this.getI18n("qzz.useTime"," 耗时{0}毫秒").replace("{0}",d))}},getBrowser:function(t){null==t&&(t="msie");var e=window.navigator.appVersion;return"string"==typeof e&&(e=e.toLowerCase()),null!=e&&e.indexOf(t)>=0||!("msie"!==t||null==e||!/(msie\s|trident.*rv:)([\w.]+)/.test(e))},subStr:function(t,e){"string"!=typeof t&&(t+="");for(var i=t,s=0,n=0;n<i.length;n++)if(i.charCodeAt(n)>256){if(!(s+2<=e))break;s+=2}else{if(!(s+1<=e))break;s++}return t.substring(0,n)},strLen:function(t){var e=t;if(null==e||""===e)return 0;"string"!=typeof e&&(e+="");for(var i=0,s=0;s<e.length;s++)e.charCodeAt(s)>256?i+=2:i++;return e=null,s=null,i},getDataSource:function(){return this.dataSource},setDataSource:function(t){this.dataSource=t},isNewByMeta:function(){return this.newByMeta},setNewByMeta:function(t){this.newByMeta=t},isEmpty:function(t,e){return!this.isNotEmpty(t,e)},isNotEmpty:function(t,e){var i=!0;if(null==t||""===t)i=!1;else if("object"===(void 0===t?"undefined":_typeof(t)))if(this.isArray(t))i=t.length>0;else for(var s in i=!1,t){i=!0;break}return i},extend:function(t,e,i){if(null==t)return e;if(null!=e&&null!=e.___hasCopy)return e.___hasCopy;if(null!=e&&(e.___hasCopy=t),null==i?i=10:!0===i&&(i=0),this.isArray(e)){!0!==this.isArray(t)&&(t=[],e.___hasCopy=t);for(var s=0,n=e.length;s<n;s++){null!=(o=e[s])&&"object"==(void 0===o?"undefined":_typeof(o))&&null==o.nodeType&&i>0&&(o=this.extend({},o,i-1)),t.push(o)}}else for(var s in e){var o,h=null==e||null==e.__deep||!1!==e.__deep[s];null!=(o=e[s])&&"object"==(void 0===o?"undefined":_typeof(o))&&null==o.nodeType&&h&&i>0?(t[s]||(t[s]={}),t[s]=this.extend(t[s],o,i-1)):t[s]=o}return null!=e&&delete e.___hasCopy,null!=t&&delete t.___hasCopy,t},hz2py:function(t){return this.hasbind("onHz2py")?t=this.trigger("onHz2py",[t]):!0===e.hz2pyloaded&&(null==this._hz2py&&(this._hz2py=e.hz2py.getInstance()),t=this._hz2py.transToPinYin(t)),t},numberFormat:function(t){var e=(t+"").split(".");return e[0]=e[0].replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,"),e.join(".")},getEcpType:function(){return this.className},getOption:function(){return this.option},getDefaultOption:function(){return{}},getName:function(){return this.getOption().name},setName:function(t){this.getOption().name=t},getBooleanValue:function(t,e){return this._getBooleanValue(t,e)},getJsonValue:function(t,e,i){return null!=t?t:null!=e?e:i},_dbRun:function(t,e,i){if(null==i&&"number"==typeof e&&(i=e,e=[]),null!=this._dbHandle)clearTimeout(this._dbHandle),this._dbHandle=null;else if("function"==typeof t){var s=this;this._dbHandle=setTimeout(function(){s._dbHandle=null,t.apply(s,e)},i)}},_delayRun:function(t,e,i){if(null==i&&"number"==typeof e&&(i=e,e=[]),null!=this._delayHandle&&clearTimeout(this._delayHandle),"function"==typeof t){var s=this;this._delayHandle=setTimeout(function(){t.apply(s,e)},i)}},_asynRun:function(t,e,i){if(null==i&&"number"==typeof e&&(i=e,e=[]),"function"==typeof t){var s=this;setTimeout(function(){t.apply(s,e)},i)}},_getBooleanValue:function(t,e){return"boolean"==typeof t?t:"string"==typeof t?"TRUE"===(t=t.toUpperCase())||"YES"===t||"Y"===t||!isNaN(t)&&"0"!==t:"number"==typeof t?0!=t:"date"!=typeof t&&("boolean"==typeof e&&e)},isNumber:function(t){if("number"==typeof t)return!0;if("string"==typeof t){var e=/^(\-)?[0-9,]+(.[0-9]*)?$/.test(t);if(t.indexOf(",")>=0)for(var i=t.split(","),s=0,n=i.length;s<n;s++){var o=i[s],h=o.length;if(o.indexOf("-")>=0&&h--,0!=s||""!==o&&"-"!==o)if(s==n-1){var l=o.indexOf(".");-1==l&&3!==h?e=!1:-1!==l&&3!==l&&(e=!1)}else 3!==h&&(e=!1);else e=!1}return e}return!1},compare:function(t,e,i,s){null!=s&&"string"===s&&(t="s"+t,e="s"+e);var n=t,o=e,h=i,l=null,a=null;return"object"===(void 0===n?"undefined":_typeof(n))||"object"===(void 0===o?"undefined":_typeof(o))?-1:this.isNumber(n)&&this.isNumber(o)?n-o>0?1:n===o?0:-1:(null!=h?(null==(l=h[n])&&(l=this.hz2py(n),h[n]=l),null==(a=h[o])&&(a=this.hz2py(o),h[o]=a)):(l=this.hz2py(n),a=this.hz2py(o),null!=h&&(h[n]=l,h[o]=a)),l.localeCompare(a))},numUpper:function(t,e){if(this._i18n.en_us)return t;var i=t;if("string"==typeof i){if(i=i.replace(/,| |￥/g,""),isNaN(i))return t}else i+="";if("Lower"==e||"Upper"==e||"MoneyLower"==e||"MoneyUpper"==e){var s={Lower:this.getI18n("qzz.nlower",["〇","一","二","三","四","五","六","七","八","九"]),Upper:this.getI18n("qzz.nupper",["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"])},n={Lower:this.getI18n("qzz.ulower",["","","","点","","十","百","千","万","十","百","千","亿","十","百","千","万亿","十","百","千","亿亿","十","百","千","万"]),Upper:this.getI18n("qzz.uupper",["","","","点","","拾","佰","仟","万","拾","佰","仟","亿","拾","佰","仟","万亿","拾","佰","仟","亿亿","拾","佰","仟","万"]),MoneyLower:this.getI18n("qzz.umoneylower",["厘","分","角","整","元","十","百","千","万","十","百","千","亿","十","百","千","万亿","十","百","千","亿亿","十","百","千","万"]),MoneyUpper:this.getI18n("qzz.umoneyupper",["厘","分","角","整","元","拾","佰","仟","万","拾","佰","仟","亿","拾","佰","仟","万亿","拾","佰","仟","亿亿","拾","佰","仟","万"])},o=s[e],h=1;null==o&&(o=s[e.replace(/Money/,"")],h=0);var l=n[e],a=i.split("."),r=a[0],d="",u="",c="",g=4,p=r.length,f=!1,y=0,m=p-h;if(m>1)for(var C=0;C<m;C++){var S=r.charAt(C);if(0==C&&"-"==S)f=!0,y++;else{if(0!==S&&"0"!==S)break;y++}}(!1===f&&y>0||!0===f&&y>1)&&(r=r.substr(y,p),f&&(r="-"+r),p=r.length);for(C=p-1;C>=0;C--){if("-"==(S=r.charAt(C)))d=this.getI18n("qzz.minus","负")+d;else{var x=o[S=parseInt(S,10)];S>0?(""!==c&&(8!=g&&12!=g&&16!=g&&20!=g&&(d=c+d),c=""),d=1!=S||5!=g&&9!=g&&13!=g&&17!=g&&21!=g||0!=C&&(1!=C||"-"!=r.charAt(C-1))?x+l[g]+d:l[g]+d,!0):8==g||12==g||16==g||20==g?c=l[g]:u>0?d=o[0]+d:""===u&&(d=p>1?l[g]:o[0]+l[g]),u=S,g++}}if(a.length>1){xv=a[1],y=0;for(C=(p=xv.length)-1;C>=0;C--){if(0!==(S=xv.charAt(C))&&"0"!==S)break;y++}if(y>0&&(xv=xv.substr(0,p-y),p=xv.length),""!==xv){"MoneyUpper"!==e&&"MoneyLower"!==e&&(d+=l[3]);for(g=2,C=0;C<p;C++){S=xv.charAt(C);d=d+(x=o[S=parseInt(S,10)])+(l[g]||""),g--}}else"MoneyUpper"!=e&&"MoneyLower"!=e||(""===d&&(d=o[0]),d+=l[3])}else"MoneyUpper"!=e&&"MoneyLower"!=e||(""===d&&(d=o[0]),d+=l[3]);return d}return"Money"==e?(t+"").replace(/[.,]/,"").split("").join(" "):t},round:function(t,e,i){"number"!=typeof t&&(t=parseFloat(t));var s=t+"",n=s.indexOf("."),o=s.length;if(n<0||o-n-1<=e)return t;null==e&&(e=14-n);var h=Math.pow(10,e);(t*=h,null==i&&n>0&&(i=15-n),null!=i)&&(t+=5/Math.pow(10,i));return(t=Math.round(t))/h},trim:function(t){return null!=t&&""!==t&&"string"==typeof t&&(t=t.replace(/(^\s*)|(\s*$)/g,"")),t},isArray:function(t){return/\[object array\]/gi.test(Object.prototype.toString.call(t))},isIDCard:function(t){return/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/.test(t)},isFax:function(t){return/^(\d{3,4}-)?\d{7,8}$/.test(t)},isTele:function(t){return/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}(\(\d{3,4}\)|-\d{3,4}|\s)?$/.test(t)},isMobile:function(t){return/^1[34578]\d{9}$/.test(t)},isEmail:function(t){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)},isPostid:function(t){return/^\d{6}(?!\d)/.test(t)},_textToTag:function(t){return"string"==typeof t&&(t=(t=t.replace(/&gt;|&lt;|&nbsp;/g,function(t){return"&gt;"==t?">":"&lt;"==t?"<":"&nbsp;"==t?" ":void 0})).replace(/&amp;/g,"&"),!1!==this.getOption().tranSingleQuot&&(t=t.replace(/&apos;/g,"'"))),t},_tagToText:function(t){return"string"==typeof t&&(t=(t=t.replace(/&(?!gt;|lt;|nbsp;|amp;)/g,"&amp;")).replace(/[<> ]/g,function(t){return">"==t?"&gt;":"<"===t?"&lt;":" "===t?"&nbsp;":void 0}),!1!==this.getOption().tranSingleQuot&&(t=t.replace(/'/g,"&apos;"))),t},destroy:function(){if(1!=this._notFree){var t=this;this._lockDestroy?setTimeout(function(){t.destroy()},1e3):(t._hasDestroy=!0,setTimeout(function(){if(null!=t){for(var e in t)if("baseprototype"===e)t[e]=null;else{if(null!=t[e]&&"object"===_typeof(t[e])&&"function"==typeof t[e].destroy)try{!0!==t[e]._hasDestroy&&t[e].destroy()}catch(i){null!=window.console&&window.console.error(t.className+"."+e+"[Destroy]Error:"+i.message)}delete t[e]}t._hasDestroy=!0}},5e3))}}}),e.object}),
/*!
 * 基础控件类
 * ecp.qzz.date.js
 * 创建：qzz
 * 日期: 2014-03-1
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.object"],function(){var t=window.qzz;return t.date=t.Class(t.object,{_create:function(){this.className="Date",this.months=new Array(31,28,31,30,31,30,31,31,30,31,30,31),this.monthCN=this.getI18n("qzz.monthsText",["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]),this.seasonCN=this.getI18n("qzz.seasonText",["第一季度","第二季度","第三季度","第四季度"]),this.halfYearsCN=this.getI18n("qzz.halfYearsText",["上半年","下半年"]),this.tenCN=this.getI18n("qzz.tendaysText",["上旬","中旬","下旬"]),this.cyctypes={second:"second",minute:"minute",hour:"hour",day:"day",ten:"ten",month:"month",season:"season",halfyear:"halfyear",year:"year"},this.getOption().dateSplit=this.getOption().dateSplit||"-",this.getOption().formatYear=this.getOption().formatYear||this.getI18n("qzz.formatYear","YYYY"),this.getOption().formatMonth=this.getOption().formatMonth||this.getI18n("qzz.formatMonth","MM"),this.getOption().formatDay=this.getOption().formatDay||this.getI18n("qzz.formatDay","DD"),this.getOption().timeSplit=this.getOption().timeSplit||":",this.getOption().formatHour=this.getOption().formatHour||this.getI18n("qzz.formatHour","HH"),this.getOption().formatMinute=this.getOption().formatMinute||this.getI18n("qzz.formatMinute","MM"),this.getOption().formatSecond=this.getOption().formatSecond||this.getI18n("qzz.formatSecond","SS"),this.dateSplit="-",this.timeSplit=":",this.dtSplit=/[- ]/g,this.cyctype=this.cyctypes.day,this.showTime=!1},setShowTime:function(t){null==t&&(t=!0),this.showTime=t},setCycType:function(t){this.cyctype=t},setFormatYear:function(t){this.getOption().formatYear=t||this.getOption().formatYear},setFormatMonth:function(t){this.getOption().formatMonth=t||this.getOption().formatMonth},setFormatDay:function(t){this.getOption().formatDay=t||this.getOption().formatDay},setFormatHour:function(t){this.getOption().formatHour=t||this.getOption().formatHour},setFormatMinute:function(t){this.getOption().formatMinute=t||this.getOption().formatMinute},setFormatSecond:function(t){this.getOption().formatSecond=t||this.getOption().formatSecond},setDateSplit:function(t){this.getOption().dateSplit=t||this.getOption().dateSplit},setTimeSplit:function(t){this.getOption().timeSplit=t||this.getOption().timeSplit},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getYearsRect:function(t){var e=[],i=0;null==t&&(t=(new Date).getFullYear());t/=10;var s=parseInt(t,10);t-s==0&&(s-=1),t=10*s,t=parseInt(t,10);for(var n=0;n<3;n++){for(var o=[],h=0;h<4;h++)o.push(t+i),i++;e.push(o)}return e},getHalfyearsRect:function(){var t=[],e=[];return e.push(this.halfYearsCN[0]),e.push(this.halfYearsCN[1]),t.push(e),t},getSeasonsRect:function(){for(var t=[],e=0,i=0;i<2;i++){for(var s=[],n=0;n<2;n++)s.push(this.seasonCN[e++]);t.push(s)}return t},getMonthsRect:function(){for(var t=[],e=0,i=0;i<3;i++){for(var s=[],n=0;n<4;n++)s.push(this.monthCN[e++]);t.push(s)}return t},getTensRect:function(){for(var t=[],e=0,i=0;i<3;i++){for(var s=[],n=0;n<1;n++)s.push(this.tenCN[e++]);t.push(s)}return t},getSecondsRect:function(t,e){t<10&&(t="0"+t),e<10&&(e="0"+e);for(var i=[],s=0,n=0;n<4;n++){for(var o=[],h=0;h<3;h++){var l=s;0!=s&&5!=s||(l="0"+s),o.push(t+":"+e+":"+l),s+=5}i.push(o)}return i},getMinutesRect:function(t){t<10&&(t="0"+t);for(var e=[],i=0,s=0;s<4;s++){for(var n=[],o=0;o<3;o++){var h=i;0!=i&&5!=i||(h="0"+i),n.push(t+":"+h),i+=5}e.push(n)}return e},getHoursRect:function(){for(var t=[],e=0,i=0;i<6;i++){for(var s=[],n=0;n<4;n++){var o=e;o<10&&(o="0"+o),s.push(o+":00"),e++}t.push(s)}return t},getDaysRect:function(t,e,i){var s=[],n=new Date(t,e-1,1),o=n.getDay();n=null;var h=this.getMonthDays(t,e),l=t,a=e-1;a<1&&(l--,a=12);for(var r=this.getMonthDays(l,a)-o+1,d=!1,u=1,c=1,g=0;g<6;g++){for(var p=[],f=0;f<7;f++)0==g&&f==o?(p[f]=u++,d=!0):d?u<=h?p[f]=u++:!0===i&&(p[f]=c++):p[f]=r++;s.push(p)}return s},getMonthDays:function(t,e){return null==e&&(e=1),e<1&&(e=1),e>12&&(e=12),2!=e?this.months[e-1]:(null==t&&(t=(new Date).getFullYear()),this.isLeapYear(t)?this.months[1]+1:this.months[1])},_getCurTime:function(t){var e=t;null==e&&(e=new Date);var i=e.getHours();i<10&&(i="0"+i);var s=e.getMinutes();s<10&&(s="0"+s);var n=e.getSeconds();return n<10&&(n="0"+n),{h:i,m:s,s:n}},dateToStr:function(t,e){null==t&&(t=new Date),null==e&&(e="-");var i="";i+=t.getFullYear();var s=t.getMonth()+1;s<10&&(s="0"+s),i+=e+s;var n=t.getDay();return n<10&&(n="0"+n),i+=e+n},_dateToStr:function(t,e,i){var s=this.dateSplit;e<1&&(e=1),e>12&&(e=12),i<1&&(i=1);var n=this.getMonthDays(t,e);return i>n&&(i=n),t<1e3&&(t=2e3+t),e<10&&(e="0"+e),i<10&&(i="0"+i),t+s+e+s+i},toDate:function(t){var e="",i=this.dateSplit;if(isNaN(t)){if(e=this.checkDate(t),this.cyctype===this.cyctypes.year){var s=e.split(i);e=s[0],s=null}else if(this.cyctype===this.cyctypes.month){s=e.split(i);e=s[0]+i+s[1],s=null}}else{var n=new Date(t),o=n.getMonth()+1;o<10&&(o="0"+o);var h=n.getDate();if(h<10&&(h="0"+h),e=n.getFullYear(),e+=i,e+=o,this.cyctype!==this.cyctypes.month&&(e+=i,e+=h),this.cyctype===this.cyctypes.day&&this.showTime||this.cyctype===this.cyctypes.hour||this.cyctype===this.cyctypes.minute||this.cyctype===this.cyctypes.second){e+=" ";var l=this._getCurTime(n);e+=l.h,e+=this.timeSplit,e+=l.m,e+=this.timeSplit,e+=l.s}n=null}return e},checkDate:function(t){if("string"!=typeof(f=t))return"";var e=f.split(" ");e.length>0&&(f=e[0]);var i=this.dateSplit;if(f=f.replace(/([\.\\\/])/g,i),isNaN(f)){var s=f.split(i);if(this.cyctype==this.cyctypes.month&&2==s.length)s.push("01");else if(this.cyctype==this.cyctypes.halfyear){if(s.length<2){(s=e)[0]=s[0].replace(this.getI18n("qzz.year","年"),"");for(var n=this.halfYearsCN.length,o=-1,h=0;h<n;h++)if(s[1]===this.halfYearsCN[h]){o=h;break}o>=0&&(s[1]=this.getMonthByHalfyear(o+1),s[1]<10&&(s[1]="0"+s[1])),s.push("01")}}else if(this.cyctype==this.cyctypes.season){if(s.length<2){(s=e)[0]=s[0].replace(this.getI18n("qzz.year","年"),"");n=this.seasonCN.length;var l=-1;for(h=0;h<n;h++)if(s[1]===this.seasonCN[h]){l=h;break}l>=0&&(s[1]=this.getMonthBySeason(l+1),s[1]<10&&(s[1]="0"+s[1])),s.push("01")}}else if(this.cyctype==this.cyctypes.ten&&s.length<2){var a=(s=e)[0].split(this.getI18n("qzz.year","年")),r=a[0],d=a[1].replace(this.getI18n("qzz.month","月"),""),u=(n=this.tenCN.length,-1);for(h=0;h<n;h++)if(s[1]===this.tenCN[h]){u=h;break}var c=1;u>=0&&(c=this.getDayByTen(u+1))<10&&(c="0"+c),s=[r,d,c]}if(3==s.length&&!isNaN(s[0])&&!isNaN(s[1])&&!isNaN(s[2])){r=parseInt(s[0],10),d=parseInt(s[1],10),c=parseInt(s[2],10);f=this._dateToStr(r,d,c)}s=null}else{var g=f.replace(/[^0-9]/,""),p=g.length;p<7&&(this.cyctype===this.cyctypes.year?g+="0101":this.cyctype===this.cyctypes.month&&(g+="01"));var f="";if(8==(p=g.length)){r=parseInt(g.substr(0,4),10),d=parseInt(g.substr(4,2),10),c=parseInt(g.substr(6,2),10);f=this._dateToStr(r,d,c)}else if(6==p){r=parseInt("20"+g.substr(0,2),10),d=parseInt(g.substr(2,2),10),c=parseInt(g.substr(4,2),10);f=this._dateToStr(r,d,c)}}if(""!==f&&(this.cyctype===this.cyctypes.day&&!0===this.showTime||this.cyctype===this.cyctypes.hour||this.cyctype===this.cyctypes.minute||this.cyctype===this.cyctypes.second)){var y,m,C,S=!1;if(e.length>1){var x=e[1].split(/[:.]/g);x.length>2&&(y=x[0],m=x[1],C=x[2],S=!0)}if(!S){var _=this._getCurTime();y=_.h,m=_.m,C=_.s}f+=" "+y+this.timeSplit+m+this.timeSplit+C}return f.length>0?f:""},strToTimeMillis:function(t){return t?(-1!==t.indexOf(".")&&(t=t.substring(0,t.indexOf("."))),+new Date(this.formatDate(t).replace(/-/g,"/"))):0},formatDate:function(t){return/^\d{4}[-\/]\d{2}$/.test(t)?t+="-01":/^\d{4}$/.test(t)&&(t+="-01-01"),t},parseEcpDate:function(t){if(arguments.length){if(""===t||!0===/^\/Date\(/.test(t))return t;var e=this.strToTimeMillis(t);return"/Date("+(e=isNaN(e)?+new Date:e)+"+0800)/"}return"/Date("+ +new Date+"+0800)/"},invalidDate:function(t){var e=t.replace(/^(\d{4})(\d{2})?(\d{2})?$/g,function(){var t=RegExp.$1,e=RegExp.$2,i=RegExp.$3;return t+"-"+(e||"01")+"-"+(i||"01")});return"NaN"===new Date(e).valueOf().toString()||e},parseDate:function(t,e){if(""===t||null==t)return+new Date;if("number"==typeof t||"date"==typeof t)return+t;if("string"==typeof t){var i=this.invalidDate(t);if("string"==typeof i)return+new Date(i)}var s=this.strToTimeMillis(t);if(!isNaN(s))return s;e=e||/\b\((\-*\d*)\+\b/;var n=t.toString().match(e);return n?n[1]:+new Date},strToDate:function(t,e,i,s){if(null==t||""===t)return"";t=this.parseDate(t);var n=isNaN(t)?new Date:new Date(+t),o=n.getMonth()+1,h=n.getDate(),l=n.getHours(),a=n.getMinutes(),r=n.getSeconds(),d=(l<10?"0"+l:l)+":"+(a<10?"0"+a:a);return s&&(d+=":"+(r<10?"0"+r:r)),"Y"==i||"year"==i?n.getFullYear():"M"==i||"month"==i||"S"==i||"season"==i?n.getFullYear()+"-"+(o<10?"0"+o:o):n.getFullYear()+"-"+(o<10?"0"+o:o)+"-"+(h<10?"0"+h:h)+(e?" "+d:"")},getSeasonByMonth:function(t){return t<=3?1:t<=6?2:t<=9?3:4},getHalfyearByMonth:function(t){var e=1;return t>6&&(e=2),e},getMonthByHalfyear:function(t){var e=1;return 2==t&&(e=7),e},getMonthBySeason:function(t){var e=1;switch(t){case 1:e=1;break;case 2:e=4;break;case 3:e=7;break;case 4:e=10}return e},getTenByDay:function(t){return t<10?1:t<20?2:3},getDayByTen:function(t){var e=1;switch(t){case 1:e=1;break;case 2:e=10;break;case 3:e=20}return e},getFormatDate:function(t){if(null==t||""===t)return t;"string"!=typeof t&&(t+="");var e=t.split("-"),i=new Date,s=e[0];if(isNaN(s)&&""===(s=(s+"").replace(/[^0-9]/g,""))&&(s=i.getFullYear()),this.cyctype===this.cyctypes.year)t=s;else if(this.cyctype===this.cyctypes.halfyear)isNaN(e[1])&&(e[1]=i.getMonth()+1),t=s+this.getI18n("qzz.year","年")+" "+this.halfYearsCN[this.getHalfyearByMonth(parseInt(e[1],10))-1];else if(this.cyctype===this.cyctypes.season)isNaN(e[1])&&(e[1]=i.getMonth()+1),t=s+this.getI18n("qzz.year","年")+" "+this.seasonCN[this.getSeasonByMonth(parseInt(e[1],10))-1];else if(this.cyctype===this.cyctypes.month)isNaN(e[1])&&(e[1]=i.getMonth()+1),t=s+"-"+e[1];else if(this.cyctype===this.cyctypes.ten){isNaN(e[1])&&(e[1]=i.getMonth()+1);var n=e[2];(null==n||""===n||isNaN(n))&&(n=i.getDate()),t=s+this.getI18n("qzz.year","年")+e[1]+this.getI18n("qzz.month","月")+" "+this.tenCN[this.getTenByDay(parseInt(n,10))-1]}return t}}),t.date}),
/*!
 * 树节点对象.
 * ecp.qzz.treenode.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.base"],function(){var t=window.qzz;return t.treenode=t.Class({init:function(){this.className="TreeNode",this.recNo=t.treenode.recNo++,t.treenode.recNo>1e9&&(t.treenode.recNo=1),this.pNode=null,this.cNode=[],this.fNode=[],this.fState={},this.sortNode={},this.sortState={},this.sortIndex={},this.sortChanged={},this.sortKey="default",this.expanded=!0,this.allCount=1,this.visibleCount=1,this.count=0,this.index=0,this.scrIndex=0,this.level=0,this.data=null,this.option=null,this.fullcode="",this.code="",this.text="",this.id="",this.checkState=!1,this.enable=!0,this.childCheckCount=0,this.nodeState=null,this.filterState=!1},saveState:function(){if(!this.filterState){for(var t=[],e=0;e<this.count;e++)t[e]=this.cNode[e];this.nodeState={cNode:t,allCount:this.allCount,visibleCount:this.visibleCount,count:this.count,index:this.index,scrIndex:this.scrIndex,expanded:this.expanded},this.filterState=!0}},loadState:function(){if(null!=this.nodeState&&this.filterState){var t=this.nodeState.cNode;this.cNode=[];for(var e=0,i=t.length;e<i;e++)this.cNode[e]=t[e];this.allCount=this.nodeState.allCount,this.visibleCount=this.nodeState.visibleCount,this.count=this.nodeState.count,this.index=this.nodeState.index,this.scrIndex=this.nodeState.scrIndex,this.expanded=this.nodeState.expanded,this.sortNode={},this.sortState={},this.sortIndex={},this.filterState=!1,this.nodeState=null}},isLeaf:function(){return 0===this.count},getCount:function(){return this.count},cacAllCount:function(t,e){this.allCount+=t;for(var i=this.pNode;null!=i;)i.allCount+=t,i=i.pNode;if(e&&this.filterState){this.nodeState.allCount+=t;for(i=this.pNode;null!=i;)i.nodeState.allCount+=t,i=i.pNode}i=null},cacVisibleCount:function(t,e){for(var i=this.pNode;null!=i&&i.expanded;)i.visibleCount+=t,i=i.pNode;if(null!=i&&(i.visibleCount+=t),e&&this.filterState){for(i=this.pNode;null!=i&&i.nodeState.expanded;)i.nodeState.visibleCount+=t,i=i.pNode;null!=i&&(i.nodeState.visibleCount+=t)}i=null},expand:function(){if(!this.expanded){this.expanded=!0;var t=this.visibleCount-1;this.cacVisibleCount(t,!1)}},collapse:function(){if(this.expanded){this.expanded=!1;var t=-1*(this.visibleCount-1);this.cacVisibleCount(t,!1)}},addNode:function(e){if(e instanceof t.treenode){this.cNode.push(e),e.pNode=this,e.index=this.count,e.level=this.level+1,e.scrIndex=this.scrIndex+this.count+1,this.count++,this.filterState&&(this.nodeState.cNode.push(e),e.saveState(),e.nodeState.index=this.nodeState.count,this.nodeState.count++);var i=this.count-1,s=i;for(var n in this.sortState)this._insertSort(n,i,s,this);var o=e.allCount;this.cacAllCount(o,!0);var h=e.visibleCount;return e.expanded||(h=1),this.visibleCount+=h,!0===this.expanded&&this.cacVisibleCount(h,!0),this.filterState&&(this.nodeState.visibleCount+=h),h=null,!0}return!1},_insertSort:function(t,e,i,s){var n=s.sortIndex[t],o=s.sortNode[t];if(null!=o||null!=n){for(var h=o.length;h>e;h--)n[h]=n[h-1],n[h]>=i&&n[h]++;for(n[h]=i,h--;h>=0;h--)n[h]>=i&&n[h]++;for(h=o.length;h>i;h--)o[h]=o[h-1],o[h].nodeIndex>=e&&o[h].nodeIndex++;for(o[h]={nodeIndex:e,cnode:[]},h--;h>=0;h--)o[h].nodeIndex>=e&&o[h].nodeIndex++}},insertNode:function(e,i){if(i instanceof t.treenode&&e>=0&&e<=this.count){for(var s=this.count;s>e;s--)this.cNode[s]=this.cNode[s-1],this.cNode[s].index=s;var n,o=null;if(e<this.count&&(n=this.cNode[e].scrIndex),e>0&&(o=this.cNode[e-1].recNo),i.pNode=this,i.index=e,i.scrIndex=n,i.level=this.level+1,this.cNode[e]=i,this.count++,this.filterState){var h=e;for(s=this.nodeState.count;s>e;s--){if(null!=o&&this.nodeState.cNode[s-1].recNo===o){h=s;break}this.nodeState.cNode[s]=this.nodeState.cNode[s-1],null!=this.nodeState.cNode[s].nodeState&&(this.nodeState.cNode[s].nodeState.index=s)}this.nodeState.cNode[h]=i,i.saveState(),i.nodeState.index=h,this.nodeState.count++}for(var l in this.sortState)this._insertSort(l,e,e,this);var a=i.allCount;this.cacAllCount(a,!0);var r=i.visibleCount;return i.expanded||(r=1),this.visibleCount+=r,!0===this.expanded&&this.cacVisibleCount(r,!0),this.filterState&&(this.nodeState.visibleCount+=r),r=null,!0}return!1},_delSort:function(t,e,i){var s=i.sortIndex[t],n=i.sortNode[t];if(null!=n||null!=s){for(var o=s[e],h=0,l=n.length;h<l-1;h++)h>=e&&(s[h]=s[h+1]),s[h]>=o&&s[h]--,h>=o&&(n[h]=n[h+1]),n[h].nodeIndex>=e&&n[h].nodeIndex--;delete s[h],n.splice(h,1)}},delNode:function(t,e){if(t>=0&&t<this.count){e=0!=e;for(var i=this.cNode[t],s=t;s<this.count-1;s++)this.cNode[s]=this.cNode[s+1],this.cNode[s].index=s;if(this.cNode[this.count-1]=null,this.cNode.splice(this.count-1,1),this.count--,this.filterState&&e){for(s=i.nodeState.index;s<this.nodeState.count-1;s++)this.nodeState.cNode[s]=this.nodeState.cNode[s+1],this.nodeState.cNode[s].nodeState.index=s;this.nodeState.cNode[this.nodeState.count-1]=null,this.nodeState.cNode.splice(this.nodeState.count-1,1),this.nodeState.count--}for(var n in this.sortState)this._delSort(n,t,this);var o=-1*i.allCount;this.cacAllCount(o,e);var h=-1*i.visibleCount;return i.expanded||(h=-1),this.visibleCount+=h,!0===this.expanded&&this.cacVisibleCount(h,e),e&&(this.filterState&&(this.nodeState.visibleCount+=h),i.pNode=null,i.cNode=[],i.sortNode={},i.destroy(),i=null),!0}return!1},getNode:function(t){return t>=0&&t<this.count?this.cNode[t]:null},getIndex:function(){return this.scrIndex},clone:function(){var e=new t.treenode;return e.recNo=this.recNo,e.expand=this.expand,e.allCount=this.allCount,e.index=this.index,e.data=this.data,e.text=this.text,e.id=this.id,e.count=this.count,e},copy:function(e){e instanceof t.treenode&&(this.recNo=e.recNo,this.expand=e.expand,this.allCount=e.allCount,this.index=e.index,this.data=e.data,this.text=e.text,this.id=e.id,this.count=e.count)},destroy:function(){var t=this;t.pNode=null,t.level=null,t.sortNode={},t._hasDestroy=!0,setTimeout(function(){if(null!=t){for(var e in t)if("baseprototype"===e)t[e]=null;else{if(null!=t[e]&&"object"===_typeof(t[e])&&"function"==typeof t[e].destroy)try{t[e].destroy()}catch(t){console.error(e+"[Destroy]Error:"+t.message)}delete t[e]}t._hasDestroy=!0}},5e3)}}),t.treenode.recNo=1,t.treenode}),
/*!
 * 树列表对象.
 * ecp.qzz.treelist.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.object","qzz.treenode"],function(){var t=window.qzz;return t.treelist=t.Class(t.object,{_create:function(){this.base(),this.className="TreeList",this.logInfo("treelist.create"),this.rootNode=new t.treenode,this.rootNode.level=-1,this.rootNode.scrIndex=0,this.curNode=this.rootNode,this.rootNode.data={},this.subNode=new t.treenode,this.subNode.level=-2,this.subNode.scrIndex=-1,this.subNode.data={},this.filterStack=[],this.initSort=!0,this._updates=[],this.eof=!1,this.bof=!0,this.initType=this.getOption().initType||"code",this.itemCode=this.getOption().itemCode||"bm",this.keyName=this.itemCode,this.getOption().itemCode=this.itemCode,this.getOption().idkey=this.getOption().idkey||"id",this.getOption().capkey=this.getOption().capkey||"text",this.getOption().pidkey=this.getOption().pidkey||"pid",this.dataIndexJson={},this.itemIndex=0,this.getOption().multiSelect=this.getBooleanValue(this.getOption().multiSelect,this.multiSelect),this.multiSelect=this.getOption().multiSelect,null==this.getOption().asynInitCount||""===this.getOption().asynInitCount?this.getOption().asynInitCount=50:"string"==typeof this.getOption().asynInitCount&&(this.getOption().asynInitCount=parseInt(this.getOption().asynInitCount,10)),this.lockAutoCheck=!1,this.isTree=!0,this.autoCheckType={autoCheckParent:!1,autoUnCheckParent:!1,autoCheckAllParent:!1,autoUnCheckAllParent:!1,autoCheckAllParentExt:!1,autoUnCheckAllParentExt:!1,autoCheckChild:!1,autoUnCheckChild:!1,autoCheckAllChild:!1,autoUnCheckAllChild:!1,autoCheckBrother:!1,autoUnCheckBrother:!1},this.checkType={all:"all",unall:"unall",rever:"rever"},this.modelState={DEFAULT:1,NEW:4,MODIFY:8,DELETE:2,SELECTED:16},this._lockLog=!1,this._changeSet={deleteList:[],modify:{}},this.filtered=!1,this._filterAll=this.getBooleanValue(this.getOption().filterAll,!1)},setAsynInitCount:function(t){null!=t&&""!==t&&(this.getOption().asynInitCount=parseInt(t,10))},setItemCode:function(t){this.itemCode=t,this.initType="code"},setIDPID:function(t,e){this.getOption().idkey=t,this.getOption().pidkey=e,this.initType="idpid"},setMultiSelect:function(t){this.getOption().multiSelect=t,this.multiSelect=this.getOption().multiSelect},autoCheckParent:function(t){this.autoCheckType.autoCheckParent=this.getBooleanValue(t,!1)},autoUnCheckParent:function(t){this.autoCheckType.autoUnCheckParent=this.getBooleanValue(t,!1)},autoCheckAllParent:function(t){this.autoCheckType.autoCheckAllParent=this.getBooleanValue(t,!1)},autoUnCheckAllParent:function(t){this.autoCheckType.autoUnCheckAllParent=this.getBooleanValue(t,!1)},autoCheckAllParentExt:function(t){this.autoCheckType.autoCheckAllParentExt=this.getBooleanValue(t,!1)},autoUnCheckAllParentExt:function(t){this.autoCheckType.autoUnCheckAllParentExt=this.getBooleanValue(t,!1)},autoCheckChild:function(t){this.autoCheckType.autoCheckChild=this.getBooleanValue(t,!1)},autoUnCheckChild:function(t){this.autoCheckType.autoUnCheckChild=this.getBooleanValue(t,!1)},autoCheckAllChild:function(t){this.autoCheckType.autoCheckAllChild=this.getBooleanValue(t,!1)},autoUnCheckAllChild:function(t){this.autoCheckType.autoUnCheckAllChild=this.getBooleanValue(t,!1)},autoCheckBrother:function(t){this.autoCheckType.autoCheckBrother=this.getBooleanValue(t,!1)},autoUnCheckBrother:function(t){this.autoCheckType.autoUnCheckBrother=this.getBooleanValue(t,!1)},doAutoCheck:function(t){if(!(t=t||this.curNode).checkState&&(t.checkState=!0,null!=t.pNode&&t.pNode.childCheckCount++,!this.lockAutoCheck)){if(null!=t.pNode){if(this.autoCheckType.autoCheckBrother){for(var e=t.pNode,i=0;i<e.count;i++)e.cNode[i].enable&&(e.cNode[i].checkState=!0);e.childCheckCount=e.count}if(this.autoCheckType.autoCheckAllParent)for(e=t.pNode;null!=e&&!e.checkState&&e.enable&&e.childCheckCount==e.count;)e.checkState=!0,null!=e.pNode&&e.pNode.childCheckCount++,e=e.pNode;else if(this.autoCheckType.autoCheckAllParentExt)for(e=t.pNode;null!=e&&!e.checkState;)e.enable&&(e.checkState=!0,null!=e.pNode&&e.pNode.childCheckCount++),e=e.pNode;else if(this.autoCheckType.autoCheckParent){if(t.level>=0&&!t.pNode.checkState)(e=t.pNode).enable&&e.childCheckCount==e.count&&(e.checkState=!0,null!=e.pNode&&e.pNode.childCheckCount++)}}if(this.autoCheckType.autoCheckAllChild){var s=this.beginUpdate(!0),n=this.getCurNode();for(this.select(t),t.childCheckCount=t.count,this.next(!0);!this.isEof()&&this.getLevel()>t.level;)this.curNode.enable&&(this.curNode.checkState=!0,this.curNode.childCheckCount=this.curNode.count),this.next(!0);this.select(n),this.endUpdate(!1,s)}else if(this.autoCheckType.autoCheckChild){for(i=0;i<t.count;i++)t.cNode[i].enable&&(t.cNode[i].checkState=!0);t.childCheckCount=t.count}}},doAutoUnCheck:function(t){if((t=t||this.curNode).checkState&&(t.checkState=!1,null!=t.pNode&&t.pNode.childCheckCount--,!this.lockAutoCheck)){if(null!=t.pNode){if(this.autoCheckType.autoUnCheckBrother){for(var e=t.pNode,i=0;i<e.count;i++)e.cNode[i].enable&&(e.cNode[i].checkState=!1);e.childCheckCount=0}if(this.autoCheckType.autoUnCheckAllParent)for(e=t.pNode;null!=e&&e.checkState;)e.enable&&(e.checkState=!1,null!=e.pNode&&e.pNode.childCheckCount--),e=e.pNode;else if(this.autoCheckType.autoUnCheckAllParentExt)for(e=t.pNode;null!=e&&e.checkState&&e.enable&&0==e.childCheckCount;)e.checkState=!1,null!=e.pNode&&e.pNode.childCheckCount--,e=e.pNode;else this.autoCheckType.autoUnCheckParent&&t.level>=0&&t.pNode.checkState&&t.pNode.enable&&(t.pNode.checkState=!1,null!=e.pNode&&t.pNode.pNode.childCheckCount--)}if(this.autoCheckType.autoUnCheckAllChild){var s=this.beginUpdate(!0),n=this.getCurNode();for(this.select(t),t.childCheckCount=0,this.next(!0);!this.isEof()&&this.getLevel()>t.level;)this.curNode.enable&&(this.curNode.checkState=!1,this.curNode.childCheckCount=0),this.next(!0);this.select(n),this.endUpdate(!1,s)}else if(this.autoCheckType.autoUnCheckChild){for(i=0;i<t.count;i++)t.cNode[i].enable&&(t.cNode[i].checkState=!1);t.childCheckCount=0}}},isChecked:function(t){return(t=t||this.curNode).checkState},isSelected:function(t){return this.isChecked(t)},setCheck:function(t){t=t||this.curNode;this.doAutoCheck(t)},setSelect:function(t){this.setCheck(t)},setUnCheck:function(t){t=t||this.curNode;this.doAutoUnCheck(t)},setUnSelect:function(t){this.setUnCheck(t)},setLockAutoCheck:function(t){this.isEmpty(t)&&(t=!0),"string"==typeof t&&(t=Boolean(t)),this.lockAutoCheck=t},isEof:function(){return 0==this.getAllCount()||this.eof},isBof:function(){return 0==this.getAllCount()||this.bof},getRootNode:function(){return this.rootNode},getRecordChanged:function(){var t=this._changeSet.modify,e=0;for(var i in t){var s=t[i];null!=s.data&&(s.data.modelState&this.modelState.NEW)>0&&e++}return null!=this._changeSet.deleteList&&(e-=this._changeSet.deleteList.length),e},addNode:function(e,i,s){if(e instanceof t.treenode){if(null==s&&(s=!0),0===this.rootNode.getCount())i=this.rootNode;else if(null==i)i=this.curNode;else if(!(i instanceof t.treenode))return!1;if(("down"==this.sortType?i.insertNode(0,e):i.addNode(e))&&(null==e.data&&(e.data={}),!0!==this._lockLog&&(e.data.modelState=this.modelState.NEW,null==this._changeSet.modify[e.recNo]&&(this._changeSet.modify[e.recNo]=e)),s)){if(this.curNode=e,!0!==this._lockLog&&this.isUpdate()&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}this.isUpdate()&&!0===this.hasbind("onEdited")&&this.trigger("onEdited",["add"])}return!0}return!1},insertNode:function(e,i,s,n){if(i instanceof t.treenode){if(null==n&&(n=!0),0===this.rootNode.getCount){if(this.rootNode.addNode(i)&&n){if(this.curNode=i,null==i.data&&(i.data={}),!0!==this._lockLog&&(i.data.modelState=this.modelState.NEW,null==this._changeSet.modify[i.recNo]&&(this._changeSet.modify[i.recNo]=i)),this.isUpdate()&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}this.isUpdate()&&!0===this.hasbind("onEdited")&&this.trigger("onEdited",["insert"])}}else{if(null===s)s=this.curNode.pNode;else if(!(s instanceof t.treenode))return!1;if(s.insertNode(e,i)&&(null==i.data&&(i.data={}),!0!==this._lockLog&&(i.data.modelState=this.modelState.NEW,null==this._changeSet.modify[i.recNo]&&(this._changeSet.modify[i.recNo]=i)),n)){if(this.curNode=i,this.isUpdate()&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}this.isUpdate()&&!0===this.hasbind("onEdited")&&this.trigger("onEdited",["insert"])}}return!0}return!1},delNode:function(e,i){var s=null==e||e==this.curNode.index;if(s&&(e=this.curNode.index),null==i)i=s?this.curNode.pNode:this.curNode;else if(!(i instanceof t.treenode))return!1;if(e>=0&&e<i.getCount()){if(s)if(e>0)for(this.curNode=i.getNode(e-1);this.curNode.getCount()>0&&this.curNode.expanded;)this.curNode=this.curNode.getNode(this.curNode.getCount()-1);else i.level>0?this.curNode=i:i.getCount()>1?(this.curNode=i.getNode(e+1),this.curNode.scrIndex=1):this.curNode=i;var n=i.getNode(e),o=n.data,h=n.recNo;if(n=null,i.delNode(e),!0!==this._lockLog&&(o.modelState!==this.modelState.NEW&&(o.modelState=this.modelState.DELETE,this._changeSet.deleteList.push(o)),null!=this._changeSet.modify[h]&&delete this._changeSet.modify[h],o=null),this.isUpdate()&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}return this.isUpdate()&&!0===this.hasbind("onEdited")&&this.trigger("onEdited",["delete"]),!0}return!1},getChildNode:function(t,e){return(e=e||this.curNode).cNode[t]},getChildIndex:function(t){return(t=t||this.curNode).index},next:function(t){var e=!1,i=this.curNode.scrIndex,s=this.curNode.allCount;if(this.curNode.getCount()>0)if(t||this.curNode.expanded)this.curNode=this.getChildNode(0),e=!0,this.curNode.scrIndex!=i+1&&(this.curNode.scrIndex=i+1);else{for(var n=this.curNode.pNode,o=this.getChildIndex();null!=n;){if(o<n.getCount()-1){this.curNode=this.getChildNode(o+1,n),e=!0;break}o=this.getChildIndex(n),n=n.pNode}e&&this.curNode.scrIndex!=i+s&&(this.curNode.scrIndex=i+s),n=null,o=null}else{for(n=this.curNode.pNode,o=this.getChildIndex();null!=n;){if(o<n.getCount()-1){this.curNode=this.getChildNode(o+1,n),e=!0;break}o=this.getChildIndex(n),n=n.pNode}e&&this.curNode.scrIndex!=i+s&&(this.curNode.scrIndex=i+s),n=null,o=null}if(this.isUpdate()&&e&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}return this.bof=!1,this.eof=!e,e},lastNode:function(t,e){for(null==t&&(t=this.rootNode);t.getCount()>0&&(t.expanded||!0===e);)t=this.getChildNode(t.getCount()-1,t);return t},last:function(t){var e=this.curNode.recNo;if(this.curNode=this.lastNode(this.rootNode,t),this.isUpdate()&&e!=this.curNode.recNo&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}return this.curNode.scrIndex=this.getAllCount(),this.bof=!1,this.eof=!0,!0},prior:function(t){var e=!1;if(0==this.getChildIndex())this.curNode.level>0&&(this.curNode=this.curNode.pNode,e=!0);else{var i=this.curNode.pNode;this.curNode=this.lastNode(this.getChildNode(this.getChildIndex()-1,i),t),e=!0}if(this.isUpdate()&&e&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}return this.bof=!e,this.eof=!1,e},first:function(){var t=this.curNode.recNo;if(this.rootNode.getCount()>0?this.curNode=this.getChildNode(0,this.rootNode):this.curNode=this.rootNode,this.isUpdate()&&t!=this.curNode.recNo&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}return this.bof=!0,this.eof=!1,!0},gotoParent:function(t){if(this.curNode.level>0){if(null==t)this.curNode=this.curNode.pNode;else{for(var e=this.curNode;null!=e&&e.level>=0&&e.level>t;)e=e.pNode;null!=e&&(this.curNode=e)}if(this.isUpdate()&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}this.bof=!1,this.eof=!1}return!0},gotoChild:function(t,e){if(null==e&&(e=this.curNode),t>=0&&t<e.getCount()){if(this.curNode=this.getChildNode(t,e),this.isUpdate()&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}this.bof=!1,this.eof=!1}return!0},select:function(e){if(e instanceof t.treenode&&e.recNo!=this.curNode.recNo&&(this.curNode=e,this.isUpdate()&&"function"==typeof this.onChanged))try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}this.bof=!1,this.eof=!1},expandToNode:function(t){if(null!=t)for(var e=t.pNode;null!=e&&e.level>=0;)!0!==e.expanded&&e.expand(),e=e.pNode},expand:function(){this.curNode.expand(),this.curRecNo=this.curNode.recNo},isExpand:function(t){return null!=(t=t||this.curNode)&&!0===t.expanded},beginUpdate:function(t){return null==this._updates&&(this._updates=[]),!0===t?((null==this._updateIndex||this._updateIndex>=10)&&(this._updateIndex=0),this._updateIndex++,this._updates[this._updateIndex]=!1):this._updates[0]=!1,this._updateIndex},isUpdate:function(){for(var t=!0,e=0;e<=10;e++)t=t&&!1!==this._updates[e];return t},clearUpdate:function(){this._updates=[]},endUpdate:function(t,e){if(this._updates[e||0]=!0,0!=t&&this.isUpdate()&&this.curRecNo!=this.curNode.recNo&&"function"==typeof this.onChanged)try{this.onChanged(this)}catch(t){this.logError("onChanged error:"+t.message)}},_asynFullExpand:function(t,e,i,s,n){this.logInfo("_asynFullExpand:"+t.recNo);var o=0,h=this.beginUpdate(!0),l=this.curNode;for(this.select(e);!this.isEof()&&o<s&&(this.getLevel()>t.level||t.recNo==this.getRecNo());)this.curNode.expanded||(this.curNode.expanded=!0,this.curNode.visibleCount=this.curNode.allCount),o++,this.next();if(!this.isEof()&&this.getLevel()>t.level){e=this.curNode,this.select(l),this.endUpdate(!1,h);var a=this;setTimeout(function(){a._asynFullExpand(t,e,i,s,n),a=null},10)}else{if(t.level>=0)for(var r=t.allCount-i,d=t.pNode;null!=d&&d.expanded&&r>0;)d.visibleCount+=r,d=d.pNode;t.expanded=!0,t.visibleCount=t.allCount,this.select(l),this.endUpdate(!1,h),"function"==typeof n&&n()}},fullExpand:function(t,e){"function"==typeof t&&(e=t,t=null);var i=this.beginUpdate(!0);null==t&&((t=this.rootNode).scrIndex=0),this.endUpdate(!1,i);var s=t.expanded?t.visibleCount:1;this._asynFullExpand(t,t,s,100,e),t.level<0?this.first():null!=t.level&&this.select(t)},deleteAllItem:function(t,e){if("function"==typeof t&&(e=t,t=null),null==t&&(t=this.curNode),t.level>=0)if(t.getCount()>0){var i=this;this.fullExpand(t,function(){var s=i.beginUpdate(!0),n=i.lastNode(t);for(i.select(n);t.level<i.getLevel();)i.delRecord();i.delRecord(),i.endUpdate(!1,s),"function"==typeof e&&e()})}else{var s=i.beginUpdate(!0);i.delRecord(),i.endUpdate(!1,s),"function"==typeof e&&e()}else"function"==typeof e&&e()},collapse:function(){this.curNode.collapse()},_asnyFullCollapse:function(t,e,i,s){if(this.getAllCount()>0){null==t&&(t=this.rootNode),null==e&&(e=t.cNode[0]),this.logInfo("_asnyFullCollapse:"+t.recNo);var n=this.beginUpdate(!0);this.select(e);for(var o=0;!this.isEof()&&this.getLevel()>t.level&&o<i;){(e=this.getCurNode()).expanded=!1,e.visibleCount=e.count+1,e=null,this.next(!0),o++}if(this.endUpdate(!1,n),!this.isEof()&&this.getLevel()>t.level){var h=this;e=this.getCurNode(),setTimeout(function(){h._asnyFullCollapse(t,e,i,s),h=null},10)}else t.visibleCount=t.count+1,"function"==typeof s&&s.apply(this)}else"function"==typeof s&&s()},fullCollapse:function(t){this.each(function(t){t.expanded=!1,t.visibleCount=t.count+1},function(){this.rootNode.visibleCount=this.rootNode.count+1,"function"==typeof t&&t()})},getTopNode:function(){return this.getAllCount()>0?this.rootNode.getNode(0):this.rootNode},getNode:function(e,i,s){return null==s&&(s=!0),i instanceof t.treenode||(i=this.curNode),i.getNode(e)},getCurNode:function(){return this.curNode},getParentNode:function(t){return null==t&&(t=this.getCurNode()),t.pNode},getCount:function(t){return null==t&&(t=this.curNode),t.getCount()},getAllCount:function(){return this.rootNode.allCount-1},length:function(){return this.getAllCount()},getVisibleCount:function(){return this.rootNode.visibleCount-1},_asynEmptyNode:function(t,e,i,s,n){if(this.logInfo("_asynEmptyNode"),null==s&&(s=[]),null==e&&(e=t),t.count>0){var o,h=e;null==i&&(i=t,h=t.cNode[0]);for(var l=0;null!=i&&l<10;)h.count>0?(null!=i&&s.push(i),i=h,h=h.cNode[0]):(o=h.index,h.destroy(),o<i.count-1?h=i.cNode[o+1]:(i.count=0,h=i,i=s.length>0?s.pop():null)),l++;if(e=null,null!=i){var a=this;setTimeout(function(){a._asynEmptyNode(t,h,i,s,n),a=null},10)}else h.destroy(),h=null,t=null,s=null,"function"==typeof n&&n()}else t.destroy(),t=null,s=null,"function"==typeof n&&n()},empty:function(e){var i=this.rootNode;this.rootNode=new t.treenode,this.rootNode.level=-1,this.curNode=this.rootNode,this._updates=[],this.eof=!1,this.bof=!0,this._asynEmptyNode(i,null,null,null,e)},getId:function(t){return null==t&&(t=this.curNode),t.id},getText:function(t){return null==t&&(t=this.curNode),t.text},getItemCode:function(t){return null==t&&(t=this.curNode),t.fullcode},setId:function(t,e){null==e&&(e=this.curNode),e.data[this.getOption().idkey]=t,e.id=t},setText:function(t,e){null==e&&(e=this.curNode),e.data[this.getOption().capkey]=value,e.text=value},getValue:function(e,i){if(e instanceof t.treenode&&(i=e,e=null),null==i&&(i=this.curNode),i.level>=0&&null!=i.data&&null!=e){var s="";if(!0===this.getOption().fullPath)for(var n=i.pNode;n.level>=0;)s=n.data[e]+"."+s,n=n.pNode;return s+i.data[e]}if(i.level>=0&&null==e){s="";if(!0===this.getOption().fullPath)for(n=i.pNode;n.level>=0;)s=n.id+"."+s,n=n.pNode;return s+i.id}return""},_asynSetItemList:function(e,i,s,n,o,h,l){this.logBegin("_asynSetItemList:field:pCode:"+i+",index:"+n);for(var a,r,d,u=this.beginUpdate(!0),c=this.curNode,g=e.length,p=n,f=0,y=this.getOption().asynInitCount;p<g&&f<y&&this.setNo==h;){if(a=e[p],(r=new t.treenode).id=a[this.getOption().idkey],r.text=a[this.getOption().capkey],r.scrIndex=p+1,r.data=a,0==this.isTree)null!=o&&o>=0&&o<s.getCount()?(this.insertNode(o,r,s),o++):this.addNode(r,s);else if("idpid"===this.initType){var m=a[this.getOption().pidkey],C=a[this.getOption().idkey];for(r.id=C,r.pid=m,null==s&&(s=this.rootNode);s.id!=r.pid&&s.level>=0;)s=s.pNode;null!=o&&o>=0&&o<s.getCount()?(this.insertNode(o,r,s),o++):this.addNode(r,s),s=r}else{d=String(a[this.itemCode]),r.fullcode=d;var S=d.length,x=i.length,_=r.fullcode||"";if(0===x)null!=o&&o>=0&&o<s.getCount()?(this.insertNode(o,r,s),o++):this.addNode(r,s),_=_.replace(s.fullcode,""),i=d,s=r;else if(0===d.indexOf(i)&&x<S)null!=o&&o>=0&&o<s.getCount()?(this.insertNode(o,r,s),o++):this.addNode(r,s),_=_.replace(s.fullcode,""),i=d,s=r;else{for(s=s.pNode;null!=s&&!(0==(x=(i=s.fullcode||"").length)||x<S&&0===d.indexOf(i));)s=s.pNode;null==s&&(s=this.rootNode),x!=S&&(null!=o&&o>=0&&o<s.getCount()?(this.insertNode(o,r,s),o++):this.addNode(r,s),_=_.replace(s.fullcode,""),i=d,s=r)}r.code=_}f++,p++}if(this.endUpdate(!1,u),this.curNode=c,this.setNo==h)if(this.logEnd("end _asynSetItemList count:"+f),p<g){var b=this;setTimeout(function(){b._asynSetItemList(e,i,s,p,o,h,l),b=null},5)}else"function"==typeof l&&l(),a=null,r=null,s=null},getLevel:function(){return this.curNode.level},getNewCode:function(t){if(null==t.maxCode){t.maxCode=0,t.codeLen=4;var e=t.getCount();if(e>0){var i=t.getNode(e-1).code;t.codeLen=i.length,t.maxCode=parseInt(i,10)}}t.maxCode++;for(var s=t.maxCode+"",n=s.length;n<t.codeLen;n++)s="0"+s;return s},newItemCode:function(t,e){if(this.isArray(t)&&t.length>0){var i=e.fullcode,s=t[0][this.itemCode],n=this.getNewCode(e);t[0][this.itemCode]=n;for(var o=1;o<len;o++){var h=t[o][this.itemCode];h.indexOf(s)>=0?h=h.replace(s,i+n):(s=h,h=i+this.getNewCode(e)),t[o][this.itemCode]=h}return!0}return!1},sortItemList:function(t,e){if(this.logBegin("begin sort item list"),!1===this.getOption().initSort||!1===this.initSort||!1===this.isTree)return t;var i={},s=[],n=null;if("code"===this.initType){for(var o=t.length,h=[],l=0;l<o;l++){var a=(n=t[l])[this.itemCode];h[l]=a,i[a]=n}h.sort();for(l=0;l<o;l++){var r=h[l];s.push(i[r])}h=null}else{o=t.length;var d={},u={};for(l=0;l<o;l++){var c=(n=t[l])[this.getOption().idkey],g=n[this.getOption().pidkey],p={id:c,pid:g,index:l,state:0,cn:[]};d[c]=p,null!=d[g]?(d[g].cn.push(p),d[c]=p,p.state=1):null!=u[g]?(u[g].cn.push(p),d[c]=p,p.state=1):u[c]=p}for(var c in u){0==(p=u[c]).state&&(null!=d[p[this.getOption().pidkey]]?(d[p[this.getOption().pidkey]].cn.push(p),d[p[this.getOption().idkey]]=p,p.state=0):u[p[this.getOption().pidkey]]?(u[p[this.getOption().pidkey]].cn.push(p),d[p[this.getOption().idkey]]=p,p.state=1):d[p[this.getOption().idkey]]=p)}var f=[];for(var c in d)(d[c].state=0)&&f.push(d[c])}return n=null,i=null,this.logEnd("end sort item list"),s},setItemList:function(t,e){if(this.getAllCount()>0&&this.empty(!0),this.isArray(t)){this.itemList=t;var i=this.sortItemList(t,!0),s=this;this._lockLog=!0,null==this.setNo?this.setNo=1:this.setNo++;var n=this.setNo;this._changeSet={deleteList:[],modify:{}},this._asynSetItemList(i,"",this.rootNode,0,null,n,function(){var t=s.beginUpdate(!0);s.first(),s.endUpdate(!1,t),s._lockLog=!1,s=null,"function"==typeof e&&e()})}else"function"==typeof e&&e()},_getDataIndex:function(t){var e=this.getKeyValue(t);return this.dataIndexJson[e]},insertItemList:function(t,e,i,s,n){if(null==i&&(i=this.curNode),-1==i.level&&(i.scrIndex=0),i.expand(),this.isArray(e)){var o=this.sortItemList(e,!1);s&&this.newItemCode(o,i);var h="";i.level>=0&&(h=this.getValue(this.itemCode,i)),null==this.setNo?this.setNo=1:this.setNo++;var l=this.setNo;this._asynSetItemList(o,h,i,0,t,l,n)}else"object"==(void 0===e?"undefined":_typeof(e))&&this.insertChildItem(t,e,i,s),"function"==typeof n&&n()},appendItemList:function(t,e,i,s){if(null==e&&(e=this.curNode),-1==e.level&&(e.scrIndex=0),e.expand(),this.isArray(t)){var n=this.sortItemList(t,!1);if(i&&this.newItemCode(n,e),this.storeData){var o=e.getNode(e.getCount()-1),h=this.itemIndex;this.isEmpty(o)?h=e.level<0?0:this._getDataIndex(e.data):null==(h=this._getDataIndex(o.data))&&(h=this.itemIndex),this.itemIndex=h}var l="";e.level>=0&&(l=this.getValue(this.itemCode,e)),null==this.setNo?this.setNo=1:this.setNo++;var a=this.setNo;this._asynSetItemList(n,l,e,0,null,a,s)}else"object"==(void 0===t?"undefined":_typeof(t))&&this.appendChildItem(t,e,i),"function"==typeof s&&s()},insertItem:function(t,e,i,s){null==i&&(i=this.curNode);var n=i.pNode;null==n&&(n=this.rootNode),null==t&&("down"==this.sortType||"up"==this.sortType?(t=i.scrIndex-1,"down"==this.sortType&&(t=n.count-t)):t=i.index),this.insertChildItem(t,e,n,s)},insertChildItem:function(e,i,s,n){null==s&&(s=this.curNode);var o=new t.treenode;if(null==i&&((i={})[this.itemCode]=""),n&&(i[this.itemCode]=s.fullcode+this.getNewCode(s)),e<0?e=0:(null==e||e>s.getCount())&&(e=s.getCount()),o.id=i[this.getOption().idkey],o.text=i[this.getOption().capkey],o.fullcode=String(i[this.itemCode]),o.code=o.fullcode.replace(s.fullcode,""),o.scrIndex=s.scrIndex+e+1,this.storeData){o.data=i;var h=0;if(s.getCount()>0){var l=s.getNode(s.getCount()-1);h=this.isEmpty(l)?s.level<0?0:this._getDataIndex(s.data):this._getDataIndex(l.data)}else s.level>=0&&(h=this._getDataIndex(s.data));this.itemIndex=h}this.insertNode(e,o,s,!0)},appendItem:function(t,e,i){null==e&&(e=this.curNode);var s=e.pNode;null==s&&(s=this.rootNode),this.appendChildItem(t,s,i)},appendChildItem:function(e,i,s){null==i&&(i=this.curNode);var n=new t.treenode;if(null==e&&((e={})[this.itemCode]=""),s&&(e[this.itemCode]=i.fullcode+this.getNewCode(i)),n.id=e[this.getOption().idkey],n.text=e[this.getOption().capkey],n.fullcode=String(e[this.itemCode]),n.code=n.fullcode.replace(i.fullcode,""),"down"===this.sortType?n.scrIndex=1:n.scrIndex=i.scrIndex+i.getCount()+1,this.storeData){n.data=e;var o=0;if(i.getCount()>0){var h=i.getNode(i.getCount()-1);o=this.isEmpty(h)?i.level<0?0:this._getDataIndex(i.data):this._getDataIndex(h.data)}else i.level>=0&&(o=this._getDataIndex(i.data));this.itemIndex=o}this.addNode(n,i,!0)},delRecord:function(t){return this.deleteItem(t)},deleteItem:function(t){null==t&&(t=this.curNode);var e=!1;if(t.level>=0&&t.isLeaf()){var i=t.index,s=(t.data,this.curNode),n=null,o=t.pNode,h=!1;for(var l in o.sortState)if(o.sortState[l]){h=!0;break}!0===h&&o.count>1&&(this.select(t),this.getIndex()>1?this.prior():this.next(),n=this.getCurNode(),this.select(s)),this.delNode(i,t.pNode)&&(this._hasDelete=!0,e=!0,null!=n&&this.select(n))}return e},getRecNo:function(){return this.curNode.recNo},getIndex:function(t){return null==t&&(t=this.curNode),t.scrIndex},getDisplay:function(e,i){e instanceof t.treenode&&(i=e,e=null),null==i&&(i=this.getCurNode());var s=i.text;if(!0===this.getOption().fullPath){for(var n="",o=i.pNode;o.level>=0;)n=o.text+"\\"+n,o=o.pNode;s=n+s}return this.getOption().fullCaption&&null!=i.data&&(s=i.data[this.getOption().fullCaption]),s},indexOfText:function(t){if(null==t||""===t)return null;for(this.savemark(),this.first();!this.isEof();){var e=this.getCurNode();if(t===e.text||t===this.getDisplay(e))return this.loadmark(!1),e;this.next(!0)}return this.loadmark(!1),null},_compareLocateText:function(t,e,i){var s=!1,n=this.getDisplay(t)+"",o=this.getValue(t)+"";return(e&&(n==i||o==i)||!e&&(n.indexOf(i)>=0||o.indexOf(i)>=0))&&(s=!0),s},locateDesc:function(t,e,i,s,n){i=this.getBooleanValue(i,!1);this.getCurNode();var o=!1;if(t=this.trim(t+""),"@INDEX"==e)this.eachExt({desc:!0},function(e){var i=this.getIndex();if(t==i)return o=!0,!1},function(t){o&&(this.select(t),this.expandToNode(t)),"function"==typeof n&&n.apply(this,[o])});else if(!0===s&&(o=o||this._compareLocateText(e,i,t)),!0!==o){var h=this.getCurNode(),l=null;h.scrIndex>1?(this.prior(),l=this.getCurNode()):l=this.rootNode,this.eachExt({startNode:l,desc:!0},function(s){return!(o=o||this._compareLocateText(e,i,t))},function(s){o?(this.select(s),this.expandToNode(s),"function"==typeof n&&n.apply(this,[o])):this.eachExt({endNode:h,desc:!0},function(s){return!(o=o||this._compareLocateText(e,i,t))},function(t){o&&(this.select(t),this.expandToNode(t)),"function"==typeof n&&n.apply(this,[o])})})}},locate:function(t,e,i,s){i=this.getBooleanValue(i,!1);var n=this.getCurNode(),o=!1;if(t+="",t=this.trim(t),"@INDEX"==e){var h=this.beginUpdate(!0);for(this.first();!this.isEof();){if(t==(a=this.getIndex())){o=!0;break}this.next()}!1===o&&this.select(n),this.endUpdate(!1,h)}else{h=this.beginUpdate(!0);this.getCurNode().level<0&&this.first();var l=this._textToTag(t);if(!0===s){var a=this.getDisplay(e)+"",r=this.getValue(e)+"";(i&&(a==t||r==t||a==l||r==l)||!i&&(a.indexOf(t)>=0||r.indexOf(t)>=0||a.indexOf(l)>=0||r.indexOf(l)>=0))&&(o=!0)}if(!0!==o){for(this.isExpand()||this.expand(),this.next();!this.isEof();){a=this.getDisplay(e)+"",r=this.getValue(e)+"";if(i&&(a==t||r==t||a==l||r==l)||!i&&(a.indexOf(t)>=0||r.indexOf(t)>=0||a.indexOf(l)>=0||r.indexOf(l)>=0)){o=!0;break}this.isExpand()||this.expand(),this.next()}if(this.isEof())for(this.first();!this.isEof()&&this.getIndex()<n.getIndex();){a=this.getDisplay(e)+"",r=this.getValue(e)+"";if(i&&(a==t||r==t||a==l||r==l)||!i&&(a.indexOf(t)>=0||r.indexOf(t)>=0||a.indexOf(l)>=0||r.indexOf(l)>=0)){o=!0;break}this.isExpand()||this.expand(),this.next()}}this.endUpdate(!1,h)}return o},_asynExpandToLevel:function(t,e,i,s){this.logInfo("_asynFullExpand:"+e.recNo);var n=0,o=this.beginUpdate(!0),h=this.curNode;for(this.select(e);this.next(!0)&&(this.curNode.level<=i?this.curNode.expand():this.curNode.expanded&&this.getCurNode().collapse(),!(++n>=t)););if(e=this.curNode,n=null,this.isEof())this.select(h),this.endUpdate(!1,o),"function"==typeof s&&s();else{this.select(h),this.endUpdate(!1,o);var l=this;setTimeout(function(){l._asynExpandToLevel(t,e,i,s),l=null},10)}},expandToLevel:function(t,e){if(this.isEmpty(t))t=0;else if("string"!=typeof t||isNaN(t)){if(isNaN(t))return"function"==typeof e&&e(),!1}else t=parseInt(t,10);return this._asynExpandToLevel(1e3,this.rootNode,t,e),!0},checkAll:function(t,e){"function"==typeof t&&(e=t,t=null),this.each(t,function(t){!1!==t.enable&&this.setCheck(t)},e)},selectAll:function(t,e){this.checkAll(t,e)},unCheckAll:function(t,e){"function"==typeof t&&(e=t,t=null),this.each(t,function(t){!1!==t.enable&&this.setUnCheck(t)},e)},unSelectAll:function(t,e){this.unCheckAll(t,e)},reverCheckAll:function(t,e){"function"==typeof t&&(e=t,t=null),this.each(t,function(t){t.checkState?this.setUnCheck(t):this.setCheck(t)},e)},reverSelectAll:function(t,e){this.reverCheckAll(t,e)},getKeyName:function(){if("string"==typeof this.keyName)return this.keyName;this.isArray(this.keyName)&&this.keyName.join("_")},getKeyValue:function(t){if("object"==(void 0===t?"undefined":_typeof(t))){if("string"==typeof this.keyName)return t[this.keyName];if(this.isArray(this.keyName)){for(var e=[],i=0,s=this.keyName.length;i<s;i++)e[i]=t[this.keyName[i]];return e.join("_")}}},setEnableCheck:function(t,e){null==e&&(e=this.curNode),e.enable=t},setEnableSelect:function(t,e){this.setEnableCheck(t,e)},_asynEachFunc:function(t,e,i,s,n,o,h){this.logInfo("_asynEachFunc:");var l=0,a=this.beginUpdate(!0),r=this.curNode;this.select(n);var d=!0,u=0;if(e){for(;!this.isBof()&&l<i&&(this.getLevel()>s.level||this.getRecNo()==s.recNo);){this._hasDelete=!1;var c=this.getCurNode();u=this.getIndex();try{if("break"===(g=t.apply(this,[c]))||"Break"===g||!1===g){d=!1;break}}catch(t){this.logError("[EACH ERROR!]:"+t.message),d=!1}if(null!=o&&c.recNo==o.recNo){d=!1;break}c=null,this._hasDelete||this.prior(!0),l++}d=d&&!this.isBof()&&(this.getLevel()>s.level||this.getRecNo()==s.recNo)}else{for(this.curNode.level<0&&this.next(!0);!this.isEof()&&l<i&&(this.getLevel()>s.level||this.getRecNo()==s.recNo);){this._hasDelete=!1;c=this.getCurNode();u=this.getIndex();try{var g;if("break"===(g=t.apply(this,[c]))||"Break"===g||!1===g){d=!1;break}}catch(t){this.logError("[EACH ERROR!]:"+t.message),d=!1}if(null!=o&&c.recNo==o.recNo){d=!1;break}c=null,this._hasDelete&&this.getAllCount()>0?u>1&&this.next(!0):this.next(!0),l++}d=d&&!this.isEof()&&(this.getLevel()>s.level||this.getRecNo()==s.recNo)}if(n=this.curNode,l=null,d){!0!==r._hasDestroy&&this.select(r),this.endUpdate(!1,a);var p=this;setTimeout(function(){p._asynEachFunc(t,e,i,s,n,o,h),p=null},10)}else{var f=this.getCurNode();!0!==r._hasDestroy&&this.select(r),this.endUpdate(!1,a),"function"==typeof h&&h.apply(this,[f])}},eachChecked:function(t,e,i,s){if(this.multiSelect){var n=void 0===t?"undefined":_typeof(t),o=void 0===i?"undefined":_typeof(i);if("function"===n){var h=void 0===e?"undefined":_typeof(e);"function"===h?(i=!1,s=e):"boolean"===h&&("function"===o&&(s=i),i=e),e=t,t=this.rootNode}else"object"==n&&"function"===o&&(s=i,i=!1);if(i)var l=this.lastNode(t,!0);else l=t;this._asynEachFunc(function(t){if(this.isChecked())return e.apply(this,[t])},i,100,t,l,null,s)}},eachSelected:function(t,e,i,s){this.eachChecked(t,e,i,s)},forEach:function(t,e,i,s){this.each(t,e,i,s)},each:function(t,e,i,s){var n=void 0===t?"undefined":_typeof(t),o=void 0===i?"undefined":_typeof(i);if("function"===n){var h=void 0===e?"undefined":_typeof(e);"function"===h?(i=!1,s=e):"boolean"===h&&("function"===o&&(s=i),i=e),e=t,t=this.rootNode}else"object"==n&&"function"===o&&(s=i,i=!1);if(i)var l=this.lastNode(t,!0);else null==t&&(t=this.rootNode),l=t;this._asynEachFunc(e,i,100,t,l,null,s)},eachExt:function(t,e,i){"function"==(void 0===t?"undefined":_typeof(t))&&(i=e,e=t,t=null),null==t&&(t={});var s=!1,n=t.parentNode;null==n&&(n=this.rootNode),null==(l=t.startNode)&&(l=this.rootNode,s=!0);var o=t.endNode,h=this.getBooleanValue(t.desc,!1);if(h&&(s||l.level<0))var l=this.lastNode(this.rootNode,!0);this._asynEachFunc(e,h,100,n,l,o,i)},isEnableCheck:function(t){return null==t&&(t=this.curNode),t.enable},getEnableSelect:function(t){return this.isEnableCheck(t)},getCheckedData:function(){this.getCurNode();this.first();for(var t=[];!this.isEof();)this.isChecked()&&t.push(this.getCurNode()),this.next(!0);return t},getSelectedData:function(){return this.getCheckedData()},setSelectById:function(t,e){if(!0===this.multiSelect){var i=[],s=t;if("string"==typeof s&&(s=s.split(",")),s.length>0){for(var n={},o=0,h=s.length;o<h;o++)n[s[o]]=!0;this.each(function(t){if(!0===this.isEnableCheck(t)){var e=this.getId(t);!0===n[e]&&(!0!==this.isChecked(t)&&this.setCheck(t),i.push(t))}},function(){"function"==typeof e&&e(i)})}else"function"==typeof e&&e(i)}else this.locate(t,this.getOption().idkey,!0,!0),"function"==typeof e&&e([this.getCurNode()])},setSelectByText:function(t,e){if(!0===this.multiSelect){var i=[],s=t;if("string"==typeof s&&(s=s.split(",")),s.length>0){for(var n={},o=0,h=s.length;o<h;o++)n[s[o]]=!0;this.each(function(t){if(!0===this.isEnableCheck(t)){var e=this.getDisplay(t),s=this._tagToText(e);if(!0===n[e]||!0===n[s]){if(!0!==this.isChecked(t)){var o=this.lockAutoCheck;this.lockAutoCheck=!0,this.setCheck(t),this.lockAutoCheck=o}i.push(t)}}},function(){"function"==typeof e&&e(i)})}else"function"==typeof e&&e(i)}else null!=t&&""!==t&&(this.locate(t,this.getOption().capkey,!0,!0),"function"==typeof e&&e([this.getCurNode()]))},_emptyFilterItem:function(){this.filterStack=[]},clearFilterText:function(t){this.filtered?(this._emptyFilterItem(),this.setFiltered(!1,t)):"function"==typeof t&&t()},addFilterText:function(t,e,i){"function"==typeof e&&(i=e,e=!1),"string"==typeof t&&(t={sel:t}),this.filterStack.push(t),e?this.setFiltered(e,i):"function"==typeof i&&i()},doFilter:function(t){if(this.filtered){var e=this;this._asynResetFilterNode(null,null,1e3,!0,function(){e.filtered=!0,e.getAllCount()>0?e._asynFilterNode(null,null,500,!0,null,t):"function"==typeof t&&t()})}else this.filtered=!0,this.getAllCount()>0?this._asynFilterNode(null,null,500,!0,null,t):"function"==typeof t&&t()},setFiltered:function(t,e){var i=this;t?this.hasbind("onServerFilter")?this.trigger("onServerFilter",[t,this.filterStack,e]):this.doFilter(function(){i.first(),i.getCurNode().scrIndex=1,"function"==typeof e&&e()}):this.hasbind("onServerFilter")?this.trigger("onServerFilter",[t,this.filterStack,e]):this._asynResetFilterNode(null,null,1e3,!0,function(){i.filtered=!1,i.first(),"function"==typeof e&&e()})},_getFilterState:function(t){null==t&&(t=this.curNode);for(var e=!0,i=0,s=this.filterStack.length;i<s&&e;i++){var n=this.filterStack[i],o=n.sel,h=t.text||"",l=t.id||"";""===h&&(h="("+this.getI18n("qzz.empty","空白")+")"),"string"!=typeof h&&(h+=""),"string"!=typeof l&&(l+=""),-1!=l.indexOf(o)&&!0!==this.getOption().filterTextOnly||-1!=h.indexOf(o)||(e=!1),n=null}return!e},_asynResetFilterNode:function(t,e,i,s,n){this.logInfo("_asynResetFilterNode:"),null==t&&(t=this.rootNode).loadState(),null==e&&(e=this.getChildNode(0,t));var o=this.getCurNode(),h=this.beginUpdate(!0);this.select(e);for(var l=0;!this.isEof()&&l<i&&this.getLevel()>t.level;)this.getCurNode().loadState(),this.next(!0),l++;if(e=this.getCurNode(),!this.isEof()&&this.getLevel()>t.level){var a=this;this.select(o),this.endUpdate(!1,h),setTimeout(function(){a._asynResetFilterNode(t,e,i,s,n),a=null},10)}else this.select(o),this.endUpdate(!1,h),"function"==typeof n&&n.apply(this)},_asynFilterNode:function(t,e,i,s,n,o){this.logInfo("_asynFilterNode:"),null==t&&(t=this.rootNode).saveState();var h=n;null==h&&(h=[]);var l=e;t.sortState={},null==l&&(l=this.getChildNode(0,t));var a=this.getCurNode(),r=this.beginUpdate(!0);this.select(l);for(var d=0,u=h.length,c=!1;!this.isEof()&&d<i&&this.getLevel()>t.level;){l=this.getCurNode(),c=!1,!this._filterAll&&u>0&&l.level<=h[u-1].level&&(l=h.pop(),this.select(l),c=!0,u--);var g=l.filterState;if(g||0!=c||l.saveState(),!this._filterAll&&l.getCount()>0)h.push(l),u++,p=!1;else{var p=this._getFilterState(l);this.hasbind("onFilter")&&(p=this.trigger("onFilter",[this,p])),this._filterAll||p||(h=[],u=0)}if(l.sortState={},this.next(!p),p){var f=l.pNode;if((!g||c)&&f.getCount()>l.index)for(var y=l.index+1;y<f.getCount();y++)f.cNode[y].saveState();null!=a&&a.recNo==l.recNo&&(a=null),l.pNode.delNode(l.index,!1)}this.isEof()&&u>0&&(l=h.pop(),this.select(l),u--),d++}if(l=this.getCurNode(),!this.isEof()&&this.getLevel()>t.level){null!=a&&this.select(a),this.endUpdate(!1,r);var m=this;setTimeout(function(){m._asynFilterNode(t,l,i,s,h,o),m=null},10)}else null!=a&&this.select(a),this.endUpdate(!1,r),h=null,"function"==typeof o&&o.apply(this)},getChangeSet:function(){var t=[];for(var e in t=t.concat(this._changeSet.deleteList),this._changeSet.modify){var i=this._changeSet.modify[e];null!=i.data&&((i.modelState&this.modelState.NEW)>0&&(i.data._index=i.index),t.push(i.data))}return t},getEcpChangeSet:function(){var t={},e=[];for(var i in this._changeSet.modify){var s=this._changeSet.modify[i];null!=s.data&&e.push(s.data)}return t.list=e,null!=this._changeSet.deleteList&&this._changeSet.deleteList.length>0&&(t.deleteList=this._changeSet.deleteList),t},mergeChangeLog:function(t){this._changeSet.deleteList=[];var e="";for(var i in this._changeSet.modify){var s=this._changeSet.modify[i];if(null!=t){if(t.recNo==s.recNo){s.data.modelState=this.modelState.DEFAULT,s.data._oldValue={},e=i;break}}else s.data.modelState=this.modelState.DEFAULT,s.data._oldValue={}}null!=e&&""!==e?delete this._changeSet.modify[e]:this._changeSet.modify={}},mergeSomeChangeLog:function(t,e){this._changeSet.deleteList=[];var i="";for(var s in this._changeSet.modify){var n=this._changeSet.modify[s];if(this.getValue(t,n)==e){n.data.modelState=this.modelState.DEFAULT,n.data._oldValue={},i=s;break}}null!=i&&""!==i&&delete this._changeSet.modify[i]},isLeaf:function(t){return null==t&&(t=this.getCurNode()),t.isLeaf()},mulMoveNode:function(t,e){var i=[],s=t>=0,n={};this.eachChecked(function(e){i.push(e),null==n[e.level]&&(n[e.level]=t);var o=e.pNode;if(!0===s&&e.index+1<o.count&&!0!==o.cNode[e.index+1].checkState||!1===s&&e.index>0&&!0!==o.cNode[e.index-1].checkState)var h=this.moveNode(n[e.level],e,!0);h.toIndex!=h.fromIndex&&(n[e.level]=h.toIndex-h.fromIndex)},s,function(){"function"==typeof e&&e(t,i)})},moveNode:function(t,e,i){this.isEmpty(t)&&(t=1),"string"==typeof t&&(t=isNaN(t)?1:parseInt(t,10)),null==e&&(e=this.getCurNode());var s=e.pNode,n=e.index,o=(e.scrIndex,n+t);if(o<0?o=0:o>s.getCount()-1&&(o=s.getCount()-1),n!=o){var h=s.getNode(o).scrIndex;if(n>o)for(var l=n;l>o;l--)s.cNode[l-1].scrIndex++,s.cNode[l-1].index=l,s.cNode[l]=s.cNode[l-1];else for(l=n;l<o;l++)s.cNode[l+1].scrIndex--,s.cNode[l+1].index=l,s.cNode[l]=s.cNode[l+1];if(e.scrIndex=h,e.index=o,s.cNode[o]=e,!0===i&&n>0){var a=s.getNode(n);this.select(a)}}return{fromIndex:n,toIndex:o}},savemark:function(){this._markNode=this.curNode,this.beginUpdate()},loadmark:function(t){this.select(this._markNode),this.endUpdate(!0===t)},upgrade:function(t,e){"function"==typeof t&&(e=t,t=null),null==t&&(t=this.curNode);var i=t.pNode;if(i.level>=0){var s=i.pNode;i.delNode(t.index,!1),this.each(t,function(e){if(e.recNo==t.recNo)return!1;e.level--},!0,function(){s.insertNode(i.index+1,t),"function"==typeof e&&e.apply(this,[i,s,t])})}},degrade:function(t,e){"function"==typeof t&&(e=t,t=null),null==t&&(t=this.curNode);var i=t.pNode;if(t.index>0){var s=i.getNode(t.index-1);i.delNode(t.index,!1),this.each(t,function(e){if(t.recNo==e.recNo)return!1;e.level++},!0,function(){s.addNode(t),"function"==typeof e&&e.apply(this,[i,s,t])})}},destroy:function(){this.empty(),this.base()}}),t.treelist}),
/*!
 * 树列表集对象.
 * ecp.qzz.treedataset.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.treelist","qzz.expression","qzz.date"],function(){var t=window.qzz;return t.treedataset=t.Class(t.treelist,{_create:function(){this.base(),this.className="TreeDataSet",this.logInfo("TreeDataSet.create"),this.option.colModels=[],this.option.viewColModels=[],this.storeData=!0,this.fieldOption={},this.transIDName={},this.topFilterItem=null,this.filterList={},this.selectFilterList={},this.PKeyName=[],this.keyNodeJson={},this.fieldSplit="$",this.valueSplit="_",this.keySplit="^",this.nodeBegin="#{",this.nodeEnd="}",this.pathSplit=".",this.expList=[],this.expGJList=[],this.expColGJList=[],this.sumList={},this.transState={},this.sortCach={},this.transIndex=0,this.reverGJ=!1,this.sortFieldName=null,this.filtered=!1,this.dateObject=new t.date},getDisplayModel:function(){return null==this.displayModel&&(this.displayModel=this.getDataSource().getDisplayModel()),this.displayModel},_asynGetDisplayData:function(t,e,i,s,n,o,h){if(this.logInfo("_asynGetDisplayData"),this.getAllCount()>0){null==i&&(i=this.rootNode),null==s&&(s=this.getChildNode(0,i));var l=this.beginUpdate(!0),a=this.getCurNode();this.select(s),this.logInfo("_asynGetDisplayData:"+s.scrIndex);for(var r=0,d=e.length,u={};!this.isEof()&&this.getLevel()>i.level&&r<n;){s=this.getCurNode();var c=null;if("json"===o){c={};for(var g=0;g<d;g++){var p=e[g],f=this.getDisplay(p);if(0==g&&this.isTree&&s.level>0){if(null==(m=u[s.level])){m="";for(var y=0;y<s.level;y++)m+="  ";u[s.level]=m}f=m+f}c[p]=f}}else{c=[];for(g=0;g<d;g++){p=e[g],f=this.getDisplay(p);if(0==g&&this.isTree&&s.level>0){var m;if(null==(m=u[s.level])){m="";for(y=0;y<s.level;y++)m+="  ";u[s.level]=m}f=m+f}c.push(f)}}t.push(c),this.next(!0),r++}if(u=null,!this.isEof()&&this.getLevel()>i.level){var C=this;s=this.getCurNode(),setTimeout(function(){C._asynGetDisplayData(t,e,i,s,n,o,h),C=null},10)}else"function"==typeof h&&h(t);this.select(a),this.endUpdate(!1,l),a=null}else"function"==typeof h&&h(t)},getDisplayData:function(t,e,i){"function"==typeof e&&(i=e,e="array");this._asynGetDisplayData([],t,null,null,500,e,i)},open:function(){},close:function(){},setColModels:function(t){this.option.colModels=t,null==this.option.colModels&&(this.option.colModels=[]),this.fieldOption={}},setViewColModels:function(t){this.option.viewColModels=t,null==this.option.viewColModels&&(this.option.viewColModels=[]),this.fieldOption={}},getColModel:function(t){var e=this.fieldOption[t];if(null==e){for(var i=0,s=this.option.colModels.length;i<s;i++){var n=this.option.colModels[i];n.name===t&&(e=n),n=null}var o;for(i=0,s=this.option.viewColModels.length;i<s;i++){var h=this.option.viewColModels[i];h.name===t&&(o=h)}e=null!=e?this.extend({},e):{},null!=o&&(e=this.extend(e,o)),this.fieldOption[t]=e}return e},getFieldOption:function(t){return this.getColModel(t)},getDataType:function(t){var e=this.getColModel(t).dataType;return this.isEmpty(e)&&(e="String"),e.toLowerCase()},getValue:function(t,e){e=e||this.curNode;if(null==t)return"";var i=this.getColModel(t);if(t.indexOf(".")>=0){var s,n=t.split(".");if(null==(s=e.data[n[0]]))return s;for(var o=1,h=n.length;o<h;o++)s=s[n[o]]}else null!=e.data&&(s=e.data[t]);if(null!=i.defValue&&(null!=s&&""!==s||(s=i.defValue)),"function"==typeof i.onGetValue&&null!=e)try{s=i.onGetValue(this,s,e,t)}catch(e){this.logError("col "+t+" getDisplay Error:"+e.message)}return i=null,e=null,null==s?"":s},getSummary:function(t){return this.getTotalValue(t)},setSummary:function(t,e){this.setTotalValue(t,e)},getTotalValue:function(t){return null==this.rootNode.data&&(this.rootNode.data={}),this.getValue(t,this.rootNode)},setTotalValue:function(t,e){null==this.rootNode.data&&(this.rootNode.data={}),this.setValue(t,e,this.rootNode)},getSubtotalValue:function(t){return null==this.subNode.data&&(this.subNode.data={}),this.getValue(t,this.subNode)},setSubtotalValue:function(t,e){null==this.subNode.data&&(this.subNode.data={}),this.setValue(t,e,this.subNode)},getOption:function(t,e){return null==t&&null==e?this.base():this.getCellOption(t,e)},getCellOption:function(t,e){return null==e&&(e=this.curNode),null==e.option&&(e.option={}),null==e.option[t]&&(e.option[t]={}),e.option[t]},setDisplay:function(t,e,i){var s=this.getDataType(t),n=this.getColModel(t),o="",h=!0;if("date"==s){var l=this.getValue(t);isNaN(l)||"string"==typeof l?o=this.dateObject.parseEcpDate(e):(this.dateObject.setShowTime(!1),e=this.dateObject.checkDate(e),o=Date.parse(e.replace(/-/g,"/")))}else if("gldx"==s||"dxfl"==s||"unitcode"==s||"ecp.tableentity"==s||"enum"==s||"sysenum"===s){h=!1;var a=e.split(","),r=[],d=a.length;if(this.isNotEmpty(this.transIDName)&&this.isNotEmpty(this.transIDName[t])){var u=this.transIDName[t];for(var c in u){for(var g=0;g<d;g++)u[c]===a[g]&&(r.push(c),h=!0);!0}o=r.join(",")}}else if("number"==s||"money"==s){if(this.isNotEmpty(e)&&(h=!1,o=e.replace(/[,%‰]/g,""),!isNaN(o)&&this.isNotEmpty(o))){o=parseFloat(o,10),this.isNotEmpty(n.numUnit)&&(o*=parseFloat(n.numUnit,10));var p=n.precision||n.dataScale||n.scale||0;p<0&&(p=0);var f=new Number(o);o=parseFloat(f.toFixed(p),10),h=!0}}else o=e;if(h){if("function"==typeof n.onSetDisplay)try{o=n.onSetDisplay(this,e,i)}catch(e){this.logError("col "+t+" setDisplay Error:"+e.message)}if(this.hasbind("onSetText_"+t))try{o=this.trigger("onSetText_"+t,[this,e,i])}catch(e){this.logError("col "+t+" SetText Error:"+e.message)}n=null,this.setValue(t,o)}},getDisplay:function(t,e,i,s,n){var o=!1;null==i&&(i=this.curNode),null==e&&(e=this.getValue(t,i),o=!0);var h=this.getCellOption(t,i);1==s&&(h.displayText=null);var l=this.getColModel(t),a=this.getDataType(t);null==this.transState[t]&&(this.transState[t]={});var r=!1;null!=l.option&&(r=1==l.option.multiselect||0==l.isSingle||1==l.option.isMulti||1==l.option.isMutil||"true"==l.option.isMulti||"true"==l.option.isMutil),r=(r=r||!0===l.multiSelect)||!0===l.multiple;var d=e;if("date"==a){if(""!==e&&null!=e)if(o&&this.isNotEmpty(h.displayText)&&this.transIndex===h.transIndex)e=h.displayText;else if(null!==e&&""!==e&&"NaN"!=e){var u=!1,c="day";u=this.getBooleanValue(l.showTime,!1),c=l.cyctype||c,"M"===l.showType&&(c="month"),u=u||"hour"===c||"minute"===c||"second"===c,"string"==typeof e&&e.indexOf("Date")>=0&&(e=this.dateObject.strToDate(e,u,null,!0)),this.dateObject.setShowTime(u),this.dateObject.cyctype=c,e=this.dateObject.toDate(e),c!=this.dateObject.cyctypes.season&&c!=this.dateObject.cyctypes.ten||(e=this.dateObject.getFormatDate(e)),!1!==l.outputEscape&&!1!==n&&(e=this._tagToText(e)),o&&(h.displayText=e,h.transIndex=this.transIndex)}}else if("number"==a||"integer"==a||"int"==a||"float"==a){if(""!==e&&null!=e)if(o&&this.isNotEmpty(h.displayText)&&this.transIndex===h.transIndex&&h._oldValue===e)e=h.displayText;else{if(h._oldValue=e,this.isNotEmpty(e)&&!isNaN(e))if(null!=this.transIDName&&null!=this.transIDName[t]&&this.transIDName[t][e])e=this.transIDName[t][e];else{this.isNotEmpty(l.numUnit)&&(e/=parseFloat(l.numUnit,10));var g=l.precision||l.dataScale||l.scale||0;if(l.numUnit==this.numUnit.perthousand)g-=3;else if(l.numUnit==this.numUnit.percent)g-=2;else{var p=l.numUnit+"";if(p.indexOf(".")>=0){var f=p.split(".");f.length>1&&f[1].length>0&&(g-=f[1].length)}}g<0&&(g=0);var y=new Number(e);l.hideZero&&0==y?e="":(e=y.toFixed(g),g<7&&(e+"").indexOf("e")>0&&(e=0),!0!==l.noFormat&&(e=this.numberFormat(e)),l.numUnit==this.numUnit.perthousand?e+="‰":l.numUnit==this.numUnit.percent&&(e+="%"))}!1!==l.outputEscape&&!1!==n&&(e=this._tagToText(e)),o&&(h.displayText=e,h.transIndex=this.transIndex)}}else if(""!==e&&null!=e)if(o&&this.isNotEmpty(h.displayText)&&this.transIndex===h.transIndex)e=h.displayText;else{var m={};if(null!=this.transIDName&&null!=this.transIDName[t]&&(m=this.transIDName[t]),r)if("string"==typeof e){for(var C=e.split(/[,，]/g),S=[],x=0,_=C.length;x<_;x++){var b=m[C[x]];S[x]=null!=b?b:C[x]}e=S.join(",")}else null!=m[e]&&(e=m[e]);else null!=m[e]&&(e=m[e]);m=null,!1!==l.outputEscape&&!1!==n&&(e=this._tagToText(e)),o&&(h.displayText=e,h.transIndex=this.transIndex)}if(!this.isNotEmpty(l.validate)||""!==e&&null!=e||""===h.displayText||null==h.displayText||(e=h.displayText),!1!==l.useTextField&&null!=l.textField&&""!==l.textField&&(e=this.getValue(l.textField)),null!=l.transKey&&""!==l.transKey&&(e=this.getValue(l.transKey)),!1===n&&(e=this._textToTag(e)),this.hasbind("onBeforeFormat_"+t))e=this.trigger("onBeforeFormat_"+t,[i,t,d,e,l]);if(this.hasbind("onFormat_"+t))try{e=this.trigger("onFormat_"+t,[i,t,a,e,l])}catch(e){this.logError("col "+t+" format Error:"+e.message)}return l=null,null==e?"":e},setValue:function(t,e,i,s){if(null==t)return!1;i=i||this.curNode;var n=this.getDataType(t),o=this.isEmpty(e),h=this.getColModel(t);if("date"==n){if(!o&&(null!=e.value&&(e=e.value),this.isNotEmpty(e)&&"string"==typeof e&&e.indexOf("Date(")<0)){var l=this.getValue(t,i);e=isNaN(l)||"string"==typeof l?this.dateObject.parseEcpDate(e):Date.parse(e.replace(/-/g,"/"))}""===e&&(e=null)}else if("gldx"==n||"dxfl"==n||"unitcode"==n||"enum"==n||"sysenum"===n)o||"object"!=(void 0===e?"undefined":_typeof(e))||(e=this.isArray(e)?e.join(","):e.value);else if("number"==n||"money"==n){if(null!=this.transIDName&&null!=this.transIDName[t]){var a=this.transIDName[t];for(var r in a)if(a[r]==e){e=r;break}}var d=h.precision||h.dataScale||h.scale||0;if(null!=h.numUnit&&""!==h.numUnit){var u=h.numUnit+"",c=u.indexOf(".");-1!=c&&(d=d+u.length-c-1)}if(""!==e&&null!=e){if(e=this.round(e,d),null!=h.minValue&&""!==this.trim(h.minValue)&&e<h.minValue||null!=h.maxValue&&""!==this.trim(h.maxValue)&&e>h.maxValue)return!1;if((e+"").replace(/[.\-,%‰]/gi,"").length>17){var g=(e+"").indexOf(".");if(d<0&&(d=0),-1==g||g+d>17)return this.logError("数值 "+e+" 太大，无法提交。"),!1}}}else"string"===n&&(this.isArray(e)&&(e=e.join(",")),null!=h.length&&h.length>0&&!o&&this.strLen(e)>h.length&&(e=this.subStr(e,h.length)));var p=this.getValue(t,i);if(i.level<0){if(null==i.data&&(i.data={}),t.indexOf(".")>=0){for(var f=t.split("."),y=1;y<x;)null==i.data[f[y]]&&(i.data[f[y]]={}),y++;i.data[f[y-1]]=e}else i.data[t]=e;this._update&&!0===this.hasbind("onTotalChanged")&&this.trigger("onTotalChanged",[t,p,e,i]),i=null}else if(o||!this.isEmpty(e)&&""+e!="NaN"){var m=this.getCellOption(t,i);if(m.displayText="",this.isNotEmpty(h.validate)){var C=this.validateValue(h.validate,i,t,e);if(C.state)m.validateMessage=null;else{if(!0!==h.validateSumit)return!1;m.displayText=e,m.validateMessage=C.message}m.hasValidate=!0}if(o&&this.isEmpty(p)||!o&&0!==p&&""!==p&&p==e)return!1;if(t.indexOf(".")>=0){f=t.split(".");var S=i.data[f[0]];if(null!=S){y=1;for(var x=f.length;y<x-1;y++)S=S[f[y]];S[f[y]]=e,null==m.changed&&(null==S._oldValue&&(S._oldValue={}),S._oldValue[t]=p)}}else i.data[t]=e,null==m.changed&&(null==i.data._oldValue&&(i.data._oldValue={}),i.data._oldValue[t]=p);if(m._pValue=p,m.changed=!0,m.displayText="",0==(i.data.modelState&this.modelState.NEW)&&(i.data.modelState=i.data.modelState|this.modelState.MODIFY),null==this._changeSet.modify[i.recNo]&&(this._changeSet.modify[i.recNo]=i),null!=this.transState&&null!=this.transState[t]&&this.transState[t].transed&&null!=this.transIDName){var _=this.transIDName[t];null!=_&&null==_[e]&&(this.transState[t].transed=!1)}if(i.pNode.sortChanged[t]=!0,this._setFilterChangedState(t,p,e),null!=this.maxText&&(this.maxText[t]=null,this.maxTextLen[t]=0,this.maxCapWidth[t]=0),this._update&&!0===this.hasbind("onEdited")&&this.trigger("onEdited",["modify",t,p,e,i]),null!=m.cacPCells){for(var b in m.cacPCells){var v=m.cacPCells[b];null==v.node&&(v.node=this.getKeyNode(v.keyFieldName,v.keyValue)),null!=v.node&&(this.getCellOption(v.fieldName,v.node).cacState=1)}!0!==s&&this.caculate()}!0!==s&&null!=this.sumList[t]&&(this.sumList[t]=1,null!=p&&""!==p||(p=0),this.caculateSum(!1,t,p,e,i))}return i=null,h=null,!0},mergeChangeLog:function(t){for(var e in this._changeSet.deleteList=[],null!=t&&""!==t&&(t=JSON.parse(t)),this._changeSet.modify){var i=this._changeSet.modify[e];if(null!=t&&""!==t){var s=t[this.getValue(this.getOption().idkey,i)];null!=s&&""!==s&&(i.data[this.getOption().idkey]=s)}i.data.modelState=this.modelState.DEFAULT,i.data._oldValue={};var n=i.option;for(var o in n)n[o]._pValue=null}this._changeSet.modify={}},getChildNode:function(t,e){e=e||this.curNode;if(this.isNotEmpty(this.sortFieldName)&&e.sortIndex[this.sortFieldName]&&"none"!=this.sortType){if("down"==this.sortType)t=e.getCount()-t-1;t=e.sortNode[this.sortFieldName][t].nodeIndex}return this.base(t,e)},getChildIndex:function(t){if((t=t||this.curNode).level>=0&&this.isNotEmpty(this.sortFieldName)&&t.pNode.sortIndex[this.sortFieldName]&&"none"!=this.sortType){var e=t.pNode.sortIndex[this.sortFieldName][t.index];if("down"==this.sortType)e=t.pNode.getCount()-e-1;return e}return t.index},setRowData:function(t,e,i,s){if(e){var n=this.getDataSource().getDataModel(),o=this.curNode.data,h=this._getDataIndex(this.curNode.data);e=this.extend(!0,{},o,e),n.get(this.getName()+"["+h+"]").value(e),n=null,o=null}},setTransIDName:function(t,e,i,s){this.transIDName[t]={},this.addTransIDName(t,e,i,s)},getTransIDName:function(t,e){var i=this.transIDName[t];return!0===e&&(i=this._tagToText(i)),i},addTransIDName:function(t,e,i,s){if(null==e)return!1;var n={};if(null==i&&(i="id"),null==s&&(s="text"),this.isArray(e))for(var o=0,h=e.length;o<h;o++){var l=e[o],a=l[i],r=l[s];n[a]=r}else null!=e[i]&&null!=e[s]?n[e[i]]=e[s]:n=e;var d=this.transIDName[t];if(null==d)this.transIDName[t]=n;else for(var u in n)d[u]=n[u];this.transIndex++,d=null,n=null},append:function(t,e,i){null==e&&(e=0==this.getRecordCount()?this.rootNode:this.curNode.level>=0?this.curNode.pNode:this.curNode),this.isArray(t)?this.appendItemList(t,e,!1,i):this.appendChildItem(t,e,!1),this.getCurNode().level<0&&this.first()},appendChild:function(t,e,i){null==e&&(e=0==this.getRecordCount()?this.rootNode:this.curNode),this.isArray(t)?this.appendItemList(t,e,!1,i):this.appendChildItem(t,e,!1),this.getCurNode().level<0&&this.first()},appendItemList:function(t,e,i,s){this.transState={},this.base(t,e,i,s),this.getCurNode().level<0&&this.first()},insertItemList:function(t,e,i,s,n){this.transState={},this.base(t,e,i,s,n),this.getCurNode().level<0&&this.first()},appendChildItem:function(t,e,i){this.transState={},this.base(t,e,i),this.caculateSum(),this.getCurNode().level<0&&this.first()},insertChildItem:function(t,e,i,s){this.transState={},this.base(t,e,i,s),this.caculateSum(),this.getCurNode().level<0&&this.first()},delRecord:function(t){null==t&&(t=this.curNode);var e=t.pNode,i=t.index,s=0;if(null!=this.sumList)for(var n in this.sumList)this.setValue(n,0,t);if(null!=e&&this.isNotEmpty(e.sortState))for(var o in e.sortState)if(!0===e.sortState[o]){var h=e.sortIndex[o];null!=h&&(s=h[i])}var l=this.deleteItem(t);return!0===l&&null==this.curNode.level&&(--s<0&&(s=0),e.getCount()>0?this.select(this.getChildNode(s,e)):this.select(e)),l},getRecordCount:function(){return this.getAllCount()},getReadOnly:function(t){return null==t&&(t=this.curNode),null!=t.readOnly&&t.readOnly},setReadOnly:function(t,e){null==e&&(e=this.curNode),e.readOnly=t},empty:function(t){this.selectFilterList={},this.filterList={},this.transState={},1!=t&&(this.fieldOption={},this.transIDName={},this.transIndex=0),this.base(),this.mdm=null,this.displayModel=null},locateDesc:function(t,e,i,s,n){return this.base(e,t,i,s,n)},locate:function(t,e,i,s){return this.base(e,t,i,s)},_dvFind:function(t,e,i){this.logInfo("_dvFind:"+e);var s,n,o=0,h=t.length-1;if(this.compare(e,t[o].nodeValue,this.sortCach,i)<0)return o;for(;o<h-3;){s=t[n=parseInt((o+h)/2,10)].nodeValue;var l=this.compare(e,s,this.sortCach,i);if(l>0)o=n+1;else{if(!(l<0))return n;h=n-1}}for(var a=o;a<=h;a++){if(s=t[a].nodeValue,this.compare(e,s,this.sortCach,i)<=0){n=a;break}n=a+1}return n},_sortToAnAry:function(t,e){for(var i=e.getCount()-1,s=e.sortNode[t],n=s.length-1,o=[],h=[],l=[],a={};i>=0;)n>=0?s[n].cnode.length>0?(a[s[n].nodeIndex]=i,l[i--]=s[n],o.push(s),h.push(n-1),n=(s=s[n].cnode).length-1):n>=0&&(a[s[n].nodeIndex]=i,l[i--]=s[n],n--):(s=o.pop(),n=h.pop());e.sortNode[t]=l,e.sortIndex[t]=a},_insertToSortList:function(t,e,i,s,n){if(0==e.sortNode[t].length)e.sortNode[t]=[{nodeValue:s,nodeIndex:i,cnode:[]}];else{var o=e.sortNode[t],h=o.length;if(this.compare(s,o[h-1].nodeValue,this.sortCach,n)>=0)o.push({nodeValue:s,nodeIndex:i,cnode:[]});else{var l=this._dvFind(o,s,n);h=(o=o[l].cnode).length;for(var a=!1;h>0;){if(this.compare(s,o[h-1].nodeValue,this.sortCach,n)>=0){o.push({nodeValue:s,nodeIndex:i,cnode:[]}),a=!0;break}h=(o=o[l=this._dvFind(o,s,n)].cnode).length}a||o.push({nodeValue:s,nodeIndex:i,cnode:[]})}}},_asynSortNode:function(t,e,i,s,n){if(this.logInfo("_asynSortNode:"+t),this.getAllCount()>0){null==e&&(e=this.rootNode),null==i&&(i=this.getChildNode(0,e));var o=this.beginUpdate(!0);this.select(i),this.logInfo("_asynSortNode:"+i.scrIndex);for(var h=this.getDataType(t),l=0;!this.isEof()&&this.getLevel()>e.level&&l<s;){var a,r=(i=this.getCurNode()).pNode;if(!r.sortState[t]||1==r.sortChanged[t])0==i.index&&(r.sortNode[t]=[]),a="number"==h||"money"==h?this.getValue(t,i):this.getDisplay(t,null,i),this._insertToSortList(t,r,i.index,a,h),i.index==r.getCount()-1&&(r.sortState[t]=!0,r.sortChanged[t]=!1,this._sortToAnAry(t,r));this.next(!0),l++}if(this.endUpdate(!1,o),!this.isEof()&&this.getLevel()>e.level){var d=this;i=this.getCurNode(),setTimeout(function(){d._asynSortNode(t,e,i,s,n),d=null},10)}else"function"==typeof n&&n.apply(this)}else"function"==typeof n&&n.apply(this)},doSort:function(t,e,i){var s=this;this.logBegin("doSort"),this.sortFieldName=null,this._asynSortNode(t,null,null,100,function(){s.sortFieldName=t,s.sortType=e,s.logEnd("doSort"),"function"==typeof i&&i.apply(this)})},_emptyFilterItem:function(){this.filterStack=[],this.selectFilterList={},this.topFilterItem=null},_pushFilterItem:function(t){this.filterStack.push(t),this.topFilterItem=t},_popFilterItem:function(){this.filterStack.length>0&&this.filterStack.pop(),this.topFilterItem=this._getLastFilterItem(),null!=this.topFilterItem&&(this.filterFieldName=this.topFilterItem.fieldName,this.filterList[this.filterFieldName]=this.topFilterItem.all,this.selectFilterList=this.topFilterItem.sel)},_setFilterChangedState:function(t,e,i){var s=this.filterStack.length;if(s>0)for(var n=null,o=null,h=0;h<s;h++){var l=this.filterStack[h];l.fieldName==t&&(null==n&&(n=this.getDisplay(t,e),o=this.getDisplay(t,i)),null!=l.all&&null!=l.all[e]&&delete l.all[e],l.all[i]=o,null!=l.sel[n]&&delete l.sel[n],l.sel[o]=1),l=null}},_getLastFilterItem:function(){return this.filterStack.length>0?this.filterStack[this.filterStack.length-1]:null},_getFilterState:function(t){null==t&&(t=this.curNode);for(var e=!0,i=0,s=this.filterStack.length;i<s&&e;i++){var n=this.filterStack[i];if(null!=n&&null!=n.fieldName&&""!==n.fieldName){var o=n.sel,h=this.getDisplay(n.fieldName,null,t),l=this.getValue(n.fieldName,t);""===h&&(h=this.getI18n("qzz.filterEmpty","(空白)")),null==o[h]&&null==o[l]&&(e=!1),n=null}}return!e},getFilterState:function(t){for(var e=!0,i=0,s=this.filterStack.length;i<s&&e;i++){var n=this.filterStack[i];n.fieldName==t&&(e=!1),n=null}return!e},_asynCollectNode:function(t,e,i,s,n){if(this.logInfo("_asynCollectNode:"+t),this.getAllCount()>0){null==e&&(e=this.rootNode),null==i&&(i=this.getChildNode(0,e));var o=this.getCurNode(),h=this.beginUpdate(!0);this.select(i);var l=0;for(this.isEmpty(this.filterList[t])&&(this.filterList[t]={});!this.isEof()&&l<s&&this.getLevel()>e.level;){var a=this.getValue(t),r=this.getDisplay(t);this.filterList[t][a]=""!==r?r:this.getI18n("qzz.filterEmpty","(空白)"),this.next(!0),l++}if(!this.isEof()&&this.getLevel()>e.level){var d=this;i=this.getCurNode(),this.select(o),this.endUpdate(!1,h),setTimeout(function(){d._asynCollectNode(t,e,i,s,n),d=null},10)}else this.select(o),this.endUpdate(!1,h),"function"==typeof n&&n.apply(this)}else"function"==typeof n&&n.apply(this)},collectFilter:function(t,e){var i=this._getLastFilterItem();if(null==i||t!==i.fieldName)if(this.hasbind("onCollectFilter")){var s=this;this.trigger("onCollectFilter",[this.filterStack,t,function(i){s.filterList[t]=i,"function"==typeof e&&e.apply(this)}])}else this.filterList[t]={},this._asynCollectNode(t,null,null,500,e);else"function"==typeof e&&e.apply(this)},doFilterCompare:function(t){},setFiltered:function(t,e){var i=this;t?(!this.isNotEmpty(this.selectFilterList)||null!=this.topFilterItem&&this.topFilterItem.fieldName==this.filterFieldName||this._pushFilterItem({fieldName:this.filterFieldName,all:this.filterList[this.filterFieldName],sel:this.selectFilterList}),this.hasbind("onServerFilter")?this.trigger("onServerFilter",[t,this.filterStack,e]):this.doFilter(function(){i.first(),i.getCurNode().scrIndex=1,"function"==typeof e&&e()})):this.hasbind("onServerFilter")?this.trigger("onServerFilter",[t,this.filterStack,e]):this._asynResetFilterNode(null,null,1e3,!0,function(){i.filtered=!1,i.first(),"function"==typeof e&&e()})},getTopFilterName:function(){return null==this.topFilterItem?"":this.topFilterItem.fieldName},addFilterText:function(t,e,i){if(null!=this.topFilterItem&&this.topFilterItem.fieldName==t&&this._popFilterItem(),this.isArray(e)){var s=e.length;if(s>0&&"all"!==e[0].id){this.selectFilterList={};for(var n=0;n<s-1;n++)this._addFilterText(t,e[n].text,!1);this._addFilterText(t,e[n].text,!0,i)}else null==this.topFilterItem?this.clearFilterText(i):this.setFiltered(!0,i)}else"string"==typeof e?this._addFilterText(t,e,!0,i):null!=e.text&&""!==e.text&&this._addFilterText(t,e.text,!0,i)},_addFilterText:function(t,e,i,s){this.filterFieldName!==t&&(this.selectFilterList={},this.filterFieldName=t),this.selectFilterList[e]=1,!1!==i?this.setFiltered(!0,s):"function"==typeof s&&s()},_asynCallFunc:function(t,e,i,s,n,o,h){this.logInfo("_asynCallFunc:"),null==e&&(e=this.rootNode),null==i&&(i=this.getChildNode(0,e)),"function"==typeof n&&n(e,i);var l=this.getCurNode(),a="function"==typeof o;if(a){var r=this.beginUpdate(!0);this.select(i);for(var d=0,u=null;!this.isEof()&&d<s&&this.getLevel()>e.level;){i=this.getCurNode();o(this,t,i,u),this.next(),d++}u=i,i=this.getCurNode()}if(a&&!this.isEof()&&this.getLevel()>e.level){this.select(l),this.endUpdate(!1,r);var c=this;setTimeout(function(){c._asynCallFunc(t,e,i,s,n,o,h),c=null},10)}else this.select(l),this.endUpdate(!1,r),"function"==typeof h&&h.apply(this)},initMaxText:function(){this.maxText={},this.maxTextLen={},this.maxCapWidth={},this.maxLevel=0},getMaxText:function(t,e,i){"string"==typeof t&&(t=[t]);var s=100;if(this.isArray(t)&&t.length>0){if(!0===i){for(var n=!0,o=0,h=t.length;n&&o<h;o++)null!=this.maxText&&null!=this.maxText[t[o]]||(n=!1);if(1==n)return void("function"==typeof e&&e(t,this.maxText))}s=parseInt(s/t.length,10),this.isEmpty(this.maxText)&&this.initMaxText();var l=[];for(o=0,h=t.length;o<h;o++){var a=t[o];null==this.maxText[a]&&(this.maxText[a]="",this.maxTextLen[a]=0,l.push(a))}var r=this;this._asynCallFunc(l,null,null,s,null,function(e,i,s,n){for(var o=0,h=t.length;o<h;o++){var l=t[o],a=e.getDisplay(l);"string"==typeof a&&-1!=a.indexOf("<")&&(a=a.replace(/<(\/)?(a|span|div|li|ul|table|tr|td|input|font)( [^<>]+)?>/gi,""));var r=e.strLen(a);r>e.maxTextLen[l]&&(e.maxTextLen[l]=r,e.maxText[l]=a)}s.level>e.maxLevel&&(e.maxLevel=s.level)},function(){"function"==typeof e&&e(t,r.maxText)})}},delFilterText:function(t,e,i){this.filterFieldName===t&&this.isNotEmpty(this.selectFilterList[e])&&(delete this.selectFilterList[e],!1!==i&&(this.isNotEmpty(this.selectFilterList)?this.setFiltered(!0):this.setFiltered(!1)))},clearFilterText:function(t){this.filtered?(this._emptyFilterItem(),!0!==this.hasbind("onFilter")?this.setFiltered(!1,t):this.setFiltered(this.filtered,t)):"function"==typeof t&&t()},_asynSetKeyNode:function(t,e,i,s,n){this.logInfo("_asynSetKeyNode:"+t.join(this.valueSplit)),null==e&&(e=this.rootNode),null==i&&(i=this.getChildNode(0,e));var o=this.getCurNode(),h=this.beginUpdate(!0);this.select(i);for(var l=0,a=t.length;!this.isEof()&&l<s&&this.getLevel()>e.level;){for(var r=[],d=0;d<a;d++)r[d]=this.getValue(t[d]);var u=t.join(this.fieldSplit)+this.valueSplit+r.join(this.fieldSplit);this.keyNodeJson[u]=this.getCurNode(),this.next(!0),l++}if(i=this.getCurNode(),!this.isEof()&&this.getLevel()>e.level){this.select(o),this.endUpdate(!1,h);var c=this;setTimeout(function(){c._asynSetKeyNode(t,e,i,s,n),c=null},10)}else this.select(o),this.endUpdate(!1,h),"function"==typeof n&&n.apply(this)},setPKeyName:function(t,e){var i=t;if("string"==typeof t)t=t.split(this.fieldSplit);else{if(!this.isArray(t))return"function"==typeof e&&e.apply(this),!1;i=t.join(this.fieldSplit)}for(var s=this.PKeyName.length,n=!1,o=0;o<s;o++)if(this.PKeyName[o]===i){n=!0;break}n?"function"==typeof e&&e.apply(this):(this.PKeyName.push(i),this._asynSetKeyNode(t,null,null,1e3,e))},getKeyNode:function(t,e){var i=null;return"string"==typeof t?i=this.keyNodeJson[t+this.valueSplit+e]:this.isArray(t)&&this.isArray(e)&&(i=this.keyNodeJson[t.join(this.fieldSplit)+this.valueSplit+e.join(this.fieldSplit)]),i},addExpress:function(e,i,s,n){this.setPKeyName(i,function(){var o=this.getKeyNode(i,s);if(null!=o){var h=new t.expression;h.setDataSet(this),h.setExpression(e,i,s,n),this.getCellOption(e,o).title=h.caption,o=null;var l=this.expList.length;if(0===l)this.expList.push(h);else{var a=0;for(a=0;a<l;a++){var r=this.expList[a];if(r.indexOf(h.fieldName,h.keyFieldName,h.keyValue)>=0)break;r=null}this.expList.splice(a,0,h)}}else this.logInfo("can not found cell ("+e+","+i+"_"+s+")")})},clearExpress:function(){this.expList=[]},caculate:function(t){for(var e=this.expList.length,i=0;i<e;i++){var s=this.expList[i];null==s.node&&(s.node=this.getKeyNode(s.keyFieldName,s.keyValue)),null==s.node||1!=this.getCellOption(s.fieldName,s.node).cacState&&!t||(this.setValue(s.fieldName,s.getValue(),s.node,!0),this.getCellOption(s.fieldName,s.node).cacState=0)}},addGJExpress:function(e,i){if(null==i&&(i=e,e=null),null==e){var s=new t.expression;s.setDataSet(this),s.setGJExpression(e,i),this.expColGJList.push(s)}else this.setPKeyName(e,function(){var s=new t.expression;s.setDataSet(this),s.setGJExpression(e,i),this.expGJList.push(s)})},clearGJExpress:function(){this.expGJList=[],this.expColGJList=[]},caculateGJ:function(t,e){"function"==typeof t&&(e=t,t=!1);for(var i=this.expGJList.length,s=[],n=0;n<i;n++){var o=this.expGJList[n];if(1!=t||3==o.messageState){var h=o.getValue();(this.reverGJ&&1==h||0==this.reverGJ&&1!=h)&&s.push({cellList:o._expObject,exp:o.exp,caption:o.caption,message:o.message,sumitState:o.sumitState,messageState:o.messageState})}}if((i=this.expColGJList.length)>0){var l=this;this.each(function(e){for(var n=0;n<i;n++){var o=l.expColGJList[n];if(1!=t||3==o.messageState){var h=o.getValue(e);(l.reverGJ&&1==h||0==l.reverGJ&&1!=h)&&s.push({cellList:o._expObject,exp:o.exp,caption:o.caption,message:o.message,sumitState:o.sumitState,messageState:o.messageState,node:e})}}},function(){"function"==typeof e&&e(s)})}else"function"==typeof e&&e(s);return s},addSumColumn:function(t){this.sumList.length;null==this.sumList[t]&&(this.sumList[t]=0)},clearSumColumn:function(){this.sumList={}},caculateSum:function(t,e,i,s,n){this.sumList.length;var o={};if(null!=n&&n.level>0&&this.sumAllLevel){if(null!=e&&null!=this.sumList[e]){var h=n.pNode;null!=(d=this.getValue(e,h))&&""!==d||(d=0),d=d+s-i,this.setValue(e,d,h)}}else if(this.sumAllLevel&&0!=t){var l=this.curNode,a=this.beginUpdate(!0);this.curNode=l,this.endUpdate(!1,a)}if(null!=n&&0==n.level||0!=t){for(var e in this.sumList)o[e]=0;for(var r=0;r<this.rootNode.getCount();r++){n=this.rootNode.cNode[r];for(var e in this.sumList){var d;if(1==this.sumList[e]||0!=t)null!=(d=this.getValue(e,n))&&""!==d||(d=0),o[e]+=parseFloat(d)}}for(var e in this.sumList){1!=this.sumList[e]&&0==t||(this.setSummary(e,o[e]),this.sumList[e]=0)}}},resetExpress:function(){for(var t=this.expList.length,e=0;e<t;e++){(i=this.expList[e]).node=this.getKeyNode(i.keyFieldName,i.keyValue),this.getCellOption(i.fieldName,i.node).title=i.caption,i.decode()}t=this.expGJList.length;for(e=0;e<t;e++){var i;(i=this.expGJList[e]).decode()}},setCheckedData:function(t,e,i){if(this.multiSelect){null==i&&(i=!0);var s={};if(this.isArray(e))for(var n=0,o=e.length;n<o;n++){var h=e[n];s[h]=h}else"object"==(void 0===e?"undefined":_typeof(e))?s=e:s[e]=e;var l=this.getCurNode(),a=this.beginUpdate(!0);for(this.first();!this.isEof();)null!=s[this.getValue(t)]&&(i?this.setSelect():this.setUnSelect()),this.next(!0);this.select(l),this.endUpdate(!1,a),l=null}},setSelectData:function(t,e,i){this.setCheckedData(t,e,i)},getCheckedData:function(t){var e=this.getCurNode();if(e.level<0)return null;var i,s=this.beginUpdate(!0);if(!0!==t&&this.multiSelect){for(this.first(),i=[];!this.isEof();)this.isChecked()&&i.push(this.extend({},this.getCurNode().data)),this.next(!0);this.select(e)}else i=this.getCurNode().data;return this.endUpdate(!1,s),i},getSelectedData:function(t){return this.getCheckedData(t)},getSelectRowIds:function(t){var e,i=this.getCurNode(),s=this.beginUpdate(!0),n=this.keyName;if(this.isArray(n)&&n.length>0&&(n=n[0]),!0!==t&&this.multiSelect){for(e=[],this.first();!this.isEof();)this.isChecked()&&e.push(this.getValue(n)),this.next(!0);this.select(i)}else e=this.getValue(n);return this.endUpdate(!1,s),e},validateAll:function(t){for(var e=this.getOption().viewColModels,i=[],s=[],n=0,o=e.length;n<o;n++){var h=e[n];null!=h.validate&&""!==h.validate&&s.push(h)}this.each(function(t){for(var e=0,n=s.length;e<n;e++){var o=s[e],h=this.validateValue(o.validate,t,o.name);if(!0!==h.state)i.push({node:t,colModel:o,state:h.state,message:h.message||o.validateMessage||o.valiMsg||""});else{var l=this.getCellOption(o.name);l.validateMessage&&(l.validateMessage=null)}}},function(){"function"==typeof t&&t(i)})},validateValue:function(e,i,s,n){var o=!0,h="";null==n&&arguments.length<4&&(n=this.getValue(s,i));var l=this.getColModel(s);if(/^notempty$/i.test(e))null!=n&&""!==n&&0!==n||(o=!1,h=(h=l.validateMessage||l.valiMsg||h)||this.getI18n("qzz.notEmpty","输入值不能为空")||"");else if(this.isNotEmpty(e)){var a=!1;if(/^email$/i.test(e)?(null!=n&&""!==n&&(o=this.isEmail(n),h=this.getI18n("qzz.emailVali","输入的电子邮件不符合格式校验要求，请按照电子邮箱账号@邮箱域名格式输入，例如：User@ygsoft.com。")),a=!0):/^telePhone$/i.test(e)?(null!=n&&""!==n&&(o=this.isTele(n),h=this.getI18n("qzz.teleVali","输入的电话号码不符合校验要求，请按照区号-电话号码-分机号格式输入，例如：010-12345678-1234。")),a=!0):/^fax$/i.test(e)?(null!=n&&""!==n&&(o=this.isFax(n),h=this.getI18n("qzz.faxVali","输入的传真号码不符合校验要求，请按照区号-传真号码格式输入，例如：010-12345678。")),a=!0):/^mobileTelePhone$/i.test(e)?(null!=n&&""!==n&&(o=this.isMobile(n),h=this.getI18n("qzz.mobileVali","输入的手机不符合格式校验要求，请按照电话号码（11数字位）格式输入，例如：13701234567。")),a=!0):/^postboat$/i.test(e)?(null!=n&&""!==n&&(o=this.isPostid(n),h=this.getI18n("qzz.postVali","输入的邮编不符合格式校验要求，请按照邮编号码（6位数字位）格式输入，例如：519085。")),a=!0):/^idcard$/i.test(e)&&(null!=n&&""!==n&&(o=this.isIDCard(n),h=this.getI18n("qzz.idcardVali","输入的证件号码不符合格式校验要求，请按照身份证号（18位数字， 最后一位是数字或者字母）格式输入，列如：440401234567890123。")),a=!0),!1===a){h=l.validateMessage||l.valiMsg||h;var r=l._valiExp;if(null==r){"/"===(e=this.trim(e)).charAt(e.length-1)&&(e+='.test("#{'+s+'}")'),(r=new t.expression).setDataSet(this);var d={exp:e,message:""};r.setGJExpression(null,d),l._valiExp=r}var u=i.data[s];i.data[s]=n,o=r.getValue(i),i.data[s]=u,"boolean"!=typeof o&&(o=!1)}}return{state:o,message:h}},getFilterMark:function(){var t={};return t.filterStack=this.extend([],this.filterStack),t.selectFilterList=this.extend({},this.selectFilterList),t.topFilterItem=this.extend({},this.topFilterItem),t.filterList=this.extend({},this.filterList),t},setFilterMark:function(t,e){null!=t&&(this.filterStack=t.filterStack,this.selectFilterList=t.selectFilterList,this.topFilterItem=t.topFilterItem,this.filterList=t.filterList,this.setFiltered(!0,e))},getCurData:function(t){return null==t&&(t=this.dataSet.getCurNode()),t.data},destroy:function(){this.dateObject=null,this.base()}}),t.treedataset}),
/*!
 * 树节点对象.
 * ecp.qzz.expression.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.object"],function(){var qzz=window.qzz;return qzz.expression=qzz.Class({init:function(t,e){this.className="Expression",this.expType={ftField:"FIELD",ftCell:"CELL",ftFunction:"FUNCTION",ftNone:"None"},this.exp=t,this.caption=e,this._expStack=[],this._top=0,this._expObject=[],this.dataSource={dataSet:null},this.msg="",this.state=0,this.fieldSplit="$",this.valueSplit="_",this.keySplit="~~",this.nodeBegin="#{",this.nodeEnd="}",this.pathSplit="."},indexOf:function(t,e,i){for(var s=this._expObject.length,n=-1,o=0;o<s;o++){var h=this._expObject[o];if(h.fieldName===t&&(h.type===this.expType.ftField||h.type===this.expType.ftCell&&h.keyFieldName===e&&h.keyValue===i)){n=o;break}h=null}return n},setExpression:function(t,e,i,s){null==i&&null==s&&null!=e&&(s=e,e=null),this.setFieldName(t),null!=e&&null!=i&&this.setKeyFieldName(e,i),"string"==typeof s?(this.exp=s,this.caption=s):(this.exp=s.exp,this.caption=s.caption),null!=this.dataSource.dataSet&&this.decode()},setGJExpression:function(t,e){if(null!=t&&this.setKeyFieldName(t,""),"object"==(void 0===e?"undefined":_typeof(e))){this.exp=e.exp,this.caption=e.caption,this.sumitState=e.sumitState,this.messageState=e.messageState,this.message=e.message,null!=this.dataSource.dataSet&&this.decode();for(var i=this._expObject.length,s=0;s<i;s++){var n=this._expObject[s];null==n.node&&(n.node=this.getDataSet().getKeyNode(n.keyFieldName,n.keyValue));var o=this.getDataSet().getCellOption(n.fieldName,n.node);o.GJTitle=this.caption,o.isCac=!0,o=null,n=null}}},setDataSet:function(t){this.dataSource.dataSet=t},getDataSet:function(){return this.dataSource.dataSet},setFieldName:function(t){this.fieldName=t},setKeyFieldName:function(t,e){"string"==typeof t?(this.keyFieldName=t,this.keyValue=e):this.isArray(t)&&e instanceof Array&&(this.keyFieldName=t.join(this.fieldSplit),this.keyValue=e.join(this.fieldSplit))},trim:function(t){return null!=t&&""!==t&&"string"==typeof t&&(t=t.replace(/(^\s*)|(\s*$)/g,"")),t},decode:function(){var t={"<>":"!=",isNull:"==null",isNotNull:"!=null"},e=this.exp.replace(/([^><=!])([=]+)|<>|isNull|isNotNull/g,function(e,i,s){return null==(e=t[e])&&(e=i+"=="),e});t=null;var i=0;this._top=0;for(var s=e.indexOf(this.nodeBegin);s>=0;){var n=e.substring(0,s);n.length>0&&(this._expStack[this._top++]=n);var o=(e=e.substring(s+2)).indexOf(this.nodeEnd);if(o>=0){var h=e.substring(0,o);e=e.substring(o+1);var l=h.split(this.keySplit),a=l[0].split(this.fieldSplit);a.length>1&&a[0]===this.getDataSet().getName()&&a.splice(0,1);var r={};if(r.fieldName=a.join(this.pathSplit),r.index=this._top,l.length<2){r.type=this.expType.ftField;var d=this.getDataSet().getFieldOption(r.fieldName);null!=this.fieldName&&(d.cacPFields[this.fieldName]=this.getDataSet().getFieldOption(this.fieldName)),d=null}else{r.type=this.expType.ftCell;var u=l[1].split(this.valueSplit);if(r.keyFieldName=u[0],r.keyValue=u[1],r.node=this.getDataSet().getKeyNode(u[0],u[1]),null!=r.node){var c=this.getDataSet().getCellOption(r.fieldName,r.node),g=this.fieldName+this.keySplit+this.keyFieldName+this.valueSplit+this.keyValue;null==c.cacPCells&&(c.cacPCells={}),null==this.keyNode&&(this.keyNode=this.getDataSet().getKeyNode(this.keyFieldName,this.keyValue)),null!=this.keyNode&&(c.cacPCells[g]={node:this.keyNode,fieldName:this.fieldName,keyFieldName:this.keyFieldName,keyValue:this.keyValue},c.isCac=!0),c=null}}this._expObject[i++]=r,this._expStack[this._top++]=0}s=e.indexOf(this.nodeBegin)}e.length>0&&(this._expStack[this._top++]=e)},getValue:function getValue(node,notEval){for(var len=this._expObject.length,i=0;i<len;i++){var el=this._expObject[i],val=0;if(el.type===this.expType.ftField)val=this.getDataSet().getValue(el.fieldName,node);else{if(null==el.node&&(el.node=this.getDataSet().getKeyNode(el.keyFieldName,el.keyValue),null!=el.node)){var op=this.getDataSet().getCellOption(el.fieldName,el.node),nodeKey=this.fieldName+this.keySplit+this.keyFieldName+this.valueSplit+this.keyValue;null==op.cacPCells&&(op.cacPCells={}),null==this.keyNode&&(this.keyNode=this.getDataSet().getKeyNode(this.keyFieldName,this.keyValue)),null!=this.keyNode&&(op.cacPCells[nodeKey]={node:this.keyNode,fieldName:this.fieldName,keyFieldName:this.keyFieldName,keyValue:this.keyValue},op.isCac=!0),op=null}null!=el.node&&(val=this.getDataSet().getValue(el.fieldName,el.node))}null==val||""===val?val=0:val<0&&(val="("+val+")"),this._expStack[el.index]=val,el=null}var rs=this._expStack.join("");return notEval?rs:""!==this.trim(rs)?eval("("+rs+")"):void 0}}),qzz.expression}),
/*!
 * 列表对象.
 * ecp.qzz.list.js
 * 创建者：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.object"],function(){var t=window.qzz;return t.list=t.Class(t.object,{_create:function(){this.base(),this.className="List",this.logInfo("List.create"),this.filtered=!1,this.filter={},this.datas=[],this.selectIndex=-1,this.fDatas=[],this.fselectIndex=-1,this.idColName="id",this.textColName="text"},_refreshFilter:function(){if(this.filtered){this.fDatas=[];for(var t="",e="",i=0,s=0,n=this.datas.length;i<n;i++){var o=this.datas[i];if(!1!==o._filter){var h=(t=o[this.textColName]+"").replace(/,/g,"");for(var l in isNaN(h)&&(h=""),e=o[this.idColName]+"",this.filter)if(t.indexOf(l)>=0||""!==h&&h.indexOf(l)>=0||!0!==this.filterTextOnly&&""!==e&&e.indexOf(l)>=0){this.fDatas[s++]=o;break}}else this.fDatas[s++]=o}}else{this.fDatas=[];for(i=0,n=this.datas.length;i<n;i++)this.fDatas[i]=this.datas[i]}},addFilter:function(t,e){if("string"==typeof t){if(null!=this.filter[t])return;this.filter[t]=!0}else if(this.isArray(t))for(var i=0,s=t.length;i<s;i++)this.filter[t]=!0;0!=e&&(this.filtered=!0,this._refreshFilter())},sort:function(t,e){null==t&&""===t&&(t=this.idColName),null==e&&(e=!1),this.cashJson={};for(var i=0,s=this.datas.length;i<s;i++)for(var n=i+1;n<s;n++){var o=this.datas[i];"object"==(void 0===o?"undefined":_typeof(o))&&(o=o[t]);var h=this.datas[n];if("object"==(void 0===h?"undefined":_typeof(h))&&(h=h[t]),e){if(this.compare(o,h,this.cashJson)<0){var l=this.datas[i];this.datas[i]=this.datas[n],this.datas[n]=l}}else if(this.compare(o,h,this.cashJson)>0){l=this.datas[i];this.datas[i]=this.datas[n],this.datas[n]=l}}this._refreshFilter()},doFilter:function(t){null==t&&(t=!0),this.filtered=t,this._refreshFilter()},delFilter:function(t,e){if("string"==typeof t){if(null==this.filter[t])return;delete this.filter[t]}else if(this.isArray(t))for(var i=0,s=t.length;i<s;i++)null!=this.filter[t]&&delete this.filter[t];for(var n in this.filtered=!1,this.filter){this.filtered=!0;break}0!=e&&this._refreshFilter()},filterExist:function(t){if(null==t){var e=0;for(key in this.filter)e++;return e}return null!=this.filter[t]},clearFilter:function(){this.filtered=!1,this.filter={},this._refreshFilter()},setItemList:function(t){if(this._maxLen=0,this.isArray(t)&&t.length>0)if("string"==typeof t[0]||"number"==typeof t[0]){var e=t.length;this.datas=[];for(var i=0;i<e;i++){var s={};s[this.textColName]=t[i],this.datas.push(s)}}else this.datas=t;else this.filtered=!1,this.filter={},this.datas=[];return this.selectIndex=-1,this.datas.length>0&&(this.selectIndex=0),this._refreshFilter(),!0},getItemList:function(t){return!0===t?this.datas:this.fDatas},addItem:function(t){return this._maxLen=0,"string"==typeof t?this.datas[this.datas.length][this.textColName]=t:"object"==(void 0===t?"undefined":_typeof(t))&&(this.datas[this.datas.length]=t),this.selectIndex=this.datas.length-1,!0},delItem:function(t){return!this.filtered&&(this._maxLen=0,t>=0&&t<this.datas.length&&this.datas.splice(t,1),this.datas.length>0&&(this.selectIndex=t>0?t-1:t),!0)},insertItem:function(t,e){if(this.filtered)return!1;if(this._maxLen=0,t>=0&&t<this.datas.length){var i=e;"string"==typeof e&&((i={})[this.textColName]=e),this.datas.splice(t,0,i)}return this.selectIndex=t,!0},modItem:function(t,e){if(this.filtered)return!1;if(this._maxLen=0,t>=0&&t<this.datas.length){var i=e;"string"==typeof e&&((i={})[this.textColName]=e),this.datas.splice(t,1,i)}return!0},getItem:function(t,e){var i=this.getItemList(e);return t>=0&&t<i.length?i[t]:null},first:function(t){this.getItemList(t).length>0&&(this.selectIndex=0)},last:function(t){var e=this.getItemList(t);e.length>0&&(this.selectIndex=e.length-1)},next:function(t){var e=this.getItemList(t);this.selectIndex<e.length-1&&this.selectIndex++},prior:function(){this.selectIndex>0&&this.selectIndex--},length:function(t){return this.getItemList(t).length},indexOfText:function(t,e){for(var i=-1,s=this.getItemList(e),n=s.length,o=0;o<n;o++){var h=s[o][this.textColName]+"";if(this.trim(h)===this.trim(t)){i=o;break}}return s=null,i},indexOf:function(t,e){for(var i=-1,s=this.getItemList(e),n=s.length,o=0;o<n;o++)if(null!=s[o][this.idColName]){if(s[o][this.idColName]===t){i=o;break}}else if(s[o][this.textColName]===t){i=o;break}return i},getMaxText:function(t){if(0==this._maxLen){for(var e=this.getItemList(t),i=0,s=e.length;i<s;i++){var n=this.strLen(e[i][this.textColName]+"");this._maxLen<n&&(this._maxLen=n,this._maxText=e[i][this.textColName]+"")}e=null}return this._maxText}}),t.list}),
/*!
 * 远光ECP平台3.4版本 
 * 
 * 可见窗口基类.：qzz.ui.Window
 * ecp.qzz.ui.window.js
 * @requires qzz.ui
 */
null==window.qdefine&&(window.qdefine=define),null==window.GRM_ROOT&&(window.GRM_ROOT="/grm/ecp/webcore"),qdefine(["qzz.object"],function(){var t=window.qzz;return t.space("ui"),!0!==t.ui.cssloaded&&require(["css!"+GRM_ROOT+"/themes/default/qzz/ecp.qzz.css"],function(){t.ui.cssloaded=!0}),t.ui.window=t.Class(t.object,{init:function(t,e){var i=null;this._renderFinish=!1,null==e&&(null!=t&&(null!=t.selector&&1==t.length||null!=t.getAttribute&&1==t.getAttribute("nodeType"))||(e=t,t=null));try{if(null!=t){null!=t.selector&&t.length>0?this._control=t[0]:this._control=t,this.control=this._toJqueryObj(this._control),this._control.setAttribute("ecpclass",this.getEcpType()),this.name=this._control.getAttribute("dataField");var s=this._control.getAttribute("data-option");try{null!=s&&""==typeof s&&(0!=(s=this.trim(s)).indexOf("{")&&0!=s.indexOf("[")||(s=JSON.parse(s))),this.inputer=s}catch(t){this.logError("inputer to Json error!"+t.message+t.stack)}if(e&&e.inputer){var n=(i=e).refTypeValues,o=i.dataType;s&&(i.inputer=this.extend(i.inputer,s)),e=this.extend(e,i.inputer.option),null!=n&&"sysenum"===o&&(e.data=null)}else s&&(e=this.extend(e,s.option)),i={inputer:{option:e}};this.dataField=this._control.getAttribute("dataField")}this.base(e),this.keyBoard={ENTER:13,TAB:9,UP:38,DOWN:40,Left:37,Right:39,LEFT:37,RIGHT:39,BACKSPACE:8,ESC:27,DEL:46,PAGEUP:33,PAGEDOWN:34,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,C:67,D:68,N:78,F:84,O:79,P:80,LArrow:188,RArrow:190,V:86,X:88,Z:90,CTRL:17,A:65,HOME:36,END:35,SHIFT:16,PgUp:33,PgDn:34},this.ELEM_WIDTH_STYLE=["border-left-width","border-right-width","padding-left","padding-right","margin-left","margin-right"],this.ELEM_HEIGHT_STYLE=["border-top-height","border-bottom-height","padding-top","padding-bottom","margin-top","margin-bottom"],this.IE_ELEM_WIDTH_STYLE=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight","marginLeft","marginRight"],this.IE_ELEM_HEIGHT_STYLE=["borderTopHeight","borderBottomHeight","paddingTop","paddingBottom","marginTop","marginBottom"],this.mouseType={mtLeft:"L",mtRight:"R"},this._cssPrefix="",this.isNotEmpty(this.getOption().cssPrefix)&&(this._cssPrefix=this.getOption().cssPrefix),this._textSpan=document.getElementById("textSpan"),null==this._textSpan&&(this._textSpan=this.createElement("span"),this._textSpan.setAttribute("id","textSpan"),this._getBody().appendChild(this._textSpan)),this.setStyle(this._textSpan,"testSpan"),this._textSpan.style.display="none",this._render(),this._afterRender(),this._eventList={},this.body=null}catch(t){this.logError("init error:"+t.message+t.stack)}null==window._qzz_component_list&&(window._qzz_component_list={}),window._qzz_component_list[this.index]=this,this._renderFinish=!0},_create:function(){this.className="Window",this._update=!0,this.parent,this.childComponent=[],this.tmpResize="",this._enabled=!this.getBooleanValue(this.getOption().disabled,!1),this._readOnly=this.getBooleanValue(this.getOption().readOnly,!1),this._readOnly=!this.getBooleanValue(this.getOption().editable,!0),null==this.getOption().width&&null!=this._control&&(this.getOption().width=this._getNumberValue(this._control.style.width,10)),"string"==typeof this.getOption().width&&/[\d]+%$/.test(this.getOption().width)||(this.getOption().width=this._getNumberValue(this.getOption().width,10)),"string"==typeof this.getOption().height&&/[\d]+%$/.test(this.getOption().height)||(this.getOption().height=this._getNumberValue(this.getOption().height,10)),this.getOption().margin=this._getNumberValue(this.getOption().margin,""),this.getOption().marginLeft=this._getNumberValue(this.getOption().marginLeft,""),this.getOption().marginRight=this._getNumberValue(this.getOption().marginRight,""),this.getOption().marginTop=this._getNumberValue(this.getOption().marginTop,""),this.getOption().marginBottom=this._getNumberValue(this.getOption().marginBottom,""),this.getOption().padding=this._getNumberValue(this.getOption().padding,""),this.getOption().paddingLeft=this._getNumberValue(this.getOption().paddingLeft,""),this.getOption().paddingRight=this._getNumberValue(this.getOption().paddingRight,""),this.getOption().paddingTop=this._getNumberValue(this.getOption().paddingTop,""),this.getOption().paddingBottom=this._getNumberValue(this.getOption().paddingBottom,""),this.getOption().border=this.getOption().border||"",this.getOption().borderLeft=this.getOption().borderLeft||"",this.getOption().borderRight=this.getOption().borderRight||"",this.getOption().borderTop=this.getOption().borderTop||"",this.getOption().borderBottom=this.getOption().borderBottom||"",this.getOption().borderWidth=this._getNumberValue(this.getOption().borderWidth,""),this.getOption().borderLeftWidth=this._getNumberValue(this.getOption().borderLeftWidth,""),this.getOption().borderRightWidth=this._getNumberValue(this.getOption().borderRightWidth,""),this.getOption().borderTopWidth=this._getNumberValue(this.getOption().borderTopWidth,""),this.getOption().borderBottomWidth=this._getNumberValue(this.getOption().borderBottomWidth,""),this.getOption().fontSize=this._getNumberValue(this.getOption().fontSize,""),this.getOption().defFontSize=this._getNumberValue(this.getOption().fontSize,14),this.getOption().designer=this.getBooleanValue(this.getOption().designer,!1);var t=this._getControl();if(this.isNotEmpty(t)){this.thisWindow=t;var e=t.parentNode;null!=e&&this.isNotEmpty(e._object)&&(e=e._object),this.setParent(e,!0),this.thisWindow._object=this,e=null}t=null,this.focus=!1,this.hasSelect=!1,this._hasclick=!0,this._atop=null,this._aleft=null,this._sizew=.3,this._sizeh=1.3,this.getOption().top=this._getNumberValue(this.getOption().top,0),this.getOption().left=this._getNumberValue(this.getOption().left,0),this.docFragment=document.createDocumentFragment()},_render:function(){var t=this._control;if((null==t||0==t.length)&&(this.thisWindow=this.createElement("div"),this._control=this.thisWindow,this.control=this._toJqueryObj(this._control),null!=this.getOption().parent)){var e=this.getOption().parent;!e.isComponent&&null!=e&&this.isNotEmpty(e._object)&&(e=e._object),this.setParent(e),this.thisWindow._object=this,this.getOption().parent=null,e=null}"function"!=typeof this.doContainerHide&&"function"!=typeof this.doContainerShow||this.isShow()||(this._showState=!1,this.logInfo("show handel has set")),this.setStyle(this.thisWindow,"winStyle"),this._setNumberValue(this.thisWindow,"margin",this.getOption().margin),this._setNumberValue(this.thisWindow,"marginLeft",this.getOption().marginLeft),this._setNumberValue(this.thisWindow,"marginRight",this.getOption().marginRight),this._setNumberValue(this.thisWindow,"marginTop",this.getOption().marginTop),this._setNumberValue(this.thisWindow,"marginBottom",this.getOption().marginBottom),this._setNumberValue(this.thisWindow,"padding",this.getOption().padding),this._setNumberValue(this.thisWindow,"paddingLeft",this.getOption().paddingLeft),this._setNumberValue(this.thisWindow,"paddingRight",this.getOption().paddingRight),this._setNumberValue(this.thisWindow,"paddingTop",this.getOption().paddingTop),this._setNumberValue(this.thisWindow,"paddingBottom",this.getOption().paddingBottom),this._setNumberValue(this.thisWindow,"borderWidth",this.getOption().borderWidth),this._setNumberValue(this.thisWindow,"borderLeftWidth",this.getOption().borderLeftWidth),this._setNumberValue(this.thisWindow,"borderRightWidth",this.getOption().borderRightWidth),this._setNumberValue(this.thisWindow,"borderTopWidth",this.getOption().borderTopWidth),this._setNumberValue(this.thisWindow,"borderBottomWidth",this.getOption().borderBottomWidth),""!==this.getOption().border&&(this.thisWindow.style.border=this.getOption().border),""!==this.getOption().borderLeft&&(this.thisWindow.style.borderLeft=this.getOption().borderLeft),""!==this.getOption().borderRight&&(this.thisWindow.style.borderRight=this.getOption().borderRight),""!==this.getOption().borderTop&&(this.thisWindow.style.borderTop=this.getOption().borderTop),""!==this.getOption().borderBottom&&(this.thisWindow.style.borderBottom=this.getOption().borderBottom),null!=this.getOption().color&&""!==this.getOption().color&&(this.thisWindow.style.color=this.getOption().color),this._setNumberValue(this.thisWindow,"top",this.getOption().top),this._setNumberValue(this.thisWindow,"left",this.getOption().left),null!=this.getOption().borderStyle&&(this.thisWindow.style.borderStyle=this.getOption().borderStyle),null!=this.getOption().radius&&(this.thisWindow.style.borderRadius=this.getOption().radius+"px"),null!=this.getOption().borderColor&&(this.thisWindow.style.borderColor=this.getOption().borderColor),/[\d]+%$/.test(this.getOption().width)?this.thisWindow.style.width=this.getOption().width:this._setNumberValue(this.thisWindow,"width",this.getOption().width),/[\d]+%$/.test(this.getOption().height)?this.thisWindow.style.height=this.getOption().height:this._setNumberValue(this.thisWindow,"height",this.getOption().height),null!=this.getOption().fontSize&&""!==this.getOption().fontSize?this._setNumberValue(this.thisWindow,"fontSize",this.getOption().fontSize):(this.thisWindow.style.fontSize="14px",this.getOption().fontSize=14),null!=this.getOption().textAlign&&""!==this.getOption().textAlign&&(this.thisWindow.style.textAlign=this.getOption().textAlign),null!=this.getOption().opacity&&""!==this.getOption().opacity&&(this.thisWindow.style.opacity=this.getOption().opacity),this._hasResize()&&this._doResize()},isMouseOver:function(){return this._mouseover},_afterRender:function(){var t=this;this.thisWindow.onmousedown=function(){t._hasclick=!1},this.thisWindow.onmouseup=function(){t._hasclick=!0,t.hasSelect=!0},this.thisWindow.onmouseover=function(e){e=e||window.event;t._mouseover=!0,"function"==typeof t.doMouseOver&&t.doMouseOver(e)},this.thisWindow.onmouseout=function(e){e=e||window.event;t._mouseover=!1,"function"==typeof t.doMouseOut&&t.doMouseOut(e)},1==this.getOption().designer&&null!=this.getOption().caption&&""!==this.getOption().caption&&(null==this._capSpan&&(this._capSpan=this.createElement("DIV"),this.setStyle(this._capSpan,"winCaptionStyle"),this.thisWindow.appendChild(this._capSpan)),this._setHtml(this._capSpan,this.getOption().caption)),null!=this.getOption().title&&""!==this.getOption().title&&(this.thisWindow.title=this.getOption().title),this._isShow=this.thisWindow.offsetWidth>0,this._sysEvent()},getID:function(){return null==this.id&&(this.id=this.thisWindow.id),this.id},getNumberValue:function(t,e){return this._getNumberValue(t,e)},_getNumberValue:function(t,e){var i=t,s=e;return this.isNotEmpty(i)?"string"==typeof i&&(i=i.replace(/px/,""),i=this.isEmpty(i)?s:parseInt(i,10)):i=s,i},_hasResize:function(){return!(this.thisWindow.style.top==this.getOption().top+"px"&&this.thisWindow.style.left==this.getOption().left+"px"&&this.thisWindow.style.width==this.getOption().width+"px"&&this.thisWindow.style.height==this.getOption().height+"px")},_doResize:function(){if(!this._update)return!1;this.logBegin("_doResize:"+this.getOption().width);var t="",e=this.getTop(),i=this.thisWindow.style.top;this._setNumberValue(this.thisWindow,"top",e)&&(t+=this.getName()+" top:"+i+" to "+e+"\n");var s=this.getLeft();i=this.thisWindow.style.left,this._setNumberValue(this.thisWindow,"left",s)&&(t+=this.getName()+" left:"+i+" to "+s+"\n");var n=this.getWidth();n<=0&&(n=1),!0===/\d+%$/.test(n)?this.thisWindow.style.width=n:/\d+%$/.test(this.thisWindow.style.width)||(n<(i=this._getNumberValue(this.thisWindow.style.width,1))||n>i+2||!this.getBrowser("msie"))&&this._setNumberValue(this.thisWindow,"width",n)&&(t+=this.getName()+" width:"+i+" to "+n+"\n");var o=this.getHeight();o<=0&&(o=1),!0===/\d+%$/.test(o)?this.thisWindow.style.height=o:/\d+%$/.test(this.thisWindow.style.height)||(i=this.thisWindow.style.height,this._setNumberValue(this.thisWindow,"height",o)&&(t+=this.getName()+" height:"+i+" to "+o+"\n")),this.logEnd("_doResize "+t)},_getRectTop:function(t){return this._getPaddingTop(t)},_getRectLeft:function(t){return this._getPaddingLeft(t)},_getRectWidth:function(t){var e=this.getWidth();return this.isNotEmpty(t)?(null==t.tagName&&t.length>0&&(t=t[0]),"BODY"==t.tagName?(e=this._getBodyWidth(),this.isEmpty(t.style.marginLeft)&&(t.style.marginLeft="0px"),this.isEmpty(t.style.marginRight)&&(t.style.marginRight="0px")):e=null==t._width?t.offsetWidth:t._width):/\d+%$/.test(e)&&(e=this.thisWindow.offsetWidth),e-=this._getPaddingLeft(t)+this._getPaddingRight(t)+this._getBorderLeft(t)+this._getBorderRight(t)},_getRectHeight:function(t){var e=this.getHeight();return this.isNotEmpty(t)?(null==t.tagName&&t.length>0&&(t=t[0]),"BODY"==t.tagName?(e=this._getBodyHeight(),this.isEmpty(t.style.marginTop)&&(t.style.marginTop="0px"),this.isEmpty(t.style.marginBottom)&&(t.style.marginBottom="0px")):e=null==t._height?t.offsetHeight:t._height):/\d+%$/.test(e)&&(e=this.thisWindow.offsetHeight),e-=this._getPaddingTop(t)+this._getPaddingBottom(t)+this._getBorderTop(t)+this._getBorderBottom(t)},_getBorderLeft:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return"medium"===(e="BODY"==t.tagName?t.style.borderLeftWidth:this.getCurrentStyle(t).borderLeftWidth)&&(e=""),this._getNumberValue(e,0)},_getBorderRight:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return"medium"===(e="BODY"==t.tagName?t.style.borderRightWidth:this.getCurrentStyle(t).borderRightWidth)&&(e=""),this._getNumberValue(e,0)},_getBorderTop:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return"medium"===(e="BODY"==t.tagName?t.style.borderTopWidth:this.getCurrentStyle(t).borderTopWidth)&&(e=""),this._getNumberValue(e,0)},_getBorderBottom:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return"medium"===(e="BODY"==t.tagName?t.style.borderBottomWidth:this.getCurrentStyle(t).borderBottomWidth)&&(e=""),this._getNumberValue(e,0)},_getMarginLeft:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return"auto"===(e="BODY"==t.tagName?t.style.marginLeft:this.getCurrentStyle(t).marginLeft)&&(e=""),this._getNumberValue(e,0)},_getMarginRight:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return"auto"===(e="BODY"==t.tagName?t.style.marginRight:this.getCurrentStyle(t).marginRight)&&(e=""),this._getNumberValue(e,0)},_getMarginTop:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return"auto"===(e="BODY"==t.tagName?t.style.marginTop:this.getCurrentStyle(t).marginTop)&&(e=""),this._getNumberValue(e,0)},_getMarginBottom:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return"auto"===(e="BODY"==t.tagName?t.style.marginBottom:this.getCurrentStyle(t).marginBottom)&&(e=""),this._getNumberValue(e,0)},_getPaddingLeft:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return e="BODY"==t.tagName?t.style.paddingLeft:this.getCurrentStyle(t).paddingLeft,this._getNumberValue(e,0)},_getPaddingRight:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return e="BODY"==t.tagName?t.style.paddingRight:this.getCurrentStyle(t).paddingRight,this._getNumberValue(e,0)},_getPaddingTop:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return e="BODY"==t.tagName?t.style.paddingTop:this.getCurrentStyle(t).paddingTop,this._getNumberValue(e,0)},_getPaddingBottom:function(t){null==(t=t||this.thisWindow).tagName&&t.length>0&&(t=t[0]);var e=0;return e="BODY"==t.tagName?t.style.paddingBottom:this.getCurrentStyle(t).paddingBottom,this._getNumberValue(e,0)},_getBody:function(){return null==this.body&&(this.body=document.body),this.body},_toJqueryObj:function(t){var e=t;return null!=t&&null!=t.tagName&&"function"==typeof window.$&&(e=window.$(e)),e},getBody:function(){return this._toJqueryObj(this._getBody())},findModelBody:function(t){for(var e=t.parentNode,i=null;null!=e&&null!=e.tagName&&"BODY"!==e.tagName.toUpperCase();){if("-1"==e.getAttribute("tabindex"))i=e;else if("string"==typeof e.className&&e.className.indexOf(".modal-dialog")>=0&&null!=e.parentNode)i=e.parentNode;else{!0===this.trigger("modelSelector",[e])&&(i=e)}if(null!=i)break;e=e.parentNode}return i},_getModelBody:function(){return null==this.modelBody&&(this.modelBody=this.findModelBody(this._getControl()),null==this.modelBody?(this.modelBody=this._getBody(),this.inModelBody=!1):this.inModelBody=!0),this.modelBody},getModelBody:function(){return this._toJqueryObj(this._getModelBody())},_getBodyWidth:function(){return this.getBrowser("safari")?document.documentElement.clientWidth:this._getBody().offsetWidth},_getBodyHeight:function(){var t=this._getBody().offsetHeight,e=document.documentElement.clientHeight;return t<e&&(t=e),t},getEventTarget:function(t){return t.target||t.srcElement},_docMouseDown:function(t){this._enabled&&(this.hasSelect||this.focus)&&(this.doMouseDown(t),!0!==this._createEditObject&&(this.hasSelect=!1),this._createEditObject=!1)},_docMouseUp:function(t){this._enabled&&1==this._hasclick&&(this.hasSelect||this.focus)&&(this.hasSelect?this.focus||this.setFocus():this.focus&&this.setBlur(),this.doMouseUp(t),this.hasSelect=!1),this._hasclick=!0},_docMouseMove:function(t){this._enabled&&(this.hasSelect||this.focus)&&(this.doMouseMove(t),this.hasSelect=!1)},_docCssLoaded:function(){"function"==typeof this.doCssLoaded&&this.doCssLoaded()},_docShow:function(){"function"==typeof this.doContainerHide&&this.doContainerHide(),this.doShow()},_docHide:function(){"function"==typeof this.doContainerShow&&this.doContainerShow(),this.doHide()},_docKeyUp:function(t){if(this._enabled&&this.focus){var e=t.keyCode||t.charCode||t.which,i=this.doKeyUp(t,e);return this.logInfo("doc key "+e+" up!"),null==i&&(i=!0),i||(t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1)),t=null,i}},_docKeyDown:function(t){if(this._enabled&&this.focus){var e=t.keyCode||t.charCode||t.which,i=this.doKeyDown(t,e);return null==i&&(i=!0),i||(t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1)),t=null,i}},_docMouseWheel:function(t){if(this._enabled&&this.focus){var e=0;e=t.wheelDelta?t.wheelDelta:-1*t.detail;var i=this.doMouseWheel(t,e);return null==i&&(i=!0),!1!==i&&"false"!==i||(t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1)),t=null,i}},_docResize:function(t){var e=this.doResize(t);return null==e&&(e=!0),!1!==e&&"false"!==e||(t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1)),t=null,e},_sysEvent:function(){var e=this;this._eventList={mouseup:function(t){t=t||window.event;e._docMouseUp(t)},mousedown:function(t){t=t||window.event;e._docMouseDown(t)},mousemove:function(t){t=t||window.event;e._docMouseMove(t)},keyup:function(t){t=t||window.event;return e._docKeyUp(t)},keydown:function(t){t=t||window.event;return e._docKeyDown(t)},mousewheel:function(t){t=t||window.event;var i=e._docMouseWheel(t);if(!1===i||"false"===i){var s=t||window.event;return s.preventDefault?(s.preventDefault(),s.stopPropagation()):(s.cancelBubble=!0,s.returnValue=!1),!1}return!0},resize:function(t){t=t||window.event;return e._docResize(t)}},window.addEventListener?(document.addEventListener("mousedown",this._eventList.mousedown,!1),document.addEventListener("mouseup",this._eventList.mouseup,!1),document.addEventListener("mousemove",this._eventList.mousemove,!1),document.addEventListener("keydown",this._eventList.keydown,!1),document.addEventListener("keyup",this._eventList.keyup,!1),document.addEventListener("DOMMouseScroll",this._eventList.mousewheel,!1),document.addEventListener("mousewheel",this._eventList.mousewheel,{passive:!1}),window.addEventListener("resize",this._eventList.resize,!1)):(document.attachEvent("onmousedown",this._eventList.mousedown),document.attachEvent("onmouseup",this._eventList.mouseup),document.attachEvent("onmousemove",this._eventList.mousemove),document.attachEvent("onkeydown",this._eventList.keydown),document.attachEvent("onkeyup",this._eventList.keyup),document.attachEvent("onmousewheel",this._eventList.mousewheel),window.attachEvent("onresize",this._eventList.resize)),null==window._qzz_component_show_handle&&(window._qzz_component_show_handle=setInterval(function(){var t=!0;for(var e in window._qzz_component_list){var i=window._qzz_component_list[e];null!=i&&null!=i.isShow?!0!==i._isShow&&!0===i.isShow()?(i._isShow=!0,i._docShow()):!0===i._isShow&&!1===i.isShow()&&(i._isShow=!1,i._docHide()):delete window._qzz_component_list[e],t=!1}t&&(clearInterval(window._qzz_component_show_handle),window._qzz_component_show_handle=null)},250)),null==t.ui.cssloaded_listen&&!0!==t.ui.cssloaded&&(t.ui.cssloaded_listen=setInterval(function(){if(!0===t.ui.cssloaded){for(var e in window._qzz_component_list){var i=window._qzz_component_list[e];null!=i&&null!=i.isShow&&!0===i._renderFinish&&i._docCssLoaded()}clearInterval(t.ui.cssloaded_listen),t.ui.cssloaded_listen=null}},100))},clearEvent:function(){window.removeEventListener?(document.removeEventListener("mousedown",this._eventList.mousedown,!1),document.removeEventListener("mouseup",this._eventList.mouseup,!1),document.removeEventListener("mousemove",this._eventList.mousemove,!1),document.removeEventListener("keydown",this._eventList.keydown,!1),document.removeEventListener("keyup",this._eventList.keyup,!1),document.removeEventListener("DOMMouseScroll",this._eventList.mousewheel,!1),document.removeEventListener("mousewheel",this._eventList.mousewheel,!1)):(document.detachEvent("onmousedown",this._eventList.mousedown),document.detachEvent("onmouseup",this._eventList.mouseup),document.detachEvent("onmousemove",this._eventList.mousemove),document.detachEvent("onkeydown",this._eventList.keydown),document.detachEvent("onkeyup",this._eventList.keyup),document.detachEvent("onmousewheel",this._eventList.mousewheel)),null!=this.showHandle&&(clearInterval(this.showHandle),this.showHandle=null)},createElement:function(t){return document.createElement(t)},setStyle:function(t,e,i,s){if(i=i||!0,null==t._option&&(t._option={}),this.isArray(e)){if(!1!==s)for(var n=0,o=e.length;n<o;n++)e[n]=this._cssPrefix+e[n];t._option.cssAry=e;var h=e.join(" ");t.className!=h&&i&&(t.className=h)}else!1!==s&&(e=this._cssPrefix+e),t.className!=e&&(i&&(t.className=e),t._option.cssAry=[e])},addStyle:function(t,e,i,s){if(i=i||!0,null==t._option&&(t._option={}),null!=t._option.cssAry){for(var n=0,o=t._option.cssAry.length;n<o&&t._option.cssAry[n]!=this._cssPrefix+e;n++);n>=o&&(!0===s?t._option.cssAry.splice(0,0,this._cssPrefix+e):t._option.cssAry.push(this._cssPrefix+e))}else t._option.cssAry=[this._cssPrefix+e];if(i){var h=t._option.cssAry.join(" ");h!==t.className&&(t.className=h)}},clearStyle:function(t,e){null==t._option&&(t._option={}),null!=t._option.cssAry&&(t._option.cssAry=[]),(e=e||!0)&&""!==t.className&&(t.className="")},delStyle:function(t,e,i){if(null==t._option&&(t._option={}),null!=t._option.cssAry){for(var s=0,n=t._option.cssAry.length;s<n&&t._option.cssAry[s]!=e;s++);s<n&&t._option.cssAry.splice(s,1)}if(i=i||!0){var o=t._option.cssAry.join(" ");o!==t.className&&(t.className=o)}},_setTdText:function(t,e,i){if(!0!==i){var s,n=t.childNodes.length;for(s=0;s<n;s++){if("#text"==(o=t.childNodes[s]).nodeName){o.nodeValue=e;break}}if(s>=n)for(s=0;s<n;s++){var o;if("FONT"==(o=t.childNodes[s]).nodeName.toUpperCase()){o.childNodes[0].nodeValue=e;break}}}else this._setHtml(t,e,!1)},_setNumberValue:function(t,e,i){var s=void 0===i?"undefined":_typeof(i);return("number"===s&&!isNaN(i)||"string"==s&&""!==i&&!isNaN(i)&&i.indexOf("px")<0)&&(i<=0&&("width"===e||"height"===e)&&(i=1),i+="px",t.style[e]!==i)&&(t.style[e]=i,!0)},rgbToColor:function(t){if(t.indexOf("#")>=0)return t;var e=new RegExp("2[0-4]\\d|25[0-5]|[01]?\\d\\d?","ig"),i=t.match(e);if(3!=i.length)return i=null,e=null,"NaN";for(var s="#",n=0;n<3;n++){var o=parseInt(i[n]);s+=o<16?"0"+o.toString(16):o.toString(16),o=null}return i=null,e=null,s},getScrollXY:function(){var t={};return null!=window.pageYOffset?(t.top=window.pageYOffset,t.left=window.pageXOffset):null!=document.compatMode&&"BackCompat"!=document.compatMode?(t.top=document.documentElement.scrollTop,t.left=document.documentElement.scrollLeft):null!=document.body&&(t.top=document.body.scrollTop,t.left=document.body.scrollLeft),!0===this.inModelBody&&(t.top=0,t.left=0),t},getAXY:function(){var t=this.thisWindow.getBoundingClientRect(),e=this.getScrollXY();this._aleft=t.left+e.left,this._atop=t.top+e.top},getATop:function(){return null==this._atop&&this.getAXY(),this._atop},getALeft:function(){return null==this._aleft&&this.getAXY(),this._aleft},doFocus:function(t){this.logInfo("focus"),"function"==typeof this.onFocus&&this.onFocus(t)},doBlur:function(t){this.logInfo("blur"),"function"==typeof this.onBlur&&this.onBlur(t)},doMouseDown:function(t){"function"==typeof this.onMouseDown&&this.onMouseDown(t)},doMouseMove:function(t){"function"==typeof this.onMouseMove&&this.onMouseMove(t)},doMouseUp:function(t){"function"==typeof this.onMouseUp&&this.onMouseUp(t)},doKeyDown:function(t,e){return"function"==typeof this.onKeyDown&&this.onKeyDown(t,e),!0},doKeyUp:function(t,e){return"function"==typeof this.onKeyUp&&this.onKeyUp(t,e),!0},doMouseWheel:function(t){"function"==typeof this.onMouseWheel&&this.onMouseWheel(t)},doResize:function(t){"function"==typeof this.onResize&&this.onResize(t)},doShow:function(){"function"==typeof this.onShow&&this.onShow()},doHide:function(){"function"==typeof this.onHide&&this.onHide()},setContainer:function(t){},getParent:function(){return this._toJqueryObj(this._parent)},_getContainer:function(){return this._toJqueryObj(this._control)},getContainer:function(){return this._control},appendChild:function(t){this.thisWindow.appendChild(t)},removeChild:function(t){for(var e=0,i=this.childComponent.length;e<i;e++)if(this.childComponent[e].index==t.index){this.childComponent.splice(e,1),this.getContainer().removeChild(t.getContainer());break}},removeChildComponent:function(t){if(null!=t)for(var e=t.length-1;e>=0;e--){var i=t[e];!0===i.isComponent&&null!=i.thisWindow&&null==i.thisWindow.parentNode&&t.splice(e,1)}},getParentElement:function(){return this.thisWindow.parentElement},setParent:function(t,e){null!=t&&(t.isComponent?(1!=e&&t.getContainer().appendChild(this.thisWindow),this._parent=t,this._parent.childComponent.push(this),this.parent=this._parent):(null!=t.appendChild?(1!=e&&null!=this.thisWindow&&this.thisWindow.parentElement!=t&&t.appendChild(this.thisWindow),this._parent=t):(1!=e&&t.append(this.thisWindow),this._parent=t[0]),this.parent=this._toJqueryObj(this._parent),1!=e&&this._asynRun(function(){"function"==typeof this.getAXY&&this.thisWindow.offsetWidth>0&&this.getAXY()},200),null==this._parent.childComponent&&(this._parent.childComponent=[]),this._parent.childComponent.push(this)))},getWidthOrHeight:function(t,e,i){if(!t||0===t.length)return 0;var s,n;if(t.length>=1&&(t=t[0]),s="width"===e?t.style.width:t.style.height,"outer"!==i&&!1!==i&&s&&0!==s)return parseFloat(s)||0;var o,h=document.defaultView,l=!0;if(h||(l=!1),o=l?h.getComputedStyle(t,null):t.currentStyle){var a,r,d;if("width"===e?(a=l?this.ELEM_WIDTH_STYLE:this.IE_ELEM_WIDTH_STYLE,r=t.offsetWidth):(a=l?this.ELEM_HEIGHT_STYLE:this.IE_ELEM_HEIGHT_STYLE,r=t.offsetHeight),r>0){r=parseFloat(r)||0;for(var u=0;u<6;u++)!(d=l?o.getPropertyValue(a[u]):o[a[u]])||"0px"===d||d.indexOf("px")<=0||(d=parseFloat(d)||0,u<=3?r-=d:r+=d);s=r}else{s=parseFloat(s)||0;for(u=0;u<6;u++)!(n=l?o.getPropertyValue(a[u]):o[a[u]])||"0px"===n||n.indexOf("px")<=0||(s+=n=parseFloat(n)||0)}return s}return 0},_getWindow:function(){return this.thisWindow},getWindow:function(){return this._toJqueryObj(this.thisWindow)},getTextWidth:function(t,e,i,s){if(null==t)return 0;"string"!=typeof t&&(t+=""),-1!=t.indexOf("<")&&(t=t.replace(/<(a|span|div|li|ul|table|tr|td|input|i) [^<>]+>([^<>]+)?<\/\1>/gi,"$2")),this._textSpan.style.display="",null!=e&&(this._textSpan.style.fontSize=e),null!=i&&(this._textSpan.style.fontWeight=i),null!=s&&(this._textSpan.style.fontFamily=s),this._setHtml(this._textSpan,t);var n=this._textSpan.offsetWidth;return this._textSpan.style.display="none",n},getStyle:function(t,e){if(t.style[e])return t.style[e];if(t.currentStyle)return t.currentStyle[e];if(document.defaultView&&document.defaultView.getComputedStyle){e=e.replace(/[A-Z]/g,"-$1").toLowerCase();var i=document.defaultView.getComputedStyle(t,"");return i&&i.getPropertyValue(e)}return""},getCurrentStyle:function(t){if(null==t)return null;var e={};return t.currentStyle?e=t.currentStyle:getComputedStyle&&(e=getComputedStyle(t)),e},getInnerText:function(t){var e="";return null!=t&&(e=(e=t.innerHTML).replace(/<[^<>]+>/g,"")),e},getTextLen:function(t,e){var i=t*this._sizew;return parseInt(e/i,10)},getShowStr:function(t,e,i,s){var n=t+"@"+i+"@"+e;if(null==this._textHeightJson&&(this._textHeightJson={}),null==(l=this._textHeightJson[n])){null!=e&&""!==e||(e=12),(e=parseInt(e,10))<12&&!0===this.getBrowser("chrome")&&(e=12),i=parseInt(i,10);var o=e*this._sizew*1.7,h=e*this._sizeh*1.11,l="",a=0,r=h,d=0,u=0;if(!(o<i))return"…";for(var c=0,g=t.length;c<g;c++){if(u=0,a+(u=t.charCodeAt(c)>256?2*o:o)<i)d++,a+=u;else{if(!(r+h<s))break;r+=h,0,a=u,d,d++}}l=d<g-1?t.substring(0,d-1)+"…":t,this._textHeightJson[n]=l}return l},autoSuitWidth:function(t){},getHeight:function(t){var e=this.getOption().height;return null!=t&&(e=t.offsetHeight),e},setHeight:function(t,e){this.getOption().height!=t&&(this.getOption().height=t),(e=this.getBooleanValue(e,!0))&&this._hasResize()&&this._doResize()},getWidth:function(t){var e=this.getOption().width;return null!=t&&(e=t.offsetWidth),e},getOffsetWidth:function(){return this.thisWindow.offsetWidth},setWidth:function(t,e){this.getOption().width!=t&&(this.getOption().width=t),(e=this.getBooleanValue(e,!0))&&this._hasResize()&&this._doResize()},setTop:function(t,e){this.getOption().top!=t&&(this.getOption().top=t),this.logInfo("Window.setTop"),(e=this.getBooleanValue(e,!0))&&this._hasResize()&&this._doResize()},getTop:function(){return this.getOption().top},setLeft:function(t,e){this.getOption().left!=t&&(this.getOption().left=t),this.logInfo("Window.setLeft"),(e=this.getBooleanValue(e,!0))&&this._hasResize()&&this._doResize()},getLeft:function(){return this.getOption().left},setComAlign:function(t){"center"==t?this.thisWindow.style.margin="0 auto":(this.thisWindow.style.cssFloat=t,this.thisWindow.style.styleFloat=t)},update:function(){"function"==typeof this.refresh&&this.refresh()},beginUpdate:function(){this._update=!1},endUpdate:function(){this._update=!0},getMouseButton:function(t){return 2==t.button||3==t.button?this.mouseType.mtRight:this.mouseType.mtLeft},getInputer:function(){return this.inputer},_getControl:function(){return this._control},getControl:function(){return this._toJqueryObj(this._control)},isUpdateUI:function(){return!0},isenable:function(){return!0!==this.getOption().disabled},disable:function(){this._enabled=!1,this.getOption().disabled=!0,"function"==typeof this.refresh&&this.refresh()},hide:function(){this.thisWindow.style.display="none"},show:function(){this.thisWindow.style.display=""},isShow:function(){return null!=this.thisWindow&&this.thisWindow.offsetWidth>0},enable:function(){this._enabled=!0,this.getOption().disabled=!1,"function"==typeof this.refresh&&this.refresh()},isFocus:function(){return this.focus},setFocus:function(){this.focus=!0,this.hasSelect=!0,!1===this.doFocus()?this.focus=!1:this.focus=!0},setBlur:function(){this.focus=!1,this.hasSelect=!1,!1===this.doBlur()?this.focus=!0:this.focus=!1},_style:function(t,e,i){null!=t&&t.style[e]!=i&&(t.style[e]=i)},_setHtml:function(t,e,i){null==e&&(e="");var s=void 0===e?"undefined":_typeof(e);if("string"===s)!1!==i&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t.innerHTML=e;else if("object"==s){if(null!=e.tagName&&"script"!=e.tagName){if(e.parentElement==t)document.createDocumentFragment().appendChild(e);t.innerHTML="",t.appendChild(e)}}else t.innerHTML=e},_onselectstart:function(t){var e=t||window.event,i=e.target||e.srcElement,s=!1;if(!this.shiftKeyDown)s="INPUT"==i.tagName||"TEXTAREA"==i.tagName;return e.returnValue=s,s},_replaceToDiv:function(){for(var t=this.createElement("div"),e=["dataField","data-option","id","name","width","ng-model","v-model","ng-bind"],i=0,s=e.length;i<s;i++){var n=e[i],o=this._control.getAttribute(n);null!=o&&""!==o&&t.setAttribute(n,o)}this._control.parentNode.replaceChild(t,this._control),this._control=t,this.control=this._toJqueryObj(this._control),this.thisWindow=t},setReadOnly:function(t){this.getOption().readOnly=t},getReadOnly:function(){return this.getOption().readOnly},hasScrollBar:function(t){return null!=t&&1==t.nodeType&&(t.offsetHeight>t.clientHeight||t.offsetWidth>t.clientWidth)},setPopContainer:function(t){this._popContainer=t},getPopContainer:function(){if(1==this.getOption().popModel){if(this.getOption().popContainer)return this.getOption().popContainer;for(var t=this.thisWindow.parentElement;null!=t&&"BODY"!=t.tagName.toUpperCase()&&0==this.hasScrollBar(t)&&"-1"!=t.getAttribute("tabindex");){if("string"==typeof t.className&&t.className.indexOf(".modal-dialog")>=0&&null!=t.parentNode){t=t.parentNode;break}if(!0===this.trigger("modelSelector",[t]))break;t=t.parentElement}return t}return this._getModelBody()},getMaxZIndex:function(){return Math.max.apply(null,Array.from(document.body.querySelectorAll("body *"),function(t,e){return zindex=getComputedStyle(t).zIndex,"static"!=zindex&&"auto"!=zindex?parseInt(zindex||1,10):1}))},destroy:function(){if(window._qzz_component_list&&delete window._qzz_component_list[this.index],this.clearEvent(),null!=this.thisWindow){var t=this.thisWindow.parentElement;null!=t&&t.removeChild(this.thisWindow)}this.base()}}),null==window._bindRenderFunc&&(window._bindRenderFunc=function(t,e){function i(i){null!=i&&null!=i.fn&&(i.fn[t]=function(t){var i=null;if(this.length>0){if(i=this[0]._component,!0!==t&&"true"!==t){i=new e(this,t),this[0]._component=i;var s=i._getControl();s!=this&&(s._component=i)}"function"==typeof this.data&&this.data("_ecpUI",i)}return i},null==i.fn.qzzcom&&(i.fn.qzzcom=function(){var t=this._component;return null==t&&this.length>0&&(t=this[0]._component),t}))}null==window.$?require(["jquery"],function(t){window.$=t,i(t)}):i(window.$)}),t.ui.window}),
/*!
 * 面板控件.
 * ecp.qzz.ui.button.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.window"],function(){var t=window.qzz;return t.space("ui"),t.ui.button=t.Class(t.ui.window,{_create:function(){this.base(),this.className="Button",this._common=[],this._stateValue=0,this.getOption().icon=this.getOption().icon||"",this.getOption().style=this.getOption().style||"H",null!=this.getOption().common?"string"==typeof this.getOption().common?this._common.push(this.getOption().common):this._common=this.getOption().common:this._common=["button_common"]},setIcon:function(t){this.getOption().icon='url("'+t+'") no-repeat scroll 50% 50% transparent'},_render:function(){this._control&&this._control.length>0&&(this._control=this._control[0]),this.control=this._toJqueryObj(this._control),this._control&&"INPUT"===this._control.tagName&&this._replaceToDiv(),this.base(),null!=this.thisWindow.parentNode&&""!==this.thisWindow.parentNode.style.position&&(this.thisWindow.style.position="absolute");var t=this.thisWindow.innerHTML;null!=t&&""!==t&&(null!=this.getOption().caption&&""!==this.getOption().caption||(this.getOption().caption=t,this.thisWindow.innerHTML="")),this._cTable=this.createElement("TABLE");var e=this._cTable.insertRow(0);this._tdIcon=e.insertCell(0),"H"==this.getOption().style?this._tdCaption=e.insertCell(1):(e=this._cTable.insertRow(1),this._tdCaption=e.insertCell(0)),""===this.getOption().icon&&(this._tdIcon.style.display="none"),""===this._tdCaption&&(this._tdCaption.style.display="none"),this.refresh()},setParent:function(t){this.base(t),null!=this.thisWindow.parentNode&&""!==this.thisWindow.parentNode.style.position&&(this.thisWindow.style.position="absolute")},refreash:function(){this.refresh()},refresh:function(t){"H"==this.getOption().style&&2==this._cTable.rows.length?(this._cTable.deleteRow(1),this._tdCaption=this._cTable.rows[0].insertCell(1)):"V"==this.getOption().style&&1==this._cTable.rows[0].length&&(this._cTable.rows[0].deleteCell(1),this._tdCaption=this._cTable.insertRow(1).insertCell(0)),""===this.getOption().icon||null==this.getOption().icon?"H"==this.getOption().style?this._tdIcon.style.display="none":this._tdIcon.parentElement.style.display="none":(this._tdIcon.style.display="",this._tdIcon.parentElement.style.display=""),this.setStyle(this._tdIcon,"button_icon"),""===this.getOption().caption||null==this.getOption().caption?"H"==this.getOption().style?this._tdCaption.style.display="none":this._tdCaption.parentElement.style.display="none":(this._tdCaption.style.display="",this._tdCaption.parentElement.style.display=""),this.setStyle(this._tdCaption,"button_caption"),this._tdIcon.style.background=this.getOption().icon,this._setHtml(this._tdCaption,this.getOption().caption||"",!1),this.setStyle(this._cTable,"button_table"),this.thisWindow.style.cursor="pointer",this.thisWindow.appendChild(this._cTable),!0===this.getOption().move&&!0===t?(this.setStyle(this._cTable,"button_table_move"),this.setStyle(this.thisWindow,"button_div_move"),this.focus?this.addStyle(this.thisWindow,this._common[this._stateValue]+" active focus"):this.addStyle(this.thisWindow,this._common[this._stateValue])):this.focus?this.setStyle(this.thisWindow,this._common[this._stateValue]+" active focus"):this.setStyle(this.thisWindow,this._common[this._stateValue]),null!=this.getOption().hint&&this.thisWindow.setAttribute("title",this.getOption().hint),1==this.getOption().disabled&&(this.addStyle(this._cTable,"button_disabled"),this.addStyle(this.thisWindow,"button_disabled")),!0===this.getOption().readOnly?(this._cTable.style.cursor="default",this.thisWindow.style.cursor="default"):1!=this.getOption().disabled?(this._cTable.style.cursor="pointer",this.thisWindow.style.cursor="pointer"):this._cTable.style.cursor=""},addStyle:function(t){arguments.length>1?this.base.apply(this,arguments):null!=t&&""!==t&&(null==this.getOption().common&&(this._common=[]),this._common.push(t),this.refresh())},clearStyle:function(){this._common=[],this._stateValue=0},setValue:function(t){t===this.getOption().isCheck?t=1:t===this.getOption().unCheck&&(t=0),this.setState(t)},getValue:function(){return this._stateValue==this.getOption().isCheck},setState:function(t){t<this._common.length&&t>=0&&this._stateValue!=t&&(this._stateValue=t,this.refresh())},doMouseDown:function(t){return 1!=this.getOption().disabled&&!0!==this.getOption().readOnly&&(this.trigger("onmousedown",[t]),!1)},doBlur:function(){this.base(),!0===this.getOption().canFocus&&(this.focus?this.setStyle(this.thisWindow,this._common[this._stateValue]+" active focus"):this.setStyle(this.thisWindow,this._common[this._stateValue])),this.refresh(!0)},doMouseUp:function(t){if(1==this.getOption().disabled||!0===this.getOption().readOnly||!1===this.hasSelect)return!1;var e=this._common.length;return e>0&&(this._stateValue++,this._stateValue=this._stateValue%e,!0===this.getOption().canFocus&&(this.focus?this.setStyle(this.thisWindow,this._common[this._stateValue]+" active focus"):this.setStyle(this.thisWindow,this._common[this._stateValue])),this.refresh(!0)),this.focus&&(this.trigger("onmouseup",[t]),this.trigger("onclick",[t]),this.trigger("onClick",[t])),!1}}),_bindRenderFunc("qzzbutton",t.ui.button),t.ui.button}),
/*!
 * 滚动条控件.
 * ecp.qzz.ui.scrollbar.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.window"],function(){var t=window.qzz;return t.space("ui"),t.ui.scrollbar=t.Class(t.ui.window,{_create:function(){this.base(),this.className="ScrollBar",this.logInfo("scrollBar.create"),this.visible=!0,this.getOption().height=132,this.getOption().width=17,this.scrollIndex=0,this.scrollCount=0,this.visibleCount=0,this.stepWidth=5},_render:function(){this.base(),this.thisWindow.style.overflowY="scroll",this._innerDiv=this.createElement("DIV"),this.thisWindow.appendChild(this._innerDiv),this.thisWindow.style.borderWidth="0px",this._innerDiv.style.height="10px",this._innerDiv.style.width="1px";var t=this;this.thisWindow.onscroll=function(e){t._onScroll(e,this.scrollHeight-t.getHeight(),this.scrollTop)}},_onScroll:function(t,e,i){this._update&&(this.scrollIndex=Math.round(i/this.stepWidth,10),"function"==typeof this.onScroll&&this.onScroll(this.scrollIndex,this.scrollIndex-this.priorScrollIndex),this.priorScrollIndex=this.scrollIndex)},refresh:function(){var t=(this.scrollCount-this.visibleCount)*this.stepWidth+this.getHeight();t<=0&&(t=1),this._innerDiv.style.height=t+"px",t>this.getOption().height&&this.thisWindow.clientWidth>1&&(this.getOption().width=this.getOption().width-this.thisWindow.clientWidth+1);var e=this._getNumberValue(this.getOption().width,17);this.getBrowser("msie")&&(e+=1),this.thisWindow.style.width=e+"px"},setVisible:function(t){this.thisWindow.style.display=t?"":"none",this.visible=t},getVisible:function(){return""==this.thisWindow.style.display},getWidth:function(){return this.getOption().width+1},setHeight:function(t){(t+=2)<34&&(t=34),this.base(t),this.refresh()},setScrollIndex:function(t,e){if(t!=this.scrollIndex){this.scrollIndex;this.scrollIndex=t,this.thisWindow.onscroll=null,this.thisWindow.scrollTop=Math.round(t*this.stepWidth,10),!1!==e?this._onScroll(null,this.thisWindow.scrollHeight-this.getHeight(),this.thisWindow.scrollTop):this.priorScrollIndex=this.scrollIndex;var i=this;i.thisWindow.onscroll=function(t){i._onScroll(t,this.scrollHeight-i.getHeight(),this.scrollTop)}}},setScrollCount:function(t,e){if(t<0&&(t=0),this.scrollCount!==t||this.visibleCount!==e){this.scrollCount=t,this.visibleCount=e;var i=0;this.scrollIndex>t-e&&(i=t-e-this.scrollIndex,this.scrollIndex=t-e),this.refresh(),"function"==typeof this.onScroll&&this.onScroll(this.scrollIndex,i),this.priorScrollIndex=this.scrollIndex}},scrollPrior:function(t){var e=!1;return this.scrollIndex>0&&(this.setScrollIndex(this.scrollIndex-1),e=!0),e},scrollNext:function(t){var e=!1;return this.scrollIndex<this.scrollCount-this.visibleCount&&(this.setScrollIndex(this.scrollIndex+1),e=!0),e}}),_bindRenderFunc("qzzscroll",t.ui.scrollbar),t.ui.scrollbar}),
/*!
 * 日期控件.
 * ecp.qzz.ui.calendar.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.date","qzz.window","qzz.iupdown"],function(){var t=window.qzz;return t.space("ui"),t.ui.calendar=t.Class(t.ui.window,{_create:function(){this.base(),this.className="Calendar",this.logInfo("calendar.create"),this.cyctypes={second:"second",minute:"minute",hour:"hour",day:"day",ten:"ten",month:"month",season:"season",halfyear:"halfyear",year:"year"},this.cyctype=this.getOption().cyctype||this.cyctypes.day,this.cyctype==this.cyctypes.hour||this.cyctype==this.cyctypes.minute||this.cyctype==this.cyctypes.second?this.curCyctype=this.cyctypes.day:this.curCyctype=this.cyctype,this.monthCN=this.getI18n("qzz.monthsText",["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]),this.seasonCN=this.getI18n("qzz.seasonText",["第一季度","第二季度","第三季度","第四季度"]),this.halfYearsCN=this.getI18n("qzz.halfYearsText",["上半年","下半年"]),this.weeks=this.getI18n("qzz.weeksText",["日","一","二","三","四","五","六"]),this.tenCN=this.getI18n("qzz.tendaysText",["上旬","中旬","下旬"]),this.getOption().dateSplit=this.getOption().dateSplit||"-",this.getOption().formatYear=this.getOption().formatYear||this.getI18n("qzz.formatYear","YYYY"),this.getOption().formatMonth=this.getOption().formatMonth||this.getI18n("qzz.formatMonth","MM"),this.getOption().formatDay=this.getOption().formatDay||this.getI18n("qzz.formatDay","DD"),this.getOption().timeSplit=this.getOption().timeSplit||":",this.getOption().formatHour=this.getOption().formatHour||this.getI18n("qzz.formatHour","HH"),this.getOption().formatMinute=this.getOption().formatMinute||this.getI18n("qzz.formatMinute","MM"),this.getOption().formatSecond=this.getOption().formatSecond||this.getI18n("qzz.formatSecond","SS"),this.curDate=new Date,this.curYear=this.curDate.getFullYear(),this.curMonth=this.curDate.getMonth()+1,this.curDay=this.curDate.getDate(),this.curWeek=this.curDate.getDay(),this.curHour=0,this.curMinute=0,this.curSecond=0,this.toYear=this.curYear,this.toMonth=this.curMonth,this.toDay=this.curDay,this.toWeek=this.curWeek,this.maxYear=9999,this.maxMonth=12,this.maxDay=31,this.minYear=1,this.minMonth=1,this.minDay=1,this.dateObj=new t.date,this.dateObj.setCycType(this.cyctype),this.hTime=new t.ui.input.updown(null,{cssPrefix:this._cssPrefix,loop:!0,lockLength:2}),this.hTime.setWidth(45),this.hTime.setMaxValue(23),this.hTime.setMinValue(0),this.mTime=new t.ui.input.updown(null,{cssPrefix:this._cssPrefix,loop:!0,lockLength:2}),this.mTime.setWidth(45),this.mTime.setMaxValue(59),this.mTime.setMinValue(0),this.mTime.setLockLength(2);var e=this;this.mTime.bind("onchange",function(t,i,s,n){n&&(i>s?e.hTime.upValue():e.hTime.downValue())}),this.sTime=new t.ui.input.updown(null,{cssPrefix:this._cssPrefix,loop:!0,lockLength:2}),this.sTime.setWidth(45),this.sTime.setMaxValue(59),this.sTime.setMinValue(0),this.sTime.bind("onchange",function(t,i,s,n){n&&(i>s?e.mTime.upValue():e.mTime.downValue())}),this.priorSel=null,this.showTime=this.getBooleanValue(this.getOption().showTime,!1),this.domList={},this.domIndex=0,this.dateSplit="-",this.timeSplit=":",this.dtSplit=/[- ]/g,null!=this.getOption().width&&10!=this.getOption().width||(this.getOption().width=192)},_render:function(){if(this.logInfo("calendar.render"),null==this.thisWindow)this.thisWindow=this.createElement("table");else if("DIV"===this.thisWindow.tagName){var t=this.createElement("table");t.setAttribute("id",this._control.getAttribute("id")),t.setAttribute("name",this._control.getAttribute("name")),t.setAttribute("width",this._control.getAttribute("width")),this._control.parentNode.replaceChild(conDiv,this._control),this._control=t,this.thisWindow=t}var e=this;this.thisWindow.onclick=function(){"function"==typeof e.onRectClick&&e.onRectClick()};var i=0;this.thisWindow.border="0px",this.thisWindow.cellPadding="0px",this.thisWindow.cellSpacing="1px",this._addCssList(this.thisWindow,"dateTable"),this.addStyle(this.thisWindow,"noBorder");var s=this.thisWindow.insertRow(0);this.headBox=s.insertCell(0),this._addCssList(this.headBox,"dateCell"),this.headBox.style.height="30px",i+=30;var n=this.thisWindow.insertRow(1);this.bodyBox=n.insertCell(0),this._addCssList(this.bodyBox,"dateCell"),this.bodyBox.style.verticalAlign="top",i+=210;var o=this.thisWindow.insertRow(2);this.timeBox=o.insertCell(0),this.timeRow=o,this.timeRow.style.height="25px",this._addCssList(this.timeBox,"dateCell");var h=this.createElement("TABLE");h.style.margin="auto",this.setStyle(h,"noborder"),this.timeBox.appendChild(h),this._addCssList(this.timeBox,"weekCommonCell");var l=h.insertRow(0),a=0;this.hBox=l.insertCell(a++),this._setHtml(l.insertCell(a++),this.timeSplit,!1),this.mBox=l.insertCell(a++),this._setHtml(l.insertCell(a++),this.timeSplit,!1),this.sBox=l.insertCell(a++),this.hTime.setParent(this.hBox),this.mTime.setParent(this.mBox),this.sTime.setParent(this.sBox);var r=l.insertCell(a++);this._setHtml(r,this.getI18n("qzz.current","当前"),!1),r.style.padding="3px",r.style.cursor="pointer",r.date=this,r.onclick=function(){var t=this.date,e=t._getCurTime();t.hTime.setValue(e.h),t.mTime.setValue(e.m),t.sTime.setValue(e.s)},this.setStyle(r,"weekCommonCell");var d=0;this.cyctype===this.cyctypes.day&&this.showTime?(this.timeRow.style.display="",d=32):(d=0,this.timeRow.style.display="none");var u=this.thisWindow.insertRow(3);this.toDateRect=u,this.footerBox=u.insertCell(0),this._addCssList(this.footerBox,"dateCell"),!0===this.getOption().showTodate&&(i+=30),this.refreshCalendar(),s=null,n=null,o=null,this.setHeight(i+d),this._sumHeight=i,this.setWidth(this.getOption().width)},getFormatDate:function(t,e,i,s,n,o,h){var l="",a=this.getOption().formatYear.replace(/YYYY/i,e),r="";i&&(parseInt(i,10)<10&&(i="0"+i),r=this.getOption().formatMonth.replace(/MM/i,i));var d="";s&&(parseInt(s,10)<10&&(s="0"+s),d=this.getOption().formatDay.replace(/DD/i,s));var u="";n&&(parseInt(n,10)<10&&(n="0"+n),u=this.getOption().formatHour.replace(/HH/i,n)),null!=o&&""!==o||(o=0),parseInt(o,10)<10&&(o="0"+o);var c=this.getOption().formatMinute.replace(/MM/i,c);null!=h&&""!==h||(h=0),parseInt(h,10)<10&&(h="0"+h);var g=this.getOption().formatSecond.replace(/SS/i,g);switch(t){case this.cyctypes.second:case this.cyctypes.minute:case this.cyctypes.hour:l=a+this.getOption().dateSplit+r+this.getOption().dateSplit+d+" "+u+this.getOption().timeSplit+c+this.getOption().timeSplit+g;break;case this.cyctypes.day:l=a+this.getOption().dateSplit+r+this.getOption().dateSplit+d;break;case this.cyctypes.ten:var p=this.dateObj.getTenByDay(parseInt(s,10)),f=this.tenCN[p-1];l=a+this.getOption().dateSplit+r+this.getOption().dateSplit+f;break;case this.cyctypes.month:l=a+this.getOption().dateSplit+r;break;case this.cyctypes.season:var y=this.dateObj.getSeasonByMonth(parseInt(i,10)),m=this.seasonCN[y-1];l=a+this.getOption().dateSplit+m;break;case this.cyctypes.halfyear:var C=this.dateObj.getHalfyearByMonth(parseInt(i,10)),S=this.halfYearsCN[C-1];l=a+this.getOption().dateSplit+S;break;case this.cyctypes.year:l=a}return l},_addCssList:function(t,e){this.setStyle(t,e),this.isEmpty(t.id)&&(t.id="Calendar"+this.domIndex,this.domIndex++),this.domList[t.id]={dom:t,className:e}},_setCssPrefix:function(t){if(this._cssPrefix!==t)for(var e in this._cssPrefix=t,this.domList){var i=this.domList[e];this.setStyle(i.dom,i.className)}},_refreshHeader:function(){switch(null==this.selYear&&(this.selYear=this.curYear),null==this.selMonth&&(this.selMonth=this.curMonth),null==this.selDay&&(this.selDay=this.curDay),this.curCyctype){case this.cyctypes.hour:var t=this.getFormatDate(this.cyctypes.day,this.curYear,this.curMonth,this.curDay);this._setHtml(this.headText,t);break;case this.cyctypes.day:case this.cyctypes.ten:t=this.getFormatDate(this.cyctypes.month,this.curYear,this.curMonth);this._setHtml(this.headText,t);break;case this.cyctypes.month:case this.cyctypes.season:case this.cyctypes.halfyear:t=this.getFormatDate(this.cyctypes.year,this.curYear);this._setHtml(this.headText,t);break;case this.cyctypes.year:var e=this.selYear;e/=10;var i=parseInt(e,10);e-i==0&&(i-=1),e=10*i+1,this._setHtml(this.headText,this.getOption().formatYear.replace(/YYYY/i,e)+"-"+this.getOption().formatYear.replace(/YYYY/i,e+9))}},_getHeaderBox:function(){var t=this.createElement("table");this._addCssList(t,"weekDay"),t.border=0,t.cellPadding=0,t.cellSpacing=0;var e=t.insertRow(0),i=0,s=e.insertCell(i++);s.style.width="20px",this._addCssList(s,"weekCommonCell");var n=this.createElement("div");this._addCssList(n,"priorMonthCell"),this._setHtml(n,"&lt;"),s.appendChild(n),s.onclick=this.doDecClick;var o=e.insertCell(i++);this.headInfo=this.createElement("table"),this.setStyle(this.headInfo,"weekDay"),this.headText=this.headInfo.insertRow(0).insertCell(0),this.headText.date=this,this.headText.onclick=function(){switch(this.date.curCyctype){case this.date.cyctypes.second:this.date.curCyctype=this.date.cyctypes.minute;break;case this.date.cyctypes.minute:this.date.curCyctype=this.date.cyctypes.hour;break;case this.date.cyctypes.hour:this.date.curCyctype=this.date.cyctypes.day;break;case this.date.cyctypes.day:case this.date.cyctypes.ten:this.date.curCyctype=this.date.cyctypes.month;break;case this.date.cyctypes.month:case this.date.cyctypes.season:case this.date.cyctypes.halfyear:this.date.curCyctype=this.date.cyctypes.year}this.date.refreshCalendar()},this.headInfo.style.width="100%",this.headInfo.style.height="100%",this._refreshHeader(),this.setStyle(this.headText,"weekCommonCell"),o.appendChild(this.headInfo);var h=e.insertCell(i++),l=this.createElement("div");return this._addCssList(l,"nextMonthCell"),this._setHtml(l,"&gt;"),h.appendChild(l),h.style.width="20px",h.onclick=this.doAddClick,this._addCssList(h,"weekCommonCell"),s.date=this,h.date=this,e=null,s=null,t},_refreshFooter:function(){switch(this.footerBox.today=1,this.cyctype){case this.cyctypes.year:this._setHtml(this.footerBox,this.toYear,!1),this.footerBox.onclick=this.doToyearSelect;break;case this.cyctypes.halfyear:this.footerBox.year=this.toYear,this.footerBox.halfyear=this.dateObj.getHalfyearByMonth(this.toMonth);var t=this.getFormatDate(this.cyctype,this.toYear,this.toMonth);this._setHtml(this.footerBox,t,!1),this.footerBox.onclick=this.doTohalfyearSelect;break;case this.cyctypes.season:this.footerBox.year=this.toYear,this.footerBox.season=this.dateObj.getSeasonByMonth(this.toMonth);t=this.getFormatDate(this.cyctype,this.toYear,this.toMonth);this._setHtml(this.footerBox,t,!1),this.footerBox.onclick=this.doToseasonSelect;break;case this.cyctypes.month:t=this.getFormatDate(this.cyctype,this.toYear,this.toMonth);this._setHtml(this.footerBox,t,!1),this.footerBox.onclick=this.doTomonthSelect;break;case this.cyctypes.ten:this.footerBox.year=this.toYear,this.footerBox.month=this.toMonth,this.footerBox.ten=this.dateObj.getTenByDay(this.toDay);t=this.getFormatDate(this.cyctype,this.toYear,this.toMonth,this.toDay);this._setHtml(this.footerBox,t,!1),this.footerBox.onclick=this.doTotenSelect;break;case this.cyctypes.day:t=this.getFormatDate(this.cyctype,this.toYear,this.toMonth,this.toDay);this._setHtml(this.footerBox,t,!1),this.footerBox.onclick=this.doTodaySelect;break;case this.cyctypes.hour:var e=(n=new Date).getHours();t=this.getFormatDate(this.cyctype,this.toYear,this.toMonth,this.toDay,e,0,0);this._setHtml(this.footerBox,t,!1),this.footerBox.onclick=this.doTotimeSelect;break;case this.cyctypes.minute:e=(n=new Date).getHours();var i=n.getMinutes();t=this.getFormatDate(this.cyctype,this.toYear,this.toMonth,this.toDay,e,i,0);this._setHtml(this.footerBox,t,!1),this.footerBox.onclick=this.doTotimeSelect;var s=this;this._asynRun(function(){s._refreshFooter(),s=null},3e4);break;case this.cyctypes.second:e=(n=new Date).getHours(),i=n.getMinutes();var n,o=n.getSeconds();t=this.getFormatDate(this.cyctype,this.toYear,this.toMonth,this.toDay,e,i,o);this._setHtml(this.footerBox,t,!1),this.footerBox.onclick=this.doTotimeSelect;s=this;this._asynRun(function(){s._refreshFooter(),s=null},500)}this.isReadOnly(this.toYear,this.toMonth,this.toDay,this.cyctype)?(this.setStyle(this.footerBox,"weekReadOnlyCell"),this.footerBox.onclick=""):this.setStyle(this.footerBox,"weekCommonCell"),this.addStyle(this.footerBox,"toDaySel"),this.footerBox.style.paddingLeft="4px",this.footerBox.date=this,!0===this.getOption().showTodate?this.toDateRect.style.display="":this.toDateRect.style.display="none"},_getDayBox:function(){var t=this.createElement("table");t.border=0,t.cellPadding=0,t.cellSpacing=0;var e=t.insertRow(0).insertCell(0),i=this.createElement("table");this._addCssList(i,"weekTitle");for(var s=i.insertRow(0),n=0;n<7;n++){var o=s.insertCell(n);this._setHtml(o,this.weeks[n],!1),0==n?this._addCssList(o,"weekSunTitle"):6==n?this._addCssList(o,"weekSixTitle"):this._addCssList(o,"weekCommonTitle"),o=null}e.appendChild(i),e=null;var h=t.insertRow(1).insertCell(0);this.selYear=this.curYear,this.selMonth=this.curMonth,this._refreshHeader();var l=this.createElement("table");this._addCssList(l,"weekDay"),l.cellSpacing=3;var a=this.dateObj.getDaysRect(this.curYear,this.curMonth,!0),r=this.curMonth-1,d=this.curYear;r<1&&(r=12,d--);n=0;for(var u=a.length;n<6;n++){var c=l.insertRow(n);if(n<u){"none"==c.style.display&&(c.style.display="");for(var g=0;g<7;g++){var p=c.insertCell(g),f=a[n][g];1==f&&++r>12&&(d++,r=1),this._refreshDayCell(p,g,f,d,r),p=null}}else c.style.display="none";c=null}return h.appendChild(l),this.dayTable=l,h=null,t},_refreshDayBox:function(){this.selYear=this.curYear,this.selMonth=this.curMonth,this._refreshHeader();var t=this.dateObj.getDaysRect(this.curYear,this.curMonth,!0),e=this.curMonth-1,i=this.curYear;e<1&&(e=12,i--);for(var s=this.dayTable,n=0,o=t.length;n<6;n++){var h=s.rows[n];if(n<o){"none"==h.style.display&&(h.style.display="");for(var l=0;l<7;l++){var a=h.cells[l],r=t[n][l];1==r&&++e>12&&(i++,e=1);this._refreshDayCell(a,l,r,i,e);a=null}}else h.style.display="none";h=null}},_refreshDayCell:function(t,e,i,s,n){t.date=this,t.align="right",this._setHtml(t,"",!1),t.bgColor="",t.onclick="",t.onmouseover="",t.onmouseout="",t.tmpClassName="",0==e?this.setStyle(t,"weekSunCell"):6==e?this.setStyle(t,"weekSixCell"):this.setStyle(t,"weekCommonCell"),null!=i&&(this._setHtml(t,i,!1),t.onclick=this.doSelect,t.year=s,t.month=n,t.day=i),n!=this.curMonth&&this.setStyle(t,"otherWeekCommonCell"),s==this.toYear&&this.toMonth==n&&i==this.toDay&&this.setStyle(t,"weekToDayCell"),s==this.curYear&&this.curMonth==n&&null!=this.curDay&&i==this.curDay&&this.setStyle(t,"weekSelCell"),""!==t.innerHTML&&this.isReadOnly(this.curYear,n,parseInt(t.innerHTML,10),this.cyctypes.day)&&(this.setStyle(t,"weekReadOnlyCell"),t.onclick="")},_getMainBox:function(t,e){var i=this.createElement("table");this.setStyle(i,"mainBox");for(var s=0,n=t.length;s<n;s++)for(var o=t[s],h=i.insertRow(s),l=0,a=o.length;l<a;l++){var r=o[l],d=h.insertCell(l);d.date=this,d.onclick=this.doSelect,this._setHtml(d,r);var u=0;switch("function"==typeof e&&(u=e.apply(this,[r,d,s,l,n,a])),u){case"other":this.setStyle(d,"otherWeekCommonCell");break;case"select":this.setStyle(d,"weekSelCell");break;case"readonly":this.setStyle(d,"weekReadOnlyCell");break;case"current":this.setStyle(d,"weekToDayCell");break;default:this.setStyle(d,"weekCommonCell")}}return i},_refreshMainBox:function(t,e,i,s){for(var n=e,o=t,h=0,l=n.length;h<l;h++)for(var a=n[h],r=o.rows[h],d=0,u=a.length;d<u;d++){var c=a[d],g=r.cells[d];g.onclick=this.doSelect,this._setHtml(g,c);var p=0;switch("function"==typeof i&&(p=i.apply(this,[c,g,h,d,l,u])),p){case"other":this.setStyle(g,"otherWeekCommonCell");break;case"select":this.setStyle(g,"weekSelCell");break;case"readonly":this.setStyle(g,"weekReadOnlyCell");break;case"current":this.setStyle(g,"weekToDayCell");break;default:this.setStyle(g,"weekCommonCell")}"function"==typeof s&&s(g)}},_yearState:function(t,e,i,s,n,o){return e.isOther=null,t>this.maxYear||t<this.minYear?"readonly":0==i&&0==s||i==n-1&&s==o-1?(e.isOther=0==i?"prior":"next","other"):t==this.curYear?"select":t==this.toYear?"current":void 0},_refreshYearBox:function(){var t=this.dateObj.getYearsRect(this.curYear),e=this;this._refreshMainBox(this.yearTable,t,this._yearState,function(t){""!==t.innerHTML&&e.isReadOnly(parseInt(t.innerHTML,10),1,1,e.cyctypes.year)&&(e.setStyle(t,"weekReadOnlyCell"),t.onclick="")})},_getYearBox:function(){var t=this.dateObj.getYearsRect(this.curYear);return this.yearTable=this._getMainBox(t,this._yearState),this.yearTable.style.height="92px",this.yearTable.style.width="190px",this.yearTable},_halfyearState:function(t,e,i,s,n,o){var h=i*o+s+1;e.halfyear=h;var l=this.dateObj.getMonthByHalfyear(h),a=this.dateObj.getHalfyearByMonth(this.curMonth);return this.isReadOnly(this.curYear,l,1,this.cyctypes.month)?"readonly":h===a?"select":this.curYear==this.toYear&&h===this.dateObj.getHalfyearByMonth(this.toMonth)?"current":void 0},_getHalfyearBox:function(){var t=this.dateObj.getHalfyearsRect();return this.halfyearTable=this._getMainBox(t,this._halfyearState),this.halfyearTable.style.height="50px",this.halfyearTable.style.width="190px",this.halfyearTable},_refreshHalfyearBox:function(){this._refreshHeader();var t=this;this._refreshMainBox(this.halfyearTable,this.dateObj.getHalfyearsRect(),this._halfyearState,function(e){""!==e.innerHTML&&t.isReadOnly(t.curYear,t.dateObj.getMonthByHalfyear(e.halfyear),1,t.cyctypes.month)&&(t.setStyle(e,"weekReadOnlyCell"),e.onclick="")})},_seasonState:function(t,e,i,s,n,o){var h=i*o+s+1;e.season=h;var l=this.dateObj.getMonthBySeason(h),a=this.dateObj.getSeasonByMonth(this.curMonth);return this.isReadOnly(this.curYear,l,1,this.cyctypes.month)?"readonly":h===a?"select":this.curYear==this.toYear&&h===this.dateObj.getSeasonByMonth(this.toMonth)?"current":void 0},_getSeasonBox:function(){var t=this.dateObj.getSeasonsRect();return this.seasonTable=this._getMainBox(t,this._seasonState),this.seasonTable.style.height="104px",this.seasonTable.style.width="190px",this.seasonTable},_refreshSeasonBox:function(){this._refreshHeader();var t=this;this._refreshMainBox(this.seasonTable,this.dateObj.getSeasonsRect(),this._seasonState,function(e){""!==e.innerHTML&&t.isReadOnly(t.curYear,t.dateObj.getMonthBySeason(e.season),1,t.cyctypes.month)&&(t.setStyle(e,"weekReadOnlyCell"),e.onclick="")})},_monthState:function(t,e,i,s,n,o){var h=i*o+s+1;return e.month=h,this.isReadOnly(this.curYear,h,1,this.cyctypes.month)?"readonly":h===this.curMonth?"select":this.curYear==this.toYear&&h===this.toMonth?"current":void 0},_getMonthBox:function(){var t=this._getMainBox(this.dateObj.getMonthsRect(),this._monthState);return t.style.height="182px",t.style.width="190px",this.monthTable=t,t},_refreshMonthBox:function(){this._refreshHeader();var t=this;this._refreshMainBox(this.monthTable,this.dateObj.getMonthsRect(),this._monthState,function(e){""!==e.innerHTML&&t.isReadOnly(t.curYear,parseInt(e.innerHTML,10),1,t.cyctypes.month)&&(t.setStyle(e,"weekReadOnlyCell"),e.onclick="")})},_tenState:function(t,e,i,s,n,o){var h=i*o+s+1;e.ten=h;var l=this.dateObj.getDayByTen(h),a=this.dateObj.getTenByDay(this.curDay);return this.isReadOnly(this.curYear,this.curMonth,l,this.cyctypes.ten)?"readonly":h===a?"select":this.curYear==this.toYear&&this.curMonth==this.toMonth&&h===this.dateObj.getTenByDay(this.toDay)?"current":void 0},_getTenBox:function(){var t=this._getMainBox(this.dateObj.getTensRect(),this._tenState);return t.style.height="182px",t.style.width="190px",this.tenTable=t,t},_refreshTenBox:function(){this._refreshHeader();var t=this;this._refreshMainBox(this.tenTable,this.dateObj.getTensRect(),this._tenState,function(e){""!==e.innerHTML&&t.isReadOnly(t.curYear,t.curMonth,t.dateObj.getDayByTen(e.ten),t.cyctypes.ten)&&(t.setStyle(e,"weekReadOnlyCell"),e.onclick="")})},_hourState:function(t,e,i,s,n,o){var h=i*o+s;if(e.hour=h,h===this.curHour)return"select"},_getHourBox:function(){var t=this.dateObj.getHoursRect();return this.hourTable=this._getMainBox(t,this._hourState),this.hourTable},_refreshHourBox:function(){var t=this.dateObj.getHoursRect();return this._refreshMainBox(this.hourTable,t,this._hourState),this.hourTable},_minuteState:function(t,e,i,s,n,o){var h=t.split(":");if(h=parseInt(h[1],10),e.minute=parseInt(h,10),h==this.curMinute)return"select"},_getMinuteBox:function(){var t=this.dateObj.getMinutesRect(this.curHour);return this.minuteTable=this._getMainBox(t,this._minuteState),this.minuteTable},_refreshMinuteBox:function(){var t=this.dateObj.getMinutesRect(this.curHour);return this._refreshMainBox(this.minuteTable,t,this._minuteState),this.minuteTable},_secondState:function(t,e,i,s,n,o){var h=t.split(":");if(h=parseInt(h[2],10),e.second=h,h==this.curSecond)return"select"},_getSecondBox:function(){var t=this.dateObj.getSecondsRect(this.curHour,this.curMinute);return this.secondTable=this._getMainBox(t,this._secondState),this.secondTable},_refreshSecondBox:function(){var t=this.dateObj.getSecondsRect(this.curHour,this.curMinute);return this._refreshMainBox(this.secondTable,t,this._secondState),this.secondTable},isLeapYear:function(t){return this.dateObj.isLeapYear(t)},getMonthDays:function(t,e){return this.dateObj.getMonthDays(t,e)},checkRound:function(t){var e=this.dateSplit,i=t.split(e),s="none",n=parseInt(i[0],10),o=parseInt(i[1],10),h=parseInt(i[2],10);return n>this.maxYear?(n=this.maxYear,o=this.maxMonth,h=this.maxDay,s="max"):n==this.maxYear&&o>this.maxMonth?(o=this.maxMonth,h=this.maxDay,s="max"):n==this.maxYear&&o==this.maxMonth&&h>this.maxDay&&this.cyctype==this.cyctypes.day&&(h=this.maxDay,s="max"),n<this.minYear?(n=this.minYear,o=this.minMonth,h=this.minDay,s="min"):n==this.minYear&&o<this.minMonth?(o=this.minMonth,h=this.minDay,s="min"):n==this.minYear&&o==this.minMonth&&h<this.minDay&&this.cyctype==this.cyctypes.day&&(h=this.minDay,s="min"),{state:s,date:this._dateToStr(n,o,h)}},_dateToStr:function(t,e,i){return this.dateObj._dateToStr(t,e,i)},checkDate:function(t){return this.dateObj.checkDate(t)},toDate:function(t){return this.toDate(t)},getNextDate:function(t){if(""!==(t=this.checkDate(t))){var e=t.split(this.dtSplit),i=parseInt(e[0],10),s=parseInt(e[1],10),n=parseInt(e[2],10);n<this.getMonthDays(i,s)?n++:(n=1,s<12?s++:(s=1,i++));var o=i+this.dateSplit+s+this.dateSplit+n;return e.length>3&&(o=o+" "+e[3]),o}},getPriorDate:function(t){if(""!==(t=this.checkDate(t))){var e=t.split(this.dtSplit),i=parseInt(e[0],10),s=parseInt(e[1],10),n=parseInt(e[2],10);this.getMonthDays(i,s-1);n>1?n--:(n=12,s>1?s--:(s=12,i--));var o=i+this.dateSplit+s+this.dateSplit+n;return e.length>3&&(o=o+" "+e[3]),o}},doDecClick:function(){this.date.curCyctype===this.date.cyctypes.hour?this.date.curDay>1?this.date.curDay--:(this.date.curMonth>1?this.date.curMonth--:(this.date.curYear--,this.date.curMonth=12),this.date.curDay=this.date.getMonthDays(this.date.curYear,this.date.curMonth)):this.date.curCyctype===this.date.cyctypes.day||this.date.curCyctype===this.date.cyctypes.ten?(this.date.selMonth>1?this.date.selMonth--:(this.date.selYear--,this.date.selMonth=12,this.date.curYear=this.date.selYear),this.date.curMonth=this.date.selMonth):this.date.curCyctype===this.date.cyctypes.month||this.date.curCyctype===this.date.cyctypes.season||this.date.curCyctype===this.date.cyctypes.halfyear?(this.date.selYear--,this.date.curYear=this.date.selYear):this.date.curCyctype===this.date.cyctypes.year&&(this.date.selYear=this.date.selYear-10,this.date.curYear=this.date.selYear),this.date.refreshCalendar()},doAddClick:function(){if(this.date.curCyctype===this.date.cyctypes.hour){var t=this.date.getMonthDays(this.date.curYear,this.date.curMonth);this.date.curDay<t?this.date.curDay++:(this.date.curMonth<12?this.date.curMonth++:(this.date.curYear++,this.date.curMonth=1),this.date.curDay=1)}else this.date.curCyctype===this.date.cyctypes.day||this.date.curCyctype===this.date.cyctypes.ten?(this.date.selMonth<12?this.date.selMonth++:(this.date.selYear++,this.date.selMonth=1,this.date.curYear=this.date.selYear),this.date.curMonth=this.date.selMonth):this.date.curCyctype===this.date.cyctypes.month||this.date.curCyctype===this.date.cyctypes.season||this.date.curCyctype===this.date.cyctypes.halfyear?(this.date.selYear++,this.date.curYear=this.date.selYear):this.date.curCyctype===this.date.cyctypes.year&&(this.date.selYear=this.date.selYear+10,this.date.curYear=this.date.selYear);this.date.refreshCalendar()},doSelect:function(){null!=this.date.priorSel&&(this.date.priorSel.bgColor=""),this.date.priorSel=this;var t=this.date.curCyctype;switch(this.date.curCyctype){case this.date.cyctypes.second:this.date.curSecond=this.second;break;case this.date.cyctypes.minute:this.date.curMinute=this.minute,this.date.cyctype!==this.date.cyctypes.year&&this.date.cyctype!==this.date.cyctypes.month&&this.date.cyctype!==this.date.cyctypes.day&&this.date.cyctype!==this.date.cyctypes.hour&&this.date.cyctype!==this.date.cyctypes.minute&&(this.date.curCyctype=this.date.cyctypes.second);break;case this.date.cyctypes.hour:this.date.curHour=this.hour,this.date.cyctype!==this.date.cyctypes.year&&this.date.cyctype!==this.date.cyctypes.month&&this.date.cyctype!==this.date.cyctypes.day&&this.date.cyctype!==this.date.cyctypes.hour&&(this.date.curCyctype=this.date.cyctypes.minute);break;case this.date.cyctypes.day:this.date.curMonth=this.month,this.date.curYear=this.year,null!=this.innerHTML&&(this.date.curDay=parseInt(this.innerHTML,10),this.date.selDay=this.date.curDay),this.date.cyctype!==this.date.cyctypes.year&&this.date.cyctype!==this.date.cyctypes.month&&this.date.cyctype!==this.date.cyctypes.day&&(this.date.curCyctype=this.date.cyctypes.hour);break;case this.date.cyctypes.ten:this.date.curDay=this.date.dateObj.getDayByTen(this.ten);break;case this.date.cyctypes.month:this.date.curMonth=this.month,this.date.selMonth=this.month,this.date.cyctype!==this.date.cyctypes.year&&this.date.cyctype!==this.date.cyctypes.month?this.date.cyctype==this.date.cyctypes.ten?this.date.curCyctype=this.date.cyctypes.ten:this.date.curCyctype=this.date.cyctypes.day:this.date.curDay=1;break;case this.date.cyctypes.season:this.date.curMonth=this.date.dateObj.getMonthBySeason(this.season),this.date.curDay=1;break;case this.date.cyctypes.halfyear:this.date.curMonth=this.date.dateObj.getMonthByHalfyear(this.halfyear),this.date.curDay=1;break;case this.date.cyctypes.year:this.date.curYear=parseInt(this.innerHTML,10),"next"==this.isOther?this.date.selYear=this.date.selYear+10:"prior"==this.isOther?this.date.selYear=this.date.selYear-10:this.date.selYear=this.date.curYear,this.date.cyctype!==this.date.cyctypes.year?this.date.cyctype==this.date.cyctypes.halfyear?this.date.curCyctype=this.date.cyctypes.halfyear:this.date.cyctype==this.date.cyctypes.season?this.date.curCyctype=this.date.cyctypes.season:this.date.curCyctype=this.date.cyctypes.month:(this.date.curMonth=1,this.date.curDay=1)}this.date.refreshCalendar(),t===this.date.cyctype&&"function"==typeof this.date.onSelect&&this.date.onSelect(this.date)},doTotimeSelect:function(){if((this.date.cyctype==this.date.cyctypes.hour||this.date.cyctype==this.date.cyctypes.minute||this.date.cyctype==this.date.cyctypes.second)&&null!=this.innerHTML){var t=this.date._decodeDateTime(this.innerHTML);this.date.curYear=t.year,this.date.curMonth=t.month,this.date.curDay=t.day,this.date.curHour=t.hour,this.date.curMinute=t.minute,this.date.curSecond=t.second}"function"==typeof this.date.onSelect&&this.date.onSelect(this.date)},doTodaySelect:function(){if(this.date.cyctype==this.date.cyctypes.day&&null!=this.innerHTML){var t=this.date._decodeDateTime(this.innerHTML);this.date.curYear=t.year,this.date.curMonth=t.month,this.date.curDay=t.day}"function"==typeof this.date.onSelect&&this.date.onSelect(this.date)},doTotenSelect:function(){this.date.cyctype==this.date.cyctypes.ten&&null!=this.innerHTML&&(this.date.curYear=this.year,this.date.curMonth=this.month,this.date.curDay=this.date.dateObj.getDayByTen(this.ten)),"function"==typeof this.date.onSelect&&this.date.onSelect(this.date)},doTomonthSelect:function(){if(this.date.cyctype==this.date.cyctypes.month&&null!=this.innerHTML){var t=this.date._decodeDateTime(this.innerHTML);this.date.curYear=t.year,this.date.curMonth=t.month,this.date.curDay=1}"function"==typeof this.date.onSelect&&this.date.onSelect(this.date)},doToyearSelect:function(){this.date.cyctype==this.date.cyctypes.year&&null!=this.innerHTML&&(this.date.curYear=parseInt(this.innerHTML,10),this.date.curMonth=1,this.date.curDay=1),"function"==typeof this.date.onSelect&&this.date.onSelect(this.date)},doTohalfyearSelect:function(){this.date.cyctype==this.date.cyctypes.halfyear&&null!=this.innerHTML&&(this.date.curYear=this.yearBox,this.date.curMonth=this.date.dateObj.getMonthByHalfyear(this.halfyear),this.date.curDay=1),"function"==typeof this.date.onSelect&&this.date.onSelect(this.date)},doToseasonSelect:function(){this.date.cyctype==this.date.cyctypes.season&&null!=this.innerHTML&&(this.date.curYear=this.year,this.date.curMonth=this.date.dateObj.getMonthBySeason(this.season),this.date.curDay=1),"function"==typeof this.date.onSelect&&this.date.onSelect(this.date)},isReadOnly:function(t,e,i,s){var n=!0;switch(null==s&&(s=this.cyctypes.day),s){case this.cyctypes.year:n=t>this.maxYear||t<this.minYear;break;case this.cyctypes.season:n=t>this.maxYear||t<this.minYear||t==this.maxYear&&e>this.maxMonth||t==this.minYear&&e<this.minMonth;break;case this.cyctypes.month:n=t>this.maxYear||t<this.minYear||t==this.maxYear&&e>this.maxMonth||t==this.minYear&&e<this.minMonth;case this.cyctypes.ten:n=t>this.maxYear||t<this.minYear||t==this.maxYear&&e>this.maxMonth||t==this.minYear&&e<this.minMonth||t==this.maxYear&&e==this.maxMonth&&i>this.maxDay||t==this.minYear&&e==this.minMonth&&i<this.minDay;break;case this.cyctypes.hour:case this.cyctypes.minute:case this.cyctypes.second:case this.cyctypes.day:n=t>this.maxYear||t<this.minYear||t==this.maxYear&&e>this.maxMonth||t==this.minYear&&e<this.minMonth||t==this.maxYear&&e==this.maxMonth&&i>this.maxDay||t==this.minYear&&e==this.minMonth&&i<this.minDay}return n},refreshCalendar:function(t){switch(this.isEmpty(this.headerTable)?(this.headerTable=this._getHeaderBox(),this.headBox.align="center",this.headBox.appendChild(this.headerTable)):this._refreshHeader(),this.curCyctype){case this.cyctypes.year:this.isEmpty(this.yearBox)||0==this.yearBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.yearBox=this._getYearBox(),this.bodyBox.appendChild(this.yearBox)):(0!=this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.yearBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.yearBox)),this._refreshYearBox());break;case this.cyctypes.halfyear:this.isEmpty(this.halfyearBox)||0==this.halfyearBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.halfyearBox=this._getHalfyearBox(),this.bodyBox.appendChild(this.halfyearBox)):(0!==this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.halfyearBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.halfyearBox)),this._refreshHalfyearBox());break;case this.cyctypes.season:this.isEmpty(this.seasonBox)||0==this.seasonBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.seasonBox=this._getSeasonBox(),this.bodyBox.appendChild(this.seasonBox)):(0!==this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.seasonBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.seasonBox)),this._refreshSeasonBox());break;case this.cyctypes.month:this.isEmpty(this.monthBox)||0==this.monthBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.monthBox=this._getMonthBox(),this.bodyBox.appendChild(this.monthBox)):(0!==this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.monthBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.monthBox)),this._refreshMonthBox());break;case this.cyctypes.ten:this.isEmpty(this.tenBox)||0==this.tenBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.tenBox=this._getTenBox(),this.bodyBox.appendChild(this.tenBox)):(0!==this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.tenBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.tenBox)),this._refreshTenBox());break;case this.cyctypes.day:this.isEmpty(this.dayBox)||0==this.dayBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.dayBox=this._getDayBox(),this.bodyBox.appendChild(this.dayBox)):(0!==this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.dayBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.dayBox)),this._refreshDayBox());break;case this.cyctypes.hour:this.isEmpty(this.hourBox)||0==this.hourBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.hourBox=this._getHourBox(),this.bodyBox.appendChild(this.hourBox)):(0!==this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.hourBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.hourBox)),this._refreshHourBox());break;case this.cyctypes.minute:this.isEmpty(this.minuteBox)||0==this.minuteBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.minuteBox=this._getMinuteBox(),this.bodyBox.appendChild(this.minuteBox)):(0!==this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.minuteBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.minuteBox)),this._refreshMinuteBox());break;case this.cyctypes.second:this.isEmpty(this.secondBox)||0==this.secondBox.rows.length?(this._setHtml(this.bodyBox,"",!1),this.secondBox=this._getSecondBox(),this.bodyBox.appendChild(this.secondBox)):(0!==this.bodyBox.childNodes.length&&this.bodyBox.childNodes[0]===this.secondBox||(this._setHtml(this.bodyBox,"",!1),this.bodyBox.appendChild(this.secondBox)),this._refreshSecondBox())}this._refreshFooter(),this.thisWindow.style.height="auto"},setDate:function(t,e){if(null!=t){""===(t=this.checkDate(t))&&(t=new Date);var i=this._decodeDateTime(t);this.curYear=i.year,this.curMonth=i.month,this.curDay=i.day,this.cyctype===this.cyctypes.day&&this.showTime?(this.hTime.setValue(0),this.mTime.setValue(0),this.sTime.setValue(0)):this.cyctype!==this.cyctypes.hour&&this.cyctype!==this.cyctypes.minute&&this.cyctype!==this.cyctypes.second||(this.curHour=i.hour,this.curMinute=i.minute,this.curSecond=i.secnod),!1!==e&&this.refreshCalendar()}},_decodeDateTime:function(t){var e=null;if(null!=t&&""!==t)if(e={},"string"==typeof t){var i=t.split(this.dtSplit),s=i.length;if(e.year=parseInt(i[0],10),s>1&&(e.month=parseInt(i[1],10)),s>2&&(e.day=parseInt(i[2],10)),this.cyctype===this.cyctypes.day&&this.showTime||this.cyctype===this.cyctypes.hour||this.cyctype===this.cyctypes.minute||this.cyctype===this.cyctypes.second)if(i.length>3&&""!==i[3]){var n=i[3].split(/[:.]/g),o=n.length;e.hour=n[0],e.minute=n[1],e.second=n[2],o>3&&(e.msecond=n[3])}else{var h=this._getCurTime();e.hour=h.h,e.minute=h.m,e.second=h.s}if(isNaN(e.year)){t=new Date;e.year=t.getFullYear(),e.month=t.getMonth()+1,e.day=t.getDate();h=this._getCurTime();e.hour=h.h,e.minute=h.m,e.second=h.s}}else if(t=new Date,e.year=t.getFullYear(),e.month=t.getMonth()+1,e.day=t.getDate(),this.cyctype===this.cyctypes.day&&this.showTime||this.cyctype===this.cyctypes.hour||this.cyctype===this.cyctypes.minute||this.cyctype===this.cyctypes.second){h=this._getCurTime();e.hour=h.h,e.minute=h.m,e.second=h.s}return e},_getCurTime:function(t){return this.dateObj._getCurTime(t)},setMaxDate:function(t,e){if(null!=t){if(""!==(t=this.checkDate(t))){var i=this._decodeDateTime(t);this.maxYear=i.year,this.maxMonth=i.month,this.maxDay=i.day}else this.maxYear=9999,this.maxMonth=12,this.maxDay=31;!1!==e&&this.refreshCalendar()}},setMinDate:function(t,e){if(null!=t){if(""!==(t=this.checkDate(t))){var i=this._decodeDateTime(t);this.minYear=i.year,this.minMonth=i.month,this.minDay=i.day}else this.minYear=1,this.minMonth=1,this.minDay=1;!1!==e&&this.refreshCalendar()}},setFormatYear:function(t){this.getOption().formatYear=t||this.getOption().formatYear,this.dateObj.setFormatYear(this.getOption().formatYear)},setFormatMonth:function(t){this.getOption().formatMonth=t||this.getOption().formatMonth,this.dateObj.setFormatMonth(this.getOption().formatMonth)},setFormatDay:function(t){this.getOption().formatDay=t||this.getOption().formatDay,this.dateObj.setFormatDay(this.getOption().formatDay)},setFormatHour:function(t){this.getOption().formatHour=t||this.getOption().formatHour,this.dateObj.setFormatHour(this.getOption().formatHour)},setFormatMinute:function(t){this.getOption().formatMinute=t||this.getOption().formatMinute,this.dateObj.setFormatMinute(this.getOption().formatMinute)},setFormatSecond:function(t){this.getOption().formatSecond=t||this.getOption().formatSecond,this.dateObj.setFormatSecond(this.getOption().formatSecond)},setDateSplit:function(t){this.getOption().dateSplit=t||this.getOption().dateSplit,this.dateObj.setDateSplit(this.getOption().dateSplit)},setTimeSplit:function(t){this.getOption().timeSplit=t||this.getOption().timeSplit,this.dateObj.setTimeSplit(this.getOption().timeSplit)},setShowTime:function(t){this.showTime=!this.isEmpty(t)&&Boolean(t),this.cyctype===this.cyctypes.day&&this.showTime?(this.timeRow.style.display="",this.setHeight(this._sumHeight+32)):(this.timeRow.style.display="none",this.setHeight(this._sumHeight)),this.dateObj.setShowTime(this.showTime)},setCycType:function(t){this.cyctype=t,this.cyctype==this.cyctypes.hour||this.cyctype==this.cyctypes.minute||this.cyctype==this.cyctypes.second?this.curCyctype=this.cyctypes.day:this.curCyctype=this.cyctype,this.dateObj.setCycType(this.cyctype),this.refreshCalendar(!1)},getDate:function(){var t=parseInt(this.curYear,10),e=parseInt(this.curMonth,10),i=parseInt(this.curDay,10);t<100&&(t="20"+t),e<10&&(e="0"+e),i<10&&(i="0"+i);var s=t+this.dateSplit+e+this.dateSplit+i;if(this.cyctype===this.cyctypes.day&&this.showTime){var n=" ";n+=this.hTime.getText()+this.timeSplit,n+=this.mTime.getText()+this.timeSplit,s+=n+=this.sTime.getText()}else if(this.cyctype===this.cyctypes.hour){n=" ";s+=n+=this.curHour+this.timeSplit+"00"+this.timeSplit+"00"}else if(this.cyctype===this.cyctypes.minute){n=" ";("number"==typeof(o=this.curMinute)&&o<10||"string"==typeof o&&0==o.length)&&(o="0"+o),s+=n+=this.curHour+this.timeSplit+o+this.timeSplit+"00"}else if(this.cyctype===this.cyctypes.second){var o;n=" ";("number"==typeof(o=this.curMinute)&&o<10||"string"==typeof o&&0==o.length)&&(o="0"+o);var h=this.curSecond;("number"==typeof h&&h<10||"string"==typeof h&&0==h.length)&&(h="0"+h),s+=n+=this.curHour+this.timeSplit+o+this.timeSplit+h}return s},reset:function(){this.selYear=this.curYear,this.selMonth=this.curMonth,this.selDay=this.curDay}}),t.ui.calendar.instance=null,t.ui.calendar.getInstance=function(e){return null===e&&(e=""),null==t.ui.calendar.instance&&(t.ui.calendar.instance=new t.ui.calendar(null,{cssPrefix:this._cssPrefix}),t.ui.calendar.instance._notFree=!0),t.ui.calendar.instance._setCssPrefix(e),t.ui.calendar.instance.setDate(""),t.ui.calendar.instance.reset(),t.ui.calendar.instance},_bindRenderFunc("qzzcalendar",t.ui.calendar),t.ui.calendar}),
/*!
 * 面板控件.
 * ecp.qzz.ui.panel.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.window"],function(){var t=window.qzz;return t.space("ui"),t.ui.panel=t.Class(t.ui.window,{_create:function(){this.base(),this.className="Panel",this.align="alNone",this.isContainer=!0},_render:function(){this._update=!1,this.base(),this._update=!0,this.isNotEmpty(this._parent)&&null!=this.getOption().Align&&(null==this._parent.isComponent&&this.isEmpty(this._parent.style.position)&&(this._parent.style.position="relative"),!1!==this.getOption().absolute&&(this.thisWindow.style.position="absolute")),null!=this.getOption().Align&&this.setAlign(this.getOption().Align)},_afterRender:function(){var t=this;if(this.isNotEmpty(this._parent)&&!this._parent.isComponent){t=this;var e=this._parent;e.hasBindResize,0,e.hasBindResize=!0}this.base(),!1===this.getOption().absolute&&(this.thisWindow.style.left="");t=this;setTimeout(function(){!0!==t._hasDestroy&&null!=t._parent&&t._parent.offsetWidth-t.getWidth()>8&&(t.doResize(),t=null)},100)},doResize:function(){this._doResize(this._parent),!1===this.getOption().absolute&&(this.thisWindow.style.left="")},_doResize:function(t){if(!("alNone"!==this.getAlign()||"string"==typeof this._width&&this._width.indexOf("%")>0)||!1!==this.isShow()){if(!this._update)return!1;null==t&&(this.base(),"function"==typeof this.onResize&&this.onResize(this.getWidth(),this.getHeight()),this.trigger("onResize",[this.getWidth(),this.getHeight()])),this.logInfo("panel doResize");var e=t||this;this.removeChildComponent(e.childComponent);var i=e.childComponent.length;if(i>0){for(var s=0,n=0,o=0,h=0,l=this._getRectLeft(t),a=this._getRectTop(t),r=this._getRectWidth(t),d=this._getRectHeight(t),u=this._getPaddingTop(t),c=this._getPaddingLeft(t),g=null,p=0;p<i;p++){var f=e.childComponent[p];if(f.isContainer){var y=f._getMarginTop()+f._getMarginBottom(),m=f._getMarginLeft()+f._getMarginRight(),C=d-o-h,S=r-s-n,x=a,_=l;if("relative"==f.thisWindow.style.position)C-=v=u,S-=w=c,x-=v,_-=w;var b=f.getAlign();"alClient"===b?g=f:"alRight"===b?(n+=f.getWidth()+m,f.setHeight(C-y,!1),f.setTop(o+x,!1),f.setLeft(r-n+_)):"alLeft"===b?(f.setTop(o+x,!1),f.setLeft(s+_,!1),s+=f.getWidth()+m,f.setHeight(C-y)):"alTop"===b?(f.setTop(o+x,!1),f.setLeft(s+_,!1),0!=f.getOption().absolute&&(o+=f.getHeight()),o+=y,f.setWidth(S-m)):"alBottom"===b?(h+=f.getHeight()+y,f.setWidth(S-m,!1),f.setTop(d-h+x,!1),f.setLeft(s+_)):"alFull"===b&&(f.setWidth("100%",!1),f.setHeight("100%"))}f=null}if(this.isNotEmpty(g)){var v,w;y=g._getMarginTop()+g._getMarginBottom(),m=g._getMarginLeft()+g._getMarginRight(),C=d-o-h,S=r-s-n,x=a,_=l;if("relative"==g.thisWindow.style.position)C-=v=u,S-=w=c,x-=v,_-=w;g.setWidth(S-m,!1),g.setLeft(s+_,!1),g.setHeight(C-y,!1),g.setTop(o+x)}g=null}}},getAlign:function(){return this.align},doShow:function(){this._doResize(this._parent)},setAlign:function(t){this.align!==t&&(this.align=t,this._sizeChanged=!0,this.isNotEmpty(this._parent)&&(this._parent.isComponent?this._parent._doResize():this._doResize(this._parent)))}}),_bindRenderFunc("qzzpanel",t.ui.panel),t.ui.panel}),
/*!
 * 框架控件.
 * ecp.qzz.ui.frame.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.panel","qzz.scrollbar"],function(){var t=window.qzz;return t.space("ui"),t.ui.frame=t.Class(t.ui.panel,{_create:function(){this.base(),this.className="Frame",this._hScrollHeight=18,this._pageBoxHeight=0,this._vScrollHide=!1,this._hScrollHide=!0,this.maxer=2},_render:function(){this.base(),this.scrollBar=new t.ui.scrollbar(null,{cssPrefix:this._cssPrefix});var e=this;this.scrollBar.onScroll=function(t,i){e.doScroll(t,i)},this.frameTable=this.createElement("table"),this.thisWindow.appendChild(this.frameTable),this.setStyle(this.frameTable,"component_ui_listview_table"),this.frameTable.style.width=this._getRectWidth()+"px",this._getRectHeight()>0&&(this.frameTable.style.height=this._getRectHeight()+"px");var i=this.frameTable.insertRow(0);this.mainbox=i.insertCell(0),this.setStyle(this.mainbox,"component_ui_listview_box_td"),(s=this._getRectWidth()-this.scrollBar.getWidth())<=0&&(s=1),this.mainbox.style.width=s+"px",this.scrollbox=i.insertCell(1),this.scrollbox.style.width=this.scrollBar.getWidth()+"px",this.scrollBar.setHeight(this._getRectHeight()-this._hScrollHeight-this._pageBoxHeight),this.setStyle(this.scrollbox,"component_ui_listview_box_td"),this.scrollBar.setParent(this.scrollbox),this.listDiv=this.createElement("div");var s,n=this._getRectHeight()-this._pageBoxHeight;if(n<=0&&(n=1),this.listDiv.style.height=n+"px",(s=this._getRectWidth()-this.scrollBar.getWidth()-2)<=0&&(s=1),this.listDiv.style.width=s+this.maxer+"px",this.setStyle(this.listDiv,"treeListDiv"),this.mainbox.appendChild(this.listDiv),(a=this.thisWindow.childNodes.length)>1){for(var o=[],h=0;h<a;h++){var l=this.thisWindow.childNodes[h];l!==this.frameTable&&o.push(l),l=null}h=0;for(var a=o.length;h<a;h++)this.listDiv.appendChild(o[h]);o=null}},_doResize:function(t){if(!this._update)return!1;this.base(t),this.logBegin("Frame doRisize");var e=this._getRectHeight(),i=e+"px",s=this._getRectWidth(),n=s+"px";if(this.isNotEmpty(this.listDiv)&&e>0&&s>0)if(this.listDiv.style.height!=e-this._pageBoxHeight+"px"&&(this.listDiv.style.height=e-this._pageBoxHeight+"px"),this.scrollBar.setHeight(e-this._pageBoxHeight),this.scrollBar.refresh(),this.frameTable.style.width!=n&&(this.frameTable.style.width=n),this.frameTable.style.height!=i&&(this.frameTable.style.height=i),this.scrollBar.visible){var o=this.scrollBar.getWidth();n=s-o+"px",this.mainbox.style.width!=n&&(this.mainbox.style.width=n),n=o+"px",this.scrollbox.style.width!=n&&(this.scrollbox.style.width=n),n=s-o-1+this.maxer+"px",this.listDiv.style.width!=n&&(this.listDiv.style.width=n)}else{n=s-1+"px",this.mainbox.style.width!=n&&(this.mainbox.style.width=n),"1px"!=this.scrollbox.style.width&&(this.scrollbox.style.width="1px");var h=this._getNumberValue(this.mainbox.style.width,1)+this.maxer+"px";this.listDiv.style.width!=h&&(this.listDiv.style.width=h)}this.logEnd("Frame doResize("+this.getOption().top+","+this.getOption().left+","+this.getOption().width+","+this.getOption().height+")")},doScroll:function(t,e){},setVScrollHide:function(t){this._vScrollHide=t,this.scrollBar.setVisible(!t),t?(this.mainbox.style.width=this._getRectWidth()-1+"px",this.scrollbox.style.width="1px",this.listDiv.style.width=this._getRectWidth()-1+this.maxer+"px"):(this.mainbox.style.width=this._getRectWidth()-this.scrollBar.getWidth()+"px",this.scrollbox.style.width=this.scrollBar.getWidth()+"px",this.listDiv.style.width=this._getRectWidth()-this.scrollBar.getWidth()-1+this.maxer+"px")},getHScrollHeight:function(){return this.listDiv.offsetHeight-this.listDiv.clientHeight},getHScrollHide:function(){return this.isEmpty(this.listDiv)||this.listDiv.offsetHeight-this.listDiv.scrollHeight<=10},refreshScrollBar:function(){this.getHScrollHide()?this.scrollBar.setHeight(this._getRectHeight()-2-this._pageBoxHeight):this.scrollBar.setHeight(this._getRectHeight()-this._hScrollHeight-this._pageBoxHeight),this.setVScrollHide(!0!==this.scrollBar.getVisible())},getBoxWidth:function(){return this._getNumberValue(this.listDiv.style.width,this.getWidth())},refreshVScrollBar:function(){var t=this;this.listDiv.style.overflow="hidden",this._asynRun(function(){t.listDiv.style.overflow="","function"==typeof t.doVScrollShow&&t.doVScrollShow()},0)}}),_bindRenderFunc("qzzframe",t.ui.frame),t.ui.frame}),
/*!
 * 列表视图控件.
 * ecp.qzz.ui.listview.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.frame","qzz.list","qzz.icheckbox"],function(){var t=window.qzz;return t.space("ui"),t.ui.listview=t.Class(t.ui.frame,{_create:function(){this.base(),this.className="ListView",this.logInfo("listView.create"),this.list=new t.list;var e=this.getOption().data;this.isNotEmpty(e)&&this.list.setItemList(e),e=null,this.selectIndex=-1,this.rowIndex=0,this.getOption().showCount=this._getNumberValue(this.getOption().showCount,6),this.selBackgroup=!1,""!==this.getOption().fontSize&&null!=this.getOption().fontSize?this._rowHeight=1.9*parseInt(this.getOption().fontSize,10):this._rowHeight=23,this._rowHeight=this._getNumberValue(this.getOption().rowHeight,this._rowHeight),this._scrollFireEvent=this.getBooleanValue(this.getOption().scrollFireEvent,!0),this.getOption().height=this._rowHeight*this.getOption().showCount,this.topIndex=0,this.getOption().width=this._getNumberValue(this.getOption().width,150),this.rendered=!1,this.autoHeight=!1,this.getOption().multiSelect=this.getBooleanValue(this.getOption().multiSelect,!1),this.getOption().selectAll=this.getBooleanValue(this.getOption().selectAll,!1),this.getOption().idkey=this.getOption().idkey||"id",this.getOption().capkey=this.getOption().capkey||"text",this.list.filterTextOnly=this.getOption().filterTextOnly,this.list.idColName=this.getOption().idkey,this.list.textColName=this.getOption().capkey},_render:function(){this.base(),this.logInfo("listView.render"),this.listTab=this.createElement("table"),this.setStyle(this.listTab,"component_ui_listview_list_table"),this.listTab.style.width="100%",this.listTab._this=this,this.listDiv.appendChild(this.listTab),this.refresh(),this.rendered=!0},refreash:function(t){this.refresh(t)},setHeight:function(t){var e=t;this.base(e),this.thisWindow.style.height=e+"px"},_getSelectObj:function(){var t=this.createElement("span");this.addStyle(t,"link"),t.id="all",this._setHtml(t,this.getI18n("qzz.selectAll","全选"));var e=this.createElement("span");e.id="rever",this.addStyle(e,"link"),this._setHtml(e,this.getI18n("qzz.rever","反选"));var i=this.createElement("table"),s=i.insertRow(0),n=0,o=s.insertCell(n++);return this._setHtml(o,"("),(o=s.insertCell(n++)).appendChild(t),o=s.insertCell(n++),this._setHtml(o,"&nbsp;|&nbsp;"),(o=s.insertCell(n++)).appendChild(e),o=s.insertCell(n++),this._setHtml(o,")"),i},_getAllText:function(){return"("+this.getI18n("qzz.selectAll","全选")+"&nbsp;|&nbsp;"+this.getI18n("qzz.rever","反选")+")"},refresh:function(e){if(!this._update)return!1;var i="100%";if("image"!==this.getOption().viewType){var s="12px";null!=this.getOption().fontSize&&(s=this.getOption().fontSize+"px"),i=this.getTextWidth(this.list.getMaxText(),s)+10}this.getOption().multiSelect&&(i+=23);var n=!1;if(!0===this.getOption().selectAll&&!0===this.getOption().multiSelect){var o=this.list.indexOf("all");o>0&&this.list.delItem(o);var h=this.list.getItem(0);if(h&&"all"!=h[this.getOption().idkey]){var l={};l[this.getOption().idkey]="all",l[this.getOption().capkey]=this._getAllText(),l._filter=!1,this.list.insertItem(0,l)}if(h&&!0===h.checked&&!0!==h.rever)for(var a=1,r=this.list.length();a<r;a++){(c=this.list.getItem(a)).checked=!0}else{var d=!1,u=!1;for(a=1,r=this.list.length();a<r;a++){var c;if(!0===(c=this.list.getItem(a)).checked?d=!0:!0!==c.checked&&(u=!0),d&&u){n=!0;break}}}this.list._refreshFilter()}this._overWidth=!1;var g=this.getOption().width;this.scrollBar.visible&&(g-=this.scrollBar.getWidth()),i>g?(this.listTab.style.width=i+"px",this._overWidth=!0):(this.listTab.style.width="100%",this._overWidth=!1);var p=0;this._overWidth&&(p=this.getHScrollHeight());var f=this.getOption().showCount;this.autoHeight||(f=parseInt((this._getRectHeight()-p)/this._rowHeight,10));var y,m,C,S=this.listTab.rows.length,x=this.list.length(),_=f<x?f:x,b=this.topIndex,v=this;this.rowIndex=-1;var w="",N=_*this._rowHeight;for(this.autoHeight&&(this._overWidth&&(N+=p),this.setHeight(N)),a=0;a<=_&&b<x;a++){null==(m=this.listTab.rows[a])&&(m=this.listTab.insertRow(a)),C=0;var O=this.list.getItem(b);if(this.getOption().multiSelect?(m.cells.length>1?(y=m.cells[C]).style.display="":((y=m.insertCell(C)).checkBox=new t.ui.input.checkbox,y.checkBox._this=this,y.checkBox.bind("onClick",function(t){v.doSelect.apply(this,arguments)},!0),y.onmouseover=this.doMouseOverCell,y.onmouseout=this.doMouseOutCell,y.appendChild(y.checkBox.getContainer()),y.style.width="20px",y.style.textAlign="center"),y.checkBox.item=O,y._this=this,y.checkBox._selectIndex=b,"all"==O.id?!0===O.checked?y.checkBox.setCheck(!0):n?y.checkBox.setSomeCheck(!0):y.checkBox.setCheck(!1):y.checkBox.setCheck(1==O.checked),1==O.disabled?(y.checkBox.setDisable(!0),y.checkBox.unbind("onClick")):y.checkBox.setDisable(!1),b!=this.selectIndex||this.selBackgroup?this.setStyle(y,"component_ui_listview_td"):this.focus?this.setStyle(y,"component_ui_listview_td_over"):this.setStyle(y,"component_ui_listview_td_nofocus_over"),""!==this.getOption().fontSize&&null!=this.getOption().fontSize&&(y.style.fontSize=this.getOption().fontSize+"px"),null!=this._rowHeight&&""!==this._rowHeight&&(y.style.height=this._rowHeight-1+"px"),C++):m.cells.length>1&&((y=m.cells[C]).style.display="none",C++),null==(y=m.cells[C])&&(y=m.insertCell(C)),this.getOption().multiSelect&&(y.style.paddingLeft="0px"),b!=this.selectIndex&&O[this.getOption().capkey]!=e||this.selBackgroup?this.setStyle(y,"component_ui_listview_td"):(this.focus?this.setStyle(y,"component_ui_listview_td_over"):this.setStyle(y,"component_ui_listview_td_nofocus_over"),this.rowIndex=a,O[this.getOption().capkey]==e&&(this.selectIndex=b)),""!==this.getOption().fontSize&&null!=this.getOption().fontSize&&(y.style.fontSize=this.getOption().fontSize+"px"),null!=this._rowHeight&&""!==this._rowHeight&&(y.style.height=this._rowHeight-1+"px"),y._this=this,y._selectIndex=b,w=O[this.getOption().capkey],b++,"image"==this.getOption().viewType||"imageText"==this.getOption().viewType){var T=this._rowHeight-4+"px";null==y._cimg&&(y._cimg=this.createElement("span")),null==y._cimgTab&&(y._cimgTab=this.createElement("img")),y._cimg.innerHTML="",y._cimg.appendChild(y._cimgTab),y._cimg.style.height=T,y._cimg.style.width=T,y._cimg.style.display="block",y._cimg.style.textAlign="center",y._cimg.style.backgroundColor="#DCF1F3",y._cimgTab.onload=function(){this.style.width="auto",this.style.height="auto",this.offsetWidth>this.offsetHeight?(this.style.width="100%",this.style.marginTop=y._cimg.offsetWidth/2-this.offsetHeight/2+"px"):this.style.height="100%"},y._cimgTab.setAttribute("src",O[this.getOption().idkey]),y.setAttribute("title",O.title||w),"imageText"==this.getOption().viewType?(null==y._ctext&&(y._ctext=this.createElement("span")),this._setHtml(y._ctext,O.title||w,!0),y._cimg.style.float="left",y._ctext.style.float="left",y._ctext.style.padding="3px 0 0 5px",this._setHtml(y,y._cimg,!1),y.appendChild(y._ctext)):y.appendChild(y._cimg)}else"all"==O.id?(null==this._allTab&&(this._allTab=this._getSelectObj()),this._setHtml(y,this._allTab)):this._setHtml(y,w,!1!==this.getOption().escape),y.setAttribute("title","");1!=O.disabled&&("all"==O.id?y.onmouseup=this.doSelect:y.onclick=this.doSelect,y.ondblclick=this.doItemDBClick),y.onmouseover=this.doMouseOverCell,y.onmouseout=this.doMouseOutCell}f<x?(this.scrollBar.setScrollCount(x,f),this.setVScrollHide(!1)):(this.scrollBar.setScrollCount(0,0),this.setVScrollHide(!0)),this.listTabWidth=i,this.refreshScrollBar();for(var L=S-1;L>=a;L--)L<this.listTab.rows.length&&this.listTab.deleteRow(L)},refreshScrollBar:function(){this.base(),this.scrollBar.setScrollIndex(this.topIndex)},doItemDBClick:function(t){var e=this._this,i=e.list.getItem(this._selectIndex);(e.selectIndex!=this._selectIndex||e.getOption().multiSelect)&&(e.selectIndex=this._selectIndex,this.tmpClassName="",e.getOption().multiSelect&&(i.checked=!i.checked,e.doSelect.apply(this,arguments)),e.refresh()),e.trigger("onDBClick",[i]),i=null},doSelect:function(t){var e=this._this,i=e.list.getItem(this._selectIndex);if(e.selectIndex!=this._selectIndex||e.getOption().multiSelect){if(e.selectIndex=this._selectIndex,this.tmpClassName="",e.getOption().multiSelect&&(i.checked=!i.checked,i.rever=!1,e.getOption().selectAll)){var s=e.list.getItemList();if("all"==i[e.getOption().idkey])if(t.target&&"rever"==t.target.id){for(var n=!0,o=0,h=s.length;o<h;o++)0===o||s[o].disabled||(s[o].checked=!s[o].checked,!0!==s[o].checked&&(n=!1));i.rever=!0,i.checked=n}else if(t.target&&"all"==t.target.id){for(o=0,h=s.length;o<h;o++)0===o||s[o].disabled||(s[o].checked=!0);i.checked=!0}else for(o=0,h=s.length;o<h;o++)0===o||s[o].disabled||(i.checked?s[o].checked=!0:s[o].checked=!1);else{var l,a=i.checked;for(o=0,h=s.length;o<h;o++)if(!(0===o&&"all"===s[o][e.getOption().idkey]||s[o].disabled))if(a){if(!s[o].checked){if("all"==s[0][e.getOption().idkey]&&s[0].checked){s[0].checked=!1;break}l=!0}}else if("all"==s[0][e.getOption().idkey]&&s[0].checked){s[0].checked=!1;break}!a||l||"all"!=s[0][e.getOption().idkey]||s[0].checked||(s[0].checked=!0)}}e.refresh()}if("function"==typeof e.onSelect&&null!=i&&e.onSelect(e.selectIndex,i),e.trigger("onSelect",[e.selectIndex,i]),e.getOption().multiSelect&&"function"==typeof e.onCheckChanged)try{e.onCheckChanged(i,i.checked)}catch(t){e.logError("[onCheckChanged] error:"+t.message+t.stack)}i=null},setSelectByText:function(t){if(this.selBackgroup=!1,this.getOption().multiSelect){"string"==typeof t&&(t=t.split(/[,，]+/g));for(var e=t.length,i=this._getAllText(),s="("+this.getI18n("qzz.selectAll","全选")+")",n=0,o=[],h=0,l=this.list.length(!0);h<l&&n<e;h++){var a=this.list.getItem(h,!0);a.checked=!1;for(var r=0;r<e;r++){var d=a[this.getOption().capkey];if(d==t[r]||d+""===t[r]||d+""===i&&t[r]===s){a.checked=!0,n++;break}}a.checked&&o.push(a)}return this.refresh(),o}return this.selectIndex=this.list.indexOfText(t,!0),this.refresh(),this.selectIndex},setSelect:function(t){if(this.selBackgroup=!1,this.getOption().multiSelect){if("string"==typeof t?t=t.split(/[,，]+/g):"number"==typeof t&&(t=[t+""]),this.getOption().selectAll&&t&&"all"===t[0]){var e=this.list.getItemList();t=[];for(var i=0,s=e.length;i<s;i++)e[i].checked&&t.push(e[i][this.getOption().idkey])}i=0;for(var n=this.list.length(!0);i<n;i++){var o=this.list.getItem(i,!0);o.checked=!1;s=0;for(var h=t.length;s<h;s++)if(null!=o[this.getOption().idkey]&&o[this.getOption().idkey]===t[s]||o[this.getOption().capkey]===t[s]){o.checked=!0;break}}}else this.selectIndex=this.list.indexOf(t,!0);this.refresh()},getSelect:function(){if(this.getOption().multiSelect){for(var t=[],e=0;e<this.list.length(!0);e++){var i=this.list.getItem(e,!0);i.checked&&t.push(i),i=null}return t}return this.list.getItem(_this.selectIndex)},doMouseOverCell:function(t){var e=this._this;if(this.tmpClassName=this.className,e.focus){e.setStyle(this,"component_ui_listview_td_over");var i=this.parentNode.cells[1-this.cellIndex];if(e.isNotEmpty(i)&&(i.tmpClassName=i.className,e.setStyle(i,"component_ui_listview_td_over"),i=null),e.getOption().multiSelect){var s=this.parentNode.cells[0];s.style.width="20px",s.style.textAlign="center"}e.selBackgroup||e.selectIndex==this._selectIndex||(e.selectIndex=this._selectIndex,e.refresh(),e.selBackgroup=!0)}},doMouseOutCell:function(t){var e=this._this;if(e.focus&&""!==this.tmpClassName){e.setStyle(this,this.tmpClassName,null,!1);var i=this.parentNode.cells[1-this.cellIndex];if(e.isNotEmpty(i)&&(e.setStyle(i,i.tmpClassName),i=null),e.getOption().multiSelect){var s=this.parentNode.cells[0];s.style.width="20px",s.style.textAlign="center"}}},doMouseWheel:function(t){this.base();var e=t,i=this;return(e.wheelDelta?e.wheelDelta:-1*e.detail)>0?i.scrollBar.scrollPrior():i.scrollBar.scrollNext(),i=null,e.returnValue=!1,e=null,null,!1},doKeyDown:function(t,e){if(e==this.keyBoard.UP?this.prior():e==this.keyBoard.DOWN&&this.next(),(e==this.keyBoard.UP||e==this.keyBoard.DOWN)&&"function"==typeof this.onSelect){var i=this.list.getItem(this.selectIndex);null!=i&&this._scrollFireEvent&&this.onSelect(this.selectIndex,i)}e=null},doKeyUp:function(t,e){if(e==this.keyBoard.ENTER&&"function"==typeof this.onSelect){var i=this.list.getItem(this.selectIndex);null!=i&&(this.getOption().multiSelect&&(i.checked=!i.checked,this.refresh()),this.onSelect(this.selectIndex,i)),i=null,this.logInfo("key up")}},setShowCount:function(t){this.getOption().showCount!=t&&(this.getOption().showCount=t,this.getOption().height=t*this._rowHeight,this.refresh())},setItemList:function(t){this.list.filtered=!1,this.list.filter="",this.list.setItemList(t),this.topIndex=0,this.refresh()},value:function(t){null==t||this.setItemList(t)},addItem:function(t){this.list.addItem(t),this.refresh()},delItem:function(t,e){this.list.delItem(t),0!=e&&this.refresh()},addFilter:function(t,e){if(this.list.addFilter(t,e),this.topIndex=0,1==this.list.length()?this.selectIndex=0:this.selectIndex=-1,this.getOption().selectAll){for(var i=this.list.length(),s=i>1,n=0;s&&n<i;n++){"all"!==(o=this.list.getItem(n))[this.getOption().idkey]&&(s=s&&!0===o.checked)}var o;null!=(o=this.list.getItem(0))&&"all"===o[this.getOption().idkey]&&(o.checked=s)}0!=e&&this.refresh(t)},doFilter:function(){this.list.doFilter(),this.refresh()},clearFilter:function(t){this.list.clearFilter()},filterExist:function(t){return this.list.filterExist(t)},getFilter:function(){return this.list.filter},prior:function(){this.selectIndex>0?(this.selectIndex--,this.selectIndex<this.topIndex?this.topIndex=this.selectIndex:this.selectIndex>this.topIndex+this.getOption().showCount-1&&(this.topIndex=this.selectIndex-this.getOption().showCount+1),this.scrollBar.setScrollIndex(this.topIndex),this.refresh()):(this.selectIndex=0,this.refresh())},next:function(){this.selectIndex<this.list.length()-1?(this.selectIndex++,this.selectIndex<this.topIndex?this.topIndex=this.selectIndex:this.selectIndex>this.topIndex+this.getOption().showCount-1&&(this.topIndex=this.selectIndex-this.getOption().showCount+1),this.scrollBar.setScrollIndex(this.topIndex),this.refresh()):(this.selectIndex=this.list.length()-1,this.refresh())},getCurItem:function(){return this.list.getItem(this.selectIndex)},getItem:function(t){return this.list.getItem(t)},indexOfText:function(t,e){return this.list.indexOfText(t,e)},indexOf:function(t,e){return this.list.indexOf(t,e)},getSelectIndex:function(){if(this.list.filtered){var t=this.list.getItem(this.selectIndex),e=-1;return null!=t&&(e=this.list.indexOfText(t[this.getOption().capkey],!0)),t=null,e}return this.selectIndex},endUpdate:function(){this._update=!0,this.refresh()},doScroll:function(t,e){this.topIndex=t,this.refresh()},_doResize:function(t){this.base(t)},doBlur:function(){this.base(),this.refresh()},doFocus:function(){this.base(),this.refresh()},doSelectAll:function(){if(this.getOption().multiSelect){for(var t=0;t<this.list.length(!0);t++)this.list.getItem(t,!0).checked=!0;this.refresh()}},clearSelectAll:function(){if(this.getOption().multiSelect){for(var t=0;t<this.list.length(!0);t++)this.list.getItem(t,!0).checked=!1;this.refresh()}},length:function(t){return this.list.length(t)},getHScrollHide:function(){var t=this.getOption().width;return this.scrollBar.visible&&(t-=this.scrollBar.getWidth()),this.listTabWidth<=t},setIdkey:function(t){this.getOption().idkey=t}}),_bindRenderFunc("qzzlistview",t.ui.listview),t.ui.listview}),
/*!
 * 树形视图控件.
 * ecp.qzz.ui.treeview.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.frame","qzz.treelist","qzz.icheckbox"],function(){var t=window.qzz;return t.space("ui"),t.ui.treeview=t.Class(t.ui.frame,{_create:function(){this.base(),this.className="TreeView",this.logInfo("treeView.create"),this.treeList=new t.treelist,this.rowIndex=0,this.showCount=this._getNumberValue(this.getOption().showCount,6),this.topNode=null,this.topIndex=0,this.bottomNode=null,this._rowHeight=this._getNumberValue(this.getOption().rowHeight,17),this.scrollHeight=16,this.getOption().height=this._getNumberValue(this.getOption().height,this._rowHeight*this.showCount+this.scrollHeight),this.rendered=!1,this.autoHeight=this.getBooleanValue(this.getOption().autoHeight,!1);var e,i=this.getOption().data;if(this.treePidData=this.getBooleanValue(this.getOption().treePidData,!1),null==this.getOption().pidkey&&null==this.getOption().parentKeyId||(this.treePidData=!0),this.treeList.getOption().fullPath=this.getOption().fullPath,this.treeList.getOption().fullCaption=this.getOption().fullCaption,this.treeList.getOption().treeId=this.getOption().treeId||this.getOption().treekey,this.treeList.getOption().idkey=this.getOption().idkey||this.treeList.getOption().idkey,this.treeList.getOption().capkey=this.getOption().capkey||this.treeList.getOption().capkey,this.treeList.getOption().filterTextOnly=this.getOption().filterTextOnly,this.treePidData)this.treeList.setIDPID(this.getOption().treeId||this.getOption().idkey,this.getOption().parentKeyId||this.getOption().pidkey),this.treeList.initSort=!1;else{var s=this.getOption().treeId||this.getOption().treekey;null==s&&(s=this.treeList.getOption().idkey||"bm"),this.treeList.setItemCode(s)}if(this.isNotEmpty(i)){var n=this;this.treeList.setItemList(i,function(){n.setLeafOnly(!0===n.getOption().leafOnly)}),this.treeList.first(),this.topNode=this.treeList.getCurNode()}(i=null,this.isNotEmpty(this.getOption().checkFlag))&&((e=this.getOption().checkFlag).indexOf("p")>=0&&(this.treeList.autoCheckType.autoCheckAllParent=!0),e.indexOf("s")>=0&&(this.treeList.autoCheckType.autoCheckAllChild=!0),e.indexOf("b")>=0&&(this.treeList.autoCheckType.autoCheckBrother=!0),e.indexOf("e")>=0&&(this.treeList.autoCheckType.autoCheckAllParentExt=!0));this.isNotEmpty(this.getOption().unCheckFlag)&&((e=this.getOption().unCheckFlag).indexOf("p")>=0&&(this.treeList.autoCheckType.autoUnCheckAllParent=!0),e.indexOf("s")>=0&&(this.treeList.autoCheckType.autoUnCheckAllChild=!0),e.indexOf("b")>=0&&(this.treeList.autoCheckType.autoUnCheckBrother=!0),e.indexOf("e")>=0&&(this.treeList.autoCheckType.autoUnCheckAllParentExt=!0));this.multiSelect=this.getBooleanValue(this.getOption().multiselect,this.getOption().multiSelect),this.isEmpty(this.multiSelect)&&(this.multiSelect=!1),this.treeList.multiSelect=this.multiSelect},_render:function(){this.base(),this.logInfo("treeView.render"),this.listTab=this.createElement("table"),this.setStyle(this.listTab,"component_ui_listview_list_table"),this.listTab.style.width="100%",this.listTab._this=this,this.listDiv.appendChild(this.listTab),this.isSelect=!0,this.maxWidth=0,this.refresh()},_onTreeCheckBoxClick:function(t){var e=this._this,i=this._cNode;if(i.checkState?e.treeList.setUnSelect(i):e.treeList.setSelect(i),"function"==typeof e.onCheckChanged)try{e.onCheckChanged(this._cNode,this._cNode.checkState)}catch(t){e.logError("[onCheckChanged] error:"+t.message+t.stack)}e.trigger("onSelectRow",[this._cNode,this._cNode.checkState]),e.trigger("onCheckChanged",[this._cNode,this._cNode.checkState]),e.refresh(),e=null},refreash:function(){this.refresh()},refresh:function(){if(!this._update)return!1;this.beginUpdate();var e=this.getHScrollHeight();this.autoHeight||(this.showCount=Math.round((this._getRectHeight()-e)/this._rowHeight)+1);var i,s,n,o=this.listTab.rows.length,h=this.treeList.getVisibleCount(),l=this.showCount<h?this.showCount:h,a=this.topNode;this.rowIndex=-1;var r=this.treeList.curNode;this.treeList.beginUpdate(),this.treeList.select(a);for(n=0;l>0&&n<=l&&null!=a;n++){null==(s=this.listTab.rows[n])&&(s=this.listTab.insertRow(n)),i=s.cells[0];var d=a.index>=a.pNode.count-1;if(null==i){i=s.insertCell(0);var u=this.createElement("table");u.border=0,u.cellPadding=0,u.cellSpacing=0,i.nodeTable=u,i.nodeR=u.insertRow(0),i.nodeR.style.height=this._rowHeight+"px",i.pointTd=i.nodeR.insertCell(0),i.pointTd.style.width="16px",i.pointTd._this=this,i.pointDiv=this.createElement("div"),i.pointDiv.style.width="16px",i.pointDiv.style.height=this._rowHeight+"px",i.pointTd.appendChild(i.pointDiv),i.checkTd=i.nodeR.insertCell(1),i.checkTd.style.width="16px",i.checkBox=new t.ui.input.checkbox,i.checkBox._this=this,i.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0),i.checkTd.appendChild(i.checkBox.getContainer()),i.textTd=i.nodeR.insertCell(2),i.textTd._this=this,i.appendChild(u)}else for(var c=i.nodeR.cells.length;c>3;)i.nodeR.deleteCell(0),c--;var g=0;this.multiSelect?(i.checkTd.style.display="",i.checkBox.setCheck(a.checkState),i.checkBox._cNode=a,g=16,a.enable?i.checkBox.setDisable(!1):i.checkBox.setDisable(!0)):i.checkTd.style.display="none",i.textTd._node=a;var p="";p=d?"_last":"_center",a.recNo==r.recNo?(this.focus?this.setStyle(i.textTd,"component_ui_treeview_td_over"):this.setStyle(i.textTd,"component_ui_treeview_td_nofocus_over"),this.rowIndex=n):this.setStyle(i.textTd,"component_ui_treeview_td"),i.style.paddingLeft="4px",i.style.paddingTop="0px",i.style.paddingBottom="0px",a.count>0?(a.expanded?this.setStyle(i.pointDiv,"component_ui_treeview_node_expand"+p):this.setStyle(i.pointDiv,"component_ui_treeview_node_collapse"+p),i.pointTd.node=a,i.pointTd.onclick=function(){this.node.expanded?this.node.collapse():this.node.expand(),this._this.isSelect=!1,this._this.refresh()}):(this.setStyle(i.pointDiv,"component_ui_treeview_node"+p),i.pointTd.onclick=null),!1===a.enable&&this.addStyle(i.textTd,"component_ui_treeview_td_disable");for(var f=16*a.level+16+g,y=a.pNode,m=0;m<a.level;m++){var C=i.nodeR.insertCell(0);C.style.width="16px",y.index>=y.pNode.count-1?this.setStyle(C,"component_ui_treeview_box_last"):this.setStyle(C,"component_ui_treeview_box_center"),y=y.pNode}var S=a.text;this.hasbind("onItemDraw")&&(S=this.trigger("onItemDraw",[this.treeList,i.textTd,S])),this._setHtml(i.textTd,S);var x=this.getTextWidth(a.text+25);this.maxWidth<f+x&&(this.maxWidth=f+x),i.textTd.onclick=this.doSelect,a=this.treeList.next()?this.treeList.curNode:null}this.maxWidth>0&&(this.listTab.style.width=this.maxWidth+10+"px");for(var _=o-1;_>=n;_--)this.listTab.deleteRow(_);this.bottomNode=this.treeList.curNode,this.treeList.endUpdate(!1),this.treeList.select(r),o=null,this.showCount-1<h?(this.scrollBar.setScrollCount(h,this.showCount),this.setVScrollHide(!1)):(this.scrollBar.setScrollCount(0,0),this.setVScrollHide(!0)),this.rendered=!0,this.endUpdate()},doSelect:function(t){var e=this._this;if(e.isSelect){var i=this._node;e.treeList.curNode.recNo!=i.recNo&&(e.treeList.select(i),this.tmpClassName="",e.refresh()),"function"==typeof e.onSelect&&!0===e.treeList.isEnableCheck()&&e.onSelect(e.treeList.curNode),e.trigger("onSelect",[e.treeList.curNode])}e.isSelect=!0},doScroll:function(t,e){if(0!==e){var i=this;i.topIndex=t,i.treeList.beginUpdate();var s=i.treeList.curNode;if(i.treeList.select(i.topNode),e>0)for(var n=0;n<e;n++)i.treeList.next();else for(n=0;n>e;n--)i.treeList.prior();i.topNode=i.treeList.curNode,i.treeList.select(s),s=null,i.treeList.endUpdate(),i.refresh(),i=null}},doMouseWheel:function(t){this.base();var e=t,i=this;return(e.wheelDelta?e.wheelDelta:-1*e.detail)>0?i.scrollBar.scrollPrior():i.scrollBar.scrollNext(),i=null,e.returnValue=!1,e=null,null,!1},doKeyDown:function(t,e){e==this.keyBoard.UP?this.prior():e==this.keyBoard.DOWN&&this.next(),e=null},addFilterText:function(t,e,i){this.treeList.addFilterText(t,e,i)},clearFilterText:function(t){this.treeList.clearFilterText(t)},setFiltered:function(t,e){this.treeList.setFiltered(t,e)},isFiltered:function(){return this.treeList.filtered},doKeyUp:function(t,e){if(e==this.keyBoard.ENTER){var i=this.treeList.getCurNode();null!=i&&("function"==typeof this.onSelect&&this.onSelect(i),this.trigger("onSelect",[i])),i=null,this.logInfo("key up")}},first:function(){this.treeList.first(),this.topNode=this.treeList.getCurNode(),this.topNode.level>=0&&(this.topNode.scrIndex=1),this.beginUpdate(),this.scrollBar.setScrollIndex(0),this.endUpdate(!1),this.refresh()},prior:function(){this.treeList.prior(),this._scrollToFocus()},next:function(){this.treeList.next(),this._scrollToFocus()},last:function(){this.treeList.last(),this._scrollToFocus()},addNode:function(e,i,s){return e instanceof t.treenode?this.treeList.addNode(e,i,s):"string"==typeof e?((n=new t.treenode).text=e,this.treeList.addNode(n)):"object"==(void 0===e?"undefined":_typeof(e))?((n=new t.treenode).text=e.text,n.id=e.id,this.treeList.addNode(n)):void 0;var n},insertNode:function(e,i,s,n){return i instanceof t.treenode?this.treeList.insertNode(e,i,s,n):"string"==typeof i?((o=new t.treenode).text=i,this.treeList.insertNode(e,o)):"object"==(void 0===i?"undefined":_typeof(i))?((o=new t.treenode).text=i.text,o.id=i.id,this.treeList.insertNode(e,o)):void 0;var o},delNode:function(t,e){return this.treeList.delNode(t,e)},setLeafOnly:function(t,e){this.treeList.each(function(e){e.count>0&&(e.enable=!0!==t)},e)},value:function(t,e){this.setItemList(t,e)},setItemList:function(t,e){var i=this;this.topNode=null,this.treeList.setItemList(t,function(){i.setLeafOnly(!0===i.getOption().leafOnly,function(){null!=i.topNode&&i.refresh(),"function"==typeof e&&e(),i=null})}),this.treeList.first(),this.topNode=this.treeList.curNode,this.topCount=0,this.maxWidth=0,this.refresh()},setItemCode:function(t){this.treeList.setItemCode(t)},setIDPID:function(t,e){this.treeList.setIDPID(t,e)},_doResize:function(t){this.base(t),this.rendered&&this._update&&(this.refresh(),this.autoHeight&&(null==this.showCount&&(this.showCount=0),this.setHeight(this._rowHeight*this.showCount+this.getHScrollHeight()+this._rowHeight)))},doBlur:function(){this.base(),this.refresh()},doFocus:function(){this.base(),this.refresh()},getCurNode:function(){return this.treeList.getCurNode()},setMultiSelect:function(t){this.getOption().multiselect=t,this.multiSelect=t},getSelectedData:function(){if(this.multiSelect){this.treeList.getCurNode();this.treeList.first();for(var t=[];!this.treeList.isEof();)this.treeList.isSelected()&&t.push(this.getCurNode().data),this.treeList.next(!0);return t}return this.treeList.getCurNode().data},setSelectById:function(t,e){var i=this;this.treeList.setSelectById(t,function(t){i.refresh(),"function"==typeof e&&e(t)})},setSelectByText:function(t,e){var i=this;this.treeList.setSelectByText(t,function(t){i.refresh(),"function"==typeof e&&e(t)})},indexOfText:function(t){return this.treeList.indexOfText(t)},locate:function(t){return!!this.treeList.locate(t)&&(this._scrollToFocus(),!0)},getDisplay:function(t){return this.treeList.getDisplay(t)},getValue:function(t){return this.treeList.getValue(t)},getText:function(t){return this.treeList.getText(t)},getAllCount:function(){return this.treeList.getAllCount()},unCheckAll:function(t){this.treeList.unCheckAll(t)},checkAll:function(t){this.treeList.checkAll(t)},getScrollIndex:function(){return null!=this.topNode?this.topNode.scrIndex:1},scrollToIndex:function(t){if(t>1){t>this.getAllCount()&&(t=this.getAllCount());var e=!0;if(t>1){this.treeList.beginUpdate();var i=this.treeList.getCurNode(),s=0;if(this.treeList.select(this.topNode),t>this.topNode.scrIndex)for(;!this.treeList.isEof()&&t!=this.treeList.getIndex();){if(t<this.treeList.getIndex()){e=!1;break}s++,this.treeList.next()}else for(;!this.treeList.isBof()&&t!=this.treeList.getIndex();){if(t>this.treeList.getIndex()){e=!1;break}s--,this.treeList.prior()}this.treeList.select(i),this.treeList.endUpdate(!1),!0===e&&this.scrollBar.setScrollIndex(this.scrollBar.scrollIndex+s),this.refresh()}else this.first()}else this.first()},_scrollToFocus:function(){if(this.treeList.curNode.scrIndex<this.topNode.scrIndex){var t=this.scrollBar.scrollIndex,e=this.treeList.curNode;for(this.treeList.curNode=this.topNode;this.treeList.curNode.recNo!=e.recNo&&!this.treeList.isBof();)this.treeList.prior(),this.treeList.isBof()||t--;this.scrollBar.setScrollIndex(t)}else if(!this.treeList.isEof()&&this.treeList.curNode.scrIndex>=this.bottomNode.scrIndex){t=this.scrollBar.scrollIndex,e=this.treeList.curNode;for(this.treeList.curNode=this.bottomNode;this.treeList.curNode.recNo!=e.recNo&&!this.treeList.isEof();)this.treeList.next(),this.treeList.isEof()||t++;this.scrollBar.setScrollIndex(t+1)}this.refresh()}}),_bindRenderFunc("qzztreeview",t.ui.treeview),t.ui.treeview}),
/*!
 * 远光ECP平台3.4版本 
 * 
 * 可见窗口基类.：qzz.ui.Window
 * ecp.qzz.ui.codeview.js
 * @requires qzz.ui
 */
null==window.qdefine&&(window.qdefine=define),null==window.GRM_ROOT&&(window.GRM_ROOT="/grm/ecp/webcore"),qdefine(["ecp.utils","qzz.window","qzz.copy"],function(t){var e=window.qzz;return e.space("ui"),e.ui.codeview=e.Class(e.ui.window,{_create:function(){this.className="CodeView",this.logInfo("CodeView.create"),this.base(),null!=this.getOption().top&&0!==this.getOption().top||(this.getOption().top=4),this._rowSplit="\n"},_render:function(){this.base(),null==this.getOption().code&&"HTML"!=this.getOption().type&&this.getBrowser("msie")?this.getOption().code=this.thisWindow.innerText:null==this.getOption().code&&null!=this.thisWindow.innerHTML&&(this.getOption().code=this.thisWindow.innerHTML),this.thisWindow.style.backgroundColor="#FFFFFF",this._setHtml(this.thisWindow,"",!1),this._copyBtn=this.createElement("DIV"),this._copyBtn.id="copy_btn",this._copyBtn.setAttribute("title","复制"),this.setStyle(this._copyBtn,"copyDiv");var e=this;this.thisWindow.appendChild(this._copyBtn),ZeroClipboard.setMoviePath(GRM_ROOT+"/components/qzz/ZeroClipboard.swf");var i=new ZeroClipboard.Client;i.addEventListener("mouseOver",function(t){var s=e.getOption().code;null!=s&&(s=s.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#37;/g,"%")),i.setText(s)}),i.addEventListener("complete",function(e,i){t.notify("复制完成。")}),i.setHandCursor(!0),i.glue("copy_btn",this._copyBtn),this._list=this._splitRow(),this._codeTable=this.createElement("OL"),this._codeTable.setAttribute("start",1),this.setStyle(this._codeTable,"coreIndex"),this.thisWindow.appendChild(this._codeTable),this.refresh()},_splitRow:function(){var t=this.getOption().code;return null==t?[]:t.split(/\n/g)},setCode:function(t){this.getOption().code=t,this._splitRow(),this.refresh()},_addRow:function(t,e){var i=this.createElement("li");this._codeTable.appendChild(i);var s,n=this.createElement("span");i.appendChild(n),s=t%2==1?"code_1":"code_2",this.setStyle(i,s);var o="";if(null!=e){var h=e.split("//");e=(e=(e=(e="&nbsp;"+(e=h[0]).replace(/ /g,"&nbsp;").replace(/	/g,"&nbsp;&nbsp;&nbsp;&nbsp;")).replace(/</g,"&lt").replace(/>/g,"&gt")).replace(/(['][^']*[']|["][^"]*["])/g,"<font color='blue'>$1</font>")).replace(/\b(if|else|function|null|this|var|true|false|return|for|while|in)\b/g,"<strong style='color:#A349A4'>$1</strong>"),h.length>1&&(h[0]="//",o="<font style='color:green'>"+h.join("")+"</font>")}this._setHtml(n,e+o,!1),i=null,n=null},_onselectstart:function(t){var e=t||window.event,i=e.target||e.srcElement,s=!1;if(!this.shiftKeyDown)s="INPUT"==i.tagName||"TEXTAREA"==i.tagName;return e.returnValue=s,s},refresh:function(){this._setHtml(this._codeTable,"",!1),""===this._list[0]&&this._list.splice(0,1);for(var t=this._list.length,e=0;e<t;e++)this._addRow(e+1,this._list[e]);this.thisWindow.style.width="100%",this.thisWindow.style.height="100%"},doResize:function(){this.thisWindow.style.width="100%",this.setHeight(this._codeTable.offsetHeight+2),this.thisWindow.style.width="100%"}}),_bindRenderFunc("qzzcodeview",e.ui.codeview),e.ui.codeview}),
/*!
 * 折叠视图控件.
 * ecp.qzz.ui.accordion.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.frame","qzz.treelist","qzz.icheckbox"],function(){var t=window.qzz;return t.space("ui"),t.ui.accordion=t.Class(t.ui.frame,{_create:function(){this.base(),this.className="accordion",this.logInfo("accordion.create"),this.treeList=new t.treelist,this.rowIndex=0,this.showCount=this._getNumberValue(this.getOption().showCount,6),this.topNode=null,this.topIndex=0,this.bottomNode=null,this._rowHeight=this._getNumberValue(this.getOption().rowHeight,17),this.scrollHeight=16,this.getOption().height=this._getNumberValue(this.getOption().height,this._rowHeight*this.showCount+this.scrollHeight),this.rendered=!1,this.autoHeight=this.getBooleanValue(this.getOption().autoHeight,!1);var e,i=this.getOption().data;if(this.treePidData=this.getBooleanValue(this.getOption().treePidData,!1),null==this.getOption().pidkey&&null==this.getOption().parentKeyId||(this.treePidData=!0),this.treeList.getOption().fullPath=this.getOption().fullPath,this.treeList.getOption().treeId=this.getOption().treeId||this.getOption().treekey,this.treeList.getOption().idkey=this.getOption().idkey||this.treeList.getOption().idkey,this.treeList.getOption().capkey=this.getOption().capkey||this.treeList.getOption().capkey,this.treePidData)this.treeList.setIDPID(this.getOption().treeId||this.getOption().idkey,this.getOption().parentKeyId||this.getOption().pidkey),this.treeList.initSort=!1;else{var s=this.getOption().treeId||this.getOption().treekey;null==s&&(s=this.treeList.getOption().idkey||"bm"),this.treeList.setItemCode(s)}if(this.isNotEmpty(i)){var n=this;this.treeList.setItemList(i,function(){n.setLeafOnly(!0===n.getOption().leafOnly)}),this.treeList.first(),this.topNode=this.treeList.getCurNode()}(i=null,this.isNotEmpty(this.getOption().checkFlag))&&((e=this.getOption().checkFlag).indexOf("p")>=0&&(this.treeList.autoCheckType.autoCheckAllParent=!0),e.indexOf("s")>=0&&(this.treeList.autoCheckType.autoCheckAllChild=!0),e.indexOf("b")>=0&&(this.treeList.autoCheckType.autoCheckBrother=!0),e.indexOf("e")>=0&&(this.treeList.autoCheckType.autoCheckAllParentExt=!0));this.isNotEmpty(this.getOption().unCheckFlag)&&((e=this.getOption().unCheckFlag).indexOf("p")>=0&&(this.treeList.autoCheckType.autoUnCheckAllParent=!0),e.indexOf("s")>=0&&(this.treeList.autoCheckType.autoUnCheckAllChild=!0),e.indexOf("b")>=0&&(this.treeList.autoCheckType.autoUnCheckBrother=!0),e.indexOf("e")>=0&&(this.treeList.autoCheckType.autoUnCheckAllParentExt=!0));this.multiSelect=this.getBooleanValue(this.getOption().multiselect,this.getOption().multiSelect),this.isEmpty(this.multiSelect)&&(this.multiSelect=!1),this.treeList.multiSelect=this.multiSelect},_render:function(){this.base(),this.logInfo("accordion.render"),this.listTab=this.createElement("table"),this.setStyle(this.listTab,"component_ui_listview_list_table"),this.listTab.style.width="100%",this.listTab._this=this,this.listDiv.appendChild(this.listTab),this.isSelect=!0,this.maxWidth=0,this.refresh()},_onTreeCheckBoxClick:function(t){var e=this._this,i=this._cNode;if(i.checkState?e.treeList.setUnSelect(i):e.treeList.setSelect(i),"function"==typeof e.onCheckChanged)try{e.onCheckChanged(this._cNode,this._cNode.checkState)}catch(t){e.logError("[onCheckChanged] error:"+t.message+t.stack)}e.trigger("onSelectRow",[this._cNode,this._cNode.checkState]),e.trigger("onCheckChanged",[this._cNode,this._cNode.checkState]),e.refresh(),e=null},refreash:function(){this.refresh()},refresh:function(){if(!this._update)return!1;this.beginUpdate();var e=this.getHScrollHeight();this.autoHeight||(this.showCount=Math.round((this._getRectHeight()-e)/this._rowHeight)+1);var i,s,n,o=this.listTab.rows.length,h=this.treeList.getVisibleCount(),l=this.showCount<h?this.showCount:h,a=this.topNode;this.rowIndex=-1;var r=this.treeList.curNode;this.treeList.beginUpdate(),this.treeList.select(a);for(n=0;n<=l&&null!=a;n++){null==(s=this.listTab.rows[n])&&(s=this.listTab.insertRow(n)),i=s.cells[0];var d=a.index>=a.pNode.count-1;if(null==i)i=s.insertCell(0),nodeTable=this.createElement("table"),nodeTable.border=0,nodeTable.cellPadding=0,nodeTable.cellSpacing=0,i.nodeTable=nodeTable,i.nodeR=nodeTable.insertRow(0),i.nodeR.style.height=this._rowHeight+"px",i.pointTd=i.nodeR.insertCell(0),i.pointTd.style.width="16px",i.pointTd._this=this,i.pointDiv=this.createElement("div"),i.pointDiv.style.width="16px",i.pointDiv.style.height=this._rowHeight+"px",i.pointTd.appendChild(i.pointDiv),i.checkTd=i.nodeR.insertCell(1),i.checkTd.style.width="16px",i.checkBox=new t.ui.input.checkbox,i.checkBox._this=this,i.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0),i.checkTd.appendChild(i.checkBox.getContainer()),i.textTd=i.nodeR.insertCell(2),i.textTd._this=this,i.appendChild(nodeTable);else for(var u=i.nodeR.cells.length;u>3;)i.nodeR.deleteCell(0),u--;var c=0;this.multiSelect?(i.checkTd.style.display="",i.checkBox.setCheck(a.checkState),i.checkBox._cNode=a,c=16,a.enable?i.checkBox.setDisable(!1):i.checkBox.setDisable(!0)):i.checkTd.style.display="none",i.textTd._node=a;var g="";g=d?"_last":"_center",a.recNo==r.recNo?(this.focus?this.setStyle(i.textTd,"component_ui_treeview_td_over"):this.setStyle(i.textTd,"component_ui_treeview_td_nofocus_over"),this.rowIndex=n):this.setStyle(i.textTd,"component_ui_treeview_td"),i.style.paddingLeft="4px",a.count>0?(a.expanded?this.setStyle(i.pointDiv,"component_ui_treeview_node_expand"+g):this.setStyle(i.pointDiv,"component_ui_treeview_node_collapse"+g),i.pointTd.node=a,i.pointTd.onclick=function(){this.node.expanded?this.node.collapse():this.node.expand(),this._this.isSelect=!1,this._this.refresh()}):(this.setStyle(i.pointDiv,"component_ui_treeview_node"+g),i.pointTd.onclick=null),!1===a.enable&&this.addStyle(i.textTd,"component_ui_treeview_td_disable");for(var p=16*a.level+16+c,f=a.pNode,y=0;y<a.level;y++){var m=i.nodeR.insertCell(0);m.style.width="16px",f.index>=f.pNode.count-1?this.setStyle(m,"component_ui_treeview_box_last"):this.setStyle(m,"component_ui_treeview_box_center"),f=f.pNode}var C=a.text;this.hasbind("onItemDraw")&&(C=this.trigger("onItemDraw",[this.treeList,i.textTd,C])),this._setHtml(i.textTd,C);var S=this.getTextWidth(a.text+25);this.maxWidth<p+S&&(this.maxWidth=p+S),i.textTd.onclick=this.doSelect,a=this.treeList.next()?this.treeList.curNode:null}this.maxWidth>0&&(this.listTab.style.width=this.maxWidth+10+"px");for(var x=o-1;x>=n;x--)this.listTab.deleteRow(x);this.bottomNode=this.treeList.curNode,this.treeList.endUpdate(!1),this.treeList.select(r),o=null,this.showCount-1<h?(this.scrollBar.setScrollCount(h,this.showCount-1),this.setVScrollHide(!1)):(this.scrollBar.setScrollCount(0,0),this.setVScrollHide(!0)),this.rendered=!0,this.endUpdate()},doSelect:function(t){var e=this._this;if(e.isSelect){var i=this._node;e.treeList.curNode.recNo!=i.recNo&&(e.treeList.select(i),this.tmpClassName="",e.refresh()),"function"==typeof e.onSelect&&!0===e.treeList.isEnableCheck()&&e.onSelect(e.treeList.curNode)}e.isSelect=!0},doScroll:function(t,e){if(0!==e){var i=this;i.topIndex=t,i.treeList.beginUpdate();var s=i.treeList.curNode;if(i.treeList.select(i.topNode),e>0)for(var n=0;n<e;n++)i.treeList.next();else for(n=0;n>e;n--)i.treeList.prior();i.topNode=i.treeList.curNode,i.treeList.select(s),s=null,i.treeList.endUpdate(),i.refresh(),i=null}},doMouseWheel:function(t){this.base();var e=t,i=this;return(e.wheelDelta?e.wheelDelta:-1*e.detail)>0?i.scrollBar.scrollPrior():i.scrollBar.scrollNext(),i=null,e.returnValue=!1,e=null,null,!1},doKeyDown:function(t,e){e==this.keyBoard.UP?this.prior():e==this.keyBoard.DOWN&&this.next(),e=null,_this=null},addFilterText:function(t,e,i){this.treeList.addFilterText(t,e,i)},clearFilterText:function(t){this.treeList.clearFilterText(t)},setFiltered:function(t,e){this.treeList.setFiltered(t,e)},isFiltered:function(){return this.treeList.filtered},doKeyUp:function(t,e){if(e==this.keyBoard.ENTER&&"function"==typeof this.onSelect){var i=this.treeList.getCurNode();null!=i&&this.onSelect(i),i=null,this.logInfo("key up")}},first:function(){this.treeList.first(),this.topNode=this.treeList.getCurNode(),this.topNode.level>=0&&(this.topNode.scrIndex=1),this.beginUpdate(),this.scrollBar.setScrollIndex(0),this.endUpdate(!1),this.refresh()},prior:function(){this.treeList.prior(),this._scrollToFocus()},next:function(){this.treeList.next(),this._scrollToFocus()},last:function(){this.treeList.last(),this._scrollToFocus()},addNode:function(e,i,s){return e instanceof t.treenode?this.treeList.addNode(e,i,s):"string"==typeof e?((n=new t.treenode).text=e,this.treeList.addNode(n)):"object"==(void 0===e?"undefined":_typeof(e))?((n=new t.treenode).text=e.text,n.id=e.id,this.treeList.addNode(n)):void 0;var n},insertNode:function(e,i,s,n){return i instanceof t.treenode?this.treeList.insertNode(e,i,s,n):"string"==typeof i?((o=new t.treenode).text=i,this.treeList.insertNode(e,o)):"object"==(void 0===i?"undefined":_typeof(i))?((o=new t.treenode).text=i.text,o.id=i.id,this.treeList.insertNode(e,o)):void 0;var o},delNode:function(t,e){return this.treeList.delNode(t,e)},setLeafOnly:function(t,e){this.treeList.each(function(e){e.count>0&&(e.enable=!0!==t)},e)},value:function(t,e){this.setItemList(t,e)},setItemList:function(t,e){var i=this;this.topNode=null,this.treeList.setItemList(t,function(){i.setLeafOnly(!0===i.getOption().leafOnly,function(){null!=i.topNode&&i.refresh(),"function"==typeof e&&e(),i=null})}),this.treeList.first(),this.topNode=this.treeList.curNode,this.topCount=0,this.maxWidth=0,this.refresh()},setItemCode:function(t){this.treeList.setItemCode(t)},setIDPID:function(t,e){this.treeList.setIDPID(t,e)},_doResize:function(t){this.base(t),this.rendered&&this._update&&(this.refresh(),this.autoHeight&&(null==this.showCount&&(this.showCount=0),this.getOption().height=this._rowHeight*this.showCount+this.scrollHeight))},doBlur:function(){this.base(),this.refresh()},doFocus:function(){this.base(),this.refresh()},getCurNode:function(){return this.treeList.getCurNode()},setMultiSelect:function(t){this.getOption().multiselect=t,this.multiSelect=t},getSelectedData:function(){if(this.multiSelect){this.treeList.getCurNode();this.treeList.first();for(var t=[];!this.treeList.isEof();)this.treeList.isSelected()&&t.push(this.getCurNode().data),this.treeList.next(!0);return t}return this.treeList.getCurNode().data},setSelectById:function(t,e){this.treeList.setSelectById(t,e)},setSelectByText:function(t,e){this.treeList.setSelectByText(t,e)},indexOfText:function(t){return this.treeList.indexOfText(t)},locate:function(t){return!!this.treeList.locate(t)&&(this._scrollToFocus(),!0)},getDisplay:function(t){return this.treeList.getDisplay(t)},getValue:function(t){return this.treeList.getValue(t)},getAllCount:function(){return this.treeList.getAllCount()},unCheckAll:function(t){this.treeList.unCheckAll(t)},checkAll:function(t){this.treeList.checkAll(t)},getScrollIndex:function(){return null!=this.topNode?this.topNode.scrIndex:1},scrollToIndex:function(t){if(t>1){t>this.getAllCount()&&(t=this.getAllCount());var e=!0;if(t>1){this.treeList.beginUpdate();var i=this.treeList.getCurNode(),s=0;if(this.treeList.select(this.topNode),t>this.topNode.scrIndex)for(;!this.treeList.isEof()&&t!=this.treeList.getIndex();){if(t<this.treeList.getIndex()){e=!1;break}s++,this.treeList.next()}else for(;!this.treeList.isBof()&&t!=this.treeList.getIndex();){if(t>this.treeList.getIndex()){e=!1;break}s--,this.treeList.prior()}this.treeList.select(i),this.treeList.endUpdate(!1),!0===e&&this.scrollBar.setScrollIndex(this.scrollBar.scrollIndex+s),this.refresh()}else this.first()}else this.first()},_scrollToFocus:function(){if(this.treeList.curNode.scrIndex<this.topNode.scrIndex){var t=this.scrollBar.scrollIndex,e=this.treeList.curNode;for(this.treeList.curNode=this.topNode;this.treeList.curNode.recNo!=e.recNo&&!this.treeList.isBof();)this.treeList.prior(),this.treeList.isBof()||t--;this.scrollBar.setScrollIndex(t)}else if(!this.treeList.isEof()&&this.treeList.curNode.scrIndex>=this.bottomNode.scrIndex){t=this.scrollBar.scrollIndex,e=this.treeList.curNode;for(this.treeList.curNode=this.bottomNode;this.treeList.curNode.recNo!=e.recNo&&!this.treeList.isEof();)this.treeList.next(),this.treeList.isEof()||t++;this.scrollBar.setScrollIndex(t+1)}this.refresh()}}),_bindRenderFunc("qzzaccordion",t.ui.accordion),t.ui.accordion}),
/*!
 * 公式视图控件.
 * ecp.qzz.ui.treeview.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.frame","qzz.treelist","qzz.inumber"],function(){var t=window.qzz;return t.space("ui"),t.ui.expressview=t.Class(t.ui.panel,{_create:function(){this.base(),this.className="expressview",this.logInfo("expressview.create"),this.treeList=new t.treelist,this.rowIndex=0,this.showCount=this._getNumberValue(this.getOption().showCount,6),this.topNode=null,this.topIndex=0,this.bottomNode=null,this._rowHeight=this._getNumberValue(this.getOption().rowHeight,17),this.scrollHeight=16,this.getOption().height=this._getNumberValue(this.getOption().height,this._rowHeight*this.showCount+this.scrollHeight),this.rendered=!1,this.autoHeight=this.getBooleanValue(this.getOption().autoHeight,!1);var e,i=this.getOption().data;if(this.treePidData=this.getBooleanValue(this.getOption().treePidData,!1),null==this.getOption().pidkey&&null==this.getOption().parentKeyId||(this.treePidData=!0),this.treeList.getOption().fullPath=this.getOption().fullPath,this.treeList.getOption().treeId=this.getOption().treeId||this.getOption().treekey,this.treeList.getOption().idkey=this.getOption().idkey||this.treeList.getOption().idkey,this.treeList.getOption().capkey=this.getOption().capkey||this.treeList.getOption().capkey,this.treeList.getOption().initSort=this.getBooleanValue(this.getOption().initSort,!1),this.treePidData)this.treeList.setIDPID(this.getOption().treeId||this.getOption().idkey,this.getOption().parentKeyId||this.getOption().pidkey),this.treeList.initSort=!1;else{var s=this.getOption().treeId||this.getOption().treekey;null==s&&(s=this.treeList.getOption().idkey||"bm"),this.treeList.setItemCode(s)}if(this.isNotEmpty(i)){var n=this;this.treeList.setItemList(i,function(){n.setLeafOnly(!0===n.getOption().leafOnly)}),this.treeList.first(),this.topNode=this.treeList.getCurNode()}(i=null,this.isNotEmpty(this.getOption().checkFlag))&&((e=this.getOption().checkFlag).indexOf("p")>=0&&(this.treeList.autoCheckType.autoCheckAllParent=!0),e.indexOf("s")>=0&&(this.treeList.autoCheckType.autoCheckAllChild=!0),e.indexOf("b")>=0&&(this.treeList.autoCheckType.autoCheckBrother=!0),e.indexOf("e")>=0&&(this.treeList.autoCheckType.autoCheckAllParentExt=!0));this.isNotEmpty(this.getOption().unCheckFlag)&&((e=this.getOption().unCheckFlag).indexOf("p")>=0&&(this.treeList.autoCheckType.autoUnCheckAllParent=!0),e.indexOf("s")>=0&&(this.treeList.autoCheckType.autoUnCheckAllChild=!0),e.indexOf("b")>=0&&(this.treeList.autoCheckType.autoUnCheckBrother=!0),e.indexOf("e")>=0&&(this.treeList.autoCheckType.autoUnCheckAllParentExt=!0));this.multiSelect=this.getBooleanValue(this.getOption().multiselect,this.getOption().multiSelect),this.isEmpty(this.multiSelect)&&(this.multiSelect=!1),this.treeList.multiSelect=this.multiSelect,this.getOption().elenames=this.getOption().elenames||["+","-","*","/","&gt;","&gt;=","&lt;","&lt;=","=","&lt;&gt;","(",")","abs","sum","并且","或者","为空","非空","包含","不含","如果","否则","就"],this.getOption().eleids=this.getOption().eleids||["+","-","*","/",">",">=","<","<=","=","<>","(",")","abs","sum","&&","||","==null","<>null","包含","不含","if","else","then"]},_render:function(){this.base(),this.logInfo("expressview.render"),this.addStyle(this.thisWindow,"hideborder"),this.expressBox=this.createElement("DIV"),this.thisWindow.appendChild(this.expressBox),this.setStyle(this.expressBox,"express_box"),this.expressBtn=this.createElement("div"),this.setStyle(this.expressBtn,"express_btn"),this.thisWindow.appendChild(this.expressBtn),this.eleBox=this.createElement("DIV"),this.thisWindow.appendChild(this.eleBox),this.setStyle(this.eleBox,"express_ele_box"),this.calcBox=this.createElement("div"),this.setStyle(this.calcBox,"calc_box"),this.eleBox.appendChild(this.calcBox);for(var e=0,i=this.getOption().elenames.length;e<i;e++){var s=this.getOption().elenames[e],n=this.getOption().eleids[e],o=this.createElement("div");this.calcBox.appendChild(o),o.innerHTML=s,o._id=n,this.setStyle(o,"express_ele"),o._this=this,o.onmouseup=function(t){var e=this._this,i=this.innerHTML,s=this._id;"abs"!=i&&"sum"!=i||(i+="(",s+="("),e._addElement({id:s,text:i}),e.selectElement=!0}}this.commonBox=this.createElement("DIV"),this.setStyle(this.commonBox,"common_box"),this.eleBox.appendChild(this.commonBox),this.inputLabel=this.createElement("span"),this.inputLabel.innerHTML="",this.commonBox.appendChild(this.inputLabel),this.commonInput=new t.ui.input.number({width:100,height:26,placeholder:"请输入数值"}),this.commonInput.setParent(this.commonBox),this.commonInput.getContainer().style.display="inline-block";var h=this;this.commonBtn=this._addBtn({caption:"添加数值",width:80,height:26,marginLeft:10},function(){var t=h.commonInput.getValue();(""!==t&&null!=t||0===t)&&h._addElement({id:t,text:h.commonInput.getText()})});var l=(this.getHeight()-120)/2-60;this.delBtn=this._addBtn({caption:"删除",width:40,height:26,marginLeft:4,marginTop:l},function(){h.delNode()},this.expressBtn),this.clearBtn=this._addBtn({caption:"全清",width:40,height:26,marginLeft:4,marginTop:4},function(){h.value([])},this.expressBtn),this.movePrior=this._addBtn({caption:"&lt;&lt;",width:40,height:26,marginLeft:4,marginTop:4},function(){h.treeList.moveNode(-1),h.refresh()},this.expressBtn),this.movePrior=this._addBtn({caption:"&gt;&gt;",width:40,height:26,marginLeft:4,marginTop:4},function(){h.treeList.moveNode(1),h.refresh()},this.expressBtn),this._asynRun(function(){this.refresh()},200)},_addBtn:function(e,i,s){null==s&&(s=this.commonBox);var n=new t.ui.button(e);n.setParent(s),n.getContainer().style.display="inline-block",n.getContainer().style.verticalAlign="middle";var o=this;return n.bind("onClick",function(){"function"==typeof i&&i.apply(o),o.selectElement=!0}),n},_onTreeCheckBoxClick:function(t){var e=this._this,i=this._cNode;if(i.checkState?e.treeList.setUnSelect(i):e.treeList.setSelect(i),"function"==typeof e.onCheckChanged)try{e.onCheckChanged(this._cNode,this._cNode.checkState)}catch(t){e.logError("[onCheckChanged] error:"+t.message+t.stack)}e.trigger("onSelectRow",[this._cNode,this._cNode.checkState]),e.trigger("onCheckChanged",[this._cNode,this._cNode.checkState]),e.refresh(),e=null},refresh:function(){if(!this._update)return!1;this.beginUpdate();this.treeList.length();var t=this;this.expressBox.innerHTML="";var e=this.treeList.getCurNode();this.treeList.first();var i="";this.treeList.each(function(s){var n=t.createElement("div");t.expressBox.appendChild(n);var o=this.getText(s);n.innerHTML=o,n._node=s,t.setStyle(n,"express_object"),s.recNo==e.recNo&&(i=o,t.addStyle(n,"express_select")),s._dom=n,n._this=t,n.onmouseup=t.doSelect},function(){t.treeList.select(e),t.rendered=!0,t.endUpdate(!1),(")"==i||"string"==typeof i&&i.indexOf("(")>=0||"["==i||"]"==i)&&t._heightLight(i)});var s=this.getHeight()-this.eleBox.offsetHeight;0==this.eleBox.offsetHeight&&(s-=116),this.expressBox.style.height=s+"px",this.expressBox.style.width=this.getWidth()-50+"px",this.expressBtn.style.height=s+"px",this.rendered=!0,this.endUpdate(!1)},_findNext:function(t,e){this.treeList.beginUpdate();for(var i=this.treeList.getCurNode(),s=-1;!this.treeList.isEof();){var n=this.treeList.getText();if(n==e){if(0==s){var o=this.treeList.getCurNode()._dom;this.addStyle(o,"express_light");break}s--}else"string"==typeof t&&t.indexOf(n)>=0&&s++;this.treeList.next()}this.treeList.select(i),this.treeList.endUpdate(!1)},_findPrior:function(t,e){this.treeList.beginUpdate();for(var i=this.treeList.getCurNode(),s=-1;!this.treeList.isBof();){var n=this.treeList.getText();if("string"==typeof n&&n.indexOf(e)>=0){if(0==s){var o=this.treeList.getCurNode()._dom;this.addStyle(o,"express_light");break}s--}else n==t&&s++;this.treeList.prior()}this.treeList.select(i),this.treeList.endUpdate(!1)},_heightLight:function(t){")"==t?this._findPrior(")","("):"]"==t?this._findPrior("]","["):"string"==typeof t&&t.indexOf("(")>=0?this._findNext(t,")"):"["==t&&this._findNext("[","]")},doSelect:function(t){var e=this._this,i=this._node;e.treeList.curNode.recNo!=i.recNo&&(e.treeList.select(i),this.tmpClassName="",e.refresh()),"function"==typeof e.onSelect&&!0===e.treeList.isEnableCheck()&&e.onSelect(e.treeList.curNode),e.isSelect=!0},doScroll:function(t,e){if(0!==e){var i=this;i.topIndex=t,i.treeList.beginUpdate();var s=i.treeList.curNode;if(i.treeList.select(i.topNode),e>0)for(var n=0;n<e;n++)i.treeList.next();else for(n=0;n>e;n--)i.treeList.prior();i.topNode=i.treeList.curNode,i.treeList.select(s),s=null,i.treeList.endUpdate(),i.refresh(),i=null}},doMouseUp:function(){!0!==this.isSelect&&!0===this.hasSelect&&(1==this.selectElement||this.commonInput.isFocus()||this.treeList.select(this.treeList.rootNode),this.refresh()),this.isSelect=!1,this.selectElement=!1},doKeyDown:function(t,e){e==this.keyBoard.UP?this.prior():e==this.keyBoard.DOWN&&this.next(),e=null,_this=null},addFilterText:function(t,e,i){this.treeList.addFilterText(t,e,i)},clearFilterText:function(t){this.treeList.clearFilterText(t)},setFiltered:function(t,e){this.treeList.setFiltered(t,e)},isFiltered:function(){return this.treeList.filtered},first:function(){this.treeList.first(),this.topNode=this.treeList.getCurNode(),this.topNode.level>=0&&(this.topNode.scrIndex=1),this.beginUpdate(),this.scrollBar.setScrollIndex(0),this.endUpdate(!1),this.refresh()},prior:function(){this.treeList.prior(),this._scrollToFocus()},next:function(){this.treeList.next(),this._scrollToFocus()},last:function(){this.treeList.last(),this._scrollToFocus()},addNode:function(e,i,s){return e instanceof t.treenode?this.treeList.addNode(e,i,s):"object"==(void 0===e?"undefined":_typeof(e))?((n=new t.treenode).text=e.text,n.id=e.id,this.treeList.addNode(n)):((n=new t.treenode).text=e,this.treeList.addNode(n));var n},insertNode:function(e,i,s,n){return i instanceof t.treenode?this.treeList.insertNode(e,i,s,n):"object"==(void 0===i?"undefined":_typeof(i))?((o=new t.treenode).text=i.text,o.id=i.id,this.treeList.insertNode(e,o,s)):((o=new t.treenode).text=i,this.treeList.insertNode(e,o,s));var o},delNode:function(t,e){var i=this.treeList.delNode(t,e);return this.treeList.getIndex()>1&&this.treeList.next(),i},addElement:function(t,e){this._addElement({id:t,text:e})},_addElement:function(t){var e=this.treeList.getCurNode();this.treeList.getLevel()<0?this.addNode(t):this.insertNode(this.treeList.getIndex()-1,t,this.treeList.rootNode),this.treeList.select(e),this.refresh()},setLeafOnly:function(t,e){this.treeList.each(function(e){e.count>0&&(e.enable=!0!==t)},e)},value:function(t,e){this.setItemList(t,e)},setItemList:function(t,e){var i=this;this.topNode=null,this.treeList.setItemList(t,function(){i.setLeafOnly(!0===i.getOption().leafOnly,function(){null!=i.topNode&&i.refresh(),"function"==typeof e&&e(),i=null})}),this.treeList.first(),this.topNode=this.treeList.curNode,this.topCount=0,this.maxWidth=0,this.refresh()},setItemCode:function(t){this.treeList.setItemCode(t)},setIDPID:function(t,e){this.treeList.setIDPID(t,e)},_doResize:function(t){this.base(t),this.rendered&&this._update&&(this.refresh(),this.autoHeight&&(null==this.showCount&&(this.showCount=0),this.getOption().height=this._rowHeight*this.showCount+this.scrollHeight))},doBlur:function(){this.base(),this.refresh()},doFocus:function(){this.base(),this.refresh()},getCurNode:function(){return this.treeList.getCurNode()},setMultiSelect:function(t){this.getOption().multiselect=t,this.multiSelect=t},getSelectedData:function(){if(this.multiSelect){this.treeList.getCurNode();this.treeList.first();for(var t=[];!this.treeList.isEof();)this.treeList.isSelected()&&t.push(this.getCurNode().data),this.treeList.next(!0);return t}return this.treeList.getCurNode().data},setSelectById:function(t,e){this.treeList.setSelectById(t,e)},setSelectByText:function(t,e){this.treeList.setSelectByText(t,e)},indexOfText:function(t){return this.treeList.indexOfText(t)},locate:function(t){return!!this.treeList.locate(t)&&(this._scrollToFocus(),!0)},getDisplay:function(t){return this.treeList.getDisplay(t)},getValue:function(t){return this.treeList.getValue(t)},getAllCount:function(){return this.treeList.getAllCount()},unCheckAll:function(t){this.treeList.unCheckAll(t)},checkAll:function(t){this.treeList.checkAll(t)},getScrollIndex:function(){return null!=this.topNode?this.topNode.scrIndex:1},scrollToIndex:function(t){if(t>1){t>this.getAllCount()&&(t=this.getAllCount());var e=!0;if(t>1){this.treeList.beginUpdate();var i=this.treeList.getCurNode(),s=0;if(this.treeList.select(this.topNode),t>this.topNode.scrIndex)for(;!this.treeList.isEof()&&t!=this.treeList.getIndex();){if(t<this.treeList.getIndex()){e=!1;break}s++,this.treeList.next()}else for(;!this.treeList.isBof()&&t!=this.treeList.getIndex();){if(t>this.treeList.getIndex()){e=!1;break}s--,this.treeList.prior()}this.treeList.select(i),this.treeList.endUpdate(!1),!0===e&&this.scrollBar.setScrollIndex(this.scrollBar.scrollIndex+s),this.refresh()}else this.first()}else this.first()},_scrollToFocus:function(){if(this.treeList.curNode.scrIndex<this.topNode.scrIndex){var t=this.scrollBar.scrollIndex,e=this.treeList.curNode;for(this.treeList.curNode=this.topNode;this.treeList.curNode.recNo!=e.recNo&&!this.treeList.isBof();)this.treeList.prior(),this.treeList.isBof()||t--;this.scrollBar.setScrollIndex(t)}else if(!this.treeList.isEof()&&this.treeList.curNode.scrIndex>=this.bottomNode.scrIndex){t=this.scrollBar.scrollIndex,e=this.treeList.curNode;for(this.treeList.curNode=this.bottomNode;this.treeList.curNode.recNo!=e.recNo&&!this.treeList.isEof();)this.treeList.next(),this.treeList.isEof()||t++;this.scrollBar.setScrollIndex(t+1)}this.refresh()},getExpression:function(t){null==t&&(t=" "),this.treeList.beginUpdate();var e=this.treeList.getCurNode();this.treeList.first();for(var i=[];!this.treeList.isEof();)i.push(this.treeList.getValue()),this.treeList.next();return this.treeList.select(e),this.treeList.endUpdate(!1),i.join(t)},getExpDisplay:function(t){null==t&&(t=" "),this.treeList.beginUpdate();var e=this.treeList.getCurNode();this.treeList.first();for(var i=[];!this.treeList.isEof();)i.push(this.treeList.getText()),this.treeList.next();return this.treeList.select(e),this.treeList.endUpdate(!1),i.join(t)},decode:function(t,e){null==e&&(e=" ");for(var i=t.expression.split(e),s=t.display.split(e),n=[],o=0,h=i.length;o<h;o++){var l={};l[this.getOption().idkey]=i[o],l[this.getOption().capkey]=s[o],n.push(l)}this.value(n),this.refresh()},validate:function(){return!0},setElement:function(t,e){}}),_bindRenderFunc("qzzexpressview",t.ui.expressview),t.ui.expressview}),
/*!
 * 面板控件.
 * ecp.qzz.ui.button.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.window","qzz.button"],function(){var t=window.qzz;return t.space("ui"),t.ui.toolbutton=t.Class(t.ui.window,{_create:function(){this.base(),this.className="toolButton",this.getOption().column=this.getNumberValue(this.getOption().column,5),this.getOption().buttonList=this.getOption().buttonList||[],this.getOption().height=this.getNumberValue(this.getOption().height,20),this.getOption().buttonHeight=this.getNumberValue(this.getOption().buttonHeight,this.getOption().height),this.getOption().buttonWidth=this.getNumberValue(this.getOption().buttonWidth,this.getOption().buttonHeight),this.getOption().borderWidth=this.getNumberValue(this.getOption().borderWidth,0),this.getOption().space=this.getNumberValue(this.getOption().space,0),this._buttons={}},_render:function(){this._control&&"INPUT"===this._control.tagName&&this._replaceToDiv(),this.base(),null!=this.thisWindow.parentNode&&""!==this.thisWindow.parentNode.style.position&&(this.thisWindow.style.position="absolute"),this.thisWindow.style.borderWidth="0px",this._cTable=this.createElement("TABLE");this._cTable.insertRow(0);this.thisWindow.appendChild(this._cTable),this.refresh()},setItemList:function(t){this.clearButton(),this.getOption().buttonList=t,this.refresh()},clearButton:function(){for(var t in this._buttons)this._buttons[t].destroy();this._buttons={};for(var e=this._cTable.rows.length-1;e>=0;e--){for(var i=this._cTable.rows[e],s=i.cells.length-1;s>=0;s--)i.deleteCell(s);this._cTable.deleteRow(e)}this._cTable.insertRow(0)},refresh:function(){var e=0,i=0,s=0,n=0,o=0,h=this.getOption().buttonList.length,l=this.getOption().buttonHeight||this.getOption().height,a=0;this._buttons={};for(var r=null;e<h;){if(e%this.getOption().column==0){if(i>0&&this.getOption().space>0){if(null==(r=this._cTable.rows[i])&&(r=this._cTable.insertRow(i)),i>0)for(var d=0;d<this.getOption().column;d++)null==r.cells[d]&&r.insertCell(d);r.style.height=this.getOption().space+"px",a+=this.getOption().space,i++}if(null==(r=this._cTable.rows[i])&&(r=this._cTable.insertRow(i)),i>0)for(d=0;d<this.getOption().column;d++)null==r.cells[d]&&r.insertCell(d);n<o&&(n=o),a+=l+1,o=0,s=0,i++}s>0&&this.getOption().space>0&&(null==(u=r.cells[s])&&(u=r.insertCell(s)),u.style.width=this.getOption().space+"px",o+=this.getOption().space,s++);var u=r.cells[s];null==u&&(u=r.insertCell(s)),s++;var c=this.getOption().buttonList[e];null==u._btn&&(u._btn=new t.ui.button(null,{width:this.getOption().buttonWidth,height:this.getOption().buttonHeight,borderWidth:this.getNumberValue(c.borderWidth,this.getOption().borderWidth),style:this.getOption().style||"V"}));var g=u._btn;g.setParent(u),g.setName(c.name),this._buttons[c.name]=g,null!=c.caption&&(g.getOption().caption=c.caption),null!=c.icon&&g.setIcon(c.icon),null!=c.hint&&(g.getOption().hint=c.hint);var p=this;g.bind("onClick",function(){this.isenable()&&(p.trigger("on"+this.getName(),[this]),p.trigger("onButtonClick",[this]))}),null!=c.width?(g.setWidth(c.width),o+=c.width):o+=this.getOption().buttonWidth,null!=c.common&&(g.clearStyle(),g.addStyle(c.common)),g.refresh(),e++}n<o&&(n=o),this.setWidth(n),this.setHeight(a),this.trigger("onItemDraw",[this])},enable:function(t){if(null!=t){var e=this._buttons[t];null!=e&&e.enable()}else this.base()},disable:function(t){if(null!=t){var e=this._buttons[t];null!=e&&e.disable()}else this.base()},isenable:function(t){if(null!=t){var e=this._buttons[t];return null==e||e.isenable()}return this.base()},getButton:function(t){return null?this._buttons:this._buttons.null}}),_bindRenderFunc("qzztoolbutton",t.ui.toolbutton),t.ui.toolbutton}),
/*!
 * 分页.
 * ecp.qzz.ui.paged.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.icombobox","qzz.window"],function(){var t=window.qzz;return t.space("ui"),t.ui.paged=t.Class(t.ui.window,{_create:function(){this.getOption().width=this.getOption().width||620,this.getOption().height=this._getNumberValue(this.getOption().height,25),this.base(),this.getOption().pageSize=this._getNumberValue(this.getOption().pageSize,10),this.getOption().minPager=this.getBooleanValue(this.getOption().minPager,!1),this.getOption().pageIndex=this._getNumberValue(this.getOption().pageIndex,1),this.getOption().border=this._getNumberValue(this.getOption().border,0),null==this.getOption().pageSizeList&&(this.getOption().pageSizeList=[10,25,50,100,200]),this._totalCount=this._getNumberValue(this.getOption().totalCount,0),this._pageCount=parseInt(this._totalCount/this.getOption().pageSize,10),this._totalCount/this.getOption().pageSize-this._pageCount>0&&this._pageCount++,this._priorPage={pageSize:10,pageIndex:1,pageCount:this._pageCount},this._addCount=0},_render:function(){this.base(),this._pageTab=this.createElement("TABLE"),this.thisWindow.appendChild(this._pageTab),this._pageTab.style.marginLeft="auto",this.setStyle(this._pageTab,"pagerTable");var e=this._pageTab.insertRow(0),i=0,s=e.insertCell(i++);s.setAttribute("id","common_td"),this._setHtml(s,this.getI18n("qzz.recordCount","共{0}条，").replace("{0}",this._totalCount),!1),this.totalCountTd=s,this.totalCountTd.style.textAlign="right",(s=e.insertCell(i++)).setAttribute("id","common_td"),this._setHtml(s,this.getI18n("qzz.filterCount","当前页筛选出{0}条，").replace("{0}",this._filterCount||"0"),!1),s.style.textAlign="right",this.filterCountTd=s,(s=e.insertCell(i++)).setAttribute("id","common_td"),s.style.width="165px",this._pageSizeTd=s,this._pageSizeTab=this.createElement("TABLE"),this.setStyle(this._pageSizeTab,"pagerTable"),s.appendChild(this._pageSizeTab);var n=0,o=this._pageSizeTab.insertRow(0),h=o.insertCell(n++);this._setHtml(h,this.getI18n("qzz.pershow","每页显示")+"&nbsp;",!1),this._pageSizeListTd=o.insertCell(n++),this._pageSizeListTd.setAttribute("id","common_td"),this._pageSizeListTd.style.width="56px",this.pageSizeList=new t.ui.input.combobox(null,{fontSize:12,data:this.getOption().pageSizeList,popModel:this.getOption().popModel,popContainer:this.getPopContainer(),width:55,height:24,disInput:!0,canClear:!1}),this.pageSizeList.setParent(this._pageSizeListTd),this.pageSizeList.setValue(this.getOption().pageSize),this.pageSizeList.setReadOnly(!0);var l=this;this.pageSizeList.bind("onSelect",function(t,e){e.text!=l.getOption().pageSize&&l.setPageSize(e.text)}),(h=o.insertCell(n++)).setAttribute("id","common_td"),this._setHtml(h,"&nbsp;"+this.getI18n("qzz.percount","条记录"),!1),(s=e.insertCell(i++)).setAttribute("id","common_td"),s.style.width="1px";var a=e.insertCell(i++);a.setAttribute("id","common_td"),this._indexTab=this.createElement("TABLE"),a.appendChild(this._indexTab),this.setStyle(this._indexTab,"page_index_table"),this._refreshIndex()},setParent:function(t,e){this.base(t,e)},setPageSize:function(t){if(!1!==this.trigger("onBeforePageChange",[])){if(this._priorPage.pageSize=this.getOption().pageSize,this._priorPage.pageIndex=this.getOption().pageIndex,this._priorPage.pageCount=this._pageCount,t===this.getI18n("qzz.all","全部"))this._pageCount=1,this.getOption().pageSize=t;else{this.getOption().pageSize=parseInt(t,10);var e=this._totalCount/this.getOption().pageSize;this._pageCount=parseInt(e,10),e-this._pageCount>0&&this._pageCount++}this.pageSizeList.setValue(this.getOption().pageSize),this.getOption().pageIndex=1,this._refreshIndex()}else this.pageSizeList.setValue(this.getOption().pageSize)},setPageIndex:function(t,e){t>0&&(!1!==this.trigger("onBeforePageChange",[])&&(this._priorPage.pageIndex=this.getOption().pageIndex,this._priorPage.pageCount=this._pageCount,this.getOption().pageIndex=t,this._priorPage.pageIndex==t&&0==this.getOption().fireAllEvent||this._refreshIndex(!1!==e)))},nextPage:function(){this.getOption().pageIndex<this._pageCount&&(!1!==this.trigger("onBeforePageChange",[])&&(this._priorPage.pageIndex=this.getOption().pageIndex,this._priorPage.pageCount=this._pageCount,this.getOption().pageIndex++,this._refreshIndex()))},getPriorPageIndex:function(){return this._priorPage.pageIndex},getPageIndex:function(){return this.getOption().pageIndex},getPageCount:function(){return this._pageCount||1},getPageSize:function(){return this.getOption().pageSize},priorPage:function(){this.getOption().pageIndex>1&&(!1!==this.trigger("onBeforePageChange",[])&&(this._priorPage.pageIndex=this.getOption().pageIndex,this._priorPage.pageCount=this._pageCount,this.getOption().pageIndex--,this._refreshIndex()))},lastPage:function(){this.getOption().pageIndex<this._pageCount&&(!1!==this.trigger("onBeforePageChange",[])&&(this._priorPage.pageIndex=this.getOption().pageIndex,this._priorPage.pageCount=this._pageCount,this.getOption().pageIndex=this._pageCount,this._refreshIndex()))},firstPage:function(t){(!0===t||this.getOption().pageIndex>1)&&(!1!==this.trigger("onBeforePageChange",[])&&(this._priorPage.pageIndex=this.getOption().pageIndex,this._priorPage.pageCount=this._pageCount,this.getOption().pageIndex=1,this._refreshIndex(t)))},reWidth:function(t){t>1&&(this.setWidth(t),this._refreshIndex())},_refreshIndex:function(t){for(;this._indexTab.rows.length>0;)this._indexTab.deleteRow(0);null!=this._filterCount&&!0===this.getOption().filterCount&&!0!==this.getOption().minPager?(this.filterCountTd.style.display="",this._setHtml(this.filterCountTd,this.getI18n("qzz.filterCount","当前页筛选出{0}条，").replace("{0}",this._filterCount),!1)):this.filterCountTd.style.display="none",this._setHtml(this.totalCountTd,this.getI18n("qzz.recordCount","共{0}条，").replace("{0}",this._totalCount+this._addCount),!1);var e=this._indexTab.insertRow(0),i=0,s=e.insertCell(i++),n=this;this._setHtml(s,"&lt;&lt;",!1),1==this.getOption().pageIndex?this.setStyle(s,"page_index_cell_disabled"):(this.setStyle(s,"page_index_cell"),s.onclick=function(){n.firstPage()}),s=e.insertCell(i++),this._setHtml(s,"&lt;",!1),1==this.getOption().pageIndex?this.setStyle(s,"page_index_cell_disabled"):(this.setStyle(s,"page_index_cell"),s.onclick=function(){n.priorPage()});var o=this.getOption().pageIndex-1;o<1&&(o=1);var h=o+2;h>this._pageCount&&(h=this._pageCount),!0!==this.getOption().minPager&&o>this._pageCount-4&&(o=this._pageCount-4)<1&&(o=1),h<o&&1==o&&(h=1);for(var l=o;l<=h;l++)s=e.insertCell(i++),l===this.getOption().pageIndex?this.setStyle(s,"page_index_cell active"):this.setStyle(s,"page_index_cell"),this._setHtml(s,l,!1),s.onclick=function(){n.setPageIndex(parseInt(this.innerHTML,10))};!0!==this.getOption().minPager&&(this._pageCount==h+2?(s=e.insertCell(i++),h+1===this.getOption().pageIndex?this.setStyle(s,"page_index_cell active"):this.setStyle(s,"page_index_cell"),this._setHtml(s,h+1,!1),s.onclick=function(){n.setPageIndex(parseInt(this.innerHTML,10))}):this._pageCount>h+2&&(s=e.insertCell(i++),this.setStyle(s,"three_point"),this._setHtml(s,"...",!1),s.onclick=function(){n.setPageIndex(n.getOption().pageIndex+3)}),this._pageCount>=h+1&&(s=e.insertCell(i++),this._pageCount===this.getOption().pageIndex?this.setStyle(s,"page_index_cell active"):this.setStyle(s,"page_index_cell"),this._setHtml(s,this._pageCount,!1),s.onclick=function(){n.setPageIndex(parseInt(this.innerHTML,10))})),s=e.insertCell(i++),this._setHtml(s,"&gt;",!1),this.getOption().pageIndex>=this._pageCount?this.setStyle(s,"page_index_cell_disabled"):(this.setStyle(s,"page_index_cell"),s.onclick=function(){n.nextPage()}),s=e.insertCell(i++),this._setHtml(s,"&gt;&gt;",!1),this.getOption().pageIndex>=this._pageCount?this.setStyle(s,"page_index_cell_disabled"):(this.setStyle(s,"page_index_cell"),s.onclick=function(){n.lastPage()});if(this._indexTab.style.maxWidth=40*i+"px",this.hasbind("onPageChanged")&&!1!==t){var a=this.getOption().pageSize;a===this.getI18n("qzz.all","全部")&&(a=this._totalCount),this.trigger("onPageChanged",[this._pageCount,a,this.getOption().pageIndex])}!0===this.getOption().minPager?(this._pageSizeTd.style.display="none",this._indexTab.parentElement.style.minWidth=""):(this._pageSizeTd.style.display="",this._indexTab.parentElement.style.minWidth=this._indexTab.style.maxWidth),this.thisWindow.style.marginLeft="auto"},setFilterCount:function(t){this._filterCount=t,this._refreshIndex(!1)},clearFilterCount:function(){this._filterCount=null,this._refreshIndex(!1)},setTotalCount:function(t,e,i){t=parseInt(t,10),this._totalCount=t,this.getOption().pageSize===this.getI18n("qzz.all","全部")?this._pageCount=1:(null==i&&(i=this.getOption().pageSize),i>this.getOption().pageSize&&(t-=i-this.getOption().pageSize),this._pageCount=parseInt(t/this.getOption().pageSize,10),t/this.getOption().pageSize-this._pageCount>0&&this._pageCount++),!1!==e&&(this._priorPage.pageIndex=1,this.getOption().pageIndex=1),this._refreshIndex(e)},getTotalCount:function(){return this._totalCount},setPageSizeList:function(t){if(this.isArray(t)){for(var e=0,i=t.length;e<i;e++)t[e]!==this.getI18n("qzz.all","全部")&&(t[e]=parseInt(t[e],10));this.getOption().pageSizeList=t,t.length>0&&(this._priorPage.pageSize=this.getOption().pageSize,this._priorPage.pageIndex=this.getOption().pageIndex,this._priorPage.pageCount=this._pageCount,this.pageSizeList.setItemList(t),this.getOption().pageSize=t[0],this.pageSizeList.setValue(this.getOption().pageSize),this.getOption().pageIndex=1),this._refreshIndex()}},resetPageState:function(t){this.getOption().pageSize=this._priorPage.pageSize,this.pageSizeList.setValue(this.getOption().pageSize),this.getOption().pageIndex=this._priorPage.pageIndex,this._pageCount=this._priorPage.pageCount,this._refreshIndex(t)},addCount:function(t){null==t&&(t=1),this._addCount+=t,this._refreshIndex(!1)},delCount:function(t){null==t&&(t=1),this._addCount-=t,this._refreshIndex(!1)},resetCount:function(){this._addCount=0,this._refreshIndex(!1)}}),_bindRenderFunc("qzzpaged",t.ui.paged),t.ui.paged}),
/*!
 * 下拉窗口控件.
 * ecp.qzz.ui.drop.popwindow.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.window","qzz.button"],function(){var t=window.qzz;return t.space("ui.model"),t.ui.model.window=t.Class(t.ui.window,{_create:function(){this.base(),this.className="ModelWindow",this._hasShow=!1,this._canHide=!0,this.getOption().closeImg=!0,this.getBooleanValue(this.getOption().closeImg,!1),this.getOption().width=this.getNumberValue(this.getOption().width,200),this.getOption().height=this.getNumberValue(this.getOption().height,200)},_createElement:function(t,e,i){var s=i.querySelector(e);return null==s&&(s=this.createElement(t),this.setStyle(s,e.replace(/[.#]/g,"")),i.appendChild(s)),s},_refreshBtnFocus:function(){var t=this.getOption().otherButtonStyles;null==t&&(t=[]);for(var e=0,i=this.buttons.length;e<i;e++){var s=this.buttons[e];this.setStyle(s,"qmbtn"),this.focusIndex==e&&t.length>1?this.addStyle(s,t[1]):this.addStyle(s,t[0]||"")}},_render:function(){this.base(),this.docFragment.innerHTML="";for(var t=(s=this.thisWindow.childNodes.length)-1;t>=0;t--){var e=this.thisWindow.childNodes[t];this.docFragment.appendChild(e)}if(this.mheader=this._createElement("div",".qmodal-header",this.thisWindow),this.mheader=this.thisWindow.querySelector(".qmodal-header"),this.closebtn=this._createElement("button",".qmodal-close",this.mheader),this._setHtml(this.closebtn,"×"),this.mtitle=this._createElement("h4",".qmodal-title",this.mheader),null!=this.getOption().title&&""!==this.getOption().title&&this._setHtml(this.mtitle,this.getOption().title||"&nbsp;"),this.mbody=this.thisWindow.querySelector(".qmodal-body"),null==this.mbody&&(this.mbody=this.createElement("div"),this.setStyle(this.mbody,"qmodal-body"),this.thisWindow.appendChild(this.mbody)),this.docFragment.childNodes.length>0){for(t=this.docFragment.childNodes.length-1;t>=0;t--){e=this.docFragment.childNodes[t];this.mbody.appendChild(e)}this.docFragment.innerHTML=""}else null!=this.getOption().content&&""!==this.getOption().content&&this._setHtml(this.mbody,this.getOption().content);if(this.mfooter=this.thisWindow.querySelector(".qmodal-footer"),null==this.mfooter&&(this.mfooter=this.createElement("div"),this.setStyle(this.mfooter,"qmodal-footer"),this.thisWindow.appendChild(this.mfooter)),this.isArray(this.getOption().otherButtons)){var i=this.getOption().otherButtonStyles;null==i&&(i=[]),this.buttons=[];t=0;for(var s=this.getOption().otherButtons.length;t<s;t++){var n=this.getOption().otherButtons[t],o=i[0],h=this.createElement("button");if(this.setStyle(h,"qmbtn"),o&&this.addStyle(h,o),h.style.marginLeft="10px",this.mfooter.appendChild(h),h.setAttribute("buttonindex",t),this._setHtml(h,n),this.getOption().clickButton){var l=this;h.onclick=function(t){l.focusIndex=parseInt(this.getAttribute("buttonindex"),10),l._refreshBtnFocus(),l.getOption().clickButton(t,l,l.focusIndex)}}this.buttons.push(h)}this.focusIndex=this.buttons.length-1,this.buttons.length>0&&this._refreshBtnFocus()}this.addStyle(this.thisWindow,"qmodal-dialog");l=this;this.closebtn.onclick=function(){l.hide()},!1===this.getOption().showCloseButton&&(this.closebtn.style.display="none"),this.hide()},hide:function(){this.thisWindow.style.display="none",this.mark&&(this.mark.style.display="none")},show:function(){if(null==this.mark){var t=window._ecp_qzz_ui_model_zindex;null==t?(t=this.getMaxZIndex(),window._ecp_qzz_ui_model_zindex=t):t++,this.mark=this._createElement("div",".qmodal-mark",this.thisWindow.parentElement);this.getCurrentStyle(this.thisWindow);this.thisWindow.style.zIndex=t,this.mark.style.zIndex=t-1,window._ecp_qzz_ui_model_zindex<t&&(window._ecp_qzz_ui_model_zindex=t)}this.mark.style.display="",this.thisWindow.style.display=""},_afterRender:function(){var t=this._getBodyWidth(),e=this._getBodyHeight(),i=this.getWidth(),s=this.getHeight(),n=(t-i)/2;n<0&&(n=0);var o=(e-s)/2;o<0&&(o=0),this.setLeft(n),this.setTop(o);var h=s-56-65;this.mbody.style.height=h+"px"},doFocus:function(t){},doBlur:function(t){},getWindow:function(){return this.thisWindow},isShow:function(){return null!=this.thisWindow&&"none"!=this.thisWindow.style.display},model:function(){this.show()},doKeyDown:function(t,e){}}),_bindRenderFunc("qzzmodel",t.ui.model.window),t.ui.model.window}),
/*!
 * 下拉窗口控件.
 * ecp.qzz.ui.drop.popwindow.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.window","qzz.button"],function(){var t=window.qzz;return t.space("ui.drop"),t.ui.drop.popwindow=t.Class(t.ui.window,{_create:function(){this.base(),this.className="PopWindow",this._hasShow=!1,this._canHide=!0,this.getOption().closeImg=!0,this.getBooleanValue(this.getOption().closeImg,!1),this.getOption().width=this.getNumberValue(this.getOption().width,200),this.getOption().height=this.getNumberValue(this.getOption().height,200)},_render:function(){this.base(),this.setStyle(this.thisWindow,"dropDiv"),this.thisWindow.style.display="none",this.getOption().closeImg&&(this.closeDiv=new t.ui.button({top:0,left:this.getOption().width-20,width:20,height:20,fontSize:12,common:["button_common"],over:["button_over"],down:["button_over"]})),this.thisWindow.oncontextmenu=function(){return!1}},doFocus:function(t){this.isShow()&&this.base()},doBlur:function(t){this.getOption().closeImg&&this.isShow()&&!0!==this.isMouseOver()&&null==this.getOption().time&&(this.hide(),this.base())},getDropWindow:function(){return this.thisWindow},isShow:function(){return null!=this.thisWindow&&"none"!=this.thisWindow.style.display},execute:function(t,e,i,s){if(this.logInfo("show Drop Window."),"object"==(void 0===t?"undefined":_typeof(t))&&t.nodeType){s=i,i=e;var n=t.getBoundingClientRect(),o=this.thisWindow.parentElement;if(null==o)return;var h=o.getBoundingClientRect(),l=h.top,a=h.left;if("BODY"==o.tagName.toUpperCase())l=0,a=0,l-=(r=this.getScrollXY()).top,a-=r.left;i=n.height,s=n.width,t=n.bottom-l-2,e=n.left-a}this._popInUp=!1;var r=this.getScrollXY();t+this.getHeight()>this._getBodyHeight()-5&&((null==i||isNaN(i))&&(i=0),(t=t-this.getHeight()-i-5)<0&&(t=this._getBodyHeight()-this.getHeight()-5),this._popInUp=!0),e+this.getWidth()>this._getBodyWidth()-5+r.left&&((null==s||isNaN(s))&&(s=0),e=this._getBodyWidth()-this.getWidth()-5+r.left-16);var d=this._getControl().parentNode;null!=d&&"BODY"!==d.tagName&&(d.scrollTop>0&&(t+=d.scrollTop),d.scrollLeft>0&&(e+=d.scrollLeft));var u=this.thisWindow.parentElement;null!=u&&(t-=this.getNumberValue(u.style.top,0),e-=this.getNumberValue(u.style.left,0));if(e<0&&(e=0),this._popBottom=t+this.getHeight(),this.getOption().top=t+4,this.thisWindow.style.top=this.getOption().top+"px",this.getOption().left=e,this.thisWindow.style.left=e+"px",!this.isShow()){if(this.thisWindow.style.display="",this.hasSelect=!0,"function"==typeof this.onShow)try{this.onShow(this)}catch(t){this.logError("[onShow]ERR:"+t.message)}this.trigger("onShow",[this])}this.setFocus(),this.getOption().time&&this._asynRun(function(){this.hide()},this.getOption().time)},doKeyDown:function(t,e){e===this.keyBoard.ESC&&this.hide()},hide:function(){if(this.isShow()&&this._canHide){if(this.thisWindow.style.display="none",this.setBlur(),"function"==typeof this.onHide)try{this.onHide(this)}catch(t){this.logError("[onHide]ERR:"+t.message)}this.trigger("onHide",[this])}}}),_bindRenderFunc("qzzpopwin",t.ui.drop.popwindow),t.ui.drop.popwindow}),
/*!
 * 下拉菜单控件.
 * ecp.qzz.ui.drop.popmenu.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.pwindow"],function(){var t=window.qzz;return t.space("ui.drop"),t.ui.drop.popmenu=t.Class(t.ui.drop.popwindow,{_create:function(){this.base(),this.className="PopMenu",this.logInfo("popMenu.create"),this._popList=[],this._popCount=0},_render:function(){this.base(),this.logInfo("popMenu.render"),this._mTab=this.createElement("table"),this.appendChild(this._mTab),this.refresh()},endUpdate:function(){this._update=!0,this.refresh()},getMenu:function(t){for(var e=0;e<this._popCount;e++)if(this._popList[e].name==t)return this._popList[e];return null},addMenu:function(t,e,i,s,n,o){var h={};return h.name=t,h.caption=e,h.icon=o,h.event=i,h.enable=n,h.shutCut=s,this._popList[this._popCount++]=h,this.refresh(),h},insertMenu:function(t,e,i,s,n,o,h){var l={};if(l.name=e,l.caption=i,l.icon=h,l.event=s,l.enable=o,l.shutCut=n,t>=0&&t<=this._popCount){for(var a=this._popCount-1;a>=t;a--)this._popList[a+1]=this._popList[a];this._popList[t]=l,this._popCount++}return this.refresh(),l},updateMenu:function(t,e,i,s,n,o){var h=this.getMenu(t);return null!=h&&(h.caption=e,h.icon=o,h.event=i,h.enable=n,h.shutCut=s),this.refresh(),h},delMenu:function(t){for(var e=!1,i=0,s=0;s<this._popCount;s++)if(this._popList[s].name==t){e=!0,i=s;break}if(e){var n=this._popList[i];null!=n&&(n.name=null,n.caption=null,n.icon=null,n.event=null,n.enable=null,n.shutCut=null);for(s=i;s<this._popCount-1;s++)this._popList[s]=this._popList[s+1];this._popCount--}this.refresh()},clearMenu:function(){this._popCount=0},setEnable:function(t,e){var i=this.getMenu(t);if(null!=i)if(i.enable=e,e){n=i.row;var s=this;n.onclick=function(){"function"==typeof this.event&&this.event(),s.hide()};for(o=0;o<n.cells.length;o++)n.cells[o].style.scolor="#000000"}else{var n;(n=i.row).onclick=null;for(var o=0;o<n.cells.length;o++)n.cells[o].style.color="#AAAAAA"}this.refresh()},getMenuCount:function(){return this._popCount},refreash:function(){this.refresh()},refresh:function(){if(!this._update)return!1;for(var t=this._mTab.rows.length-1;t>=0;t--)this._mTab.deleteRow(t);var e=this;this.setStyle(this._mTab,"popMain");var i=4,s=1,n=!1,o=0;for(t=0;t<this._popCount;t++){var h=this._popList[t];if(null!=h){var l=this._mTab.insertRow(t);if(l.oncontextmenu=function(){return!1},"-"==h.caption){var a=l.insertCell(0);null!=h.icon&&(mIcon=myCreateElement("img"),mIcon.src=h.icon,a.appendChild(mIcon)),this._setHtml(a,"<hr class='"+this._cssPrefix+"lineColor'>",!1),a.colSpan=3,a.style.height="20px",o+=22}else{this.setStyle(l,"popCaption");var r=null==h.enable||h.enable;l.event=h.event,r?l.onclick=function(){null!=this.event&&this.event(),e.hide()}:(l.onclick=null,l.onmouseover=null),a=l.insertCell(0),this.setStyle(a,"popIcon"),null!=h.icon&&(mIcon=myCreateElement("img"),mIcon.src=h.icon,a.appendChild(mIcon),n=!0),a.style.color=r?"#000000":"#AAAAAA",a=l.insertCell(1),this._setHtml(a,h.caption);var d=this.strLen(h.caption);d>i&&(i=d),a.style.height="20px",a.style.color=r?"#000000":"#AAAAAA",a=l.insertCell(2),null!=h.shutCut&&(this._setHtml(a,h.shutCut),d=this.strLen(h.shutCut)),d>s&&(s=d),a.style.width="50px",a.style.color=r?"#000000":"#AAAAAA",o+=22,d=null}h.row=l,!0,l=null}h=null}if(this._popCount>0){var u=10*i,c=10*s;this._mTab.rows[0].cells.length>1?(this._mTab.rows[0].cells[1].style.width=u+"px",this._mTab.rows[0].cells[2].style.width=c+"px"):this._mTab.rows[1].cells.length>1&&(this._mTab.rows[1].cells[1].style.width=u+"px",this._mTab.rows[1].cells[2].style.width=c+"px");var g=u+c;n&&(g+=20),this.setWidth(g),this.setHeight(o),g=null,u=null,c=null}i=null,s=null,n=null}}),_bindRenderFunc("qzzpopmenu",t.ui.drop.popmenu),t.ui.drop.popmenu}),
/*!
 * 下拉列表控件.
 * ecp.qzz.ui.drop.poplistview.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.pwindow","qzz.listview","qzz.iedit"],function(){var t=window.qzz;return t.space("ui.drop"),t.ui.drop.poplistview=t.Class(t.ui.drop.popwindow,{_create:function(){this.base(),this.className="PopListView",this.logInfo("popListView.create"),this.multiSelect=this.getBooleanValue(this.getOption().multiple,!1),this.multiSelect=this.getBooleanValue(this.getOption().multiSelect,this.multiSelect),this.selectAll=this.getBooleanValue(this.getOption().selectAll,this.selectAll),this.getOption().idkey=this.getOption().idkey||"id",this.getOption().capkey=this.getOption().capkey||"text",this.getOption().search=this.getBooleanValue(this.getOption().search,!1),this.getOption().more=this.getBooleanValue(this.getOption().more,!1)},_render:function(){if(this.base(),!0===this.getOption().search||!0===this.getOption().more){if(this.popTable=this.createElement("TABLE"),this.addStyle(this.popTable,"noBorder"),this.popView=this.popTable.insertRow(0),!0===this.getOption().search){var e=this.popTable.insertRow(0).insertCell(0);this.searchBox=new t.ui.input.edit(null,{name:"searchBox",width:100,placeholder:this.getI18n("qzz.inputKey","输入关键字"),margin:4,post:!0}),this.searchBox.setParent(e);var i=this;this.searchBox.bind("onChange",function(t){this._delayRun(function(){if(i.clearFilter(),i.outerFilter=!1,i.nodata.style.display="none",i.view.show(),null!=t&&""!==t)i.addFilter(t);else{var e=!0;i.hasbind("onFilter")&&(e=i.trigger("onFilter",[t]),i.outerFilter=!0),!1!==e&&(i.view.refresh(t),i.refresh())}},200)}),this.nodata=this.createElement("div"),this.setStyle(this.nodata,"nodata"),this.nodata.style.display="none",this._setHtml(this.nodata,this.getI18n("qzz.nodata","没有找到匹配项")),e.appendChild(this.nodata)}if(!0===this.getOption().more){e=this.popTable.insertRow(this.popTable.rows.length).insertCell(0);var s=this.createElement("A");this.addStyle(s,"moreFont"),this._setHtml(s,this.getI18n("qzz.more","更多")),s.href="#";i=this;s.onclick=function(){i.trigger("onMoreClick",[])},s.style.float="right",s.style.marginRight="4px",e.appendChild(s)}this.thisWindow.appendChild(this.popTable)}this.view=new t.ui.listview(null,{cssPrefix:this._cssPrefix,data:this.getOption().data,selectAll:this.selectAll,multiSelect:this.multiSelect,fontSize:this.getOption().fontSize,scrollFireEvent:!1,idkey:this.getOption().idkey,leafOnly:this.getOption().leafOnly,capkey:this.getOption().capkey,border:"0px",rowHeight:this.getOption().rowHeight,viewType:this.getOption().viewType,showCount:this.getOption().showCount,filterTextOnly:this.getOption().filterTextOnly});i=this;this.view.autoHeight=!0,this.view._this=this,this.view.bind("onHeightChanged",function(t){this._this.setHeight(t)}),this.logInfo("popListView.render"),this.refresh()},refreash:function(){this.refresh()},refresh:function(){this.view.setParent(this.getDropWindow()),this.setWidth(this.view.getWidth()+2,!1),null!=this.searchBox&&this.searchBox.setWidth(this.view.getWidth()-8),this.setHeight(this.view.getHeight()+4),this.view.onSelect=this.doSelect},getDropWindow:function(){return!0===this.getOption().search||!0===this.getOption().more?this.popView:this.base()},doBlur:function(){this.base(),null!=this.view&&this.view.setBlur()},doSelect:function(t,e){var i=this._this;i.view.focus&&(1!=i.multiSelect&&(i.hide(),i.view.setBlur()),"function"==typeof i.onSelect&&i.onSelect(t,e))},doMouseWheel:function(t){this.view.focus||this.view.doMouseWheel(t)},doKeyUp:function(t,e){this.focus&&this.view.setFocus()},setWidth:function(t,e){this.base(t,e),this.view.setWidth(t-2,e),null!=this.searchBox&&this.searchBox.setWidth(this.view.getWidth()-8)},setHeight:function(t,e){var i=0;null!=this.searchBox&&(i=this.searchBox.getHeight()+8),!0===this.getOption().more&&(i+=30),this.base(t+i,e)},isFocus:function(){return this.focus&&this.view.focus},prior:function(){this.view.prior()},next:function(){this.view.next()},indexOfText:function(t,e){return this.view.indexOfText(t,e)},indexOf:function(t,e){return this.view.indexOf(t,e)},getItem:function(t){return null==t?this.view.getCurItem():this.view.getItem(t)},getSelectIndex:function(){return this.view.getSelectIndex()},setMultiSelect:function(t){this.multiSelect=t,this.getOption().multiSelect=t,this.view.getOption().multiSelect=t,this.view.refresh()},setSelectAll:function(t){this.selectAll=t,this.view.selectAll=t},execute:function(t,e,i){this.view.autoHeight&&(this.setHeight(this.view.getHeight()+2,!1),this.setWidth(this.view.getWidth()+2),null!=this.searchBox&&(this.searchBox.setValue(""),this.searchBox.setFocus())),this.base(t,e,i),this.view.setFocus(),this.view.refreshScrollBar(),this.thisWindow.style.height="auto"},setItemList:function(t){this.view._update=!1,this.view.setItemList(t),this.view._update=!0,this.isShow()&&(this.view.endUpdate(),this.refresh())},addItem:function(t){this.view.addItem(t)},delItem:function(t){this.view.delItem(t)},addFilter:function(t,e){if(""!==t&&!this.view.filterExist(t)){var i=!0;if(this.hasbind("onFilter")&&(i=this.trigger("onFilter",[t,e]),this.outerFilter=!0),0!=i&&(this.view.addFilter(t,e),0!=e&&(this.setWidth(this.view.getWidth()+2,!1),this.setHeight(this.view.getHeight()+2),this.thisWindow.style.height="auto")),0==this.view.length()?(!0===this.getOption().search&&(this.nodata.style.display=""),this.view.hide()):this.view.show(),this._popInUp){var s=this.thisWindow.offsetTop,n=this.thisWindow.offsetHeight;if(s+n<this._popBottom){var o=this._popBottom-n+4;this.thisWindow.style.top=o+"px"}}}},doFilter:function(){this.view.doFilter(),this.setWidth(this.view.getWidth()+2,!1),this.setHeight(this.view.getHeight()+2)},clearFilter:function(){this.view.clearFilter()},getFilter:function(){return this.view.getFilter()},setSelectByText:function(t){return this.view.setSelectByText(t)},setSelect:function(t){this.view.setSelect(t)},getSelect:function(){return this.view.getSelect()},length:function(){return this.view.length()},setIdkey:function(t){this.getOption().idkey=t,this.view.setIdkey(t)},clearSelectAll:function(){this.view.clearSelectAll()}}),_bindRenderFunc("qzzpoplistview",t.ui.drop.poplistview),t.ui.drop.poplistview}),
/*!
 * 下拉树控件.
 * ecp.qzz.ui.drop.poplistview.js
 * 创建：QZZ
 * 日期：2016-12-20
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.pwindow","qzz.treeview","qzz.iedit"],function(){var t=window.qzz;return t.space("ui.drop"),t.ui.drop.poptreeview=t.Class(t.ui.drop.popwindow,{_create:function(){this.base(),this.className="PopTreeView",this.logInfo("popTreeView.create"),this.multiSelect=this.getBooleanValue(this.getOption().multiple,!1),this.multiSelect=this.getBooleanValue(this.getOption().multiSelect,this.multiSelect),this.selectAll=this.getBooleanValue(this.getOption().selectAll,this.selectAll),this.getOption().idkey=this.getOption().idkey||"id",this.getOption().pidkey=this.getOption().pidkey,this.getOption().capkey=this.getOption().capkey||"text",this.getOption().search=this.getBooleanValue(this.getOption().search,!1),this.getOption().more=this.getBooleanValue(this.getOption().more,!1)},_render:function(){if(this.base(),!0===this.getOption().search||!0===this.getOption().more){if(this.popTable=this.createElement("TABLE"),this.addStyle(this.popTable,"noBorder"),this.popView=this.popTable.insertRow(0),!0===this.getOption().search){var e=this.popTable.insertRow(0).insertCell(0);this.searchBox=new t.ui.input.edit(null,{name:"searchBox",width:100,placeholder:this.getI18n("qzz.inputKey","输入关键字"),margin:4,post:!0}),this.searchBox.setParent(e);var i=this;this.searchBox.bind("onChange",function(t){this._delayRun(function(){!0===i.view.isFiltered()?i.view.clearFilterText(function(){i.view.addFilterText(t,!0,function(){i.view.first(),null==i._selectText||""===i._selectText||(i.view.setSelectByText(i._selectText),i.view._scrollToFocus())})}):i.view.addFilterText(t,!0)},200)})}if(!0===this.getOption().more){e=this.popTable.insertRow(this.popTable.rows.length).insertCell(0);var s=this.createElement("A");this.addStyle(s,"moreFont"),this._setHtml(s,this.getI18n("qzz.more","更多")),s.href="#";i=this;s.onclick=function(){i.trigger("onMoreClick",[])},s.style.float="right",s.style.marginRight="4px",e.appendChild(s)}this.thisWindow.appendChild(this.popTable)}this.view=new t.ui.treeview(null,{cssPrefix:this._cssPrefix,data:this.getOption().data,selectAll:this.getOption().selectAll,multiSelect:this.getOption().multiSelect,fontSize:this.getOption().fontSize,leafOnly:this.getOption().leafOnly,scrollFireEvent:!1,treekey:this.getOption().treekey,idkey:this.getOption().idkey,fullPath:this.getOption().fullPath,fullCaption:this.getOption().fullCaption,capkey:this.getOption().capkey,pidkey:this.getOption().pidkey,checkFlag:this.getOption().checkFlag,unCheckFlag:this.getOption().unCheckFlag,autoHeight:!0,showCount:this.getOption().showCount,border:"0px",filterTextOnly:this.getOption().filterTextOnly,rowHeight:this.getOption().rowHeight});i=this;this.view._this=this,this.view.bind("onHeightChanged",function(t){this._this.setHeight(t)}),this.logInfo("popTreeView.render"),this.refresh()},refreash:function(){this.refresh()},getDropWindow:function(){return!0===this.getOption().search||!0===this.getOption().more?this.popView:this.base()},refresh:function(){this.view.setParent(this.getDropWindow()),this.setWidth(this.view.getWidth()+2,!1),null!=this.searchBox&&this.searchBox.setWidth(this.view.getWidth()-8),this.setHeight(this.view.getHeight()+4),this.view.onSelect=this.doSelect;var t=this;this.view.bind("onCheckChanged",function(e,i){t.trigger("onCheckChanged",[e,i])})},doBlur:function(){this.base(),null!=this.view&&this.view.setBlur()},doSelect:function(t){var e=this._this;e.view.focus&&(1!=e.multiSelect&&(e.hide(),e.view.setBlur()),"function"==typeof e.onSelect&&e.onSelect(t),e.hasbind("onSelect")&&e.trigger("onSelect",[t]))},doMouseWheel:function(t){this.view.focus||this.view.doMouseWheel(t)},doKeyUp:function(t,e){this.focus&&this.view.setFocus()},setWidth:function(t,e){this.base(t,e),this.view.setWidth(t-2,e),null!=this.searchBox&&this.searchBox.setWidth(this.view.getWidth()-8)},setHeight:function(t,e){var i=0;null!=this.searchBox&&(i=this.searchBox.getHeight()+8),!0===this.getOption().more&&(i+=20),this.base(t+i,e)},isFocus:function(){return this.focus&&this.view.focus},prior:function(){this.view.prior()},next:function(){this.view.next()},indexOfText:function(t,e){return null!=this.view?this.view.indexOfText(t,e):null},getDisplay:function(t){return null!=this.view?this.view.getDisplay(t):""},getValue:function(t){return this.view.getValue(t)},setMultiSelect:function(t){this.multiSelect=t,this.view.getOption().multiSelect=t,this.view.multiSelect=t,this.view.refresh()},setSelectAll:function(t){this.selectAll=t,this.view.selectAll=t},execute:function(t,e,i){this.base(t,e,i),this.view.autoHeight&&(this.setHeight(this.view.getHeight()+2,!1),this.setWidth(this.view.getWidth()+2),null!=this.searchBox&&(this.searchBox.setValue(""),this.searchBox.setFocus(),this.searchBox.trigger("onChange",[""]))),this.view.setFocus(),this.view.refreshScrollBar(),this.thisWindow.style.height="auto"},setItemList:function(t){this.view._update=!1,this.view.setItemList(t),this.view._update=!0,this.isShow()&&(this.view.endUpdate(),this.refresh())},setSelectByText:function(t,e){this._selectText=t,this.view.setSelectByText(t,e)},setSelectById:function(t,e){this.view.setSelectById(t,e)},length:function(){return this.view.getAllCount()},setIDPID:function(t,e){this.view.setIDPID(t,e)},setItemCode:function(t){this.getOption().itemCode=t,this.view.setItemCode(t)},getSelectedData:function(){return this.view.getSelectedData()},locate:function(t){return this.view.locate(t)},clearSelectAll:function(t){this.view.unCheckAll(t)}}),_bindRenderFunc("qzzpoptreeview",t.ui.drop.poptreeview),t.ui.drop.poptreeview}),
/*!
 * 下拉日期控件.
 * ecp.qzz.ui.drop.popfilter.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.pwindow","qzz.listview","qzz.button"],function(){var t=window.qzz;return t.space("ui.drop"),t.ui.drop.popfilter=t.Class(t.ui.drop.popwindow,{_create:function(){this.getOption().width=this.getNumberValue(this.getOption().width,230),this.getOption().height=this.getNumberValue(this.getOption().height,298),this.base(),this.getOption().rowHeight=this.getNumberValue(this.getOption().rowHeight,20)},_render:function(){this.base();var e=this.getOption().width-16,i=this.getOption().rowHeight,s=0,n=this.createElement("table");this.setStyle(n,"filterBox");var o=0,h=n.insertRow(o++).insertCell(0);this.setStyle(h,"c_common_td");var l=this.createElement("table");l.border=0,l.cellPadding=0,l.cellSpacing=0,l.style.width=e+"px";var a=this,r=0;this._addFilterRow(l,r,this.getI18n("qzz.sort_up","升序"),i,function(){a.hide(),a.trigger("onSort",[a._filterName,"up"])}),r++,this._addFilterRow(l,r,this.getI18n("qzz.sort_down","降序"),i,function(){a.hide(),a.trigger("onSort",[a._filterName,"down"])}),r++,this._addFilterRow(l,r,this.getI18n("qzz.sort_def","默认排序"),i,function(){a.hide(),a.trigger("onSort",[a._filterName,"none"])}),r++,h.appendChild(l),this.sortMenuBox=h,!1!==this.getOption().sort?(this.sortMenuBox.style.display="",s+=i*r):this.sortMenuBox.style.display="none";var d=this.createElement("table");d.border=0,d.cellPadding=0,d.cellSpacing=0,d.style.width=e+"px",h=n.insertRow(o++).insertCell(0),this.setStyle(h,"c_common_td"),this._addFilterRow(d,0,this.getI18n("qzz.clearFilter","清除筛选"),i,function(){a.hide(),a.trigger("onClearFilter",[a._filterName])}),h.appendChild(d),s+=i;var u=n.insertRow(o++).insertCell(0);this.setStyle(u,"c_common_td"),this._setHtml(u,"<hr class='"+this._cssPrefix+"lineColor' style='background-color:#dddddd;'>",!1),u.style.height="10px",s+=10;var c=n.insertRow(o++).insertCell(0);this.setStyle(c,"c_common_td"),this.filterBox=this.createElement("input"),this.filterBox.style.width=e+"px",this.setStyle(this.filterBox,"searchInput");var g=this.getI18n("qzz.inputKey","输入关键字");this.filterBox.setAttribute("placeholder",g),this.filterBox.onkeyup=function(){a.filterListView.clearFilter();var t=a.trim(this.value);a.filterListView.addFilter(t)},c.appendChild(this.filterBox),c.style.height=i+"px",s+=i,this._lbox=n.insertRow(o++).insertCell(0),this.setStyle(this._lbox,"c_common_td");var p=this.getOption().height-s-48-4;this._lbox.style.height=p+"px",this._lbox.style.verticalAlign="top",this.filterListView=new t.ui.listview(null,{cssPrefix:this._cssPrefix,selectAll:!0,multiSelect:!0,search:!1,escape:this.getOption().escape}),this.filterListView.setParent(this._lbox),this.filterListView.setHeight(p,!1),this.filterListView.setWidth(e),this.filterListView.setTop(1);var f=n.insertRow(o++).insertCell(0);this.setStyle(f,"c_common_td");var y=this.createElement("DIV");f.appendChild(y),y.style.width="100%",y.style.height="100%",y.style.textAlign="right",y.style.position="relative",this.getContainer().appendChild(n);this.filterFixBtn=new t.ui.button({top:6,left:e-73,width:73,height:28,caption:this.getI18n("qzz.ok","确定"),fontSize:12}),this.filterFixBtn.setParent(y),this.filterFixBtn.bind("onclick",function(){a.hide(),a.trigger("onFilter",[a._filterName,a.filterListView.length(!0),a.filterListView.getSelect()])}),this.filterFixBtn.setFocus(),this.filterFixBtn.refresh(),this.filterCanselBtn=new t.ui.button({top:6,left:e-146-8,width:73,height:28,caption:this.getI18n("qzz.cancel","取消"),fontSize:12}),this.filterCanselBtn.setParent(y),this.filterCanselBtn.bind("onclick",function(){a.hide(),a.trigger("onCancel",[a._filterName])})},refresh:function(){var t=5;!1===this.getOption().sort&&(t-=3);var e=this.getOption().height-this.getOption().rowHeight*t-62;this.filterListView.setHeight(e),this._lbox.style.height=e+"px",this.filterFixBtn.setTop()},setHeight:function(t){this.base(t),"number"==typeof t&&(this.getOption().height=t,this.refresh())},_addFilterRow:function(t,e,i,s,n){var o=t.insertRow(e);this.setStyle(o,"popCaption");var h=o.insertCell(0);this.setStyle(h,"c_common_td"),this._setHtml(h,i),h.onclick=n,h.style.height=s+"px"},setFilterName:function(t){this._filterName=t},getFilterName:function(){return this._filterName},clearFilter:function(){this.filterListView.clearFilter()},setSort:function(t){this.getOption().sort=!1!==t,!1!==this.getOption().sort?this.sortMenuBox.style.display="":this.sortMenuBox.style.display="none",this.refresh()},execute:function(t,e,i,s){var n=[];if(this.isArray(i))if("string"==typeof i[0]){var o={};for(var h in i)""===i[h]&&(i[h]="("+this.getI18n("qzz.empty","空白")+")"),this.isEmpty(o[i[h]])&&(n.push({id:parseInt(h,10),text:i[h]}),o[i[h]]=1)}else n=i;else if("object"==(void 0===i?"undefined":_typeof(i))&&this.isNotEmpty(i)){o={};for(var h in i)""===i[h]&&(i[h]="("+this.getI18n("qzz.empty","空白")+")"),this.isEmpty(o[i[h]])&&(n.push({id:h,text:i[h]}),o[i[h]]=1);o=null}if(this.filterListView.setItemList(n),this.isArray(s))this.filterListView.setSelectByText(s);else if("object"==(void 0===s?"undefined":_typeof(s))){var l=[];if(this.isNotEmpty(s))for(var h in s)l.push(h);l.length>0||!0!==this.getOption().defSelectAll?this.filterListView.setSelectByText(l):this.filterListView.doSelectAll()}this.base(t,e),this.filterBox.focus(),this.filterBox.value=""}}),_bindRenderFunc("qzzpopfilter",t.ui.drop.popfilter),t.ui.drop.popfilter}),
/*!
 * 下拉日期控件.
 * ecp.qzz.ui.drop.popcalendar.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.pwindow","qzz.calendar"],function(){var t=window.qzz;return t.space("ui.drop"),t.ui.drop.popcalendar=t.Class(t.ui.drop.popwindow,{_create:function(){this.base(),this.className="PopCalendar",this.logInfo("popCalendar.create"),this.maxDate="9999-12-31",this.minDate="1000-01-01",this.cyctype="day",this.showTime=!1,null!=this.getOption().width&&10!=this.getOption().width||(this.getOption().width=192)},_render:function(){this.base(),this.logInfo("popCalendar.render"),this.thisWindow.style.padding="4px"},refreash:function(){this.refresh()},refresh:function(){this.isEmpty(this.calendar)&&(this.calendar=t.ui.calendar.getInstance(this._cssPrefix)),this.calendar.setParent(this.getDropWindow()),this.setWidth(this.calendar.getWidth()+8),this.setHeight(this.calendar.getHeight()+8),this.calendar.setDate(this.date,!1),this.calendar.setMaxDate(this.maxDate,!1),this.calendar.setMinDate(this.minDate,!1),this.calendar.setShowTime(this.showTime),this.calendar.setCycType(this.cyctype),this.calendar.setFormatYear(this.getOption().formatYear),this.calendar.setFormatMonth(this.getOption().formatMonth),this.calendar.setFormatDay(this.getOption().formatDay),this.calendar.setFormatHour(this.getOption().formatHour),this.calendar.setFormatMinute(this.getOption().formatMinute),this.calendar.setFormatSecond(this.getOption().formatSecond),this.calendar.setDateSplit(this.getOption().dateSplit),this.calendar.setTimeSplit(this.getOption().timeSplit),this.calendar._date=this,this.calendar.onSelect=this.doSelect},doSelect:function(t){var e=this._date;e.date=t,e.hide(),"function"==typeof e.onSelect&&e.onSelect(t)},setDate:function(t){this.date=t},setMaxDate:function(t){this.maxDate=t},setMinDate:function(t){this.minDate=t},setFormatYear:function(t){this.getOption().formatYear=t},setFormatMonth:function(t){this.getOption().formatMonth=t},setFormatDay:function(t){this.getOption().formatDay=t},setFormatHour:function(t){this.getOption().formatHour=t},setFormatMinute:function(t){this.getOption().formatMinute=t},setFormatSecond:function(t){this.getOption().formatSecond=t},setDateSplit:function(t){this.getOption().dateSplit=t},setTimeSplit:function(t){this.getOption().timeSplit=t},getDate:function(){return this.date},checkDate:function(e){return this.isEmpty(this.calendar)&&(this.calendar=t.ui.calendar.getInstance(this._cssPrefix)),this.calendar.checkDate(e)},checkRound:function(e){return this.isEmpty(this.calendar)&&(this.calendar=t.ui.calendar.getInstance(this._cssPrefix)),this.calendar.setMinDate(this.minDate,!1),this.calendar.setMaxDate(this.maxDate,!1),this.calendar.checkRound(e)},doBlur:function(){this.base(),null!=this.calendar&&this.calendar.setBlur()},setShowTime:function(e){this.showTime=this.getBooleanValue(e,!1),this.isEmpty(this.calendar)&&(this.calendar=t.ui.calendar.getInstance(this._cssPrefix)),this.calendar.setShowTime(this.showTime)},setCycType:function(e){this.cyctype=e,this.isEmpty(this.calendar)&&(this.calendar=t.ui.calendar.getInstance(this._cssPrefix)),this.calendar.setCycType(e)},execute:function(t,e,i){this.refresh(),this.base(t,e,i),this.thisWindow.style.height="auto"}}),_bindRenderFunc("qzzpopcalendar",t.ui.drop.popcalendar),t.ui.drop.popcalendar}),
/*!
 * 气泡控件.
 * ecp.qzz.ui.drop.popbubble.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.pwindow","qzz.listview","qzz.iedit"],function(){var t=window.qzz;return t.space("ui.drop"),t.ui.drop.popbubble=t.Class(t.ui.drop.popwindow,{_create:function(){this.base(),this.className="popbubble",this.logInfo("popbubble.create"),this.getOption().arrow=this.getOption().arrow||"none",this.getOption().text=this.getOption().text||""},_render:function(){this.base(),this.arrow=this.createElement("DIV"),this.arrow_bg=this.createElement("DIV"),this.setStyle(this.arrow,"bubble_arrow"),this.setStyle(this.arrow_bg,"bubble_arrow"),this.textTab=this.createElement("TABLE");var t=this.textTab.insertRow(0);this.text=t.insertCell(0),this.getOption().fontSize&&(this.text.style.fontSize=this.getOption().fontSize+"px"),this.getOption().color&&(this.text.style.color=this.getOption().color),this.setStyle(this.textTab,"bubble_text"),this.addStyle(this.thisWindow,"bubble_pop"),this.thisWindow.style.width="",this.thisWindow.style.height="",this.thisWindow.appendChild(this.textTab),this.thisWindow.appendChild(this.arrow),this.thisWindow.appendChild(this.arrow_bg),this.refresh()},refresh:function(){this.setStyle(this.arrow,"bubble_arrow"),this.setStyle(this.arrow_bg,"bubble_arrow"),this.addStyle(this.arrow,this.getOption().arrow),this.addStyle(this.arrow_bg,this.getOption().arrow+"_after"),this.getOption().borderColor&&(this.thisWindow.style.borderColor=this.getOption().borderColor,"top"!=this.getOption().arrow&&"top_right"!=this.getOption().arrow||(this.arrow.style.borderTopColor=this.getOption().borderColor),"left"==this.getOption().arrow&&(this.arrow.style.borderLeftColor=this.getOption().borderColor),"right"==this.getOption().arrow&&(this.arrow.style.borderRightColor=this.getOption().borderColor),"bottom"!=this.getOption().arrow&&"bottom_right"!=this.getOption().arrow||(this.arrow.style.borderBottomColor=this.getOption().borderColor)),this.trigger("onDraw",[this.text])},setArrow:function(t){this.getOption().arrow=t||"right",this.refresh()},setText:function(t){this.text.innerHTML=t||""},execute:function(t,e,i){if("object"==(void 0===t?"undefined":_typeof(t))&&(e=t,t="right"),"object"===(void 0===e?"undefined":_typeof(e))&&null!=e.tagName){var s=e.getBoundingClientRect(),n=this.thisWindow.parentElement,o=n.getBoundingClientRect(),h=(o.top,o.left,s.height,s.width,this.thisWindow.style.display);this.thisWindow.style.display="";var l=this.thisWindow.offsetHeight,a=this.thisWindow.offsetWidth;if(this.thisWindow.style.display=h,"right"==t)e=s.top-10,(i=s.right+10)+a>document.documentElement.clientWidth&&(i=s.left-a-10,t="left");else if("left"==t)e=s.top-10,(i=s.left-a-10)<0&&(i=s.right+10,t="right");else if("top"==t)e=s.top-l-10,i=s.left,e<0&&(e=s.bottom+5,t="bottom");else if("bottom"==t){e=s.bottom+5,i=s.left,e+l>document.documentElement.clientHeight&&(e=s.top-l-10,t="top")}if("BODY"==n.tagName.toUpperCase()){var r=this.getScrollXY();e+=r.top,i+=r.left}}this.base(e,i),this.setArrow(t)}}),_bindRenderFunc("qzzpopbubble",t.ui.drop.popbubble),t.ui.drop.popbubble}),
/*!
 * 编辑控件.
 * ecp.qzz.ui.input.edit.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.window","qzz.plistview"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.edit=t.Class(t.ui.window,{_create:function(){this.base(),this.className="Edit",this.logInfo("text.create"),this.align="left",this.valign="middle",this.selectState=!1,this._isChanged=!1,this._twoRefresh=!0,this._value="",this._text="",this.format="",null==this.getOption().width&&(this.getOption().width=this.getOption().width||100),this.getOption().width<30&&(this.getOption().width=this.getOption().width||30),null==this.getOption().height||this.getOption().height<=10?this.getBrowser("msie")?this.getOption().height=34:this.getOption().height=35:this.getOption().height=this.getOption().height,this.isEmpty(this.getOption().fontSize)&&(this.getOption().fontSize=14);var t=this.getOption().width;null==t||""===t||/[\d]+%$/.test(this.getOption().width)||(this.getOption().width=parseInt(t,10)),this.getOption().idkey=this.getOption().idkey||"id",this.getOption().capkey=this.getOption().capkey||"text",this.getOption().hint=this.getBooleanValue(this.getOption().hint,!1),null==this.getOption().hintData&&(this.getOption().hintData=[]),this.size=this._getNumberValue(this.getOption().size,4e3),this._popState=!1},doChange:function(t){var e=t.value;this.strLen(e)>this.size&&(t.value=this.subStr(e,this.size))},_render:function(){var e,i,s=null;(null!=this._control&&(s=this._control.getAttribute("placeholder")),this._control&&"INPUT"===this._control.tagName&&this._replaceToDiv(),null==(e=this.getOption()["ng-model"])&&""!==e&&this._control)&&(null!=(i=this._control.getAttribute("ng-model"))&&""!==i&&(this.getOption()["ng-model"]=i));null==(e=this.getOption()["v-model"])&&""!==e&&this._control&&(null!=(i=this._control.getAttribute("v-model"))&&""!==i&&(this.getOption()["v-model"]=i));var n=this.getOption()["ng-bind"];if(null!=n&&""!==n&&this._control){var o=this._control.getAttribute("ng-bind");null!=o&&""!==o&&(this.getOption()["ng-bind"]=o)}s=s||this.getOption().placeholder,this.base(),this.logInfo("text.render"),this.inputBox=this.createElement("textarea"),null!=s&&this.inputBox.setAttribute("placeholder",s),this.inputBox.ctrl=this,this.isNotEmpty(this.getOption().fontSize)&&(this.inputBox.style.fontSize=this.getOption().fontSize+"px"),this.pasteKeyPress=!1,this.inputBox.onkeydown=this.doInput;var h=this;if(this.inputBox.onclick=function(t){t=t||event;"function"==typeof h.onEditClick&&h.onEditClick(t),!0===h.getOption().hint&&""!==this.value&&h._doShowHintView()},window.addEventListener?(this.inputBox.addEventListener("compositionstart",function(){h._cninput=!0,window.console.info("chinese input start.")},!1),this.inputBox.addEventListener("compositionend",function(){h._cninput=!1,window.console.info("chinese input end."),"function"==typeof h.doChange&&h.doChange(this)},!1)):(this.inputBox.attachEvent("oncompositionstart",function(){h._cninput=!0,window.console.info("chinese input start.")}),this.inputBox.attachEvent("oncompositionend",function(){h._cninput=!1,window.console.info("chinese input end."),"function"==typeof h.doChange&&h.doChange(this)})),this.inputBox.onchange=function(t){t=t||event;h.logInfo("inputBox.onChange$$$$$$$$$$$$"),h._isChanged=!0,"function"==typeof h.onEditClick&&h.onEditClick(t)},this.inputBox.oninput=function(){!0!==h._cninput&&"function"==typeof h.doChange&&h.doChange(this)},this.inputBox.onpropertychange=function(){!0!==h._cninput&&"function"==typeof h.doChange&&h.doChange(this)},this.clearBtn=this.createElement("div"),this.setStyle(this.clearBtn,"clearBtn"),this.clearBtn.onclick=function(t){h.clearValue()},this.clearBtn.style.display="none","#FFFFFF"!==this.getOption().color&&"white"!==this.getOption().color||this.setStyle(this.clearBtn,"clearBtn_white"),null!=this.dataField&&""!==this.dataField){var l=this.getDataSource().getDataModel();null!=l&&(this._value=l.get(this.dataField).value())}if(null!=this.getOption().inputCss&&""!==this.getOption().inputCss?(this.setStyle(this.inputBox,this.getOption().inputCss),this.inputBox.style.border="0px solid #FFFFFF",this.inputBox.style.resize="none",this.inputBox.style.textAlign=this.align):this.setStyle(this.inputBox,"editTextInputer"),null!=this.getOption().className&&""!==this.getOption().className&&this.addStyle(this.thisWindow,this.getOption().className),!0===this.getOption().hint){this.hintView=new t.ui.drop.poplistview(null,{height:300,width:200,idkey:this.getOption().idkey,capkey:this.getOption().capkey,showCount:this.getOption().showCount}),this._asynRun(function(){this.hintView.setParent(this.getPopContainer())},100);var a=this;this.hintView.onSelect=function(t,e){var i=a.getOption().capkey;"object"==(void 0===e?"undefined":_typeof(e))&&null!=e[i]&&(e[i]=a._textToTag(e[i])),a.setValue(e)},this.isArray(this.getOption().hintData)&&this.hintView.setItemList(this.getOption().hintData)}!0===this.getOption().underLine&&this.addStyle(this.thisWindow,"underLine"),this._ngmodel(),this.refresh()},setHintData:function(t){this.isArray(t)&&(this.getOption().hintData=t,!0===this.getOption().hint&&this.hintView.setItemList(this.getOption().hintData))},_afterRender:function(){this.base(),null!=this.getOption().defValue&&this.setValue(this.getOption().defValue)},setSize:function(t){this.isEmpty(t)||(this.size=t,this.inputBox.setAttribute("maxlengh",this.size))},isCtrlKey:function(t){return t>=this.keyBoard.Left&&t<=this.keyBoard.DOWN||t==this.keyBoard.ENTER},getPosition:function(t){var e=0;if(document.selection){t.focus();var i=document.body.createTextRange();i.moveToElementText(t);var s=document.selection.createRange();s.setEndPoint("StartToStart",i),e=s.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e},setPosition:function(t,e,i){if(null==i&&(i=e),document.selection)try{var s=t.createTextRange();s.moveEnd("character",-t.value.length),s.moveEnd("character",i),s.moveStart("character",e),s.select(),s=null}catch(t){this.logError("ERROR: "+this.getI18n("qzz.setPositionErr","设置选择位置报错")+t.message+t.stack)}else t.setSelectionRange(e,i),t.focus()},getSelText:function(t){var e="";if(document.selection){var i=t,s=document.selection.createRange();i.createTextRange().text.indexOf(s.text)>=0&&(e=s.text),i=null,s=null}else if(t.selectionStart||"0"==t.selectionStart){var n=t.selectionStart,o=t.selectionEnd;e=t.value.substr(n,o-n),n=null,o=null}return e},doFocus:function(t){if(!this.selectState){this.selectState=!0,this.base(t);var e=this.inputBox;setTimeout(function(){null!=e&&e.offsetWidth>0&&(e.focus(),e.select()),e=null},50)}},postValue:function(){var t=this.inputBox.value;if(!0!==this.notnull||""!==t){if("string"==typeof t&&!0===this.getOption().escape&&(t=this._tagToText(t)),null!=this.getOption().length&&this.getOption().length>0)this.strLen(t)>this.getOption().length&&(t=this.subStr(t,this.getOption().length));this.setValue(t)}},doMouseOver:function(t){!1!==this.getOption().canClear&&!0!==this.getOption().disabled&&!0!==this.getOption().readOnly&&(this.clearBtn.style.display="")},doMouseOut:function(t){"none"!==this.clearBtn.style.display&&(this.clearBtn.style.display="none")},doBlur:function(t){this.selectState&&(this.postValue(),this.selectState=!1,this.base(t)),this.clearBtn.style.display="none"},doInput:function(t){var e=t||window.event,i=e.keyCode||e.charCode||e.which;if(e.ctrlKey&&i==this.ctrl.keyBoard.V&&this.ctrl.pasteKeyPress)return e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1;if(i==this.ctrl.keyBoard.ENTER)return e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1;this.ctrl._isChanged=!0;var s=this.ctrl;if(e.returnValue=!0,e.ctrlKey&&i!=s.keyBoard.CTRL)i!=s.keyBoard.C&&i!=s.keyBoard.V&&i!=s.keyBoard.X&&(e.returnValue=!1),i==s.keyBoard.V&&(s.paste=!0);else if(e.shiftKey&&i!=s.keyBoard.SHIFT)i!=s.keyBoard.END&&i!=s.keyBoard.HOME&&i!=s.keyBoard.C&&i!=s.keyBoard.V&&i!=s.keyBoard.LEFT&&i!=s.keyBoard.RIGHT&&s.isCtrlKey(i)&&(e.returnValue=!1);else if(null!=s.size){var n=s.strLen(this.value);!((n-=s.getSelText(this).length)>=s.size)||i>=s.keyBoard.END&&i<=s.keyBoard.HOME||i==s.keyBoard.CTRL||20==i||i==s.keyBoard.BACKSPACE||i==s.keyBoard.DEL||i==s.keyBoard.LEFT||i==s.keyBoard.RIGHT||s.isCtrlKey(i)||(e.returnValue=!1)}return e.returnValue},doKeyDown:function(t,e){if(t.ctrlKey&&e==this.keyBoard.V)return this.pasteKeyPress=!0,!0},doKeyUp:function(t,e){e==this.keyBoard.ENTER||e==this.keyBoard.UP||e==this.keyBoard.DOWN||e==this.keyBoard.LEFT||e==this.keyBoard.RIGHT||this.isCtrlKey(e)||null==this.inputBox.value||this._tmpInputValue===this.inputBox.value&&this._text===this.inputBox.value||(!0===this.getOption().hint&&this._doShowHintView(),!0===this.getOption().post&&229!=e&&!0!==this._cninput&&(this.postValue(),this.inputBox.focus())),!0===this.getOption().hint&&e==this.keyBoard.F2&&this._doShowHintView(),this._tmpInputValue=this.inputBox.value,this.pasteKeyPress=!1},_doShowHintView:function(){if(null!=this.getContainer().parentElement)if(this.hintView.setWidth(this.getWidth()),this.hintView.clearFilter(),this.hintView.addFilter(this.inputBox.value),this.hintView.length()>1)this.getAXY(),this.hintView.execute(this.getContainer(),this.getHeight());else if(1==this.hintView.length()){this.hintView.getItem(0).text!==this.inputBox.value?(this.getAXY(),this.hintView.execute(this.getContainer(),this.getHeight())):this.hintView.hide()}},hideHintView:function(){null!=this.hintView&&this.hintView.hide()},value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){if(null==t)return this.getValue();this.setValue(t)}),text:function(t){if(null==t)return this.getText();this.setText(t)},_getTextByValue:function(t){return t},clearValue:function(){if(!0!==this.getOption().disabled&&!0!==this.getOption().readOnly){var t=this.getValue(),e=this.getText();this.setValue(""),this._update&&("function"==typeof this.onClearValue&&this.onClearValue(t,e),this.trigger("onClearValue",[t,e]),"function"==typeof this.onChanged&&this.onChanged(this._value,this._text),"function"==typeof this.getOption().onChanged&&this.getOption().onChanged(this._value,this._text),this.trigger("onChange",[""]),this.trigger("onChanged",[""]));var i=this;setTimeout(function(){null!=i.inputBox&&i.inputBox.focus()},10)}},setValue:function(t){if(null==t&&(t=""),this._oldValue=this._value,this._tmpInputValue="","object"==(void 0===t?"undefined":_typeof(t)))if("boolean"==typeof t[this.getOption().idkey]&&t[this.getOption().idkey]!==this._value||"boolean"!=typeof t[this.getOption().idkey]&&t[this.getOption().idkey]!=this._value||this.inputBox.value!=this._text||0===t[this.getOption().idkey]&&""===this._value||""===t[this.getOption().idkey]&&0===this._value){if(this._value=t[this.getOption().idkey],null!=t[this.getOption().capkey]?(this.inputBox.value=t[this.getOption().capkey],this._text=t[this.getOption().capkey]):(this.inputBox.value=this._value,this._text=this._value),null!=this.dataField&&""!==this.dataField){var e=this._value;this.isArray(e)&&(e=e.join(",")),this.getDataSource().getDataModel().get(this.dataField).value(e)}this._isChanged=!0,this.refresh(),this._update&&("function"==typeof this.onChanged&&this.onChanged(this._value,this._text),"function"==typeof this.getOption().onChanged&&this.getOption().onChanged(this._value,this._text),this.trigger("onChange",[this.inputBox.value]),this.trigger("onChanged",[this.inputBox.value]))}else this._value==t[this.getOption().idkey]&&this._text!=t[this.getOption().capkey]&&(this._text=t[this.getOption().capkey]);else if(this._value!=t||0===this._value&&""===t||""===this._value&&0===t||this._text!=this.inputBox.value){if(null==t&&(t=""),!0===this.multiSelect?"string"==typeof t&&t.indexOf(",")>=0?this._value=t.split(","):this.isArray(t)?this._value=t:this._value=[t]:this._value=t,this._text=this._getTextByValue(this._value),this.inputBox.value=this._text,null!=this.dataField&&""!==this.dataField){e=this._value;this.isArray(e)&&(e=e.join(",")),this.getDataSource().getDataModel().get(this.dataField).value(e)}this._isChanged=!0,this.refresh(),this._update&&("function"==typeof this.onChanged&&this.onChanged(this._value,this._text),"function"==typeof this.getOption().onChanged&&this.getOption().onChanged(this._value,this._text),this.trigger("onChange",[this.inputBox.value]),this.trigger("onChanged",[this.inputBox.value]))}"function"==typeof this._updateDataModel&&this._updateDataModel();var i=this;setTimeout(function(){i._twoRefresh&&i.doContainerShow(),i=null},1e3)},doContainerShow:function(){if(null!=this.inputBox){this.inputBox.offsetWidth;this.inputBox.value=this.inputBox.value;var t=this.inputBox.parentNode,e=null;null!=t&&"string"==typeof t.className&&t.className.indexOf(".winStyle")>=0&&(e=t),null!=e&&this.addStyle(e,"winStyle")}null!=this.showHandle&&(clearInterval(this.showHandle),this.showHandle=null)},getValue:function(){var t=this.size;if(null==t&&(t=-1),"string"==typeof this._value){var e=encodeURI(this._value);"string"==typeof e&&e.indexOf("%C2%A0")>=0&&(e=e.replace(/%C2%A0/g,"%20"),this._value=decodeURI(e))}return t>0&&"string"==typeof this._value&&this._value.length>this.size?this._value.substr(0,t):this._value},setText:function(t){this._text=t,""===this._value&&this._value!==t&&(this._value=t,this._isChanged=!0),this.refresh()},getText:function(){return this._text},endUpdate:function(){this._update=!0,this._doResize(),this.refresh()},setAlign:function(t){this.align=t,this.refresh()},getAlign:function(){return this.align},setVAlign:function(t){this.valign=valign,this.refresh()},getVAlign:function(){return this.valign},setSelectState:function(t){this.selectState=t,this.refresh()},setBorder:function(t){t=t||0;this.thisWindow.style.border=t+"px"},setWidth:function(t){this.getWidth()!=t&&(this.base(t),this.refresh())},setHeight:function(t){this.getHeight()!=t&&(this.base(t),this.refresh())},refreash:function(){this.refresh()},refresh:function(){if(this._update){this.thisWindow.style.align!=this.align&&(this.thisWindow.style.align=this.align),this.thisWindow.style.verticalAlign!=this.valign&&(this.thisWindow.style.verticalAlign=this.valign),this._setHtml(this.thisWindow,"",!1);var t=this._text;this.isArray(t)&&(t=t.join(",")),this.inputBox.value=t,"string"==typeof this.inputBox.value&&(this.inputBox.value=this._textToTag(this.inputBox.value),!0===this.getOption().showHint&&this.inputBox.setAttribute("title",this.inputBox.value)),null!=this._value&&""!==this._value&&null!=this.getOption().alwaysText&&(this.inputBox.value=this.getOption().alwaysText),/\d+%$/.test(this.thisWindow.style.width)?this.inputBox.style.width="100%":this.inputBox.style.width=this.getWidth()+"px",this.inputBox.style.height=this.getHeight()-1+"px",!1===this._enabled&&this.inputBox.setAttribute("disabled",!this._enabled),!0===this.getOption().disInput||!0===this.getOption().readOnly?(this.inputBox.setAttribute("readOnly",!0),!0===this.getOption().readOnly?(this.addStyle(this.thisWindow,"readOnly"),this.addStyle(this.inputBox,"readOnly")):(this.delStyle(this.thisWindow,"readOnly"),this.delStyle(this.inputBox,"readOnly"))):this.inputBox.removeAttribute("readOnly");var e=(this.getHeight()-this.getNumberValue(this.getOption().fontSize,this.getOption().defFontSize))/2-2;e>8&&(e=8),this.inputBox.style.paddingTop=e+"px",this.thisWindow.appendChild(this.inputBox),this.thisWindow.appendChild(this.clearBtn),this.clearBtn.innerHTML="x",this.clearBtn.style.bottom=e+2+"px",this.getOption().underLine?this._enabled?(this.delStyle(this.thisWindow,"underline_disabled"),this.delStyle(this.inputBox,"underline_disabled")):(this.addStyle(this.thisWindow,"underline_disabled"),this.addStyle(this.inputBox,"underline_disabled")):this._enabled?(this.delStyle(this.thisWindow,"disabled"),this.delStyle(this.inputBox,"disabled")):(this.addStyle(this.thisWindow,"disabled"),this.addStyle(this.inputBox,"disabled"))}},getInitData:function(){return null!=this.option.data&&this.isArray(this.option.data)?this.option.data:[]},initValue:function(t){this.setValue(t)},disable:function(t){null==t&&(t=!0),this._enabled=!t,this.getOption().disabled=t,this.refresh()},enable:function(t){null==t&&(t=!0),this._enabled=t,this.getOption().disabled=!t,this.refresh()},mergeChangeLog:function(){this._isChanged=!1},isChanged:function(){return this._isChanged},readonly:function(t){null==t&&(t=!0),this.getOption().readOnly=t,this.refresh()},getReadOnly:function(){return!0===this.getOption().readOnly},setReadOnly:function(t){this.readonly(t)},setDisInput:function(t){null==t&&(t=!0),this.getOption().disInput=t,this.refresh()},setIdkey:function(t){this.getOption().idkey=t},getInputValue:function(){return this.inputBox.value},getPopState:function(){return!0===this.getOption().hint&&(!0===this.hintView.isShow()?!0===this.hintView.isMouseOver()?this._popState=!0:(this._popState=!1,this.hintView.hide()):this._popState=!1),this._popState},setPopState:function(t){this._popState=t},setCanClear:function(t){this.getOption().canClear=t},modelData:function(t){this.getOption().modelData=t,this._ngmodel()},_ngmodel:function(){if(null!=this.getOption().modelData){var t=this.getOption()["v-model"]||this.getOption()["ng-model"];if(null!=t&&""!==t){for(var e=t.split("."),i=this.getOption().modelData,s=0,n=!0,o=e.length;s<o-1;s++){var h=e[s];if(null==i[h]&&(i[h]={}),null==i[h]){n=!1;break}i=i[h]}if(n){h=e[s];var l=this,a=i[h];Object.defineProperty(i,h,{enumerable:!0,configurable:!0,set:function(t){l.setValue(t)},get:function(){var t=l.getValue();return""===t&&null==a&&(t=null),""!==t&&" "!==t||(t=null),t}}),null!=a&&""!==a?l.setValue(a):l.setValue(""),l._updateDataModel=function(){a!==l._value&&(null==i._oldValue&&(i._oldValue={}),(null!=a&&(null==i._oldValue[h]||a!==l._value)||null==a&&""!==l._value&&null!=l._value)&&(i._oldValue[h]=a,0==(4&i.modelState)&&(i.modelState=8|i.modelState)))}}}}}}),_bindRenderFunc("qzzedit",t.ui.input.edit),t.ui.input.edit}),
/*!
 * 数值输入控件.
 * ecp.qzz.ui.input.number.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.iedit"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.number=t.Class(t.ui.input.edit,{_create:function(){this.base(),this.className="Number",this.logInfo("number.create"),this.dataScale=this._getNumberValue(this.getOption().scale,0),this.size=this._getNumberValue(this.getOption().size||this.getOption().length,15),this.numUnitVal=1,this._maxValue=null,this._minValue=null,null!=this.getOption().maxValue&&(this._maxValue=parseInt(this.getOption().maxValue,10)),null!=this.getOption().minValue&&(this._minValue=parseInt(this.getOption().minValue,10))},_render:function(){this.base(),this.logInfo("number.render"),this.inputBox.onkeydown=this.doInput,this.inputBox.onkeyup=this.doInputerKeyUp},setMinValue:function(t){this._minValue=t},setMaxValue:function(t){this._maxValue=t},setDataScale:function(t){this.dataScale=t,this.getOption().scale=t},setFormatStr:function(t){this.format=t},setNumUnit:function(t){this.numUnitVal=t},isNumberKey:function(t){return t>=96&&t<=105||t>=48&&t<=57},numberLimitKey:function(t){return!(!this.isNumberKey(t)&&110!=t&&109!=t&&189!=t&&190!=t&&229!=t||111==t||106==t||107==t)},postValue:function(){var t=this.inputBox.value;isNaN(t)&&(t=null),""===t&&(t=null),null==t&&!0===this.notnull||(this.isEmpty(t)||(t="9999999999999999"===t?1e16:parseFloat(t,10)),this.setValue(t))},getValue:function(){var t=this.base();return""!==t&&null!=t&&(this.isEmpty(t)?t=0:"string"==typeof t&&(t=parseFloat(t,10))),t},setValue:function(t){if("object"==(void 0===t?"undefined":_typeof(t))&&null!=t){var e=t[this.getOption().idkey];if("string"==typeof e&&""!==(e=e.replace(/[,%‰]/g,""))&&(e=parseFloat(e,10)),e!=this._value||""===e&&0===this._value||0===e&&""===this._value){if(this._value=e,null!=t[this.getOption().capkey]){var i=t[this.getOption().capkey]+"";this.inputBox.value=i.replace(/[,%‰]/g,""),this._text=this.inputBox.value,1==this.numUnitVal&&null!=e&&""!==e&&e!=this.inputBox.value&&(this.inputBox.value=e,this._text=e)}else null!=e&&""!==e?(""==typeof this._value&&(this._value=this._value.replace(/[,%‰]/g,""),""!==this._value&&(this._value=parseFloat(this._value,10))),this.inputBox.value=this.round(this._value/this.numUnitVal,this.dataScale||0),this._text=this.inputBox.value):(this.inputBox.value="",this._text="");this._isChanged=!0,this.refresh(),"function"==typeof this.onChanged&&this._update&&this.onChanged(this._value,this._text)}}else(this._value!=t||1!=this.numUnitVal&&null!=this.numUnitVal||""===t&&0===this._value||0===t&&""===this._value||null==t)&&(""!==t&&null!=t?(this._value=this.round(t*this.numUnitVal,this.dataScale||0),this.inputBox.value=t,this._text=this.inputBox.value,this._isChanged=!0,this.refresh()):(this._value=null,this._text="",this.inputBox.value=""),"function"==typeof this.onChanged&&this._update&&this.onChanged(this._value,this._text));null!=this.numUnitVal&&null!=this._value&&""!==this._value&&(this.numUnitVal=parseFloat(this.numUnitVal,10),"string"==typeof this._value&&(this._value=this._value.replace(/[,%‰]/g,""),""!==this._value&&(this._value=parseFloat(this._value,10))),this._text=this.round(this._value/this.numUnitVal,this.dataScale||0),this.inputBox.value=this._text,this.refresh())},_getAfterValue:function(t,e,i,s){if((187==i||107==i||189==i||109==i)&&0==e&&t.indexOf("-")<0)return"-"+t;if(i>=48&&i<=57)i-=48;else{if(!(i>=96&&i<=105))return t;i-=96}var n=t+"",o="";null==s||""===s?o=n.substring(0,e)+i+n.substring(e,n.lenvth):o=n.replace(s,i);return o},doChange:function(t){var e=t.value;"string"==typeof e&&(t.value=e.replace(/[^1234567890\.\-\/ ]/g,""))},doInput:function(t){var e=t||window.event,i=e.keyCode||e.charCode||e.which,s=this.ctrl;if(e.returnValue=!0,e.ctrlKey&&17!=i)67!=i&&86!=i&&88!=i&&(e.returnValue=!1),86==i&&(s.paste=!0);else if(e.shiftKey&&16!=i)35==i||36==i||67==i||86==i||s.isCtrlKey(i)||(e.returnValue=!1);else{null==s.size&&(s.size=15);var n=s.dataScale;if(null==n&&(n=0),0==n&&110==i)return e.returnValue=!1,!1;s.numUnitVal==s.numUnit.percent?n-=2:s.numUnitVal==s.numUnit.perthousand&&(n-=3),n<0&&(n=0),s.size>16&&(s.size=16);var o=this.value.length,h=s.size-n,l=s.getPosition(this),a=this.value.indexOf("."),r=s.getSelText(this);if((null!=s._maxValue&&""!==s._maxValue||null!=s._minValue&&""!==s._minValue)&&8!=i&&46!=i){0!==s._minValue||189!=i&&109!=i||(e.returnValue=!1);var d=s._getAfterValue(this.value,l,i,r);if(null!=s._maxValue&&""!==s._maxValue&&d>s._maxValue?e.returnValue=!1:null!=s._minValue&&""!==s._minValue&&d<s._minValue&&(e.returnValue=!1),0==e.returnValue&&d!=this.value)return e.returnValue}if(109==i||189==i||173==i)(l>0||this.value.indexOf("-")>=0)&&(e.returnValue=!1);else if(i>=35&&i<=36||17==i||20==i||8==i||9==i||46==i||s.isCtrlKey(i))if(8==i||46==i){r.length>0&&r.indexOf(".")>=0&&h<o-r.length?e.returnValue=!1:o-1>h&&(a==l&&46==i?e.returnValue=!1:a+1==l&&8==i&&(e.returnValue=!1)),null}else 13==i&&(e.returnValue=!1);else{e.returnValue=s.numberLimitKey(i);var u=this.value.split(".");if(2==u.length){if(r.length>0&&r.indexOf(".")>=0&&h<=o-r.length)e.returnValue=!1;else if(u[0].length>=h&&u[1].length>=n)0==r.length&&(e.returnValue=!1);else{var c=this.value.indexOf(".");(u[0].length>=h&&l<=c||u[1].length>=n&&l>c)&&0==r.length&&(e.returnValue=!1),c=null}null}else o>=h&&110!=i&&190!=i&&""===r&&(e.returnValue=!1);u=null}o=null,h=null,r=null,l=null}return e.returnValue&&(s._isChanged=!0),s=null,e.returnValue},doInputerKeyUp:function(t){var e=t||window.event,i=e.keyCode||e.charCode||e.which,s=this.ctrl;if(s.paste&&i==s.keyBoard.V){var n=this.value;n.indexOf(/[\n\t]/)<0&&(n=n.replace(/[,%‰]/g,""),isNaN(n)?(s.tmpValue=n,this.value=""):this.value=n)}this.value=this.value.replace(/[^0-9.-]/g,""),s.paste=!1}}),_bindRenderFunc("qzznumber",t.ui.input.number),t.ui.input.number}),
/*!
 * 数值输入控件.
 * ecp.qzz.ui.input.updown.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.inumber","qzz.button"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.updown=t.Class(t.ui.input.number,{_create:function(){this.base(),this.className="Updown",this.logInfo("Updown.create"),this._button=this.createElement("DIV"),this.upBtn=new t.ui.button(null,{cssPrefix:this._cssPrefix}),this.upBtn.setWidth(20),this.upBtn.addStyle("componet_ui_input_up_common"),this.downBtn=new t.ui.button(null,{cssPrefix:this._cssPrefix}),this.downBtn.setWidth(20),this.downBtn.setTop(10),this.downBtn.addStyle("componet_ui_input_down_common"),this.getOption().loop=this.getBooleanValue(this.getOption().loop,!1);var e=this;this._lockLength=0,null!=this.getOption().lockLength&&""!==this.getOption().lockLength&&(this._lockLength=parseInt(this.getOption().lockLength,10)),this.upBtn.bind("onclick",function(){if(!0!==e.getOption().disabled&&!0!==e.getOption().readOnly){e.postValue();var t=e.getValue();e.upValue();var i=e.getValue();return e.trigger("onclick",[e,t,i,i<t]),!1}}),this.downBtn.bind("onclick",function(){if(!0!==e.getOption().disabled&&!0!==e.getOption().readOnly){e.postValue();var t=e.getValue();e.downValue();var i=e.getValue();return e.trigger("onclick",[e,t,i,i>t]),!1}})},_render:function(){this.base(),this.logInfo("Updown.render"),null!=this._value&&""!==this._value||this.setValue(0),this.refresh()},upValue:function(){var t=this.getValue(),e=t;null!=t&&""!==t||(t=0);var i=this.getOption().step||1;null==this.getOption().maxValue||t<this.getOption().maxValue?t+=i:this.getOption().loop&&null!=this.getOption().minValue&&(t=this.getOption().minValue),this.setValue(t),this.trigger("onchange",[this,e,t,t<e]),this.refresh()},downValue:function(){var t=this.getValue(),e=t;null!=t&&""!==t||(t=0);var i=this.getOption().step||1;null==this.getOption().minValue||t>this.getOption().minValue?t-=i:this.getOption().loop&&null!=this.getOption().maxValue&&(t=this.getOption().maxValue),this.trigger("onchange",[this,e,t,t>e]),this.setValue(t),this.refresh()},setMaxValue:function(t){this.getOption().maxValue=t},setMinValue:function(t){this.getOption().minValue=t},refresh:function(){if(this._lockLength>0){for(var t="",e=(this._text+"").length;e<this._lockLength;e++)t+="0";this._text=t+this._text}this.base(),this.setStyle(this._button,"componet_ui_input_updown");var i=this.getOption().width-21;i<=0&&(i=1),this.inputBox.style.width=i+"px";var s=(this.getOption().height-20)/2;this._button.style.top=s+"px",this.upBtn.setParent(this._button),this.downBtn.setParent(this._button),this.upBtn.refresh(),this.downBtn.refresh(),this.thisWindow.appendChild(this._button),this.clearBtn.style.right="20px"},doMouseWheel:function(t,e){!1!==this.getOption().wheel&&(this.postValue(),e>0?this.upValue():this.downValue())},setLockLength:function(t){this._lockLength=t}}),_bindRenderFunc("qzzupdown",t.ui.input.updown),t.ui.input.updown}),
/*!
 * 远光ECP平台3.4版本 
 * 
 * 复选择框.：qzz.ui.input.checkbox
 * ecp.qzz.ui.input.checkbox.js
 * @requires qzz.ui
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.window"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.checkbox=t.Class(t.ui.window,{_create:function(){this.className="CheckBox",this.base(),this.getOption().width=this.getNumberValue(this.getOption().width,20),this.getOption().height=this.getNumberValue(this.getOption().height,30),this.getOption().height<16&&(this.getOption().height=16),this.getOption().borderWidth=0,this.getOption().text=this.getOption().text||this.getOption().caption||"",this.getOption().checked=!0===this.getOption().checked,this.getOption().disabled=!0===this.getOption().disabled,this.getOption().readOnly=!0===this.getOption().readOnly;var t=this.getOption().checkboxCss;if(t&&"string"==typeof t){var e=t.split(" ");this.getOption().checkboxCss=[];for(var i=0,s=e.length;i<s;i++)e[i]&&this.getOption().checkboxCss.push(e[i])}this.getOption().checkboxCss=this.getOption().checkboxCss||["qzz_checked","qzz_unchecked","qzz_somechecked"];var n=this.getOption().radioCss;if(n&&"string"==typeof n){e=n.split(" ");this.getOption().radioCss=[];for(i=0,s=e.length;i<s;i++)e[i]&&this.getOption().radioCss.push(e[i])}this.getOption().radioCss=this.getOption().radioCss||["qzz_radio_checked","qzz_radio_unchecked","qzz_radio_somechecked"],this.getOption().somechecked=!0===this.getOption().somechecked,this.getOption().type=this.getOption().type||"checkBox"},addToRadioList:function(){var e=this.thisWindow.getAttribute("name");null!=e&&""!==e&&(null==t.ui.input._radioList&&(t.ui.input._radioList={}),null==t.ui.input._radioList[e]&&(t.ui.input._radioList[e]=[]),t.ui.input._radioList[e].push(this))},delFromRadioList:function(){var e=this.thisWindow.getAttribute("name");if(null!=e&&""!==e){null==t.ui.input._radioList&&(t.ui.input._radioList={}),null==t.ui.input._radioList[e]&&(t.ui.input._radioList[e]=[]);for(var i=t.ui.input._radioList[e],s=0,n=i.length;s<n;s++){if(i[s].index==this.index){i.splice(s,1);break}}}},uncheckOtherRadio:function(){var e=this.thisWindow.getAttribute("name");if(null!=e&&""!==e){null==t.ui.input._radioList&&(t.ui.input._radioList={}),null==t.ui.input._radioList[e]&&(t.ui.input._radioList[e]=[]);for(var i=t.ui.input._radioList[e],s=0,n=i.length;s<n;s++){var o=i[s];o.index!=this.index&&!0===o.getCheck()&&(o.setCheck(!1),o.trigger("onClick",[o.getOption().checked]))}}},_render:function(){var t=null;null!=this._control&&(t=this._control.getAttribute("placeholder")),this._control&&"INPUT"===this._control.tagName&&this._replaceToDiv(),t=t||this.getOption().placeholder,this.base(),this._tab=this.createElement("TABLE");var e=this.thisWindow.innerHTML;this.thisWindow.innerHTML="",this.getOption().width<16&&(this.getOption().width=16,this.thisWindow.style.width=""),this.thisWindow.style.top="2px",this.addStyle(this.thisWindow,"checkBoxDiv"),this.thisWindow.appendChild(this._tab),this.setStyle(this._tab,"checkBoxTab");var i=this._tab.insertRow(0);this.checkBoxTd=i.insertCell(0),this.setStyle(this.checkBoxTd,"checkBoxTd"),this.checkBoxDiv=this.createElement("DIV"),this.checkBoxTd.appendChild(this.checkBoxDiv),this.checkBoxDiv.setAttribute("tabindex",0),this.setStyle(this.checkBoxDiv,"qzz_unchecked");var s=this;this.checkBoxDiv.onfocus=function(){s.setFocus()},this.checkBoxDiv.onblur=function(){s.setBlur()},this.checkBoxDiv.onmousedown=function(){s.click()},this.textTd=i.insertCell(1),null!=this.getOption().text&&""!==this.getOption().text||(this.getOption().text=e),this.textTd.onmouseup=function(){s.click()},this.setStyle(this.textTd,"qzz_check_text"),"radio"==this.getOption().type&&this.addToRadioList(),this.refresh()},click:function(){!0!==this.getOption().disabled&&!0!==this.getOption().readOnly&&("checkBox"==this.getOption().type||"radio"==this.getOption().type&&!0!==this.getOption().checked||!0!==this.getOption().checked&&!0===this.getOption().somechecked)&&(this.getOption().checked=!(!0===this.getOption().checked),this.getOption().somechecked=!1,this.refresh(),this.trigger("onClick",[this.getOption().checked]),"radio"===this.getOption().type&&this.uncheckOtherRadio())},refresh:function(){var t=1;!0===this.getOption().checked&&(t=0),"checkBox"===this.getOption().type&&!0===this.getOption().somechecked&&(t=2),"checkBox"===this.getOption().type?this.setStyle(this.checkBoxDiv,this.getOption().checkboxCss[t]):this.setStyle(this.checkBoxDiv,this.getOption().radioCss[t]),null!=this.getOption().text&&""!==this.getOption().text?(this.textTd.style.display="",this.textTd.innerHTML=this.getOption().text,this.thisWindow.style.width=""):(this.textTd.style.display="none",this.thisWindow.style.width="16px"),!0===this.getOption().disabled&&(this.addStyle(this.textTd,"disabled"),this.addStyle(this.checkBoxDiv,"disabled"))},getValue:function(){return this.value()},setValue:function(t){this.value(t),this.refresh()},setText:function(t){this.getOption().text=t,this.refresh()},setDisable:function(t){this.getOption().disabled=!0===t,this.refresh()},getDisable:function(){return!0===this.getOption().disabled},setCheck:function(t){this.value(t)},getCheck:function(){return this.value()},setSomeCheck:function(t){this.getOption().somechecked=!0===t,this.getOption().somechecked&&(this.getOption().checked=!1),this.refresh()},getSomeCheck:function(){return this.getOption().somechecked},setType:function(t){this.getOption().type=t||"checkBox","radio"===this.getOption().type?this.addToRadioList():this.delFromRadioList(),this.refresh()},getType:function(){return this.getOption().type},doKeyUp:function(t,e){if(e===this.keyBoard.ENTER){var i=this.value();this.value(!i)}},value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){if(null==t)return this.getOption().checked;this.getOption().checked=!0===t,this.getOption().somechecked=!1,this.refresh()})}),_bindRenderFunc("qzzcheckbox",t.ui.input.checkbox),t.ui.input.checkbox}),
/*!
 * 下拉框控件.
 * ecp.qzz.ui.input.combobox.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.iedit","qzz.plistview"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.combobox=t.Class(t.ui.input.edit,{_create:function(){this.base(),this.className="ComboBox",this.logInfo("select.create"),this.button=this.createElement("span"),this.caret=this.createElement("span"),this.keySelect=!0,this.multiSelect=!1,this.changeState=!0,this._valText=null,this.multiSelect=this.getBooleanValue(this.getOption().multiple,!1),this.multiSelect=this.getBooleanValue(this.getOption().multiSelect,this.multiSelect),this.selectAll=this.getBooleanValue(this.getOption().selectAll,this.selectAll),this.getOption().search=this.getBooleanValue(this.getOption().search,!1),this.getOption().more=this.getBooleanValue(this.getOption().more,!1)},_render:function(){this.base(),this.logInfo("select.render"),this.setStyle(this.button,"componet_ui_input_dropBotton");var t=this.getOption().viewType;if("image"==t||"imageText"==t){var e=this.getHeight()-4+"px";this._image=this.createElement("span"),this._image.style.dispaly="block",this._image.style.height=e,this._image.style.width=e,this._image.style.margin="1px",this._image.style.textAlign="center",this._image.style.backgroundColor="#DCF1F3","imageText"==t&&(this._image.style.display="none",0!=this.getOption().readOnly&&this.readonly(!0))}this.setStyle(this.caret,"dropButton_caret"),this.button.appendChild(this.caret),"#FFFFFF"!==this.getOption().color&&"white"!==this.getOption().color||this.addStyle(this.caret,"white");var i=this;if(null!=this.getOption().data&&!0===this.multiSelect){var s=this.getOption().data;this._value=[],this._text=[];for(var n=0,o=s.length;n<o;n++)s[n].checked&&(this._value.push(s[n][this.getOption().idkey]),this._text.push(s[n][this.getOption().capkey]))}if(null==this.getOption().width||/\d+%$/.test(this.getOption().width)||this.setWidth(parseInt(this.getOption().width,10)),this.inputBox.onkeydown=this.doInput,this.inputBox.onkeyup=this.doInputerKeyUp,this._clickIndex=0,this.button.onclick=function(){i._enabled&&!0!==i.getOption().readOnly&&i._clickIndex%2==0&&(null!=i.popListView&&i.popListView.clearFilter(),i.hasSelect=!0,i._doDropList(),i.selectState=!0),i._clickIndex++},this._value&&0!=this._value.length){this.initData=this.extend([],this.getOption().data);var h={};h[this.getOption().idkey]=this._value,h[this.getOption().capkey]=this._text,this.setValue(h)}},getInitData:function(){if(this.isEmpty(this.option.data)&&1!=this.hasInitSys){var t=this.initSysData();this.hasInitSys=!0,this.isArray(t)&&(this.option.data=t)}var e=this.option.data,i=this.option.needData;return this.isArray(i)&&i.length>0&&(e=null!=this.option.data?i.concat(this.option.data):i),e},value:function(t){if(null==t){var e=this.getValue();if(this.selectAll&&e&&"all"===e[0]){var i=this.getData();e=[];for(var s=0,n=i.length;s<n;s++)0===s&&"all"==i[s][this.getOption().idkey]||i[s].checked&&(e[e.length]=i[s][this.getOption().idkey])}return this.isArray(e)&&(e=e.join(",")),e}var o="";this.multiSelect&&(t=t.split(/[,，]+/g));var h=this.option.needData;if(!this.multiSelect&&this.isArray(h)&&h.length>0){n=0;for(var l=h.length;n<l;n++)if(h[n][this.getOption().idkey]==t){o=h[n][this.getOption().capkey];break}if(""!==o)return(a={})[this.getOption().idkey]=t,a[this.getOption().capkey]=o,void this.base(a)}var a,r=this.getInitData();if(this.isArray(r)){l=r.length;if(this.isArray(t)){o=[];s=0;for(var d=t.length;s<d;s++)for(n=0;n<l;n++)if(r[n][this.getOption().idkey]==t[s]){o.push(r[n][this.getOption().capkey]);break}}else for(s=0;s<l;s++)if(r[s][this.getOption().idkey]==t){o=r[s][this.getOption().capkey];break}}(a={})[this.getOption().idkey]=t,a[this.getOption().capkey]=o,this.base(a)},text:function(t){if(null==t){var e=this.getText();return"number"==typeof e?e+="":this.isArray(e)&&(e=e.join(",")),e}this.setText(t)},initSysData:function(){return this.option.data},doBlur:function(t){null!=this.popListView&&this.popListView.isShow()||this.base(),null!=this.popListView&&(this.popListView.isFocus()?this._clickIndex=0:this.popListView.setBlur())},getPopState:function(){var t=!1;return!0===this.base()?t=!0:null!=this.popListView&&!0===this.popListView.isShow()&&(t=!0),t},_createPopObject:function(){if(this.isEmpty(this.popListView)){var e=this.getInitData();this.popListView=new t.ui.drop.poplistview(null,{cssPrefix:this._cssPrefix,data:e,selectAll:this.selectAll,search:this.getOption().search,more:this.getOption().more,multiSelect:this.multiSelect,fontSize:this.getOption().fontSize,idkey:this.getOption().idkey,capkey:this.getOption().capkey,radius:this.getOption().radius,rowHeight:this.getOption().rowHeight,showCount:this.getOption().showCount,filterTextOnly:this.getOption().filterTextOnly,viewType:this.getOption().viewType});var i=this;this.popListView.bind("onMoreClick",function(){i.hasbind("onMoreClick")&&i.trigger("onMoreClick",[])}),this.popListView.bind("onFilter",function(t,e){var s=null;return i.hasbind("onFilter")&&(s=i.trigger("onFilter",[t,e])),s}),this.popListView.onSelect=function(t,e){var s=e[i.getOption().idkey];null==s&&(s=e[i.getOption().capkey]);var n=e[i.getOption().capkey],o=s;if(this.multiSelect){var h=this.getSelect();if(s=[],n=[],i.selectAll)if(i.selectAll&&"all"==o&&h.length>0)s[0]=o,n[0]="("+this.getI18n("qzz.all","全部")+")";else{for(var l=this.view.list.getItemList(),a=0,r=0,d=l.length;r<d;r++)l[r].disabled&&!l[r].checked||a++;if(h.length!=a){r=0;for(var u=h.length;r<u;r++)0===r&&"all"===h[r][i.getOption().idkey]||(s[r]=h[r][i.getOption().idkey],n[r]=h[r][i.getOption().capkey])}else s[0]="all",n[0]="("+this.getI18n("qzz.all","全部")+")"}else{for(r=0,u=h.length;r<u;r++)s[r]=h[r][i.getOption().idkey],n[r]=h[r][i.getOption().capkey];if(i.popListView&&!0===i.popListView.outerFilter){for(var c=i.getValue(),g=i.getText(),p=[],f=[],y=(r=0,c.length);r<y;r++){var m=c[r],C=g[r];i.popListView.indexOf(m)<0&&(p.push(m),f.push(C))}for(r=0,y=s.length;r<y;r++){m=s[r],C=n[r];p.push(m),f.push(C)}s=p,n=f}}}var S={};if(S[i.getOption().idkey]=s,S[i.getOption().capkey]=n,i.setValue(S),i.popListView.clearFilter(),i.multiSelect||i.popListView.hide(),i.setFocus(),"function"==typeof i.onSelect)try{i.onSelect(t,e)}catch(t){i.logError("[onSelect]ERR:"+t.message)}i.trigger("onSelect",[t,e]),i.inputBox.focus(),i.setPosition(i.inputBox,i.inputBox.value.length),"image"!=i.getOption().viewType&&"imageText"!=i.getOption().viewType||(i._image.style.display="block")},this.popListView.onHide=function(){if(i._popState=!1,"function"==typeof i.onHide)try{i.onHide()}catch(t){i.logError("[onHide]ERR:"+t.message)}},this.popListView.setParent(this.getPopContainer())}else if(this.changeState){e=this.getInitData();this.popListView.setItemList(e)}this.changeState=!1},refreash:function(){this.refresh()},setParent:function(t,e){this.base(t,e),this._clickIndex=0},refresh:function(){this.base();var t=this;this.inputBox.style.width=this.getWidth()-20+"px",this.thisWindow.appendChild(this.button),this.button.appendChild(this.caret),this.clearBtn.style.right="20px",this.caret.style.top=this.getHeight()/2-2+"px",!0!==this.getOption().disInput?this.inputBox.onclick=function(e){e=e||event;"function"==typeof t.onEditClick&&t.onEditClick(e)}:(this._clickIndex=0,this.inputBox.onclick=function(){t._enabled&&!0!==t.getOption().readOnly&&t._clickIndex%2==0&&(null!=t.popListView&&t.popListView.clearFilter(),t.hasSelect=!0,t._doDropList(),t.selectState=!0),t._clickIndex++});var e=this.getOption().viewType;if(("image"==e||"imageText"==e)&&null!=this._image){if(this.imgElement=this.createElement("img"),this._image.innerHTML="",this._image.appendChild(this.imgElement),t.inputBox.style.width=t.inputBox.offsetWidth-51+"px","imageText"==e){t=this;this._image.style.float="left"}else this.inputBox.style.display="none";this._image!==this.thisWindow.childNodes[0]&&this.thisWindow.insertBefore(this._image,this.thisWindow.childNodes[0]),this.imgElement.onload=function(){this.offsetWidth>this.offsetHeight?(this.style.width="100%",this.style.marginTop=t._image.offsetHeight/2-this.offsetHeight/2+"px"):this.style.height="100%"},this.imgElement.onerror=this._image.onload,this.imgElement.setAttribute("src",this._value)}},doMouseUp:function(t){this.base(t),this._enabled&&!0===this.getOption().readOnly&&!0===this.hasSelect&&(null!=this.popListView&&this.popListView.clearFilter(),this.hasSelect=!0,this._doDropList(),this.selectState=!0)},setWidth:function(t){this.base(t),t<150&&(t=150)},setSearch:function(t){this.getOption().search=this.getBooleanValue(t,!1)},setMore:function(t){this.getOption().more=this.getBooleanValue(t,!1)},doKeyUp:function(t,e){this.base(t,e),"IE"!==this.getBrowser()&&!0!==this.getPopState()&&(this.inputBox.focus(),e===this.keyBoard.UP?this.setPosition(this.inputBox,this.inputBox.value.length):e===this.keyBoard.ENTER&&(null==this.popListView||this.popListView.isShow()||this.postValue()))},doKeyDown:function(t,e){if(this.base(t,e),this._createPopObject(),!this.popListView.isShow())if(e===this.keyBoard.F2)null!=(i=this.popListView.getItem())&&i[this.getOption().idkey]==this._value||this.popListView.setSelect(this._value),this.button.onclick();else if(this.keySelect&&e===this.keyBoard.UP&&!this.multiSelect){if(null!=(i=this.popListView.getItem())&&i[this.getOption().idkey]==this._value||this.popListView.setSelect(this._value),this.popListView.prior(),null!=(s=this.popListView.getItem()))null==(n=s[this.getOption().idkey])&&(n=s[this.getOption().capkey]),(o={})[_this.getOption().idkey]=n,o[_this.getOption().capkey]=s[_this.getOption().capkey],this.setValue(o);s=null}else if(this.keySelect&&e===this.keyBoard.DOWN&&!this.multiSelect){var i,s,n,o;if(null!=(i=this.popListView.getItem())&&i[this.getOption().idkey]==this._value||this.popListView.setSelect(this._value),this.popListView.next(),null!=(s=this.popListView.getItem()))null==(n=s[this.getOption().idkey])&&(n=s[this.getOption().capkey]),(o={})[this.getOption().idkey]=n,o[this.getOption().capkey]=s[this.getOption().capkey],this.setValue(o);s=null}else e===this.keyBoard.ENTER&&(this.popListView.isShow()?this.popListView.selectIndex<0&&this.popListView.hide():(this.popListView.setBlur(),this.button.onclick()))},postValue:function(){this._createPopObject();var t=this.inputBox.value;if(!0!==this.notnull||""!==t)if("string"==typeof t&&!0===this.getOption().escape&&(t=this._tagToText(t)),t.indexOf(",")<0){if(t!=this._text||1!=this.multiSelect){var e=this.popListView.indexOfText(t);if(e<0)if("imageText"==this.getOption().viewType&&(this._image.style.display="none"),!0===this.getOption().filterOnly&&""!==t)this.inputBox.value=this._text;else{var i=this.initData,s=[],n=[];if(i)for(var o=0,h=i.length;o<h;o++)i[o].disabled&&i[o].checked&&(s[s.length]=i[o][this.getOption().idkey],n[n.length]=i[o][this.getOption().capkey]);p={},0===s.length?(p[this.getOption().idkey]=t,p[this.getOption().capkey]=t,this.setValue(p)):(p[this.getOption().idkey]=s,p[this.getOption().capkey]=n,this.setValue(p))}else{var l=this.popListView.getItem(e),a=l[this.getOption().idkey];null==a&&(a=l[this.getOption().capkey]),(p={})[this.getOption().idkey]=a,p[this.getOption().capkey]=l[this.getOption().capkey],this.setValue(p),l=null}}}else{var r=t;if(this.isArray(r)&&(r=r.join(",")),1!=this.multiSelect||this._text!=r){for(var d=this.popListView.setSelectByText(t),u=[],c=[],g=(o=0,d.length);o<g;o++)u.push(d[o][this.getOption().idkey]),c.push(d[o][this.getOption().capkey]);var p;(p={})[this.getOption().idkey]=u,p[this.getOption().capkey]=c,this.setValue(p)}}},_getTextByValue:function(t){if(""===t||null==t)return"";if(this.isEmpty(this._valText)){this._valText={};var e=!1;if(this.isArray(this.option.needData)){for(var i=this.option.needData.length,s=0;s<i;s++){"object"==(void 0===(n=this.option.needData[s])?"undefined":_typeof(n))?null!=n[this.getOption().idkey]?this._valText[n[this.getOption().idkey]]=n[this.getOption().capkey]||n[this.getOption().idkey]:this._valText[n[this.getOption().capkey]]=n[this.getOption().capkey]:n&&(this._valText[n]=n)}e=i>0}if(null==this._valText[t]&&this.isEmpty(this.option.data)&&this.getData(),this.isArray(this.option.data)){for(i=this.option.data.length,s=0;s<i;s++){var n;"object"==(void 0===(n=this.option.data[s])?"undefined":_typeof(n))?null!=n[this.getOption().idkey]?this._valText[n[this.getOption().idkey]]=n[this.getOption().capkey]||n[this.getOption().idkey]:this._valText[n[this.getOption().capkey]]=n[this.getOption().capkey]:this._valText[n]=n}e=e||i>0}if(0==e)return t}var o=this._valText[t];return o||(o=t),o},doInput:function(t){this.base(t)},_doDropList:function(){if(!0!==this.getOption().disabled&&(!0!==this.getOption().readOnly||1!=this.getOption().viewModel)&&(this.hasInitSys=!1,this._createPopObject(),null!=this.option.data&&0!==this.option.data.length||null!=this.option.needData&&0!==this.option.needData.length)){this.popListView.logInfo("click");var t=this.getNumberValue(this.getOption().popMinWidth,10);if(t>this.getWidth()?this.popListView.setWidth(t):this.popListView.setWidth(this.getWidth()),this.popListView.setSelectAll(this.selectAll),this.multiSelect&&this.popListView.clearSelectAll(),this.popListView.setSelectByText(this.getText()+""),this.getAXY(),this.popListView.execute(this.getContainer(),this.getHeight()),this._popState=!0,"function"==typeof this.onDrop)try{this.focus=!1,this.onDrop(this)}catch(t){this.logError("[onDrop]ERR:"+t.message)}}},doInputerKeyUp:function(t){var e=this.ctrl,i=(t=t||window.event).keyCode||t.charCode||t.which;if(i===e.keyBoard.ENTER||i===e.keyBoard.UP||i===e.keyBoard.DOWN||i===e.keyBoard.LEFT||i===e.keyBoard.RIGHT||i===e.keyBoard.F2||i===e.keyBoard.ESC||i===e.keyBoard.TAB||t.ctrlKey||i===e.keyBoard.CTRL||!0===e.getOption().readOnly)return t.returnValue=!1,!1;if(i==e.keyBoard.DEL&&!0!==e.getOption().notnull)return e._value="",e._text="",e.inputBox.value="",t.returnValue=!1,!1;if(e._createPopObject(),!0!==e.getOption().search)if(""===this.value)e.popListView.hide(),e.popListView.clearFilter();else{if(e.popListView.clearFilter(),e.multiSelect){for(var s=this.value.split(/[ ,，]+/g),n=0,o=s.length;n<o;n++)""!==s[n]&&e.popListView.addFilter(s[n],!1);e.popListView.doFilter(),s=null}else e.popListView.addFilter(this.value),e.popListView.setSelectByText(e.getText()+"");!e.popListView.isShow()&&e.popListView.length()>0?e._doDropList():e.popListView.isShow()&&0==e.popListView.length()&&(e.popListView.hide(),e.setFocus())}},setItemList:function(t){if(this.isArray(t)){if((h=t.length)>0&&"object"!=_typeof(t[0])){for(var e=[],i=0;i<h;i++){var s={};s[this.getOption().idkey]=t[i],s[this.getOption().capkey]=t[i],e.push(s)}t=e}this.option.data=t}if(null!=this._value&&""!==this._value&&""==this._text){for(var n=this.getInitData(),o=null,h=(i=0,n.length);i<h;i++)if(null!=(o=n[i])[this.getOption().idkey]&&o[this.getOption().idkey]==this._value||null==o[this.getOption().idkey]&&o[this.getOption().capkey]==this._value){this._text=o[this.getOption().capkey];break}this.refresh()}null!=this.popListView&&this.popListView.isShow()&&this.popListView.setItemList(this.getInitData()),this.changeState=!0,this.trigger("afterLoadData",[t]),this._valText=null},addItem:function(t){this._createPopObject(),this.popListView.addItem(t),this._valText=null},getItem:function(t){this._createPopObject(),this.popListView.getItem(t)},delItem:function(t){this._createPopObject(),this.popListView.delItem(t),this._valText=null},setSelectByText:function(t){this._createPopObject(),this.popListView.setSelectByText(t)},setSelect:function(t){this._createPopObject(),this.popListView.setSelect(t)},loadData:function(t){this.setItemList(t)},getData:function(){return this.getInitData()},setMultiSelect:function(t){this.multiSelect=t,this._createPopObject(),this.popListView.setMultiSelect(t)},setIdkey:function(t){this.base(t),this._createPopObject(),this.popListView.setIdkey(t)},dropPopView:function(){this._createPopObject();var t=this.popListView.getItem();null!=t&&t[this.getOption().idkey]==this._value||this.popListView.setSelect(this._value),this.button.onclick()},clearValue:function(){this.base();var t=this.getOption().viewType;"image"!=t&&"imageText"!=t||(this._image.style.backgroundColor="transparent")}}),_bindRenderFunc("qzzcombobox",t.ui.input.combobox),t.ui.input.combobox}),
/*!
 * 下拉框控件.
 * ecp.qzz.ui.input.combobox.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.iedit","qzz.ptreeview"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.combotree=t.Class(t.ui.input.edit,{_create:function(){this.base(),this.className="ComboTree",this.logInfo("select.create"),this.button=this.createElement("span"),this.caret=this.createElement("span"),this.keySelect=!0,this.changeState=!0,this._valText=null,this._clickIndex=0,this.multiSelect=this.getBooleanValue(this.getOption().multiple,!1),this.getOption().multiSelect=this.getBooleanValue(this.getOption().multiSelect,this.multiSelect),this.getOption().search=this.getBooleanValue(this.getOption().search,!1),this.getOption().more=this.getBooleanValue(this.getOption().more,!1)},_render:function(){this.base(),this.logInfo("select.render"),this.setStyle(this.button,"componet_ui_input_dropBotton"),this.setStyle(this.caret,"dropButton_caret"),this.button.appendChild(this.caret),"#FFFFFF"!==this.getOption().color&&"white"!==this.getOption().color||this.addStyle(this.caret,"white");var t=this;if(null!=this.getOption().data){var e=this.getOption().data;this._value=[],this._text=[];for(var i=0,s=e.length;i<s;i++)e[i].checked&&(this._value.push(e[i][this.getOption().idkey]),this._text.push(e[i][this.getOption().capkey]));!1===this.getOption().multiSelect&&0==this._value.length&&(this._value="",this._text="")}if(null==this.getOption().width||/\d+%$/.test(this.getOption().width)||this.setWidth(parseInt(this.getOption().width,10)),this.inputBox.onkeydown=this.doInput,this.inputBox.onkeyup=this.doInputerKeyUp,this._clickIndex=0,this.button.onclick=function(){t._enabled&&!0!==t.getOption().readOnly&&t._clickIndex%2==0&&(t.hasSelect=!0,t._doDropList(),t.selectState=!0),t._clickIndex++},this._value&&0!=this._value.length){this.initData=this.extend([],this.getOption().data);var n={};n[this.getOption().idkey]=this._value,n[this.getOption().capkey]=this._text,this.setValue(n)}},getInitData:function(){if(this.isEmpty(this.option.data)&&1!=this.hasInitSys){var t=this.initSysData();this.hasInitSys=!0,this.isArray(t)&&(this.option.data=t)}var e=this.option.data,i=this.option.needData;return this.isArray(i)&&i.length>0&&(e=null!=this.option.data?i.concat(this.option.data):i),e},value:function(t){if(null==t){var e=this.getValue();if(this.selectAll&&e&&"all"===e[0]){var i=this.getData();e=[];for(var s=0,n=i.length;s<n;s++)0===s&&"all"==i[s][this.getOption().idkey]||i[s].checked&&(e[e.length]=i[s][this.getOption().idkey])}return this.isArray(e)&&(e=e.join(",")),e}var o="";this.getOption().multiSelect&&(t=t.split(/[ ,，]+/g));var h=this.option.needData;if(!this.getOption().multiSelect&&this.isArray(h)&&h.length>0){n=0;for(var l=h.length;n<l;n++)if(h[n][this.getOption().idkey]==t){o=h[n][this.getOption().capkey];break}if(""!==o)return(a={})[this.getOption().idkey]=t,a[this.getOption().capkey]=o,void this.base(a)}var a,r=this.getInitData();if(this.isArray(r)){l=r.length;if(this.isArray(t)){o=[];s=0;for(var d=t.length;s<d;s++)for(n=0;n<l;n++)if(r[n][this.getOption().idkey]==t[s]){o.push(r[s][this.getOption().capkey]);break}}else for(s=0;s<l;s++)if(r[s][this.getOption().idkey]==t){o=r[s][this.getOption().capkey];break}}(a={})[this.getOption().idkey]=t,a[this.getOption().capkey]=o,this.base(a)},text:function(t){if(null==t){var e=this.getText();return"number"==typeof e?e+="":this.isArray(e)&&(e=e.join(",")),e}this.setText(t)},initSysData:function(){return this.option.data},doBlur:function(t){if(null!=this.popTreeView){var e=this.popTreeView.hasSelect;this.popTreeView._docMouseUp(),this.popTreeView.hasSelect=e}null!=this.popTreeView&&this.popTreeView.isFocus()||this.base()},getPopState:function(){var t=!1;return!0===this.base()?t=!0:null!=this.popTreeView&&!0===this.popTreeView.isShow()&&(t=!0),t},_createPopObject:function(){if(this.isEmpty(this.popTreeView)){var e=this.getInitData();this.popTreeView=new t.ui.drop.poptreeview(null,{cssPrefix:this._cssPrefix,data:e,selectAll:this.getOption().selectAll,multiSelect:this.getOption().multiSelect,fontSize:this.getOption().fontSize,leafOnly:this.getOption().leafOnly,search:this.getOption().search,more:this.getOption().more,treekey:this.getOption().treekey,idkey:this.getOption().idkey,fullPath:this.getOption().fullPath,fullCaption:this.getOption().fullCaption,capkey:this.getOption().capkey,pidkey:this.getOption().pidkey,radius:this.getOption().radius,checkFlag:this.getOption().checkFlag,unCheckFlag:this.getOption().unCheckFlag,showCount:this.getOption().showCount,filterTextOnly:this.getOption().filterTextOnly,rowHeight:this.getOption().rowHeight});var i=this;this.popTreeView.bind("onCheckChanged",function(t,e){var s=this.getSelectedData(),n=[],o=[],h=i.getOption().fullCaption;if(null!=h&&""!==h||(h=i.getOption().capkey),i.selectAll)if(i.selectAll&&"all"==_itemid&&s.length>0)n[0]=_itemid,o[0]=_itemtext;else{for(var l=this.view.list.getItemList(),a=0,r=0,d=l.length;r<d;r++)l[r].disabled&&!l[r].checked||a++;if(s.length!=a){r=0;for(var u=s.length;r<u;r++){if(0!==r||"all"!==s[r][i.getOption().idkey])null==(c=s[r][i.getOption().idkey])&&(c=s[r][i.getOption().itemCode]),n[r]=c,o[r]=s[r][h]}}else n[0]="all",o[0]="("+this.getI18n("qzz.all","全部")+")"}else for(r=0,u=s.length;r<u;r++){var c;null==(c=s[r][i.getOption().idkey])&&(c=s[r][i.getOption().itemCode]),n[r]=c,o[r]=s[r][h]}i._value=n,i._text=o,i._isChanged=!0,i.refresh(),i.trigger("onSelect",[t])}),this.popTreeView.onSelect=function(t){if(!i.getOption().multiSelect){var e=this.getValue(t);null==e&&(e=this.getDisplay(t));var s=this.getDisplay(t),n={};if(n[i.getOption().idkey]=e,n[i.getOption().capkey]=s,i.setValue(n),i.popTreeView.hide(),i.setFocus(),"function"==typeof i.onSelect)try{i.onSelect(t)}catch(t){i.logError("[onSelect]ERR:"+t.message)}i.trigger("onSelect",[t]),i.inputBox.focus(),i.setPosition(i.inputBox,i.inputBox.value.length)}},this.popTreeView.onHide=function(){if(i._popState=!1,i.clearBtn.style.display="none","function"==typeof i.onHide)try{i.onHide()}catch(t){i.logError("[onHide]ERR:"+t.message)}},this.popTreeView.bind("onMoreClick",function(){i.trigger("onMoreClick",[i])}),this.popTreeView.setParent(this.getPopContainer())}else if(this.changeState){e=this.getInitData();this.popTreeView.setItemList(e)}this.changeState=!1},setParent:function(t,e){this.base(t,e),this._clickIndex=0},refreash:function(){this.refresh()},refresh:function(){this.base();var t=this;this.inputBox.style.width=100-21/this.getWidth()+"%",this.thisWindow.appendChild(this.button),this.button.appendChild(this.caret),this.clearBtn.style.right="20px",this.caret.style.top=this.getHeight()/2-2+"px",!0!==this.getOption().disInput?this.inputBox.onclick=function(e){e=e||event;"function"==typeof t.onEditClick&&t.onEditClick(e)}:(this._clickIndex=0,this.inputBox.onclick=function(){t._enabled&&!0!==t.getOption().readOnly&&t._clickIndex%2==0&&(t.hasSelect=!0,t._doDropList(),t.selectState=!0),t._clickIndex++})},setWidth:function(t){this.base(t),t<150&&(t=150)},setSearch:function(t){this.getOption().search=this.getBooleanValue(t,!1)},setMore:function(t){this.getOption().more=this.getBooleanValue(t,!1)},doKeyUp:function(t,e){this.base(t,e),"IE"!==this.getBrowser()&&!0!==this.getPopState()&&(this.inputBox.focus(),e===this.keyBoard.UP?this.setPosition(this.inputBox,this.inputBox.value.length):e===this.keyBoard.ENTER&&(null==this.popTreeView||this.popTreeView.isShow()||this.postValue()))},doKeyDown:function(t,e){if(this.base(t,e),this._createPopObject(),!this.popTreeView.isShow())if(e===this.keyBoard.F2)this.button.onclick();else if(this.keySelect&&e===this.keyBoard.UP&&!this.getOption().multiSelect){if(null!=(i=this.popTreeView.getItem())&&i[this.getOption().idkey]==this._value||this.popTreeView.setSelect(this._value),this.popTreeView.prior(),null!=(s=this.popTreeView.getItem()))null==(n=s[this.getOption().idkey])&&(n=s[this.getOption().capkey]),(o={})[_this.getOption().idkey]=n,o[_this.getOption().capkey]=s[_this.getOption().capkey],this.setValue(o);s=null}else if(this.keySelect&&e===this.keyBoard.DOWN&&!this.getOption().multiSelect){var i,s,n,o;if(null!=(i=this.popTreeView.getItem())&&i[this.getOption().idkey]==this._value||this.popTreeView.setSelect(this._value),this.popTreeView.next(),null!=(s=this.popTreeView.getItem()))null==(n=s[this.getOption().idkey])&&(n=s[this.getOption().capkey]),(o={})[this.getOption().idkey]=n,o[this.getOption().capkey]=s[this.getOption().capkey],this.setValue(o);s=null}else e===this.keyBoard.ENTER&&(this.popTreeView.isShow()?this.popTreeView.selectIndex<0&&this.popTreeView.hide():(this.popTreeView.setBlur(),this.button.onclick()))},postValue:function(){this._createPopObject();var t=this.inputBox.value;if(!0!==this.notnull||""!==t){"string"==typeof t&&!0===this.getOption().escape&&(t=this._tagToText(t));var e=this.getOption().fullCaption;if(null!=e&&""!==e||(e=this.getOption().capkey),t.indexOf(",")<0){if(t!=this._text||1!=this.getOption().multiSelect){var i=this.popTreeView.indexOfText(t);if(null==i)if(1==this.getOption().readOnly&&""!==t)this.inputBox.value=this._text;else{var s=this.initData,n=[],o=[];if(s)for(var h=0,l=s.length;h<l;h++)s[h].disabled&&s[h].checked&&(n.push(s[h][this.getOption().idkey]),o.push(s[h][e]));d={},0===n.length?(d[this.getOption().idkey]=t,d[this.getOption().capkey]=t,this.setValue(d)):(d[this.getOption().idkey]=n,d[this.getOption().capkey]=o,this.setValue(d))}else{var a=i.data,r=a[this.getOption().idkey];null==r&&(r=t);var d={};d[this.getOption().idkey]=r,d[this.getOption().capkey]=t,!0===this.getOption().fullPath&&this.getText()===t||this.setValue(d),a=null}}}else{var u=t;if(this.isArray(u)&&(u=u.join(",")),1!=this.getOption().multiSelect||this._text!=u){var c=this;this.popTreeView.setSelectByText(t,function(t){for(var i=[],s=[],n=0,o=t.length;n<o;n++){var h=t[n][c.getOption().idkey];null==h&&(h=t[n][e]),i.push(h),s.push(t[n][e])}var l={};l[c.getOption().idkey]=i,l[c.getOption().capkey]=s,c.setValue(l)})}}}},_getTextByValue:function(t){if(""===t||null==t)return"";if(this.isEmpty(this._valText)){this._valText={};var e=!1;if(this.isArray(this.option.needData)){for(var i=this.option.needData.length,s=0;s<i;s++){"object"==(void 0===(n=this.option.needData[s])?"undefined":_typeof(n))?null!=n[this.getOption().idkey]?this._valText[n[this.getOption().idkey]]=n[this.getOption().capkey]||n[this.getOption().idkey]:this._valText[n[this.getOption().capkey]]=n[this.getOption().capkey]:n&&(this._valText[n]=n)}e=i>0}if(null==this._valText[t]&&this.isEmpty(this.option.data)&&this.getData(),this.isArray(this.option.data)){for(i=this.option.data.length,s=0;s<i;s++){var n;"object"==(void 0===(n=this.option.data[s])?"undefined":_typeof(n))?null!=n[this.getOption().idkey]?this._valText[n[this.getOption().idkey]]=n[this.getOption().capkey]||n[this.getOption().idkey]:this._valText[n[this.getOption().capkey]]=n[this.getOption().capkey]:this._valText[n]=n}e=e||i>0}if(0==e)return t}if(!0===this.getOption().fullPath){var o=t.split(".");t=o[o.length-1]}var h=this._valText[t];return h||(h=t),h},doInput:function(t){this.base(t)},_doDropList:function(){if(!0!==this.getOption().disabled&&(!0!==this.getOption().readOnly||1!=this.getOption().viewModel)&&(this.hasInitSys=!1,this._createPopObject(),null!=this.option.data&&0!==this.option.data.length||null!=this.option.needData&&0!==this.option.needData.length)){this.popTreeView.logInfo("click");var t=this.getNumberValue(this.getOption().popMinWidth,10);t>this.getWidth()?this.popTreeView.setWidth(t):this.popTreeView.setWidth(this.getWidth()),this.popTreeView.setSelectAll(this.selectAll);var e=this.getText();if(this.isArray(e)||"string"==typeof e||(e+=""),this.getOption().multiSelect){var i=this;this.popTreeView.clearSelectAll(function(){i.popTreeView.setSelectByText(e)})}else this.isArray(e)&&(e=e.join(",")),this.popTreeView.setSelectByText(e);if(this.getAXY(),this.popTreeView.execute(this.getContainer(),this.getHeight()),this._popState=!0,"function"==typeof this.onDrop)try{this.focus=!1,this.onDrop(this)}catch(t){this.logError("[onDrop]ERR:"+t.message)}}},doInputerKeyUp:function(t){var e=this.ctrl,i=(t=t||window.event).keyCode||t.charCode||t.which;if(i===e.keyBoard.ENTER||i===e.keyBoard.UP||i===e.keyBoard.DOWN||i===e.keyBoard.LEFT||i===e.keyBoard.RIGHT||i===e.keyBoard.F2||i===e.keyBoard.ESC||i===e.keyBoard.TAB||t.ctrlKey||i===e.keyBoard.CTRL||!0===e.getOption().readOnly)return t.returnValue=!1,!1;if(i==e.keyBoard.DEL&&!0!==e.getOption().notnull)return e._value="",e._text="",e.inputBox.value="",t.returnValue=!1,!1;if(e._createPopObject(),""===this.value)e.popTreeView.hide();else{if(e.getOption().multiSelect){for(var s=this.value.split(/[ ,，]+/g),n=0,o=s.length;n<o;n++)s[n];s=null}else e.popTreeView.setSelectByText(e.getText()+"");!e.popTreeView.isShow()&&e.popTreeView.length()>0?e._doDropList():e.popTreeView.isShow()&&0==e.popTreeView.length()&&(e.popTreeView.hide(),e.setFocus())}},setItemList:function(t){if(this.isArray(t)){if((h=t.length)>0&&"object"!=_typeof(t[0])){for(var e=[],i=0;i<h;i++){var s={};s[this.getOption().idkey]=t[i],s[this.getOption().capkey]=t[i],e.push(s)}t=e}this.option.data=t}if(null!=this._value&&""!==this._value&&""==this._text){for(var n=this.getInitData(),o=null,h=(i=0,n.length);i<h;i++)if(null!=(o=n[i])[this.getOption().idkey]&&o[this.getOption().idkey]==this._value||null==o[this.getOption().idkey]&&o[this.getOption().capkey]==this._value){this._text=o[this.getOption().capkey];break}this.refresh()}null!=this.popTreeView&&this.popTreeView.isShow()&&this.popTreeView.setItemList(this.getInitData()),this.changeState=!0,this.trigger("afterLoadData",[t]),this._valText=null},loadData:function(t){this.setItemList(t)},getData:function(){return this.getInitData()},setMultiSelect:function(t){this.getOption().multiSelect=t},setIdkey:function(t){this.base(t),this._createPopObject(),this.popTreeView.setIdkey(t)},dropPopView:function(){this._createPopObject(),this.button.onclick()}}),_bindRenderFunc("qzzcombotree",t.ui.input.combotree),t.ui.input.combotree}),
/*!
 * 日期控件.
 * ecp.qzz.ui.input.datepicker.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.iedit","qzz.pcalendar"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.datepicker=t.Class(t.ui.input.edit,{_create:function(){this.base(),this.className="DatePicker",this.logInfo("date.create"),this.button=this.createElement("span"),this.showTime=this.getBooleanValue(this.getOption().showTime,!1),this.cyctype=this.getOption().cyctype||"day",this.maxDate="9999-12-31",this.minDate="1000-01-01",this._clickIndex=0,this.dateObj=new t.date,this.dateObj.setCycType(this.cyctype),this.getOption().ecpDate=this.getBooleanValue(this.getOption().ecpDate,!1)},_render:function(){this.base(),this.calendar=new t.ui.drop.popcalendar(null,{cssPrefix:this._cssPrefix}),this.calendar.setCycType(this.cyctype),this.logInfo("date.render"),this.setStyle(this.button,"componet_ui_input_dateBotton"),"#FFFFFF"!==this.getOption().color&&"white"!==this.getOption().color||this.addStyle(this.button,"white"),this.isNotEmpty(this.getOption().maxDate)&&this.setMaxDate(this.getOption().maxDate),this.isNotEmpty(this.getOption().minDate)&&this.setMinDate(this.getOption().minDate),!0!==this.getOption().wrap&&(this.inputBox.style.whiteSpace="nowrap");var e=this;this._clickIndex=0,this.button.onclick=function(){e._doButtonClick()},!0===this.getOption().disInput&&(this.inputBox.onclick=function(){e._doButtonClick()}),this.calendar.onSelect=function(t){var i=t.getDate(),s=e._getTextByValue(i);e._checkRount(i);var n={};if(n[e.getOption().idkey]=i,n[e.getOption().capkey]=s,e.setValue(n),"function"==typeof e.onSelect)try{e.onSelect(i)}catch(t){e.logError("[onSelect]ERR:"+t.message)}e.trigger("onSelect",[i])},this.calendar.onHide=function(){if(e._popState=!1,e.clearBtn.style.display="none","function"==typeof e.onHide)try{e.onHide()}catch(t){e.logError("[onHide]ERR:"+t.message)}},this.calendar.setParent(this.getPopContainer())},setParent:function(t,e){this.base(t,e),this._clickIndex=0},_doButtonClick:function(){if(!0===this.getOption().disabled||!0===this.getOption().readOnly||this.calendar.isShow()||!0===this._justHide||this._clickIndex%2!=0)return this._justHide=!1,void this._clickIndex++;this._clickIndex++,this.logInfo("click");var t=this.getText();this.calendar.setDate(t),this.getAXY(),this.calendar.setCycType(this.cyctype),this.calendar.setShowTime(this.showTime),this.calendar.setMaxDate(this.maxDate),this.calendar.setMinDate(this.minDate),this.calendar.setFormatYear(this.getOption().formatYear),this.calendar.setFormatMonth(this.getOption().formatMonth),this.calendar.setFormatDay(this.getOption().formatDay),this.calendar.setFormatHour(this.getOption().formatHour),this.calendar.setFormatMinute(this.getOption().formatMinute),this.calendar.setFormatSecond(this.getOption().formatSecond),this.calendar.setDateSplit(this.getOption().dateSplit),this.calendar.setTimeSplit(this.getOption().timeSplit);var e=this.getALeft()+this.thisWindow.offsetWidth-this.calendar.getWidth();if(e<0&&(e=0),this.calendar.execute(this.getContainer(),this.getHeight()),this._popState=!0,"function"==typeof this.onDrop)try{this.onDrop(this)}catch(t){this.logError("[onDrop]ERR:"+t.message)}},_checkRount:function(t){this.calendar.setMaxDate(this.maxDate),this.calendar.setMinDate(this.minDate);var e=this.calendar.checkRound(t);return"max"===e.state?this.warnInfo=this.getI18n("qzz.dateMaxer","当前日期，大于最大日期")+this.maxDate:"min"===e.state?this.warnInfo=this.getI18n("qzz.dateMiner","当前日期，小于最小日期")+this.minDate:this.warnInfo="",e.date},_getTextByValue:function(t){var e=t;return/^\/Date\(/.test(e)&&(this.getOption().ecpDate=!0,e=this.dateObj.strToDate(e,this.showTime)),this.dateObj.getFormatDate(e)},postValue:function(){if(this.calendar.isShow())return!1;var t=this.inputBox.value;if("object"==(void 0===t?"undefined":_typeof(t))&&(t=t[this.getOption().capkey],""!==this.trim(this.inputBox.value)&&t!=this.trim(this.inputBox.value)&&(t=this.inputBox.value)),""!==t||!0!==this.notnull)if(""!==t){var e=this.calendar.checkDate(t);if(this._checkRount(e),""!==e){var i=this._getTextByValue(e),s={};s[this.getOption().idkey]=e,s[this.getOption().capkey]=i,this.setValue(s)}}else this.setValue(t)},doBlur:function(t){this.base(),null!=this.calendar&&(this.calendar.isFocus()&&!0!==t?this._clickIndex=0:this.calendar.setBlur())},setShowTime:function(t){this.showTime=this.getBooleanValue(t,!1)},doKeyDown:function(t,e){this.base(t,e),e===this.keyBoard.F2&&this.button.onclick()},doChange:function(t){var e=t.value;"string"==typeof e&&(t.value=e.replace(/[^1234567890:\-\/ ]/g,""))},setCycType:function(t){this.cyctype=t,this.dateObj.setCycType(t),null!=this._value&&0!==this._value&&(this._text=this._getTextByValue(this._value),this.refresh())},refreash:function(){this.refresh()},refresh:function(){this.base();var t=this.getWidth()-20;t<1&&(t=1),this._clickIndex=0,this.inputBox.style.width=t+"px",this.button.style.height=this.getHeight()-2+"px",this.button.style.backgroundPosition="left center",this.thisWindow.appendChild(this.button),this.clearBtn.style.right="20px"},setMaxDate:function(t){this.maxDate=t},setMinDate:function(t){this.minDate=t},setFormatYear:function(t){this.getOption().formatYear=t},setFormatMonth:function(t){this.getOption().formatMonth=t},setFormatDay:function(t){this.getOption().formatDay=t},setFormatHour:function(t){this.getOption().formatHour=t},setFormatMinute:function(t){this.getOption().formatMinute=t},setFormatSecond:function(t){this.getOption().formatSecond=t},setDateSplit:function(t){this.getOption().dateSplit=t},setTimeSplit:function(t){this.getOption().timeSplit=t},getPopState:function(){var t=!1;return!0===this.base()?t=!0:null!=this.calendar&&!0===this.calendar.isShow()&&(t=!0),t},setValue:function(t){"string"==typeof t&&(t=this.dateObj.formatDate(t)),this.base(t),!0===this.getOption().ecpDate&&!1===/^\/Date\(/.test(this._value)&&(this._value=this.dateObj.parseEcpDate(this._value))},dropPopView:function(){this.button.onclick()}}),_bindRenderFunc("qzzdatepicker",t.ui.input.datepicker),t.ui.input.datepicker}),
/*!
 * 弹出输入控件.
 * ecp.qzz.ui.input.buttonedit.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.iedit"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.buttonedit=t.Class(t.ui.input.edit,{_create:function(){this.base(),this.className="ButtonEdit",this.logInfo("date.create"),this.transIDName={},this.button=this.createElement("span")},_render:function(){this.base(),this.logInfo("date.render"),this.setStyle(this.button,"componet_ui_input_showBotton"),this._setHtml(this.button,"..."),this.button._this=this,this.button.onclick=this.doButtonClick},setButtonStyle:function(t){"date"==t?t="componet_ui_input_dateBotton":"drop"==t&&(t="componet_ui_input_dropBotton"),this.setStyle(this.button,t)},doButtonClick:function(){var t=this._this;if(!0===t._enabled&&!0!==t.getOption().readOnly){if(t.logInfo("buttonEdit.click"),"function"==typeof t.onButtonClick)try{t.onButtonClick()}catch(e){t.logError("[onButtonClick]ERR:"+e.message)}t.trigger("onButtenClick",[])}},doBlur:function(t){this.base(t)},doKeyDown:function(t,e){this.base(t,e),e===this.keyBoard.F2&&this.button.onclick()},postValue:function(){var t=this.inputBox.value;if(""!==t||!0!==this.notnull)if("string"==typeof t&&!0===this.getOption().escape&&(t=this._tagToText(t)),this.isEmpty(t)){(e={})[this.getOption().idkey]=t,e[this.getOption().capkey]=t,this.setValue(e)}else{var e,i=this._value,s=!0;if(this.isNotEmpty(this.transIDName)&&null!=this.transIDName&&null!=this.transIDName[this._value]){if(this.transIDName[this._value]!=t){for(var n in s=!1,this.transIDName)if(this.trim(this.transIDName[n])==this.trim(t)){i=n,s=!0;break}!1===s&&(i=t)}}else"string"==this.getOption().dataType&&i!==t&&(i=t);if(!0!==this.getOption().filterOnly||!0===s)(e={})[this.getOption().idkey]=i,e[this.getOption().capkey]=t,this.setValue(e)}},refreash:function(){this.refresh()},refresh:function(){this.docFragment.appendChild(this.button),this.base(),this.inputBox.style.width=this.getWidth()-20+"px",this.button.style.lineHeight=this.getHeight()/2+"px",this.thisWindow.appendChild(this.button),this._setHtml(this.button,"..."),this.clearBtn.style.right="20px"},setTransIDName:function(t){this.transIDName=t},addTransIDName:function(t){var e=this.transIDName;if(null==e)this.transIDName=t;else if(null!=t&&null!=t)for(var i in t)e[i]=t[i];e=null},setMultiSelect:function(t){this.multiSelect=t}}),_bindRenderFunc("qzzbuttonedit",t.ui.input.buttonedit),t.ui.input.buttonedit}),
/*!
 * 开关控件.
 * ecp.qzz.ui.switch.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.button"],function(){var t=window.qzz;return t.space("ui.input"),t.ui.input.switch=t.Class(t.ui.button,{_create:function(){this.className="switch",this.getOption().move=!0,this.getOption().width=40,this.getOption().height=20,this.getOption().common=["onoff_off","onoff_on"],this.base()}}),_bindRenderFunc("qzzswitch",t.ui.input.switch),t.ui.input.switch}),
/*!
 * 列表盒.
 * ecp.qzz.ui.listbox.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.panel","qzz.list","qzz.paged"],function(){var t=window.qzz;return t.space("ui"),t.ui.listbox=t.Class(t.ui.panel,{_create:function(){this.base(),this.getOption().rowHeight=this.getOption().rowHeight||100,this.getOption().groupHeight=this.getOption().groupHeight||60,this.getOption().autoHeight=this.getBooleanValue(this.getOption().autoHeight,!0),this.getOption().autoWidth=this.getBooleanValue(this.getOption().autoWidth,!0),this.getOption().fieldList=this.getOption().fieldList||[],this.getOption().captionList=this.getOption().captionList||[],this.getOption().desc=this.getBooleanValue(this.getOption().desc,!0),this.getOption().pageSize=this._getNumberValue(this.getOption().pageSize,10),this.getOption().pageIndex=this._getNumberValue(this.getOption().pageIndex,1),this.getOption().colRects=this.getOption().colRects||[3,3,2,2,2],this.getOption().colCount=this.getOption().colRects.length,null==this.getOption().pageSizeList&&(this.getOption().pageSizeList=[10,25,50,100,200,this.getI18n("qzz.all","全部")]),this._itemList=new t.list,this.isArray(this.getOption().dataList)&&(this._itemList.setItemList(this.getOption().dataList),null!=this.getOption().sort&&this._itemList.sort(this.getOption().sort,this.getOption().desc),this.getOption().totalCount=this._itemList.length()),this._selectRowId=null,this._selectItem=null,this.getOption().idkey=this.getOption().idkey||""},_render:function(){if(this.base(),this._boxTab=this.createElement("TABLE"),this.setStyle(this._boxTab,"winStyle"),this._boxTab.style.borderWidth="0px",this.thisWindow.appendChild(this._boxTab),!1!==this.getOption().pager){this.pageObj=new t.ui.paged({totalCount:this.getOption().totalCount}),this.pageObj.setPageSizeList(this.getOption().pageSizeList);var e=this;this.pageObj.bind("onPageChanged",function(t,i,s){e.getOption().pageCount=t,e.getOption().pageSize=i,e.getOption().pageIndex=s,e.trigger("onPageChanged",[t,i,s]),e._isNewPage=!0,e.refresh(),e._isNewPage=!1})}this.refresh()},_autoWidth:function(){this.getOption().autoWidth&&(this.thisWindow.style.width="100%")},getWidth:function(){return this.getOption().autoWidth?this.thisWindow.offsetWidth:this.base()},_afterRender:function(){this.base()},_refreshBox:function(t,e,i){if(this.hasbind("onFormat")){var s=this.trigger("onFormat",[t,e,this.getOption(),i]);null!=s&&("string"==typeof s?this._setHtml(t,s,!1):s.length>0?t.appendChild(s[0]):t.appendChild(s))}else{var n=this.getModelAsJson(),o={},h=this,l=this.getOption().subTitleFields;if(null!=l){this.subTitleDiv=this.createElement("DIV"),this.setStyle(this.subTitleDiv,"listbox_portlet_title"),t.appendChild(this.subTitleDiv),this.subTitleDiv.innerHTML="";for(var a=0,r=l.length;a<r;a++){var d=l[a];if(o[d]=!0,null!=(x=n[d])){null!=(b=x.caption||"")&&""!==b&&(b+="："),null==(_=e[d])&&(_=""),x&&"number"==x.dataType&&""!==_&&!isNaN(_)&&(_=this._formatNumber(x,_)),x&&null!=x.color&&""!==x.color&&(_='<font color="'+x.color+'">'+_+"</font>");var u=b+_;this.hasbind("onFormat_"+x.name)&&(u=this.trigger("onFormat_"+x.name,[x,x.caption,e[d],u])),a<r-1&&(u+="&nbsp;&nbsp;,&nbsp;"),(v=this.createElement("span")).innerHTML=u,!0===x.link&&(this.setStyle(v,"link"),v._cm=x,v._item=e,v._index=i,v.onclick=function(){h.trigger("onLinkClick",[this._cm,this._item,this._index])}),this.trigger("onCellDraw_"+x.name,[v,x,e,i]),this.subTitleDiv.appendChild(v)}}this.trigger("onSubTitleDraw",[this.subTitleDiv,e,i])}this.bodyDiv=this.createElement("DIV"),this.setStyle(this.bodyDiv,"listbox_portlet_body"),t.appendChild(this.bodyDiv);var c=this.createElement("DIV");this.setStyle(c,"row"),this.bodyDiv.appendChild(c);var g=[],p=null,f=this.getOption().colCount||5;for(a=0;a<f;a++)p=this.createElement("DIV"),this.setStyle(p,"col-sm-"+this.getOption().colRects[a]),this.addStyle(p,"col-xs-6"),c.appendChild(p),g.push(p),this.trigger("onColDraw",[p,e,a]);if(null!=this.getOption().colModels){var y=this.getOption().colModels,m=this.getOption().colNames,C=!0===this.getOption().hideEmptyCol,S=0;for(a=0,r=y.length;a<r;a++){var x,_=e[(x=y[a]).name];if(!0!==o[x.name]&&this.getOption().group!=x.name&&!0!==x.hidden&&(!0!==C||null!=_&&""!==_&&0!==_)){var b;null!=(b=m[a]||"")&&""!==b&&(b+="："),null==_&&(_=""),"number"!=x.dataType||""===_||isNaN(_)||(_=this._formatNumber(x,_)),null!=x.color&&""!==x.color&&(_='<font color="'+x.color+'">'+_+"</font>"),p=g[S%f];var v=this.createElement("p");!0===x.link&&(this.setStyle(v,"link"),v._cm=x,v._item=e,v._index=i,v.onclick=function(){h.trigger("onLinkClick",[this._cm,this._item,this._index])});u=b+_;this.hasbind("onFormat_"+x.name)&&(u=this.trigger("onFormat_"+x.name,[x,x.caption,e[x.name],u])),v.innerHTML=u,this.trigger("onCellDraw_"+x.name,[v,x,e,i]),p.appendChild(v),S++}}}for(a=0;a<f;a++)p=g[a],this.trigger("onAfterColDraw",[p,e,a])}},collapse:function(t){for(var e=0,i=t.rowIndex+1,s=this._boxTab.rows.length;i<s;i++){var n=this._boxTab.rows[i],o=n.offsetHeight;if(this.getBooleanValue(n.getAttribute("isGroup"),!1))break;n.style.display="none",0==o&&(o=this.getOption().rowHeight),e+=o}this.getOption().autoHeight?this.thisWindow.style.height="100%":this.setHeight(this.getHeight()-e),t.isExpand=!1},expand:function(t){for(var e=0,i=t.rowIndex+1,s=this._boxTab.rows.length;i<s;i++){var n=this._boxTab.rows[i];if(this.getBooleanValue(n.getAttribute("isGroup"),!1))break;n.style.display="";var o=n.offsetHeight;0==o&&(o=this.getOption().rowHeight),e+=o}this.getOption().autoHeight?this.thisWindow.style.height="100%":this.setHeight(this.getHeight()+e),t.isExpand=!0},getModelAsJson:function(){for(var t={},e=this.getOption().colModels,i=0,s=e.length;i<s;i++){var n=e[i];n.caption=this.getOption().colNames[i],t[n.name]=n}return t},getColModel:function(t){for(var e=null,i=this.getOption().colModels,s=0,n=i.length;s<n;s++){var o=i[s];if(o.name===t){e=o;break}}return e},refresh:function(){this._boxTab.style.width="100%";var t,e=this,i=null,s=0,n=null,o=0,h={},l=this._itemList.length(),a=0;!0===this.getOption().pager&&(this.getOption().pageSize===this.getI18n("qzz.all","全部")||this.hasbind("onPageChanged")?a=0:(a=(this.getOption().pageIndex-1)*this.getOption().pageSize,(l=this.getOption().pageSize+a)>this._itemList.length()&&(l=this._itemList.length())));var r=this.getModelAsJson(),d=this.getOption().titleFields;if(null!=d)for(var u=0,c=d.length;u<c;u++){"sum"==(H=d[u]).type?H.value=0:"rect"==H.type&&(H.value={max:"",min:""})}var g=0;!1!==this.getOption().pager&&this.pageObj.setParent(this.thisWindow);for(var p=null,f=null,y=null;a<l;a++,g++){if(p=this._itemList.getItem(a),null!=this.getOption().group&&null!=(t=p[this.getOption().group])&&i!=t){g+s<this._boxTab.rows.length?((f=this._boxTab.rows[g+s]).style.display="",f.cells.length>0?(y=f.cells[0],this._setHtml(y,"",!1)):y=f.insertCell(0)):(y=(f=this._boxTab.insertRow(g+s)).insertCell(0),this._setHtml(y,"",!1)),y.onclick=null,f.style.display="";var m=this.createElement("TABLE");this.setStyle(m,"noborder"),m.style.width="100%";var C=m.insertRow(0),S=C.insertCell(0);this.setStyle(S,"listbox_expand"),y.expandtd=S;var x=C.insertCell(1);if(x.style.textAlign="left",x.style.border="0px solid #cecece",y.texttd=x,!0!==this._isNewPage&&!1===f.isExpand?this._setHtml(S,"+",!1):(f.isExpand=!0,this._setHtml(S,"-",!1)),S.row=f,S.onclick=function(){this.row.isExpand?(e.collapse(this.row),e._setHtml(this,"+",!1)):(e.expand(this.row),e._setHtml(this,"-",!1))},m.style.height=this.getOption().groupHeight+"px",y.appendChild(m),this.setStyle(y,"listbox_group"),y.style.height=this.getOption().groupHeight+"px",!0===this.hasbind("onGroupFormat"))"string"==typeof(R=this.trigger("onGroupFormat",[y.texttd,p,o,this.getOption()]))?this._setHtml(y.texttd,R,!1):R.length>0?y.texttd.appendChild(R[0]):y.texttd.appendChild(R);else this._setHtml(y.texttd,t,!1);if(f.setAttribute("isGroup",!0),0==(I=y.offsetHeight)&&(I=this.getOption().groupHeight),I,null!=n)if(this.hasbind("onGroupFormat")){"string"==typeof(R=this.trigger("onGroupFormat",[y.texttd,p,o,this.getOption()]))?this._setHtml(y.texttd,R,!1):R.length>0?y.texttd.appendChild(R[0]):y.texttd.appendChild(R)}else{var _=n.texttd.innerHTML;_=n.texttd.innerHTML;null!=(Z=this.getOption().groupCaption||"")&&""!==Z&&(Z+=":");var b='<font style="font-size:16px;">'+Z+_+"</font>";if(this.hasbind("onFormat_"+this.getOption().group)){var v=r[this.getOption().group];_=this.trigger("onFormat_"+this.getOption().group,[v,this.getOption().groupCaption||"",_,b])}if(sumAry=[],null!=d&&d.length>0)for(u=0,c=d.length;u<c;u++){v=r[(H=d[u]).name];""!==(M=H.caption||"")&&(M+="：");var w=H.value;if("sum"==H.type)"number"!=v.dataType||null==w||""===w||isNaN(w)||(w=this._formatNumber(v,w)),H.value=0;else if("rect"==H.type){var N=H.value.min,O=H.value.max;"number"==v.dataType&&(null==N||""===N||isNaN(N)||(N=this._formatNumber(v,N)),null==O||""===O||isNaN(O)||(O=this._formatNumber(v,O))),w=N==O?N:N+"~"+O,H.value={max:"",min:""}}var T=w;null!=H.color&&""!==H.color&&(w='<font color="'+H.color+'">'+w+"</font>");var L=M+w;this.hasbind("onFormat_"+H.name)&&(L=this.trigger("onFormat_"+H.name,[H,H.caption,T,L])),sumAry.push(L)}this._setHtml(n.texttd,b+"&nbsp;&nbsp;&nbsp;"+sumAry.join("&nbsp;&nbsp;&nbsp;&nbsp;")+"&nbsp;&nbsp;|&nbsp;&nbsp;共计"+o+"记录",!1);var k=n.parentElement;!0!==this._isNewPage&&!1===k.isExpand&&this.collapse(k)}n=y,o=0,i=t,s++}g+s<this._boxTab.rows.length?((f=this._boxTab.rows[g+s]).style.display="",f.cells.length>0?((y=f.cells[0]).style.textAlign="",this._setHtml(y,"",!1)):y=f.insertCell(0)):(y=(f=this._boxTab.insertRow(g+s)).insertCell(0),this._setHtml(y,"",!1)),y.onclick=function(t){e.trigger("onCellClick",[t,this.parentNode.item])},f.item=p,f.style.display="",f.setAttribute("isGroup",!1);e=this;if(f.ondblclick=function(t){t=t||window.event;e._selectItem=this.item,e.trigger("onDBClick",[t,this.item])},f.onclick=function(t){t=t||window.event;e._selectItem=this.item,e.trigger("onClick",[t,this.item]),""!==e.getOption().idkey&&(e._selectRowId=this.item[e.getOption().idkey],e._asynRun(function(){e.refresh()},20))},null!=this.getOption().idkey&&""!==this.getOption().idkey&&(null!=this._selectRowId&&""!==this._selectRowId&&p[this.getOption().idkey]==this._selectRowId?f.style.backgroundColor="#F9F9F9":f.style.backgroundColor=""),this.setStyle(y,"listbox"),y.style.height=this.getOption().rowHeight+"px",this._refreshBox(y,this._itemList.getItem(a),a),o++,null!=d&&d.length>0)for(u=0,c=d.length;u<c;u++){w=p[(H=d[u]).name],v=r[H.name];if("rect"==H.type){if(v&&"date"==v.dataType){var B=!1;if(null==H.value.min||""===H.value.min)H.value.min=w;else{var Y=new Date(H.value.min);new Date(w)<Y&&(H.value.min=w,B=!0)}if(!1===B)if(null==H.value.max||""===H.value.max)H.value.max=w;else{Y=new Date(H.value.max);new Date(w)>Y&&(H.value.max=w)}}else if(!isNaN(w)){B=!1;if(null==H.value.min||""===H.value.min)H.value.min=w;else{Y=parseFloat(H.value.min,10);parseFloat(w,10)<Y&&(H.value.min=w,B=!0)}if(!1===B)if(null==H.value.max||""===H.value.max)H.value.max=w;else{Y=parseFloat(H.value.max,10);parseFloat(w,10)>Y&&(H.value.max=w)}}}else"sum"==H.type&&(null==w||""===w||isNaN(w)||(H.value+=parseFloat(w,10)))}if(null!=h)for(var D in h){v=r[D],w=p[D];"date"==v.dataType?"object"!=_typeof(h[D])&&(h[D]={max:w,min:w}):null==w||""===w||isNaN(w)||(h[D]+=parseFloat(w,10))}0==(I=y.offsetHeight)&&(I=this.getOption().rowHeight),I}if(!1!==this.getOption().pager){var I;f=null;g+s<this._boxTab.rows.length?((f=this._boxTab.rows[g+s]).style.display="",f.cells.length>0?(y=f.cells[0],this._setHtml(y,"",!1)):y=f.insertCell(0)):y=(f=this._boxTab.insertRow(g+s)).insertCell(0),this.pageObj.setParent(y),y.style.height="40px",y.style.textAlign="right",0==(I=y.offsetHeight)&&(I=40),I,y.style.paddingRight="8px",this.setStyle(y,"listbox_group"),f.setAttribute("isGroup",!0),f.ondblclick=null,f.onclick=null}for(a++;this._boxTab.rows.length>g+s+1;)this._boxTab.deleteRow(g+s+1);if(null!=this.getOption().group&&!1===this.getOption().pager&&null!=n)if(this.hasbind("onGroupFormat")){var R;"string"==typeof(R=this.trigger("onGroupFormat",[y.texttd,p,o,this.getOption()]))?this._setHtml(y.texttd,R,!1):R.length>0?y.texttd.appendChild(R[0]):y.texttd.appendChild(R)}else{var Z;_=n.texttd.innerHTML,_=n.texttd.innerHTML;null!=(Z=this.getOption().groupCaption||"")&&""!==Z&&(Z+=":");b='<font style="font-size:16px;">'+Z+_+"</font>";if(this.hasbind("onFormat_"+this.getOption().group)){v=r[this.getOption().group];_=this.trigger("onFormat_"+this.getOption().group,[v,this.getOption().groupCaption||"",_,b])}if(sumAry=[],null!=d&&d.length>0)for(u=0,c=d.length;u<c;u++){var H,M;v=r[(H=d[u]).name];""!==(M=H.caption||"")&&(M+="：");w=H.value;if("sum"==H.type)v&&"number"==v.dataType&&null!=w&&""!==w&&!isNaN(w)&&(w=this._formatNumber(v,w)),H.value=0;else if("rect"==H.type){N=H.value.min,O=H.value.max;v&&"number"==v.dataType&&(null==N||""===N||isNaN(N)||(N=this._formatNumber(v,N)),null==O||""===O||isNaN(O)||(O=this._formatNumber(v,O))),w=N==O?N:N+"~"+O,H.value={max:"",min:""}}T=w;null!=H.color&&""!==H.color&&(w='<font color="'+H.color+'">'+w+"</font>");L=M+w;this.hasbind("onFormat_"+H.name)&&(L=this.trigger("onFormat_"+H.name,[H,H.caption,T,L])),sumAry.push(L)}this._setHtml(n.texttd,b+"&nbsp;&nbsp;&nbsp;"+sumAry.join("&nbsp;&nbsp;")+"&nbsp;&nbsp;|&nbsp;&nbsp;共计"+o+"记录",!1);k=n.parentElement;!0!==this._isNewPage&&!1===k.isExpand&&this.collapse(k)}this.getOption().autoHeight&&(this.thisWindow.style.height="100%"),this._autoWidth()},_formatNumber:function(t,e){"number"!=typeof e&&(e=parseFloat(e,10)),this.isNotEmpty(t.numUnit)&&(e/=parseFloat(t.numUnit,10));var i=t.precision||t.dataScale||t.scale||0;i<0&&(i=0);var s=new Number(e);return t.hideZero&&0==s?e="":(e=s.toFixed(i),i<7&&(e+"").indexOf("e")>0&&(e=0),!0!==t.noFormat&&(e=this.numberFormat(e)),t.numUnit==this.numUnit.perthousand?e+="‰":t.numUnit==this.numUnit.percent&&(e+="%")),e},doBlur:function(){this.base(),this._selectRowId="",this.refresh()},setSort:function(t){null!=t&&""!==t&&this.getOption().sort!=t&&(this.getOption().sort=t,this._itemList.sort(this.getOption().sort,this.getOption().desc))},setGroup:function(t){null!=t&&""!==t&&this.getOption().group!=t&&(this.getOption().group=t)},setTotalCount:function(t,e){this.getOption().totalCount=parseInt(t,10),this.pageObj.setTotalCount(this.getOption().totalCount,e)},each:function(t){for(var e=this._itemList.length(),i=0;i<e;i++){var s=this._itemList.getItem(i);if("function"==typeof t)if(!1===t.call(this,s,i))break}},getItemById:function(t){var e=null;if(this.getOption().idkey){var i=this;this.each(function(s,n){if(s[i.getOption().idkey]==t)return e=s,!1})}return e},value:function(t){if(null==t)return this.getOption().dataList;this.getOption().dataList=t,this.isArray(this.getOption().dataList)&&(this._itemList.setItemList(this.getOption().dataList),null!=this.getOption().sort&&this._itemList.sort(this.getOption().sort,this.getOption().desc),!1!==this.getOption().pager&&!1===this.hasbind("onPageChanged")&&(this.getOption().totalCount=this._itemList.length(),this.pageObj.setTotalCount(this.getOption().totalCount)),this.refresh())},triggerEvent:function(){!1!==this.getOption().pager&&this.trigger("onPageChanged",[this.pageObj.getPageCount(),this.pageObj.getPageSize(),this.pageObj.getPageIndex()])},getPageCount:function(){return this.pageObj.getPageCount()},getPageSize:function(){return this.pageObj.getPageSize()},getPageIndex:function(){return this.pageObj.getPageIndex()},getCurItem:function(){return this._selectItem}}),_bindRenderFunc("qzzlistbox",t.ui.listbox),t.ui.listbox}),
/*!
 * 远光ECP平台3.4版本
 * 树表格控件： qzz.ui.qzz
 * ecp.qzz.ui.querygrid.js
 * ecp按钮与菜单控件命名空间
 * @name qzz.ui
 * @namespace qzz.ui
 * @requires qzz.ui.Frame
 * mdf qinzhenzhou222
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.frame","qzz.treedataset","qzz.button","qzz.pmenu","qzz.pfilter","qzz.paged","qzz.coldesign","qzz.icheckbox","qzz.pbubble"],function(){var t=window.qzz;return t.space("ui"),t.ui.querygrid=t.Class(t.ui.frame,{_create:function(){if(this.base(),this.className="QueryGrid",this.logBegin("QueryGrid.create"),this.container=null,this.sheets=[],this.rowHeight=36,this.titleRowCount=0,this.colCount=0,this.rowCount=0,this.allCount=0,this.gridWidth=0,this.gridHeight=0,this.gridTable=null,this.topNode=null,this.topIndex=0,this.visibleCount=0,this.colIndex=1,this.selRect={beginRowNode:null,endRowNode:null,beginColIndex:1,endColIndex:1},this._selRect={},this._curNode=null,this._addNew=!1,this._editTypes={},this.isSelect=!0,this.rendered=!1,this.titleMouseDown=!1,this.dataSet=new t.treedataset,this.dataSet.setName(this.getName()),this.multiSelect=!1,this.virtual=!1,this.dataPost=!0,this.scrollMouseDown=!1,this.radioCheck={},!0===this.getOption().totalRever?(this.summaryText=this.getI18n("qzz.pageSummary","小计"),this.subtotalText=this.getI18n("qzz.summary","合计")):(this.summaryText=this.getI18n("qzz.summary","合计"),this.subtotalText=this.getI18n("qzz.pageSummary","小计")),this.numberCaption=this.getI18n("qzz.index","序号"),this.sortTables={},this.mouseEdit=!1,this._setTimeoutStack={},this.dataSet.open(),this.logEnd("TreeDataGrid.create"),null==this.dataSet.onChanged){var e=this;this.dataSet.onChanged=function(t){if(e.logInfo("row changed event"),e.hasbind("rowChanged")&&e.trigger("rowChanged",[t]),"function"==typeof e.onRowChanged)try{e.onRowChanged(t)}catch(t){e.logError("onRowChanged event fire error!")}e.trigger("onRowChanged",[t])}}this._eventMethods={}},_render:function(){var e;this.isNotEmpty(this._control)&&this._control.length>0?e=this._control[0]:this.isNotEmpty(this._control)?e=this._control:(e=this.createElement("table"),this._control=e),this._control=e,this.control=this._toJqueryObj(this._control),e.style.height="";var i=this._control.parentElement;if(this.thisWindow=this.createElement("DIV"),this.thisWindow.style.overflow="hidden",this.setStyle(this.thisWindow,"winStyle"),null!=i){for(var s=-1,n=0,o=i.childNodes.length;n<o;n++)if(i.childNodes[n]===e){s=n;break}s>=0?i.insertBefore(this.thisWindow,i.childNodes[s]):i.appendChild(this.thisWindow)}this._initOption(),this.dataSet.reverGJ=this.getOption().reverGJ,this.dataSet.sumAllLevel=this.getOption().sumAllLevel,this.dataSet.defSelect=this.getOption().defSelect;var h=this.getCurrentStyle(i);"alClient"==this.getAlign()||null==h||"auto"===h.width||!this.getOption().autoEcpWidth&&null!=this.getOption().width&&10!==this.getOption().width?this.getOption().width=this._getNumberValue(this.getOption().width,this.getOption().width):this.getOption().width=this._getNumberValue(h.width),this.getOption().width<=0&&(10!=this.getOption().width?this.getOption().width=this.getOption().width:this.getOption().width=40);var l,a=10;(null!=h&&"auto"!==h.height&&(a=this._getNumberValue(h.height)),"alClient"!=this.getAlign()&&a>10&&(this.getOption().autoEcpHeight||null==this.getOption().height||10===this.getOption().height)?this.getOption().height=a:(this.getOption().height<=0&&(this.getOption().height=200),this.getOption().height=this._getNumberValue(this.getOption().height,this.getOption().height)),this.getOption().height<30&&(this.getOption().height=30),this.isNotEmpty(this.getOption().multiselect)?(this.multiSelect=this.getOption().multiselect,this.dataSet.setMultiSelect(this.multiSelect)):null!=this.getOption().multiSelect&&(this.multiSelect=this.getOption().multiSelect,this.dataSet.setMultiSelect(this.multiSelect)),this.isNotEmpty(this.getOption().checkFlag))&&((l=this.getOption().checkFlag).indexOf("p")>=0&&(this.dataSet.autoCheckType.autoCheckAllParent=!0),l.indexOf("s")>=0&&(this.dataSet.autoCheckType.autoCheckAllChild=!0),l.indexOf("b")>=0&&(this.dataSet.autoCheckType.autoCheckBrother=!0),l.indexOf("e")>=0&&(this.dataSet.autoCheckType.autoCheckAllParentExt=!0));this.isNotEmpty(this.getOption().unCheckFlag)&&((l=this.getOption().unCheckFlag).indexOf("p")>=0&&(this.dataSet.autoCheckType.autoUnCheckAllParent=!0),l.indexOf("s")>=0&&(this.dataSet.autoCheckType.autoUnCheckAllChild=!0),l.indexOf("b")>=0&&(this.dataSet.autoCheckType.autoUnCheckBrother=!0),l.indexOf("e")>=0&&(this.dataSet.autoCheckType.autoUnCheckAllParentExt=!0));var r=this._control.getAttribute("dataField");null!=r&&""!==r&&this.setName(r),this.isNotEmpty(this.getName())&&this.dataSet.setName(this.getName()),this.dataSet.keyName=this.getPKeyName(),this.dataSet.itemCode=this.dataSet.keyName,this.base(),this.logBegin("TreeDataGrid.render"),this.gridTable=e,this.setStyle(this.gridTable,"treeListGrid"),this.sumTable=this.createElement("table"),this.setStyle(this.sumTable,["treeListGrid","footerRow"]);var d=this.rowHeight;this.getOption().pager&&(this._pageBoxHeight=30,this._pageBoxHeight<this.getOption().titleRowHeight&&(this._pageBoxHeight=this.getOption().titleRowHeight),d+=this._pageBoxHeight),this.sumTable.style.bottom=d+"px",this.getBrowser("msie")||(this.gridTable.style.tableLayout="fixed",this.sumTable.style.tableLayout="fixed"),this.gridTable.onselectstart=this._onselectstart,this.gridTable.oncontextmenu=function(t){return!1},this.sumTable.onselectstart=this._onselectstart,this.sumTable.oncontextmenu=function(t){return!1},this._initPagerBox();var u=this.createElement("DIV");if(this.fzGridSheetsDiv=u,this.setStyle(u,"fixDiv"),this.fzGridTable=this.createElement("table"),this.fzGridTable.style.top="0px",this.setStyle(this.fzGridTable,"treeListGrid"),this.fzSumTable=this.createElement("table"),this.setStyle(this.fzSumTable,["treeListGrid","fzFooterRow"]),this.getBrowser("msie")||(this.fzGridTable.style.tableLayout="fixed",this.fzSumTable.style.tableLayout="fixed"),this.fzGridTable.onselectstart=this._onselectstart,this.fzGridTable.oncontextmenu=function(t){return!1},this.fzSumTable.onselectstart=this._onselectstart,this.fzSumTable.oncontextmenu=function(t){return!1},u.appendChild(this.fzGridTable),u.appendChild(this.fzSumTable),this.mainbox.appendChild(u),this.emptyDiv=this.createElement("DIV"),this._setHtml(this.emptyDiv,this.getI18n("qzz.emptyRecord","<没有任何记录>")),this.setStyle(this.emptyDiv,"fixDiv"),this.mainbox.appendChild(this.emptyDiv),this.emptyDiv.style.color="#ACA899",null==this.option.defColNames&&(this.option.defColNames=this.extend([],this.option.colNames),this.option.defColModels=this.extend([],this.option.colModels)),null!=this.getOption().columnSetupId){var c=this.findColumnSetup();try{this.isNotEmpty(c)&&(c=JSON.parse(c),this.isNotEmpty(c.colNames)&&(this.option.colNames=c.colNames),this.isNotEmpty(c.colModels)&&(this.option.colModels=c.colModels))}catch(t){this.logError(this.getI18n("qzz.columnInfoErr","读取缓存表头错误。")+"\n"+t.message)}}this._initColModel(),this._parseTitle(),this.dataSet.setViewColModels(this.option.colModels),this._createModelJson(),this.listDivBox=this.createElement("SPAN"),this.setStyle(this.listDivBox,"ListBoxDiv"),this.listDivBox.appendChild(this.gridTable),this.listDivBox.appendChild(this.sumTable),this.listDiv.appendChild(this.listDivBox),this._createTitle(),this.initGrid(),this._control.p=this.extend({},this.option),this._control.p.id=this._control.id,this._control.p.colNames=this.colNames,this.rendered=!0,this.addStyle(this.listDiv,"canNotSelect"),this.addStyle(u,"canNotSelect"),this.logEnd("TreeDataGrid.render"),this.copyDiv=this.createElement("div"),this.setStyle(this.copyDiv,"fixDiv"),this.copyDiv.style.top="0px",this.copyDiv.style.left="0px",this.copyDiv.style.height="1px",this.copyDiv.style.width="1px",this.copyInput=this.createElement("textarea"),this.setStyle(this.copyInput,"editTextInputer"),this.copyInput.style.width="300px",this.copyInput.style.height="300px",this.pasteKeyPress=!1;var g=this;this.priorScrollIndex=0,this.scrollWidth=300,this.listDiv.onscroll=function(t){var e=this.scrollLeft-g.priorScrollIndex;e<0&&(e=0-e),e>g.scrollWidth+100?(g.priorScrollIndex=this.scrollLeft,g._asynRun(function(){this.post(),this.refresh(!0)},50)):(g.priorScrollIndex=this.scrollLeft,g._delayRun(function(){this.post(),this.refresh(!0)},500)),g._hasScroll=g.scrollMouseDown},this.copyInput.onkeydown=function(t){t=t||window.event;if(g.pasteKeyPress)return t.returnValue=!1,!1},this.copyDiv.appendChild(this.copyInput),this.fzGridSheetsDiv.appendChild(this.copyDiv),this.popMenu=new t.ui.drop.popmenu(null,{cssPrefix:this._cssPrefix}),this.popMenu.onDrop=function(t){g.setBlur()},this.popMenu.onHide=function(t){g.setFocus()},this.popMenu.setParent(this._getModelBody()),this.popMenu.beginUpdate(),0!=this.treeGrid&&(this.popMenu.addMenu("fullcollapse",this.getI18n("qzz.collapse","全收缩"),function(){g.setFocus(),g.fullCollapse()}),this.popMenu.addMenu("fullexpand",this.getI18n("qzz.expand","全展开"),function(){g.setFocus(),g.fullExpand()}));var p=1==this.getBrowser("msie");p&&(this.popMenu._popCount>0&&this.popMenu.addMenu("split1","-"),this.popMenu.addMenu("copy",this.getI18n("qzz.copy","复制"),function(){var t=g.getCopyData();if(g.setFocus(),g.isEmpty(t)){var e=g.getFieldName();t=g.dataSet.getDisplay(e,null,g.selRect.beginRowNode)}window.clipboardData.setData("text",t),g.hasCopy=!0,g.refresh()},"Ctrl+C",p)),this.getOption().colDesign&&null!=t&&null!=t.pertain&&"function"==typeof t.pertain.gridcoldesign&&(this.popMenu._popCount>0&&this.popMenu.addMenu("split2","-"),this.popMenu.addMenu("qzzFormat",this.getI18n("qzz.colset","列设置"),function(){g.focus=!1,t.pertain.gridcoldesign(g)})),this.popMenu.endUpdate(),this.refresh(),this.isArray(this.getOption().data)&&this.value(this.getOption().data),this.titleTip=new t.ui.drop.popbubble({time:1500}),this.titleTip.setParent(this.getPopContainer()),this._ngmodel(),this.getOption().filter&&this._asynRun(function(){this._initFilterWindow()},10)},_initOption:function(){var t,e;(this.getOption().autoEcpWidth=this.getBooleanValue(this.getOption().autoEcpWidth,!1),this.getOption().autoEcpHeight=this.getBooleanValue(this.getOption().autoEcpHeight,!1),this.getOption().filter=this.getBooleanValue(this.getOption().filter,!0),this.getOption().shrinkToFit=this.getBooleanValue(this.getOption().shrinkToFit,!0),this.getOption().suitToFit=this.getBooleanValue(this.getOption().suitToFit,!1),this.getOption().virtual=this.getBooleanValue(this.getOption().virtual,!1),this.getOption().rownumbers=this.getBooleanValue(this.getOption().rownumbers,!0),this.getOption().treeGrid=this.getBooleanValue(this.getOption().treeGrid,!1),this.treeGrid=this.getOption().treeGrid,this.getOption().colDesign=this.getBooleanValue(this.getOption().colDesign,!0),this.getOption().EnterDown=this.getBooleanValue(this.getOption().EnterDown,!1),this.getOption().pager=this.getBooleanValue(this.getOption().pager,!1),this.getOption().sumAllLevel=this.getBooleanValue(this.getOption().sumAllLevel,!1),this.getOption().showTime=this.getBooleanValue(this.getOption().showTime,!1),null!=this.getOption().colNames&&null!=this.getOption().colModels||(this.getOption().colModels=[{name:"gid"}],this.getOption().colNames=[""]),this.getOption().titleRowHeight=this._getNumberValue(this.getOption().titleRowHeight,36),!1===/\d(%)?$/.test(this.getOption().height)&&(this.getOption().height=this._getNumberValue(this.getOption().height,100)),!1===/\d(%)?$/.test(this.getOption().width)&&(this.getOption().width=this._getNumberValue(this.getOption().width,100)),this.rowHeight=this._getNumberValue(this.getOption().rowHeight,this.rowHeight),this.getOption().reverGJ=this.getBooleanValue(this.getOption().reverGJ,!1),this.getOption().treeKey=this.getOption().treeKey||this.getOption().treekey,this.getOption().defSelect=this.getBooleanValue(this.getOption().defSelect,!0),null!=this.getOption().asynInitCount&&this.dataSet.setAsynInitCount(this.getOption().asynInitCount),null==(t=this.getOption()["ng-model"])&&""!==t&&this._control)&&(null!=(e=this._control.getAttribute("ng-model"))&&""!==e&&(this.getOption()["ng-model"]=e));null==(t=this.getOption()["v-model"])&&""!==t&&this._control&&(null!=(e=this._control.getAttribute("v-model"))&&""!==e&&(this.getOption()["v-model"]=e));var i=this.getOption()["ng-bind"];if(null!=i&&""!==i&&this._control){var s=this._control.getAttribute("ng-bind");null!=s&&""!==s&&(this.getOption()["ng-bind"]=s)}},_initPagerBox:function(){if(this.getOption().pager){this._pageBoxHeight=30,this._pageBoxHeight<this.getOption().titleRowHeight&&(this._pageBoxHeight=this.getOption().titleRowHeight),null==this.pageTd?this.frameTable.rows.length<2?this.pagTd=this.frameTable.insertRow(1).insertCell(0):(this.pagTd=this.frameTable.rows[1].cells[0],this._setHtml(this.pagTd,"")):this._setHtml(this.pagTd,""),this.pagTd.setAttribute("colSpan",2),this.pagTd.style.height=this._pageBoxHeight+"px",this.setStyle(this.pagTd,"pageDivLine"),this.pageObj=new t.ui.paged({width:"100%",minPager:this.getOption().minPager,popModel:this.getOption().popModel,popContainer:this.getPopContainer(),filterCount:this.getOption().filterCount,fireAllEvent:this.getOption().fireAllPageEvent}),this.pageObj.setPageSizeList(this.getOption().pageSizeList),null!=this.getOption().pageSize&&this.pageObj.setPageSize(this.getOption().pageSize);var e=this;this.pageObj.bind("onPageChanged",function(t,i,s){e._update&&(e.getOption().pageCount=t,e.getOption().pageSize=i,e.getOption().pageIndex=s,e._loadSerData(t,i,s),this.clearFilterCount(),e.refresh())}),this.pageObj.bind("onBeforePageChange",function(){return e.trigger("onBeforePageChange",[])}),this.pagTd.style.paddingRight="8px",this.pageObj.setParent(this.pagTd)}else this._pageBoxHeight=0,null!=this.pagTd&&(this.pagTd.style.height=this._pageBoxHeight+"px",this._setHtml(this.pagTd,""));var i=this._getRectHeight()-this._pageBoxHeight;i<1&&(i=1),this.listDiv.style.height=i+"px"},setName:function(t){this.base(t),this.dataSet.setName(t)},firstPage:function(t){this.pageObj.firstPage(t)},priorPage:function(){this.pageObj.priorPage()},nextPage:function(){this.pageObj.nextPage()},lastPage:function(){this.pageObj.lastPage()},setPageSize:function(t,e){this.pageObj.setPageSize(t,e)},setTotalRecord:function(t,e){this.pageObj.setTotalCount(t,e)},setTotalCount:function(t,e){this.pageObj.setTotalCount(t,e)},setPageIndex:function(t,e){this.pageObj.setPageIndex(t,e)},resetPageState:function(t){this.pageObj.resetPageState(t)},_initColModel:function(){this.dataSet.fieldOption={},this.dataSet.transIndex++;var t=0;if(this.isArray(this.option.colModels))for(var e=0,i=this.option.colModels.length;e<i;e++){var s=this.option.colModels[e];if(null==s&&(s={}),null!=s.width?(s.width=parseInt(s.width,10),s.defWidth=s.width):s.width=100,s.colIndex=e,null!=s.format&&""!==s.format&&"string"==typeof s.format&&s.format.indexOf("{")>=0){var n=JSON.parse(s.format),o=n.code.split("#");if("@percent"==o[0])s.numUnit="0.01",isNaN(o[1])||(s.dataScale=parseInt(o[1],10)),s.format=null;else if("@perthoursand"==o[0])s.numUnit="0.001",isNaN(o[1])||(s.dataScale=parseInt(o[1],10)),s.format=null;else if("@numerical"==o[0]){var h=o[4];if(this.isNotEmpty(h)){var l={hundred:100,thousand:1e3,wanyuan:1e4,shiwanyuan:1e5,million:1e6,qianwanyuan:1e7,billion:1e8},a=l[h];null!=a&&(s.numUnit=a,s.format=null),l=null}isNaN(o[1])||(s.dataScale=parseInt(o[1],10))}n=null,o=null}else s.format="";if(null==s.dataType&&"date"===s.editType&&(s.dataType=s.editType),s.hidden=this.getBooleanValue(s.hidden,!1),t+=s.width,s.sum&&this.dataSet.addSumColumn(s.name),"checkBox"===s.editType||"radio"===s.editType||"onoff"===s.editType){if(this.isEmpty(s.editoptions))null!=s.isCheck||null!=s.unCheck?s.editoptions={check:s.isCheck,uncheck:s.unCheck}:s.editoptions={check:!0,uncheck:!1};else{var r=[];null!=s.editoptions.value&&(r=s.editoptions.value.split(":")),r.length>1?s.editoptions={check:r[0],uncheck:r[1],value:s.editoptions.value}:s.editoptions={check:!0,uncheck:!1}}"number"==s.dataType&&!0===s.editoptions.check&&(s.editoptions={check:1,uncheck:0}),null==s.dataType&&!0===s.editoptions.check&&(s.dataType="boolean")}if(this.isNotEmpty(s.data)){var d=s.data,u={};if(this.isArray(d)){if(d.length>0&&this.isNotEmpty(d[0].id)&&this.isNotEmpty(d[0].text)){for(var c={},g=0,p=d.length;g<p;g++)c[d[g].id]=d[g].text;u[s.name]=c,c=null}}else"object"==(void 0===d?"undefined":_typeof(d))&&(u[s.name]=c);this.dataSet.setTransIDName(s.name,u[s.name]),u=null}this.option.colModels[e]=s||{}}this.option.gridWidth=t},_parseTitle:function(){var t=[],e=1,i=1,s=[];this.option.colNames[0]instanceof Array?(e=this.option.colNames.length,null!=this.option.colNames[e-1]?i=this.option.colNames[e-1].length:(i=this.option.colNames[e-2].length,e--),s=this.option.colNames):(i=this.option.colNames.length,s=[this.option.colNames]);for(var n=e+1,o=1;o<=e;o++)t[o]=[];var h=this.option.colModels;i>h.length&&(i=h.length);var l=i+1;for(o=e-1;o>=0;o--){for(var a=s[o],r=a.length,d=0,u=0;d<i;d++){var c=null,g=a[u];if("string"==typeof g&&(g={caption:g},o<e-1&&(g.startIndex=d,g.colSpan=i)),u<r){var p=g.startIndex;0===p||null!=p?p==d&&((c=g).isBand=!0,u++):(u++,(null==(c=g).caption||""===c.caption)&&o<e-1&&(c=null,this.logInfo(this.getI18n("qzz.mergCell","合并空的单元格"))))}if(this.isEmpty(c)){if(o<e-1)t[o+1][d]=t[o+2][d],(f=t[o+1][d]).colIndex==d&&f.rowspan++,f.rowIndex=o+1}else{var f={};t[o+1][d]=f;var y=c.caption;null==h[d].caption&&(h[d].caption=y),f.caption=y,f.rowspan=1,f.rowIndex=o+1,f.colIndex=d,f.align=c.align,f.isBand=c.isBand||!1;var m=c.colSpan;if(this.isNotEmpty(m)&&parseInt(m,10)>1){f.colspan=parseInt(m,10);var C=f.colspan+d;for(d++;d<i&&d<C;d++)t[o+1][d]=f;d--}f=null}c=null}a=null}this.option.titleSheets=t,this.option.titleRowCount=n,this.option.colCount=l},_createModelJson:function(){this.option.colModelJson={};for(var t=0,e=this.option.colModels.length;t<e;t++){var i=this.option.colModels[t];i._defWidth=i.width,this.option.colModelJson[i.name]=i}},_addDeff:function(t){return null==t&&(t=0),this.getBrowser("msie")?0:t},_colIndexDeff:function(){return this._hasCheckCol?1:0},_initTitleEvent:function(t){var e=this;t.onmouseover=function(t){t=t||window.event;e.doTitleMouseOver(this,t)},t.onmousemove=function(t){t=t||window.event;e.doTitleMouseMove(this,t)},t.onmousedown=function(t){t=t||window.event;e.doTitleMouseDown(this,t)},t.onmouseup=function(t){t=t||window.event;e.doTitleMouseUp(this,t)},t.ondblclick=function(t){t=t||window.event;e.doTitleDBClick(this,t)}},_doTitleCheck:function(t,e){this.sortClick=!0,this.post();var i=this,s=t.getCheck();this.trigger("onBeforeCheckAll",[s,e]),!1===s?this.cancelSelectRow(e,!1,function(){i.refresh(),i.trigger("onSelectAll",[s,e]),i.trigger("onCheckAll",[s,e])}):i.selectAll(e,!1,function(){i.refresh(),i.trigger("onSelectAll",[s,e]),i.trigger("onCheckAll",[s,e])})},_initTitleCheckBox:function(e,i,s){e.checkBox=new t.ui.input.checkbox,e.checkBox.fieldName=i;var n=this;if(e.checkBox.bind("onClick",function(){n._doTitleCheck(this,this.fieldName)},!0),e.childNodes.length>0?e.insertBefore(e.checkBox.getContainer(),e.childNodes[0]):e.appendChild(e.checkBox.getContainer()),null==this._checkBoxs&&(this._checkBoxs={}),null!=i&&""!==i||(i="@MUL"),this._checkBoxs[i]=e.checkBox,null!=s&&"onoff"==s.editType){e.checkBox.onoff=new t.ui.button({move:!0,width:40,height:22,common:["onoff_off","onoff_on"]}),e.checkBox.hide();var o=e.checkBox.onoff.getContainer();o.style.margin="auto",e.childNodes.length>0?e.insertBefore(o,e.childNodes[0]):e.appendChild(o),e.checkBox.onoff.bind("onclick",e.checkBox,function(t,e){n._doTitleCheck(t,t.fieldName),t.setCheck(1===this._stateValue),this.focus=!1})}},_createTitle:function(){this.shrinkAdd=!1;var t=this.gridTable,e=this.option.titleSheets,i=this.option.colModels;this.colModels={},this.gridWidth=this.option.gridWidth,this.titleRowCount=this.option.titleRowCount,this.colCount=this.option.colCount;for(var s=this.colCount-1,n=this.titleRowCount-1;t.rows.length>0;)t.deleteRow(0);for(;this.fzGridTable.rows.length>0;)this.fzGridTable.deleteRow(0);var o=t.insertRow(0),h=this.fzGridTable.insertRow(0),l=!0;this.fzColCount=1;for(var a=0;a<s;a++){var r=i[a],d=o.insertCell(a);d.style.height="1px",d.style.width=r.width+"px",d.option={colModel:r,defWidth:r.width,cIndex:a},(l=l&&r.frozen||!1)&&(this.fzColCount++,(k=h.insertCell(a)).style.height="1px",k.style.width=r.width+"px",k.option={colModel:r,defWidth:r.width,cIndex:a},d.option.fzCol=k)}this.header=[],this.titleCol=[],this.colNames=[];var u=this;for(a=1;a<=n;a++){o=t.insertRow(a),h=this.fzGridTable.insertRow(a);l=!0;this.header[a-1]=[];for(var c=0,g=0;c<s;c++){var p=e[a][c];if(this.isNotEmpty(p)&&p.rowIndex==a&&p.colIndex==c){if(p.cellIndex=g,(d=o.insertCell(g)).option={},d.dom={},a>1){var f=e[a-1][c];f.rowIndex!=a-1&&(f=e[f.rowIndex][c]),d.option.bandColIndex=f.cellIndex,d.option.bandRowIndex=f.rowIndex}d.option.cIndex=c,this._initTitleEvent(d),this.setStyle(d,"treeListTitle"),!0===this.getOption().levelBorderOnly&&(d.style.borderRightWidth="0px"),this._setHtml(d,p.caption,!1),null!=p.align&&""!==p.align&&(d.style.textAlign=p.align),this.header[a-1][g]={text:p.caption,colFrom:c,colTo:c,rowFrom:a-1,rowTo:a-1};var y=p.colspan;r=i[c];if(l=l&&r.frozen||!1,this.isNotEmpty(y)&&y>1){var m=y;if(l){for(var C=1;C<m;C++){if(1!=i[C+c].frozen)break}if(C<m){for(var S=a;S<=n;S++){var x=e[S][c+C];if(x.colIndex!=c+C){x={caption:x.caption,colspan:x.colspan-(c-x.colIndex+C),colIndex:c+C,rowspan:x.rowspan,rowIndex:x.rowIndex,isBand:x.isBand,cellIndex:x.cellIndex+1},e[S][c+C]=x;for(var _=1;_<x.colspan;_++)e[S][x.colIndex+_]=x}x=null}m=c+C-p.colIndex}d.style.borderRight="1px solid #C3D2E6"}d.setAttribute("colSpan",m),d.option.fieldNames=[r.name],this.header[a-1][g].colTo+=m-1;for(var b=c+1;b<c+m;b++)e[a][b].cellIndex=g,d.option.fieldNames.push(i[b].name);c+=m-1}else{if(this.colNames.push(p.caption),d.setAttribute("colSpan",1),d.option.fieldNames=[r.name],this.isNotEmpty(r)&&(this.isNotEmpty(r.numUnit)&&parseFloat(r.numUnit,10)>1?d.setAttribute("title","×"+this.numberFormat(r.numUnit)):this.isNotEmpty(r.option)&&(this.isNotEmpty(r.minDate)&&d.setAttribute("title",this.getI18n("qzz.minDate","最小日期：")+r.minDate+"\n"),this.isNotEmpty(r.maxDate)&&d.setAttribute("title",d.getAttribute("title")+this.getI18n("qzz.maxDate","最大日期：")+r.maxDate))),1==r.selectAll&&1!=p.isBand&&("checkBox"==r.editType||"onoff"==r.editType?this._initTitleCheckBox(d,r.name,r):!0===this.getOption().treeGrid&&(null==this.getOption().treeKey&&0===c||this.getOption().treeKey==r.name)&&this._initTitleCheckBox(d,"",r)),d.dom.sortDiv=this.createElement("div"),this.setStyle(d.dom.sortDiv,"sortDiv"),1!=p.isBand){var v=this.createElement("table");this.setStyle(v,"sortTable");var w=v.insertRow(0).insertCell(0);this.setStyle(w,["sortDefault"]),v.state="none",v.onmousedown=function(){u.sortClick=!0},v.sortIcon=w,d.dom.sortDiv.appendChild(v),v.style.display="none",v.onmouseup=function(t){t=t||event;u.getMouseButton(t)===u.mouseType.mtLeft&&(this.sortState=this.state,this.sortIndex=this.colIndex,this.colIndex!=u.colIndex&&(u.colIndex=this.colIndex),u.doSortAndFilter(this.sortIndex,this.sortState))},this.sortTables[r.name]=v}this.getBrowser("safari"),null!=d.childNodes[0]?d.insertBefore(d.dom.sortDiv,d.childNodes[0]):d.appendChild(d.dom.sortDiv),null!=r.name&&""!==r.name&&d.setAttribute("dataField",r.name),d.setAttribute("inputer",r.inputerStr||"")}p.rowspan>1?(d.setAttribute("rowSpan",p.rowspan),d.style.height=this.getOption().titleRowHeight*p.rowspan+this._addDeff(p.rowspan-1)+"px",this.header[a-1][g].rowTo+=p.rowspan-1):d.style.height=this.getOption().titleRowHeight+"px",d.option.isBand=p.isBand||!1,this.titleCol[d.option.cIndex]=d,l&&((k=h.insertCell(g)).option={},k.dom={},this._initTitleEvent(k),k.mainCell=d,this.setStyle(k,"treeListTitle"),!0===this.getOption().levelBorderOnly&&(k.style.borderRightWidth="0px"),this._setHtml(k,p.caption,!1),null!=p.align&&""!==p.align&&(k.style.textAlign=p.align),k.setAttribute("colSpan",d.getAttribute("colSpan")),k.setAttribute("rowSpan",d.getAttribute("rowSpan")),k.style.height=d.style.height,k.option.bandColIndex=d.option.bandColIndex,k.option.bandRowIndex=d.option.bandRowIndex,k.option.fieldNames=d.option.fieldNames,k.option.cIndex=d.option.cIndex,this.titleCol[k.option.cIndex]=k,k.option.isBand=d.option.isBand,null!=d.getAttribute("title")&&k.setAttribute("title",d.getAttribute("title")),1==r.selectAll&&1!=p.isBand&&("checkBox"==r.editType||"onoff"==r.editType?this._initTitleCheckBox(k,r.name,r):!0===this.getOption().treeGrid&&(null==this.getOption().treeKey&&0===c||this.getOption().treeKey==r.name)&&this._initTitleCheckBox(k,"",r)),this.isNotEmpty(d.dom.sortDiv)&&(null!=k.childNodes[0]?k.insertBefore(d.dom.sortDiv,k.childNodes[0]):k.appendChild(d.dom.sortDiv),k.dom.sortDiv=d.dom.sortDiv),this.isNotEmpty(r.inputerStr)&&k.setAttribute("inputer",r.inputerStr)),g++}p=null}}this.indexColWidth=60,(d=t.rows[0].insertCell(0)).option={},d.style.height="1px",this._setNumberValue(d,"width",this.indexColWidth),(d=t.rows[1].insertCell(0)).setAttribute("rowSpan",n),this._setHtml(d,this.numberCaption),this._setNumberValue(d,"width",this.indexColWidth),this.setStyle(d,"treeListTitle"),!0===this.getOption().levelBorderOnly&&(d.style.borderRightWidth="0px"),this.gridWidth+=this.indexColWidth,this._setNumberValue(t,"width",this.gridWidth);var N=this.getOption().titleRowHeight*n+this._addDeff(n-1);if((d=this.fzGridTable.rows[0].insertCell(0)).option={},d.style.height="1px",d.style.width=this.indexColWidth+"px",(d=this.fzGridTable.rows[1].insertCell(0)).option={},d.setAttribute("rowSpan",n),this._setHtml(d,this.numberCaption),d.style.width=this.indexColWidth+"px",d.option.cIndex=-1,0!=this.getOption().rownumbers&&this.colNames.splice(0,0,this.numberCaption),d.onmouseup=function(t){t=t||window.event;u.doTitleMouseUp(this,t)},d.onmousedown=function(t){t=t||window.event;u.doTitleMouseDown(this,t)},this.titleHeight=N,this.hiddenFieldNames="",d.style.height=N+"px",this.setStyle(d,"treeListTitle"),!0===this.getOption().levelBorderOnly&&(d.style.borderRightWidth="0px"),this.fzGridTable.border=0,this.fzGridTable.cellPadding=0,this.fzGridTable.cellSpacing=0,this.mulCellWidth=0,this._hasCheckCol=!1,this._colOrder={"@INDEX":0},0==this.treeGrid&&1==this.multiSelect){var O=0;!1!==this.getOption().multiFirst?this._colOrder={"@MUL":0,"@INDEX":1}:(this._colOrder={"@INDEX":0,"@MUL":1},O=1),this.mulCellWidth=30,this.gridWidth+=this.mulCellWidth,(d=t.rows[0].insertCell(O)).option={},d.style.height="1px",this._setNumberValue(d,"width",this.mulCellWidth),(d=t.rows[1].insertCell(O)).option={},d.setAttribute("rowSpan",n),this._setNumberValue(d,"width",this.mulCellWidth),this.setStyle(d,"treeListTitle"),!0===this.getOption().levelBorderOnly&&(d.style.borderRightWidth="0px"),(d=this.fzGridTable.rows[0].insertCell(O)).option={},d.style.height="1px",d.style.width=this.mulCellWidth+"px",(d=this.fzGridTable.rows[1].insertCell(O)).option={},d.setAttribute("rowSpan",n),this._initTitleCheckBox(d),this.mulCheckCol=d,d.style.width=this.mulCellWidth+"px",d.style.textAlign="center",d.option.cIndex=-1,this.setStyle(d,"treeListTitle"),!0===this.getOption().levelBorderOnly&&(d.style.borderRightWidth="0px"),this.colCount++,this._hasCheckCol=!0}this.colIndex+=this._colIndexDeff(),this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this._setNumberValue(t,"width",this.gridWidth),t.setAttribute("ecpClass","ecp.ui.datafield.Grid"),t.border=0,t.cellPadding=0,t.cellSpacing=0;for(a=this.fzGridTable.rows.length;a<n+1;a++)this.fzGridTable.insertRow(a);a=0;for(var T=this.fzGridTable.rows.length;a<T;a++){var L=this.fzGridTable.rows[a],k=(s=L.cells.length,L.insertCell(s));this._style(k,"width","1px"),0==a?this._style(k,"height","1px"):this._style(k,"height",this.getOption().titleRowHeight+"px"),k.noUse=!0}if(!0===this.getOption().hideTitle){for(a=this.titleRowCount-1;a>0;a--)this.gridTable.rows[a].style.display="none",this.fzGridTable.rows[a].style.display="none";this.titleIsHide=!0}else{var B=this._update;this._update=!1,this._refreshFzTitleWidth(),this._suitTitleHeight(),this._update=B}o=null,d=null,e=null,t=null},_initMulCellCol:function(e,i){e.levelDiv=this.createElement("div"),this.setStyle(e.levelDiv,"component_ui_cell"),e.levelDiv.style.width=i-2+"px";var s=0,n=this.createElement("table");this.setStyle(n,"component_ui_treecol_table"),n.style.height=this.rowHeight-3+"px";var o=n.insertRow(0);e.levelTd=o.insertCell(s++),e.levelTd.id="level";var h=o.insertCell(s++);e.treePoint=this.createElement("div"),h.appendChild(e.treePoint),h.style.width="15px",e.treePoint.style.width="15px",e.treePoint.style.height="13px",e.treeTd=h,e.treeTd.id="treePoint",h=o.insertCell(s++),e.checkBox=new t.ui.input.checkbox,e.checkBox.hide(),h.style.width="2px",h.appendChild(e.checkBox.getContainer()),e.checkTd=h,e.checkTd.id="check",(h=o.insertCell(s++)).style.paddingLeft="4px",h.appendChild(e.rect),e.rectTd=h,e.rectTd.id="text",e.levelDiv.appendChild(n),e.appendChild(e.levelDiv),h=null,o=null,n=null},_initCommonCellCol:function(e,i,s,n){"checkBox"==e||"onoff"==e||s==this._colOrder["@MUL"]?(i.checkBox=new t.ui.input.checkbox,i.checkBox.hide(),i.rect.text.appendChild(i.checkBox.getContainer()),i.rect.style.width="22px",i.rect.text.style.width="22px","onoff"==e&&(i.checkBox.onoff=new t.ui.button({move:!0,width:40,height:22,common:["onoff_off","onoff_on"]}),i.checkBox.onoff.setParent(i.rect.text),i.checkBox.onoff.hide())):"radio"==e&&(i.radio=new t.ui.input.checkbox({type:"radio"}),i.radio.hide(),i.rect.text.appendChild(i.radio.getContainer())),null!=n&&(i.rect.style.width=n-8+"px",i.rect.text.style.width=n-8+"px")},_createRectDiv:function(t,e){var i=this.createElement("div");this.setStyle(i,"component_ui_cell"),null!=t&&(i.style.width=t-8+"px"),null!=e&&(i.style.height=e-6+"px");var s=this.createElement("div");return this.setStyle(s,"component_ui_in_cell"),s.style.width=i.style.width,s.style.height=i.style.height,i.appendChild(s),i.text=s,i},_calcRowCount:function(t){var e=this.titleRowCount,i=0;if(this.getHScrollHide()||(i=16),this.titleHeight=this.gridTable.rows[1].cells[0].offsetHeight,this.titleHeight<=0){var s=this.gridTable.rows[1].cells;if(!1===this.getOption().rownumbers&&this.titleRowCount>2){for(var n=0,o=0;o<this.titleRowCount;o++)n+=this.gridTable.rows[o].offsetHeight;n<=0&&s.length>1&&(n=this._getNumberValue(this.gridTable.rows[1].cells[1].style.height,0)),this.titleHeight=n}else s.length>1&&(this.titleHeight=this._getNumberValue(this.gridTable.rows[1].cells[1].style.height,0))}if(this.titleIsHide?this.titleHeight=0:0===this.titleHeight&&(this.titleHeight=this.getOption().titleRowHeight*e),1!=t&&null!=this.titleHeight&&this._titleHeight==this.titleHeight)return!0;this.bodyHeight=this._getRectHeight()-this.titleHeight-i-this._pageBoxHeight;var h=parseInt(this.bodyHeight/this.rowHeight,10),l=this.bodyHeight%this.rowHeight;this.hafRow=!1,l>0&&1!=this.getOption().footerrow&&!0!==this.getOption().total?(this.hafRow=!0,h++):1!=this.getOption().footerrow&&!0!==this.getOption().total||(this.hafRow=!0),this.gridHeight=h*this.rowHeight+this.titleHeight,this.rowCount=h,this._titleHeight=this.titleHeight},initGrid:function(){var t=this.gridTable;if(this._calcRowCount(!0),this.rowCount===this._rowCount)return!1;this._rowCount=this.rowCount;var e=this.rowCount,i=this.titleRowCount;this.sheets=[],this.fzSheets=[];for(var s=i;s<e+i;s++){var n,o;if(t.rows.length>s){if(n=t.rows[s],o=this.fzGridTable.rows[s],null==n){for(;s<t.rows.length;)t.deleteRow(s);n=t.insertRow(s)}if(null==o){for(;s<this.fzGridTable.rows.length;)this.fzGridTable.deleteRow(s);o=this.fzGridTable.insertRow(s)}}else n=t.insertRow(s),o=this.fzGridTable.insertRow(s);this.sheets[s-i]=[],this.sheets[s-i].row=n,this.fzSheets[s-i]=[],this.fzSheets[s-i].row=o,n.style.height=this.rowHeight+"px",o.style.height=this.rowHeight+"px";for(var h=!0,l=0;l<this.colCount;l++){var a;if(n.cells.length>l)a=n.cells[l];else{(a=n.insertCell(l))._option={},this.setStyle(a,"gridNoneCell");var r=this._getColModel(l);a.rect=this._createRectDiv(r.width,this.rowHeight),(null==this.getOption().treeKey&&1===l||null!=this.getOption().treeKey&&this.getOption().treeKey==r.name)&&0!=this.option.treeGrid?this._initMulCellCol(a,r.width):(a.appendChild(a.rect),l===this._colOrder["@INDEX"]?0==this.getOption().rownumbers&&(a.rect.style.display="none"):this._initCommonCellCol(r.editType,a,l,r.width)),25!==this.rowHeight&&(null==this.getOption().treeKey&&1===l||null!=this.getOption().treeKey&&this.getOption().treeKey==r.name)&&0!=this.option.treeGrid&&(a.levelDiv.style.height=this.rowHeight-6+"px")}if(a._cellIndex=l,this.sheets[s-i][l]=a,l==this._colOrder["@INDEX"]){o.cells.length>l?(u=o.cells[l]).noUse=!1:((u=o.insertCell(l))._option={},this.setStyle(u,"gridNoneCell"),u.rect=this._createRectDiv(60),0==this.getOption().rownumbers&&(u.rect.style.display="none"),u.appendChild(u.rect)),u._cellIndex=a._cellIndex,this.fzSheets[s-i][l]=u,u=null}else{r=this._getColModel(l);if(h=h&&(this.getBooleanValue(r.frozen,!1)||l===this._colOrder["@MUL"]))o.cells.length>l?(u=o.cells[l]).noUse=!1:((u=o.insertCell(l))._option={},this.setStyle(u,"gridNoneCell"),u.rect=this._createRectDiv(r.width,this.rowHeight),(null==this.getOption().treeKey&&1===l||null!=this.getOption().treeKey&&this.getOption().treeKey===r.name)&&0!=this.option.treeGrid?this._initMulCellCol(u,r.width):(u.appendChild(u.rect),l===this._colOrder["@INDEX"]?0==this.getOption().rownumbers&&(u.rect.style.display="none"):this._initCommonCellCol(r.editType,u,l,r.width)),25===this.rowHeight&&this._colOrder["@MUL"]!==l||(null==this.getOption().treeKey&&1===l||null!=this.getOption().treeKey&&this.getOption().treeKey===r.name)&&0!=this.option.treeGrid&&(u.levelDiv.style.height=this.rowHeight-6+"px")),u._cellIndex=a._cellIndex,this.fzSheets[s-i][l]=u,u=null;else for(;o.cells.length>l;)o.deleteCell(l);r=null}a=null}for(;n.cells.length>l;)n.deleteCell(l);var d=o.cells.length,u=o.insertCell(d);this._style(u,"width","1px"),u.noUse=!0,n=null}for(var c=t.rows.length;c>s;)t.deleteRow(c-1),this.fzGridTable.deleteRow(c-1),c=t.rows.length;this.initTotalRow(),this.refreshScrollBar(),t=null,!1!==this.getOption().shrinkToFit&&this.shrinkToFit(!0),!0===this.getOption().suitToFit&&this.suitToFit();var g=(this.titleRowCount-1)*this.getOption().titleRowHeight,p=0;this.sumTable&&(p=this.sumTable.offsetHeight);var f=0;return!0===this.getOption().pager&&(f=this.pageObj.getHeight()),this.emptyDiv.style.left=parseInt((this.getWidth()-100)/2,10)+"px",this.emptyDiv.style.top=parseInt((this.getHeight()-g-p-f-30)/2,10)+g+"px",!0},initTotalRow:function(){for(;this.fzSumTable.rows.length>0;)this.fzSumTable.deleteRow(0);for(;this.sumTable.rows.length>0;)this.sumTable.deleteRow(0);this.totalRowCount=0,!0!==this.getOption().totalRever&&!0===this.getOption().subtotal&&(this._addTotalRow(this.totalRowCount,this.subtotalText),this.subtotalIndex=this.totalRowCount,this.totalRowCount++,this.sumTable.style.width=this.gridTable.style.width),!0!==this.getOption().footerrow&&!0!==this.getOption().total||(this._addTotalRow(this.totalRowCount,this.summaryText),this.totalIndex=this.totalRowCount,this.totalRowCount++,this.sumTable.style.width=this.gridTable.style.width),!0===this.getOption().totalRever&&!0===this.getOption().subtotal&&(this._addTotalRow(this.totalRowCount,this.subtotalText),this.subtotalIndex=this.totalRowCount,this.totalRowCount++,this.sumTable.style.width=this.gridTable.style.width)},_addTotalRow:function(t,e){var i=this.fzSumTable.insertRow(t);i.style.height=this.rowHeight-1+"px";var s=this.sumTable.insertRow(t);s.style.height=this.rowHeight-1+"px";for(var n=!0,o=0;o<this.colCount;o++){var h=null,l=null;if(o===this._colOrder["@INDEX"])(l=s.insertCell(o))._option={},l.rect=this._createRectDiv(60),l.appendChild(l.rect),l._cellIndex=o,this._setHtml(l.rect.text,"<strong>"+e+"</strong>",!1),this.setStyle(l,["treeListIndex"]),(h=i.insertCell(o))._option={},h.rect=this._createRectDiv(60),h.appendChild(h.rect),h._cellIndex=l._cellIndex,this._setHtml(h.rect.text,l.rect.text.innerHTML,!1),this.setStyle(h,["treeListIndex"]);else{var a=this._getColModel(o);(l=s.insertCell(o))._option={},l.rect=this._createRectDiv(a.width,this.rowHeight),l.appendChild(l.rect),l._cellIndex=o,this.setStyle(l,["gridReadonly","fontBold"]),(n=n&&(this.getBooleanValue(a.frozen,!1)||o===this._colOrder["@MUL"]))&&((h=i.insertCell(o))._option={},h.rect=this._createRectDiv(a.width,this.rowHeight),h.appendChild(h.rect),h._cellIndex=l._cellIndex,o===this._colOrder["@MUL"]?this.setStyle(h,["treeListIndex"]):this.setStyle(h,["gridReadonly","fontBold"]),0)}0==t&&(this.addStyle(l,"borderTopLine"),null!=h&&!0!==h.noUse&&this.addStyle(h,"borderTopLine"));var r=this._getTopCell(o);l.style.width=r.style.width,l.style.display=r.style.display,null!=h&&!0!==h.noUse&&(h.style.width=r.style.width,h.style.display=r.style.display)}},_getTopCell:function(t){return this.gridTable.rows[0].cells[t]},_addFilterRow:function(t,e,i,s,n){var o=t.insertRow(e),h=this;o.onmouseover=function(){h.setStyle(this,"popMouseOver")},o.onmouseout=function(){h.setStyle(this,"popCaption")},this.setStyle(o,"popCaption");var l=o.insertCell(0);this._setHtml(l,i),l.onclick=n,l.style.height=s+"px"},setSortState:function(t,e){this.sortTables[t].sortState=e,this._sortFieldName=t,this.refreshSortState()},setSort:function(t,e,i,s){"function"==typeof i&&(s=i,i=!1);var n=this,o=n.sortTables[t];null==o||o.sortState==e?"function"==typeof s&&s.apply(n,arguments):(o.sortState=e,n.hasbind("onSort")?(n._sortFieldName=t,n.trigger("onSort",[t,e]),0!=i?n.first():n.dataSet.first(),"function"==typeof s&&s.apply(n,arguments)):(n.dataSet.doSort(t,e,function(){n._sortFieldName=t,0!=i?n.first():n.dataSet.first(),"function"==typeof s&&s.apply(n,arguments)}),n.trigger("onSortCol",[n.colIndex-1,n.colIndex,n.state])))},_initFilterWindow:function(){var e=this;this.pfilter=new t.ui.drop.popfilter({sort:this.getOption().sort,escape:!1}),this.pfilter.setParent(e.getPopContainer()),this.pfilter.bind("onSort",function(t,i){e.setFocus(),e.setSort(t,i)}),this.pfilter.bind("onClearFilter",function(t){e.setFocus(),e.setSort(e._sortFieldName,"none",!1,function(){e.dataSet.clearFilterText(function(){for(var t in e.sortTables){var i=e.sortTables[t];null!=i&&(i.filtered=!1),i=null}null!=e.pageObj&&null!=e.pageObj.clearFilterCount&&e.pageObj.clearFilterCount(),e.first(),e.trigger("onFiltered",[e.dataSet])})})}),this.pfilter.bind("onFilter",function(t,i,s){e.setFocus(),e.setSort(e._sortFieldName,"none",!1,function(){s.length>0&&s.length<i&&"all"==s[0].id&&s.splice(0,1),e.dataSet.addFilterText(t,s,function(){e.first(),null!=e.pageObj&&null!=e.pageObj.setFilterCount&&e.pageObj.setFilterCount(e.dataSet.getRecordCount()),e.trigger("onFiltered",[e.dataSet])})})}),this.pfilter.bind("onCancel",function(){e.setFocus()})},refreshTitle:function(t,e){if(1!=this._hasDestroy){if(null!=t){this.isNotEmpty(t.colNames)&&(this.option.colNames=t.colNames),this.isNotEmpty(t.colModels)&&(this.option.colModels=t.colModels),!0===e&&(this.getOption().defColNames=this.extend([],this.getOption().colNames),this.getOption().defColModels=this.extend([],this.getOption().colModels));var i=!1;for(var s in t){var n=t[s];"Align"==s&&this.option[s]!==n?(this.option[s]=n,i=!0):"object"!=(void 0===n?"undefined":_typeof(n))&&(this.option[s]=n)}i&&this.doResize()}this._initOption(),this.colIndex=1,this._oldGridWidth=null,this.dataSet.keyName=this.getPKeyName(),this.dataSet.itemCode=this.dataSet.keyName;for(var o=this.option.colModels,h={},l=0,a=o.length;l<a;l++){var r=o[l];"function"==typeof r.onGetDisplay&&(h[r.name]=r.onGetDisplay)}o=null,this.hiddenFieldNames="",this.option.titleSheets=[],this._initColModel(),this._parseTitle(),this.dataSet.setViewColModels(this.option.colModels),this._createModelJson(),this.multiSelect=this.getBooleanValue(this.getBooleanValue(this.getOption().multiselect,this.getOption().multiSelect),!1),this.dataSet.setMultiSelect(this.multiSelect),this.dataSet.reverGJ=this.getOption().reverGJ,this.dataSet.sumAllLevel=this.getOption().sumAllLevel,this._createTitle(),this._rowCount=0,null==this.pageObj&&this._initPagerBox(),this.inputFocus=!1,this.initGrid(),this.editObjects={},this._editTypes={},this.dataSet.first(),this.topNode=this.dataSet.getCurNode();var d=this.option.colModels;for(l=0,a=d.length;l<a;l++){var u=d[l];if(null!=h[u.name]){var c=this.dataSet.getFieldOption(u.name);c.onGetDisplay=h[u.name],u.onGetDisplay=h[u.name],c=null}}h=null,this.refresh(!0),!1!==this.getOption().shrinkToFit&&this.shrinkToFit(),!0===this.getOption().suitToFit&&this.suitToFit()}},isShow:function(){return this.copyDiv&&this.copyDiv.offsetWidth>0},mulMoveRecord:function(t,e){if(null!=this.topNode){var i=this,s=this.topNode.scrIndex;this.dataSet.mulMoveNode(t,function(t,e){var n=i.dataSet.getCurNode();for(i.dataSet.beginUpdate(),i.dataSet.first();!i.dataSet.isEof();){if(i.dataSet.getIndex()==s){i.topNode=i.dataSet.getCurNode();break}i.dataSet.next()}i.dataSet.select(n),i.dataSet.endUpdate(!1),i.refresh(),i.scrollToFocus()})}},moveRecord:function(t,e,i){"boolean"==typeof e&&(refresh=e,e=null),null==e&&(e=this.dataSet.getCurNode());var s=this.dataSet.moveNode(t,e,i);if(s.fromIndex!=s.toIndex){var n=e.pNode,o=e,h=n.getNode(s.fromIndex);this.topNode.recNo===h.recNo?this.topNode=o:this.topNode.recNo===o.recNo?this.topNode=n.getNode(s.fromIndex):this.topNode.level==o.level&&this.topNode.index>o.index&&(this.topNode=n.getNode(this.topNode.index-1)),!0!==i&&(this.refresh(),this.scrollToFocus(),this.refresh())}return s},_refreshTotalRow:function(t,e,i){for(var s=this.sumTable.rows[t],n=this.fzSumTable.rows[t],o=n.cells.length,h=""===this.summaryText,l=0,a=s.cells.length;l<a;l++){var r=s.cells[l],d=null;if(l<o&&(d=n.cells[l]),l===this._colOrder["@INDEX"])this.getOption().rownumbers&&""!==i?(this._setHtml(r.rect.text,"<strong>"+i+"</strong>",!1),this._setHtml(d.rect.text,r.rect.text.innerHTML,!1),h=!0):(this._setHtml(r.rect.text,"",!1),this._setHtml(d.rect.text,"",!1));else{var u=this._getColModel(l);if(this.isNotEmpty(u))if(1!=u.hidden){"none"==r.style.display&&(r.style.display="",null!=d&&!0!==d.noUse&&(d.style.display="")),!1!==u.ellipsis&&"onoff"!=u.editType&&"checkBox"!=u.editType&&"radio"!=u.editType&&this.addStyle(r.rect.text,"ellipsis"),"ellipsis"==this.getCurrentStyle(r.rect.text).textOverflow?r.rect.text.style.lineHeight=this.rowHeight-4+"px":r.rect.text.style.lineHeight="normal";var c=this.dataSet.getValue(u.name,e),g=this.dataSet.getDisplay(u.name,c,e),p=this.trigger("onSummaryDraw",[this.dataSet,u.name,e]);if(null==p){if(null!=c&&""!==c)this._setHtml(r.rect.text,g,!1),r.style.textAlign=this.getColAlign(u.name),null!=d&&!0!==d.noUse&&(this._setHtml(d.rect.text,r.innerHTML,!1),d.style.textAlign=r.style.textAlign);else if(h)1==u.sum||"true"===u.sum?this._setHtml(r.rect.text,g,!1):this._setHtml(r.rect.text,c,!1),r.style.textAlign=this.getColAlign(u.name),null!=d&&!0!==d.noUse&&(this._setHtml(d.rect.text,r.innerHTML,!1),d.style.textAlign=r.style.textAlign);else{this._setHtml(r.rect.text,i),r.style.textAlign="center",null!=d&&!0!==d.noUse&&(this._setHtml(d.rect.text,r.innerHTML,!1),d.style.textAlign=r.style.textAlign);var f=this.dataSet.getColModel(u.name),y=f.dataType;f.dataType="string",this.dataSet.setValue(u.name,i,e),f.dataType=y}h=!0}else this._setHtml(r.rect.text,c,!1),r.style.textAlign=p.align,null!=d&&!0!==d.noUse&&(this._setHtml(d.rect.text,r.innerHTML,!1),d.style.textAlign=r.style.textAlign);null!=u&&!0===u.showHint&&null!=g&&""!==g&&(r.setAttribute("title",g),null!=d&&!0!==d.noUse&&d.setAttribute("title",g))}else r.style.display="none",null!=d&&!0!==d.noUse&&(d.style.display="none")}!0===this.getOption().levelBorderOnly&&(-1==r.className.indexOf("gridFocusCell")&&-1==r.className.indexOf("gridNoFocusFocusCell")?(r.style.borderRightWidth="0px",null!=d&&(d.style.borderRightWidth="0px")):(r.style.borderRightWidth="",null!=d&&(d.style.borderRightWidth="")))}},doVScrollShow:function(){this._refreshSumTab()},_refreshSumTab:function(t,e){if(null!=this.listDiv)if("number"!=typeof e&&(e=0),0===this.listDiv.offsetHeight&&e<1){var i=this;this._asynRun(function(){i._refreshSumTab(!0,++e)},300)}else{var s=!0===this.getOption().footerrow||!0===this.getOption().total,n=!0===this.getOption().subtotal;if(!(this.bodyHeight+this.titleHeight-1<=0||"hidden"==this.listDiv.style.overflowY&&this.gridTable.offsetWidth>this.listDiv.offsetWidth)){var o=this.listDiv.clientHeight;if(o<=0&&(o=1),this.fzGridSheetsDiv.style.height=o+"px",this.listDivBox.style.height=o+"px",!0===s||!0===n){var h=this._getNumberValue(this.fzGridTable.style.width)-1;this.fzSumTable.style.width=h+"px",this.sumTable.style.bottom="",n&&(o-=this._getNumberValue(this.fzSumTable.rows[this.subtotalIndex].style.height,0),this._refreshTotalRow(this.subtotalIndex,this.dataSet.subNode,this.subtotalText)),s&&(o-=this._getNumberValue(this.fzSumTable.rows[this.totalIndex].style.height,0),this._refreshTotalRow(this.totalIndex,this.dataSet.rootNode,this.summaryText)),this.sumTable.style.top=o+"px"}}}},_refreshRowspan:function(t,e,i){var s=this.rowHeight*e-6+"px";t.setAttribute("rowSpan",e),t.rect.style.height=s,t.rect.text.style.height=s,null!=t.levelDiv&&(t.levelDiv.style.height=s),t.rect.text.style.lineHeight=!1!==i?s:"normal"},_isMerge:function(t,e,i,s){null==s&&(s=this.dataSet.getValue(t.name,e));var n=null!=e&&e.level==i.level&&("checkBox"!==t.editType&&"onoff"!==t.editType&&s==this.dataSet.getValue(t.name,i)&&(!0!==t.groupsEmpty&&""!==this.dataSet.getValue(t.name,i)||!0===t.groupsEmpty)||("checkBox"===t.editType||"onoff"===t.editType)&&s==this.dataSet.getValue(t.name,i));if(null!=e&&e.level==i.level&&this.hasbind("onBeforeGroups")){var o=this.trigger("onBeforeGroups",[t,e,i,n]);null!=o&&(n=!1!==o)}return n},_refreshGroups:function(t,e,i,s,n,o,h){if(null!=this.getOption()&&!0===t.groups&&"radio"!==t.editType)if(e>0){var l=this.sheets[e-1][i],a=this.fzSheets[e-1][i];l.groupIndex=e,null!=l.groupCol&&(l=l.groupCol),null!=n&&!0!==n.noUse&&null!=a.groupCol&&(a=a.groupCol);var r=this._getNumberValue(l.getAttribute("rowSpan"),1),d=this._isMerge(t,o,h);this.dataSet.getCellOption(t.name);if(!0===d)r=s.parentNode.rowIndex-l.parentNode.rowIndex+1,this._refreshRowspan(l,r,t.ellipsis),s.style.display="none",s.groupCol=l,null!=n&&!0!==n.noUse&&(this._refreshRowspan(a,r,t.ellipsis),n.style.display="none",n.groupCol=a);else{var r=e-l.groupIndex+1;if(this._refreshRowspan(l,r,t.ellipsis),this._refreshRowspan(s,1,t.ellipsis),s.style.display="",s.groupCol=null,null!=n&&!0!==n.noUse){r=e-l.groupIndex+1;this._refreshRowspan(a,r,t.ellipsis),this._refreshRowspan(n,1,t.ellipsis),n.style.display="",n.groupCol=null}}}else{(r=this._getNumberValue(s.getAttribute("rowSpan"),1))>1&&this._refreshRowspan(s,1,t.ellipsis),"none"==s.style.display&&s.style.display,null!=n&&!0!==n.noUse&&((r=this._getNumberValue(n.getAttribute("rowSpan"),1))>1&&this._refreshRowspan(n,1,t.ellipsis),"none"==s.style.display&&n.style.display)}else(r=this._getNumberValue(s.getAttribute("rowSpan"),1))>1&&this._refreshRowspan(s,1,t.ellipsis),"none"==s.style.display&&s.style.display,null!=n&&!0!==n.noUse&&((r=this._getNumberValue(n.getAttribute("rowSpan"),1))>1&&this._refreshRowspan(n,1,t.ellipsis),"none"==s.style.display&&n.style.display)},refreash:function(){this.refresh()},_emptyCell:function(t,e){for(var i=t.rect.text.childNodes.length-1;i>=0;i--){var s=t.rect.text.childNodes[i];null!=s&&(s.nodeType<3?s.style.display="none":s.removeNode?s.removeNode():s.remove&&s.remove())}null!=t.checkBox&&t.checkBox.isShow()&&t.checkBox.hide(),this._resetCell(t,e),t.setAttribute("title",""),t.onclick=null,t.ondblclick=null,t.onmousedown=null,this.setStyle(t,"gridNoneCell"),this.isNotEmpty(t.treePoint)&&this.clearStyle(t.treePoint),t.style.backgroundColor="",this._getNumberValue(t.getAttribute("rowSpan"),10)>1&&t.setAttribute("rowSpan",1),null!=t.valiDiv&&t.valiDiv.parentNode==t.rect&&(t.valiDiv.remove?t.valiDiv.remove():t.valiDiv.removeNode&&t.valiDiv.removeNode())},refresh:function(t,e){if(!this._update)return!1;this.refreshHiddenState(),null!=this.dataSet.curNode&&null!=this.dataSet.curNode.recNo||this.dataSet.first(),this.mulCellSelect=!1;var i=this.dataSet.getCurNode(),s=this.sheets.length;this.inputFocus=!1,this.selRowInShow=!1;var n=s,o=0;this.curCell=null;var h=0;!0===this.getOption().footerrow&&(h=0);var l=this.getHScrollHide();if(this.dataSet.beginUpdate(),this.needContentFit={},this.dataSet.getRecordCount()>0){(null==this.topNode||this.topNode.level<0||null==this.topNode.level)&&(this.topNode=this.dataSet.getTopNode()),null==this.selRect.beginRowNode&&(this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode),this.mulCellSelect=this.selRect.beginColIndex<this.selRect.endColIndex||null!=this.selRect.beginRowNode&&this.selRect.beginRowNode.getIndex()<this.selRect.endRowNode.getIndex(),this.dataSet.select(this.topNode);var a=this.getReadOnly(),r=this._comRect||{},d=this.getOption().width;null==r.left&&(r={left:0,right:d});var u={},c={},g=0;if(null==this.gridTable||0==this.gridTable.rows.length)return;for(var p=0,f=this.gridTable.rows[0].cells.length;p<f;p++){var y=0;"none"!=(Y=this.gridTable.rows[0].cells[p]).style.display&&(y=this._getNumberValue(Y.style.width)),u[p]=g,c[p]=y,g+=y}var m=this.listDiv.scrollLeft,C=0,S=1e4,x=0,_=!1;n-h>0&&(S=this.sheets[0].length);var b=0;this.fzSheets.length>0&&(b=this.fzSheets[0].length-1),this._lastNode=null,this._showCount=n-h;var v=null;for(o=0;o<n-h&&!this.dataSet.isEof();o++){var w=(J=this.sheets[o]).row,N=(X=this.fzSheets[o]).row,O=this.dataSet.getCurNode();w._node=O,N._node=O;for(p=0;p<S||p<=x;p++)if(p>x&&p<C&&!1===_){var T=p;p=C-1;for(var L=T;L<=p;L++){var k=J[L],B=X[L];(F=this._getColModel(L)).hidden?"none"!==k.style.display&&(k.style.display="none",B&&(B.style.display=k.style.display)):null!=F.name&&null==F.groupCol&&"none"==k.style.display&&(k.style.display="",B&&(B.style.display=k.style.display))}}else{var Y=J[p],D=X[p],I=null;if(p!==this._colOrder["@INDEX"]&&(I=X[p-1]),0==o&&"none"!=Y.style.display){this.isNotEmpty(D)&&(x=p);var R=r.left+u[Y.cellIndex]+1-m,Z=c[Y.cellIndex],H=R-r.left;if(H+Z<0-this.scrollWidth)C=p;else if(H>d+this.scrollWidth){S=p;break}}0;var M=!0,F=this._getColModel(p);if(!0===e){M=!1,(p==this._colOrder["@INDEX"]||p==this._colOrder["@MUL"]||(p>=this._selRect.beginColIndex&&p<=this._selRect.endColIndex||b===p)&&O.getIndex()>=this._selRect.beginRowNode.getIndex()&&O.getIndex()<=this._selRect.endRowNode.getIndex()||(p>=this.selRect.beginColIndex&&p<=this.selRect.endColIndex||b===p)&&O.getIndex()>=this.selRect.beginRowNode.getIndex()&&O.getIndex()<=this.selRect.endRowNode.getIndex())&&(M=!0);var z=this.dataSet.getCellOption(F.name,O);if(1!=M&&null!=z.changed&&!0===z.changed&&(M=!0,z.changed=!1),1!=M&&null!=F.validate&&""!==F.validate)null!=this.dataSet.getFieldOption(F.name)._valiExp&&(M=!0,z.hasValidate=!1);z=null,1==M||!this.getReadOnly()&&!0!==this.getOption().heightLight||(null!=this._curNode&&this._curNode.recNo==O.recNo||i.recNo==O.recNo)&&(M=!0)}!0!==F.hidden&&(1==F.groups&&(_=!0),this._refreshGroups(F,o,p,Y,D,v,O)),M&&this.refreshCell(w,N,Y,D,I,o,p,O,i,a,t),F=null,Y=null,D=null}o<n-h-1||l&&this.rowHeight<=28&&!this.hafRow?(this.bottomNode=O,this.bottomNode.recNo==i.recNo&&(this.selRowInShow=!0,null!=N&&this.fzSheets[0].length>1?this.selRow=N:this.selRow=w)):this._lastNode=O,v=O,this.dataSet.next(),J=null,w=null,X=null,N=null,O=null}this.selRowInShow||(this.selRow=null)}this.refreshSortState();for(var W=this.getOption().treeKey||"";o<n;o++){for(var J=this.sheets[o],X=this.fzSheets[o],E=(p=0,J.length);p<E;p++){var P=(F=this._getColModel(p)).name,V=(Y=J[p],1==this.getOption().treeGrid&&(""===W&&1==p||W===P));if(this._emptyCell(Y,V),p===this._colOrder["@INDEX"]?(this.getOption().rownumbers?(Y.style.width="60px",Y.rect.style.display=""):(Y.style.width="1px",Y.rect.style.display="none"),P="@INDEX"):(this.isEmpty(F)&&p==this._colOrder["@MUL"]&&(P="@MUL"),!0===F.hidden?Y.style.display="none":Y.style.display=""),Y.style.backgroundColor="",this.isNotEmpty(X[p])){var Q=X[p];this._emptyCell(Q,V),p===this._colOrder["@INDEX"]&&(this.getOption().rownumbers?(Q.style.width="60px",Q.rect.style.display=""):(Q.style.width="1px",Q.rect.style.display="none")),Q.style.display!==Y.style.display&&(Q.style.display=Y.style.display),Q.style.backgroundColor="",this.trigger("onCellClear_"+P,[this.dataSet,P,Q]),Q=null}else this.trigger("onCellClear_"+P,[this.dataSet,P,Y]);Y=null}J=null,X=null}for(var j in this._refreshSumTab(),this.dataSet.select(i),this.dataSet.endUpdate(!1),this.refreshScrollBar(),this.editObjects)this.editObjects[j].focus=!1;if(this.inputFocus&&this.isNotEmpty(this.editObject)?!0!==this._hasScroll&&"function"==typeof this.editObject.setFocus&&this.editObject.setFocus():this.editObject=null,null!=this.copyInput&&this.dataSet.getRecordCount()>0&&this.focus)if(this.mulCellSelect){this.copyInput.value=this.getCopyData();var G=this.copyInput;null==this._setTimeoutStack.copyFocus&&(this._setTimeoutStack.copyFocus=[]),this._setTimeoutStack.copyFocus.push("1"),this._asynRun(function(){0==this.cellMouseDown&&G.offsetHeight>0&&(G.select(),G.focus()),G=null},10)}else if(this.copyInput.value="",this.getCellReadOnly(this.getFieldName())){this.copyInput.value=this.getCopyData();G=this.copyInput;this._asynRun(function(){0==this.cellMouseDown&&G.offsetHeight>0&&(G.select(),G.focus()),G=null},10)}this._asynRun(function(){null!=this&&null!=this.listDiv&&0!=this.listDiv.offsetWidth&&(this.listDiv.scrollTop=0),null!=this&&null!=this.fzGridSheetsDiv&&0!=this.fzGridSheetsDiv.offsetWidth&&(this.fzGridSheetsDiv.scrollTop=0)},50),this.hasCopy=!1,this.priorColIndex=this.colIndex,""==this.thisWindow.style.width&&(this.thisWindow.style.width=this.getOption().width+"px"),this._addNew=!1,this._saveSelRect(),this._curNode=this.dataSet.getCurNode(),this.dataSet.getRecordCount()>0?this.emptyDiv.style.display="none":this.emptyDiv.style.display=""},_saveSelRect:function(){null==this.selRect&&(this.selRect={}),null==this._selRect&&(this._selRect={}),this._selRect.beginRowNode=this.selRect.beginRowNode,this._selRect.endRowNode=this.selRect.endRowNode,this._selRect.beginColIndex=this.selRect.beginColIndex,this._selRect.endColIndex=this.selRect.endColIndex},_isMulSel:function(){return null==this.selRect&&(this.selRect={}),!(this.selRect.beginRowNode.recNo==this.selRect.endRowNode.recNo&&this.selRect.beginColIndex==this.selRect.endColIndex)},_loadSelRect:function(){null==this.selRect&&(this.selRect={}),null==this._selRect&&(this._selRect={}),this.selRect.beginRowNode=this._selRect.beginRowNode,this.selRect.endRowNode=this._selRect.endRowNode,this.selRect.beginColIndex=this._selRect.beginColIndex,this.selRect.endColIndex=this._selRect.endColIndex},_ondbclick:function(t){t=t||window.event;var e=this._option._this;if(e._isdbclick=!0,null!=e.editObject&&null!=e.editObject.hintView&&"function"==typeof e.editObject.hintView.hide&&e.editObject.hintView.hide(),"function"==typeof e.onDBClick)try{null!=this.editObject&&this.editObject.isFocus()&&this.editObject.doBlur(!0),e.onDBClick(e,t)}catch(t){e.logError("[onDBClick] error:"+t.message+t.stack)}e.hasbind("onDBClick")&&(null!=e.editObject&&"function"==typeof e.editObject.isFocus&&e.editObject.isFocus()&&e.editObject.doBlur(!0),e.trigger("onDBClick",[e,t]))},_onTreePointClick:function(){var t=this._option._this,e=this._option.node;t.post(),e.expanded?e.collapse():(e.expand(),"function"==typeof t.onExpand&&(t.dataSet.select(e),t.onExpand(e),e.hasExpand=!0),t.hasbind("onExpand")&&(t.dataSet.select(e),t.trigger("onExpand",[e]),e.hasExpand=!0)),t.dataSet.select(e),t.selRect.beginRowNode=e,t.selRect.endRowNode=e,t.colIndex=1,t.selRect.beginColIndex=t.colIndex,t.selRect.endColIndex=t.colIndex,t.isSelect=!1,t.refresh(),t.isSelect=!0,t.isTreePointClick=!0,t=null},_refreshMulTitleCheck:function(){for(var t=this.dataSet.rootNode,e=!1,i=!1,s=0,n=t.count;s<n;s++){if(!0===t.getNode(s).checkState?e=!0:i=!0,e&&i)break}!0===e&&!1===i?this.setTitleChecked("@MUL",!0):!1===e&&!0===i?this.setTitleChecked("@MUL",!1):!0===e&&!0===i?this.setTitleChecked("@MUL",!0,!0):this.setTitleChecked("@MUL",!1)},_onTreeCheckBoxClick:function(t){var e=this._option,i=e._this;if(i.post(),i.dataSet.select(e._cNode),e._cNode.checkState?i.dataSet.setUnCheck(e._cNode):i.dataSet.setCheck(e._cNode),(0==e._cNode.level||i.dataSet.autoCheckType.autoCheckAllParent||i.dataSet.autoCheckType.autoUnCheckAllParent)&&i._refreshMulTitleCheck(),"function"==typeof i.onCheckChanged)try{i.onCheckChanged(e._cNode,e._cNode.checkState,"@MUL")}catch(t){i.logError("[onCheckChanged] error:"+t.message+t.stack)}i.trigger("onCheckChanged",[e._cNode,e._cNode.checkState,"@MUL"]),i.trigger("onSelectRow",[e._cNode,e._cNode.checkState,"@MUL"]),i.isSelect&&i.focus&&i.trigger("onSelectEcpRow",[i.getSelectRowIds(),"@MUL",t]),e._cNode.recNo==i.dataSet.getCurNode().recNo&&i._isMulSel()&&(i._saveSelRect(),i.selRect.beginRowNode=this._cNode,i.selRect.endRowNode=this._cNode),i.refresh(),i=null,e=null},_onCommonRadioClick:function(){if(this.getCheck()){var t=this._option,e=t._this,i=t._fieldName,s=t._colModel,n=e.radioCheck[i];if(null!=n&&n.recNo===t._cNode.recNo)return;var o=e.dataSet.getValue(i,t._cNode);e.dataSet.setValue(i,s.editoptions.check,t._cNode),e.isNotEmpty(n)&&e.dataSet.setValue(i,s.editoptions.uncheck,n),e.radioCheck[i]=t._cNode;var h=this.getCheck();if("function"==typeof e.onCheckChanged)try{e.onCheckChanged(t._cNode,h,i)}catch(t){e.logError("[onCheckChanged] error:"+t.message+t.stack)}e.trigger("onCheckChanged",[t._cNode,h,i]),e.trigger("onSelectRow",[t._cNode,h,i]),e.dataPost=!0;var l=e.dataSet,a=l.getDataType(i),r=l.getValue(i),d=l.getDisplay(i),u=l.getOption(i,t._cNode);if("function"==typeof e.onEditing)try{0==e.onEditing(s,o,r,u,t._cNode)&&(e.dataSet.setValue(i,o,t._cNode),e.isNotEmpty(n)&&!0!==n._hasDestroy&&(e.dataSet.setValue(i,s.editoptions.check,n),e.radioCheck[i]=n),e.dataPost=!1,e.focus=!1)}catch(t){this.logError("[onEditing]Error:"+t.message)}if(e.hasbind("onEditing")&&0==e.trigger("onEditing",[s,o,r,u,t._cNode])&&(e.dataSet.setValue(i,o,t._cNode),e.isNotEmpty(n)&&(e.dataSet.setValue(i,s.editoptions.check,n),e.radioCheck[i]=n),e.dataPost=!1,e.focus=!1),e.dataPost&&"function"==typeof e.onAfterEdit)try{e.onAfterEdit(a,i,r,d,s,t._cNode)}catch(t){e.logError("[onAfterEdit] error:"+t.message+t.stack)}e.trigger("onAfterEdit",[a,i,r,d,s,t._cNode]),e.trigger("afterEditCell",[e.getPKeyName(),i,r]),l=null,u=null,t=null}},_updateGroupValues:function(t,e,i,s){this.dataSet.beginUpdate();var n=this.dataSet.getCurNode();null!=s&&this.dataSet.select(s);var o=this.dataSet.getCurNode(),h=this.getColModel(t);for(this.dataSet.next();!this.dataSet.isEof();){var l=this.dataSet.getCurNode();if(!0!==this._isMerge(h,o,l,e))break;this.dataSet.setValue(t,i),this.dataSet.next()}for(this.dataSet.select(o),this.dataSet.prior();!this.dataSet.isBof();){l=this.dataSet.getCurNode();if(!0!==this._isMerge(h,o,l,e))break;this.dataSet.setValue(t,i),this.dataSet.prior()}this.dataSet.select(n),this.dataSet.endUpdate(!1)},_updateTitleCheck:function(t,e){if("checkBox"!==t.editType&&"onoff"!==t.editType)return!1;var i=this;if(null==t)!0===this.getOption().multiSelect&&(!0===(d=this.dataSet.rootNode.count==this.dataSet.rootNode.childCheckCount)?this.setTitleChecked("@MUL",d):this.dataSet.rootNode.childCheckCount>0?this.setTitleChecked("@MUL",!0,!0):this.setTitleChecked("@MUL",!1));else if(1==t.selectAll){var s=t.name;if(this.getOption().treeKey==s||0===e){!0===(d=this.dataSet.rootNode.count==this.dataSet.rootNode.childCheckCount)?this.setTitleChecked("@MUL",d):this.dataSet.rootNode.childCheckCount>0?this.setTitleChecked("@MUL",!0,!0):this.setTitleChecked("@MUL",!1)}else{var n=!0,o=!1,h=t.isCheck;if(null!=t.editoptions&&null!=t.editoptions.check&&(h=t.editoptions.check),null==t.checkFlag&&null==t.unCheckFlag)i.dataSet.each(function(t){this.getValue(s)!==h?n=!1:o=!0},function(){n?i.setTitleChecked(s,!0):o?i.setTitleChecked(s,!0,!0):i.setTitleChecked(s,!1)});else{for(var l=i.dataSet.rootNode,a=0,r=l.cNode.length;a<r;a++){var d,u=l.cNode[a];(d=i.dataSet.getValue(s,u))!==h?n=!1:o=!0}n?i.setTitleChecked(s,!0):o?i.setTitleChecked(s,!0,!0):i.setTitleChecked(s,!1)}}}},_autoCheckParent:function(t,e,i){var s=this.getColModel(e),n=i===s.editoptions.check,o=t.pNode;if(null!=o){var h=this.dataSet.getValue(e,o),l=!1;if(!0===n&&"string"==typeof s.checkFlag&&s.checkFlag.indexOf("b")>=0||!1===n&&"string"==typeof s.unCheckFlag&&s.unCheckFlag.indexOf("b")>=0){for(var a=0,r=o.cNode.length;a<r;a++){var d=o.cNode[a];(p=this.dataSet.getValue(e,d))!==i&&this._setCheckBoxValue(s,i,p,d)}l=!0}if(!0===n&&"string"==typeof s.checkFlag)if(s.checkFlag.indexOf("p")>=0){var u=!0,c=!1;if(!0!==l)for(a=0,r=o.cNode.length;a<r;a++){d=o.cNode[a];if((p=this.dataSet.getValue(e,d))===s.editoptions.uncheck?u=!1:c=!0,!1===u&&!0===c)break}(g=this.dataSet.getCellOption(s.name,o)).someCheck=!1,u?(i!==h&&this._setCheckBoxValue(s,i,h,o),this._autoCheckParent(o,e,i)):c&&(g.someCheck=!0)}else s.checkFlag.indexOf("e")>=0&&(i!==h&&this._setCheckBoxValue(s,i,h,o),this._autoCheckParent(o,e,i));if(!1===n&&"string"==typeof s.unCheckFlag)if(s.unCheckFlag.indexOf("p")>=0){i!==h&&this._setCheckBoxValue(s,i,h,o);for(c=!1,a=0,r=o.cNode.length;a<r;a++){d=o.cNode[a];if((p=this.dataSet.getValue(e,d))===s.editoptions.check){c=!0;break}}var g;(g=this.dataSet.getCellOption(s.name,o)).someCheck=!1,c&&(g.someCheck=!0),this._autoCheckParent(o,e,i)}else if(s.unCheckFlag.indexOf("e")>=0){u=!0;if(!0!==l)for(a=0,r=o.cNode.length;u&&a<r;a++){var p;d=o.cNode[a];(p=this.dataSet.getValue(e,d))===s.editoptions.check&&(u=!1)}u&&(i!==h&&this._setCheckBoxValue(s,i,h,o),this._autoCheckParent(o,e,i))}}},_autoCheckChild:function(t,e,i){var s=this.getColModel(e),n=i===s.editoptions.check;if(t.cNode.length>0&&(this.dataSet.getCellOption(s.name,t).someCheck=!1,"string"==typeof s.checkFlag&&s.checkFlag.indexOf("s")>=0&&!0===n||"string"==typeof s.unCheckFlag&&s.unCheckFlag.indexOf("s")>=0&&!1===n))for(var o=0,h=t.cNode.length;o<h;o++){var l=t.cNode[o],a=this.getValue(e,l);a!==i&&this._setCheckBoxValue(s,i,a,l),this._autoCheckChild(l,e,i)}},_setCheckBoxValue:function(t,e,i,s){var n=this,o=t.name;if(n.dataSet.setValue(o,e,s),!0===t.groups&&n._updateGroupValues(o,i,e,s),"function"==typeof n.onCheckChanged)try{n.onCheckChanged(s,e,o)}catch(t){n.logError("[onCheckChanged] error:"+t.message+t.stack)}n.trigger("onCheckChanged",[s,e,o]),n.trigger("onSelectRow",[s,e,o]),n.dataPost=!0;var h=n.dataSet,l=h.getDataType(o),a=h.getValue(o),r=h.getDisplay(o),d=h.getOption(o,s);if("function"==typeof n.onEditing)try{0==n.onEditing(t,i,a,d,s)&&(n.dataSet.setValue(o,i,s),!0===t.groups&&n._updateGroupValues(o,e,i,s),n.dataPost=!1,n.focus=!1)}catch(t){n.logError("[onEditing]Error:"+t.message)}if(n.hasbind("onEditing")&&0==n.trigger("onEditing",[t,i,a,d,s])&&(n.dataSet.setValue(o,i,s),!0===t.groups&&n._updateGroupValues(o,e,i,s),n.dataPost=!1,n.focus=!1),n.dataPost&&"function"==typeof n.onAfterEdit)try{n.onAfterEdit(l,o,a,r,t,s)}catch(t){n.logError("[onAfterEdit] error:"+t.message+t.stack)}n.trigger("onAfterEdit",[l,o,a,r,t,s]),n.trigger("afterEditCell",[n.getPKeyName(),o,a]),h=null,d=null,n=null},_onCommonCheckBoxClick:function(){var t,e=this._option,i=e._this,s=e._fieldName,n=e._colModel,o=i.dataSet.getValue(s,e._cNode);"string"==typeof(t=this.getCheck()?n.editoptions.check:n.editoptions.uncheck)&&("number"==n.dataType?t=parseInt(t,10):"boolean"==n.dataType&&(t=i.getBooleanValue(t,!1))),i._setCheckBoxValue(n,t,o,e._cNode),i._autoCheckParent(e._cNode,s,t),i._updateTitleCheck(n),i._autoCheckChild(e._cNode,s,t),i.refresh(!0),i=null,n=null,e=null},_getCellOption:function(t,e){return{option:this.dataSet.getCellOption(t),value:this.dataSet.getValue(t),text:this.dataSet.getDisplay(t,null,null,e)}},getColAlign:function(t){var e="",i=this.getColModel(t);if(null==i&&"rn"==t)return"center";var s="";if(null!=i&&(null!=i.align&&(e=i.align),s=i.dataType),null==e||""===e){null!=s&&""!==s||(s="string");e="number"===s||"int"===s||"float"===s?"right":"string"!=s?"center":"left"}return e},_mulSelectStyle:function(t,e,i,s,n,o,h,l,a,r,d){if(null==e&&null!=i&&!0!==i.noUse&&0==i.cellIndex&&this.delStyle(i,"borderRightFocus"),l)if(s.recNo===n.recNo)if(h==this.colIndex){!0!==this.mulCellSelect&&"none"==t.style.display&&null!=t.groupCol&&(t=t.groupCol);var u="gridFocusCell";this.focus||(u="gridNoFocusFocusCell"),t.className!==u&&(this.setStyle(t,u),d&&this.setStyle(e,u)),this.curCell=t,this.curColIndex=this.colIndex}else{u="gridSelRow";if(1==this.focus&&this.selRect.beginRowNode.getIndex()==this.selRect.endRowNode.getIndex()||(u=o%2==0?"gridReadonly":"gridCell"),!0===this.getOption().heightLight&&(u="gridSelRow"),!0!==this.mulCellSelect&&"none"==t.style.display&&null!=t.groupCol){var c=t.groupCol.parentNode.rowIndex,g=t.parentNode.rowIndex,p=c;null!=this.curCell&&(p=this.curCell.parentNode.rowIndex),p>=c&&p<=g&&(t=t.groupCol)}t.className!==u&&this.setStyle(t,u),d&&e.className!==u&&this.setStyle(e,u)}else{if(u=o%2==0?"gridReadonly":"gridCell",!0!==this.mulCellSelect&&"none"==t.style.display&&null!=t.groupCol&&this.curCell!=t.groupCol){c=t.groupCol.parentNode.rowIndex,g=t.parentNode.rowIndex,p=-1;null!=this.curCell&&(p=this.curCell.parentNode.rowIndex),(p<c||p>g)&&(t=t.groupCol)}t.className!==u&&this.setStyle(t,u),d&&e.className!==u&&this.setStyle(e,u)}else if(r){u="gridEditFocusCell";a&&(u="gridFocusCell"),this.focus||(u="gridNoFocusFocusCell"),t.className!==u&&(this.setStyle(t,u),d&&this.setStyle(e,u)),this.curCell=t,this.curColIndex=this.colIndex}else if(this.mulCellSelect)a?("gridReadOnly"!==t.className&&this.setStyle(t,"gridReadonly"),d&&"gridReadOnly"!==e.className&&this.setStyle(e,"gridReadonly")):("gridCell"!==t.className&&this.setStyle(t,"gridCell"),d&&"gridCell"!==e.className&&this.setStyle(e,"gridCell"));else if(a){u="gridReadonly";!0===this.getOption().heightLight&&s.recNo===n.recNo&&(u="gridSelRow"),t.className!==u&&this.setStyle(t,u),d&&e.className!==u&&this.setStyle(e,u)}else{u="gridCell";!0===this.getOption().heightLight&&s.recNo===n.recNo&&(u="gridSelRow"),t.className!=u&&this.setStyle(t,u),d&&e.className!=u&&this.setStyle(e,u)}this.mulCellSelect&&s.scrIndex<=this.selRect.endRowNode.getIndex()&&s.scrIndex>=this.selRect.beginRowNode.getIndex()&&h<=this.selRect.endColIndex&&h>=this.selRect.beginColIndex&&(this.focus||!0===this.getOption().heightLight?(r?"gridCell"!==t.className&&(this.setStyle(t,"gridCell"),d&&this.setStyle(e,"gridCell")):("gridSelRow"!=t.className&&(this.setStyle(t,"gridSelRow"),d&&this.setStyle(e,"gridSelRow")),this.hasCopy&&(this.addStyle(t,"cellCopySate"),d&&this.addStyle(e,"cellCopySate"))),h==this.selRect.beginColIndex&&(this.addStyle(t,"borderLeftFocus"),d&&this.addStyle(e,"borderLeftFocus")),h==this.selRect.endColIndex&&(this.addStyle(t,"borderRightFocus"),d&&this.addStyle(e,"borderRightFocus")),h<=this.selRect.endColIndex&&h>=this.selRect.beginColIndex&&(s.getIndex()==this.selRect.beginRowNode.getIndex()&&(this.addStyle(t,"borderTopFocus"),d&&this.addStyle(e,"borderTopFocus")),s.getIndex()==this.selRect.endRowNode.getIndex()&&("none"===t.style.display&&null!=t.groupCol&&(t=t.groupCol),this.addStyle(t,"borderBottomFocus"),d&&("none"===e.style.display&&null!=e.groupCol&&(e=e.groupCol),this.addStyle(e,"borderBottomFocus"))))):("gridNoFocusSelRow"!==t.className&&(this.setStyle(t,"gridNoFocusSelRow"),d&&this.setStyle(e,"gridNoFocusSelRow")),r&&(t.className="gridNoFocusFocusCell")),r=!1)},_resetCell:function(t,e){document.createDocumentFragment().appendChild(t.rect),e?(this._setHtml(t.rectTd,"",!1),t.rectTd.appendChild(t.rect)):(this._setHtml(t,"",!1),t.appendChild(t.rect)),t.rect.appendChild(t.rect.text),t.rect.style.display=""},_refreshTreeCol:function(t,e,i,s,n,o,h,l,a,r){if(s.count>0||this.getOption().virtual&&1!=s.hasExpand&&1!=s.data.isLeaf){if(i)null==e.treePoint._option&&(e.treePoint._option={}),null==(d=e.treePoint._option)._this&&(d._this=this),d.node=s,e.treePoint.onclick=this._onTreePointClick;else null==t.treePoint._option&&(t.treePoint._option={}),null==(d=t.treePoint._option)._this&&(d._this=this),d.node=s,t.treePoint.onclick=this._onTreePointClick;i?""!==e.rect.style.display&&this._resetCell(e,!0):""!==t.rect.style.display&&this._resetCell(t,!0),s.expanded&&s.count>0?i?this.setStyle(e.treePoint,"component_ui_listview_node_expand"):this.setStyle(t.treePoint,"component_ui_listview_node_expand"):(0==s.count&&(s.expanded=!1),i?this.setStyle(e.treePoint,"component_ui_listview_node_collapse"):this.setStyle(t.treePoint,"component_ui_listview_node_collapse"))}else i?this.clearStyle(e.treePoint):this.clearStyle(t.treePoint),i?""!==e.rect.style.display&&this._resetCell(e,!0):""!==t.rect.style.display&&this._resetCell(t,!0);var d;this.multiSelect?(!0!==t.checkBox.isShow()&&(t.checkBox.show(),t.checkBox.getContainer().parentElement.style.width="14px",i&&(e.checkBox.show(),e.checkBox.getContainer().parentElement.style.width="14px")),i?(s.enable?e.checkBox.setDisable(!1):e.checkBox.setDisable(!0),!0===this.getOption().someCheck&&!0===this.dataSet.autoCheckType.autoCheckAllParent&&s.childCheckCount>0&&s.childCheckCount<s.count?e.checkBox.setSomeCheck(!0):e.checkBox.setCheck(s.checkState),null==e.checkBox._option&&(e.checkBox._option={}),null==(d=e.checkBox._option)._this&&(d._this=this),d._cNode=s,e.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0)):(s.enable?t.checkBox.setDisable(!1):t.checkBox.setDisable(!0),!0===this.getOption().someCheck&&!0===this.dataSet.autoCheckType.autoCheckAllParent&&s.childCheckCount>0&&s.childCheckCount<s.count?t.checkBox.setSomeCheck(!0):t.checkBox.setCheck(s.checkState),null==t.checkBox._option&&(t.checkBox._option={}),null==(d=t.checkBox._option)._this&&(d._this=this),d._cNode=s,t.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0))):t.checkBox.isShow()&&(t.checkBox.hide(),t.checkBox.getContainer().parentElement.style.width="2px",i&&(e.checkBox.hide(),e.checkBox.getContainer().parentElement.style.width="2px"));if(0==this.treeGrid)"none"!=t.levelTd.style.display&&(i?(e.levelTd.style.display="none",e.treeTd.style.display="none",this.multiSelect||(e.checkTd.style.display="none")):(t.levelTd.style.display="none",t.treeTd.style.display="none",this.multiSelect||(t.checkTd.style.display="none")));else{var u=16*s.level+4;this._setNumberValue(t.levelTd,"width",u);var c=this._getNumberValue(t.levelDiv.style.width)-u-this._getNumberValue(t.treeTd.style.width)-this._getNumberValue(t.checkTd.style.width)-4;c<=0&&(c=40),this._setNumberValue(t.rect,"width",c),t.levelTd.level=s.level,i&&(this._setNumberValue(e.levelTd,"width",u),this._setNumberValue(e.rect,"width",c),e.levelTd.level=s.level)}},_refreshCheckCell:function(t,e,i,s,n,o,h,l){if(null==e.onoff)for(var a=0,r=t.rect.text.childNodes.length;a<r;a++){var d=t.rect.text.childNodes[a];d.nodeType<3&&(d.style.display="")}else e.onoff.show(),e.onoff.focus=!1;var u=!1===i;e.getDisable()!=u&&(e.setDisable(u),null!=e.onoff&&(1==u?e.onoff.disable():e.onoff.enable(),e.onoff.refresh()));var c=!1===s;if(e.getReadOnly()!=c&&1==this.getOption().viewModel&&(e.setReadOnly(c),null!=e.onoff&&(e.onoff.setReadOnly(c),e.onoff.refresh())),e.getCheck()!=l){if(!0===this.getOption().someCheck&&!1===l)if("radio"===e.getType())e.setCheck(l);else!0===this.dataSet.getCellOption(h,n).someCheck?e.setSomeCheck(!0):e.setCheck(l);else e.setCheck(l);"radio"===e.getType()&&!0===e.getCheck()&&null==this.radioCheck[h]&&(this.radioCheck[h]=n),null!=e.onoff&&(!0===l?e.onoff.setState(1):e.onoff.setState(0))}else if(!1===l){if(!0===this.getOption().someCheck)if("checkBox"===e.getType())!0===this.dataSet.getCellOption(h,n).someCheck?e.setSomeCheck(!0):e.setCheck(l)}null==e._option&&(e._option={});var g=e._option;g._this=this,g._cNode=n,g._fieldName=h,g._colModel=o,g=null},_bindCellEvent:function(t){null!=t&&!0!==t.noUse&&null==t.onclick&&(t.onclick=this.doSelect,t.ondblclick=this._ondbclick,t.onmousedown=function(t){t=t||event;this._option._this.doCellMouseDown(this,t)},t.onmouseover=function(t){t=t||event;this._option._this.doCellMouseOver(this,t)})},validateAll:function(t){this.dataSet.validateAll(t)},validateValue:function(t,e,i){var s=this.getColModel(e);return null!=s.validate?this.dataSet.validateValue(s.validate,t,e,i):{state:!0,message:""}},gotoCell:function(t,e){this.select(t),this.locateCell(e)},refreshValidate:function(t,e,i,s,n){if(this.isNotEmpty(t.validate)){var o=this.dataSet.getCellOption(t.name,e);if(!0!==o.hasValidate){var h=this.dataSet.validateValue(t.validate,e,t.name,i);h.state?o.validateMessage="":o.validateMessage=h.message||t.validateMessage,o.hasValidate=!0}this.hasbind("onValidate")?this.trigger("onValidate",[t,e,i,s,n,o,this.isNotEmpty(o.validateMessage)]):this.isNotEmpty(o.validateMessage)?(null==n.valiDiv&&(n.valiDiv=this.createElement("DIV"),this.setStyle(n.valiDiv,"validateCell")),n.valiDiv.innerHTML="i",n.valiDiv.title=o.validateMessage,n.rect.appendChild(n.valiDiv),n.valiDiv.style.top=Math.round((this.rowHeight-20-8)/2)+"px"):null!=n.valiDiv&&n.valiDiv.parentNode==n.rect&&(n.valiDiv.innerHTML="",n.valiDiv.remove?n.valiDiv.remove():n.valiDiv.removeNode&&n.valiDiv.removeNode())}},refreshCell:function(t,e,i,s,n,o,h,l,a,r,d){var u=null!=s&&!0!==s.noUse,c=null;if(u?(null==s._option._this&&(s._option._this=this),this._bindCellEvent(s),c=s.rect.text):(null==i._option._this&&(i._option._this=this),this._bindCellEvent(i),c=i.rect.text),h===this._colOrder["@INDEX"]){if(0==this.getOption().rownumbers)return void("1px"!==i.style.width&&(i.style.width="1px",s.style.width="1px"));"60px"!==i.style.width&&(i.style.width="60px",s.style.width="60px");var g=this.dataSet.getIndex();this.setStyle(s,"treeListIndex"),this.setStyle(i,"treeListIndex"),this.getOption().pager&&!isNaN(this.getPageSize())&&(g+=this.getPageSize()*(this.getPageIndex()-1));var p=this.trigger("onFormat_index",[this.dataSet,"index",g,g]);null!=p&&(g=p),this._setHtml(c,g,!1)}else if(h===this._colOrder["@MUL"]){if(null==i.checkBox)return;var f="@MUL";if(u?(this.setStyle(s,"treeListIndex"),this._refreshCheckCell(s,s.checkBox,1==l.enable,!0,l,null,f,l.checkState),s.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0),null!=s.onclick&&(s.onclick=null,s.ondblclick=null)):(this._refreshCheckCell(i,i.checkBox,1==l.enable,!0,l,null,f,l.checkState),i.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0),null!=i.onclick&&(i.onclick=null,i.ondblclick=null)),this.setStyle(i,"treeListIndex"),"function"==typeof this.onCellDraw)try{this.onCellDraw(this.dataSet,f,s)}catch(t){this.logError("call onCellDraw Error:"+t.message+t.stack)}this.trigger("onCellDraw_"+f,[this.dataSet,f,s])}else{var y=l.recNo===a.recNo&&h==this.colIndex;y&&(this.curCell=u?s:i);var m=this._getColModel(h);if(m.hidden)return void("none"!==i.style.display&&(i.style.display="none",u&&(s.style.display="none")));"none"==i.style.display&&!0!==m.groups&&(i.style.display="",u&&(s.style.display=""));f=m.name;!1!==m.ellipsis&&"onoff"!=m.editType&&"checkBox"!=m.editType&&"radio"!=m.editType&&this.addStyle(c,"ellipsis"),"ellipsis"==this.getCurrentStyle(c).textOverflow?c.style.lineHeight=this.rowHeight-4+"px":c.style.lineHeight="normal";var C=r;C||(C=this.getCellReadOnly(f));var S=this._getCellOption(f,d),x=S.option;x.disabled=this.getBooleanValue(x.disabled,!1),this._mulSelectStyle(i,s,n,l,a,o,h,r,C,y,u);var _,b=this.getColAlign(f),v=S.value,w=S.text,N=x.title;if(null!=x.bgColor?u?s.style.backgroundColor!==x.bgColor&&(s.style.backgroundColor=x.bgColor):i.style.backgroundColor!==x.bgColor&&(i.style.backgroundColor=x.bgColor):null!=m.backgroundColor?u?s.style.backgroundColor!==m.backgroundColor&&(s.style.backgroundColor=m.backgroundColor):i.style.backgroundColor!==m.backgroundColor&&(i.style.backgroundColor=m.backgroundColor):u?""!==s.style.backgroundColor&&(s.style.backgroundColor=""):""!==i.style.backgroundColor&&(i.style.backgroundColor=""),null!=x.color?u?s.style.color!==x.color&&(s.style.color=x.color):i.style.color!==x.color&&(i.style.color=x.color):null!=m.color?u?s.style.color!==m.color&&(s.style.color=m.color):i.style.color!==m.color&&(i.style.color=m.color):u?""!==s.style.color&&(s.style.color=""):""!==i.style.color&&(i.style.color=""),null!=N&&""!==N?u?(s.setAttribute("title",N),this.addStyle(s,"redInfo")):(i.setAttribute("title",N),this.addStyle(i,"redInfo")):u?s.setAttribute("title",""):i.setAttribute("title",""),null!=x.GJTitle&&""!==x.GJTitle)if(u)""===(_=s.getAttribute("title"))||null==_?s.setAttribute("title",x.GJTitle):s.setAttribute("title",_+"\n"+x.GJTitle),this.addStyle(s,"redInfo");else""===(_=i.getAttribute("title"))||null==_?i.setAttribute("title",x.GJTitle):i.setAttribute("title",_+"\n"+x.GJTitle),this.addStyle(i,"redInfo");if(1==m.showHint){var O=w;if("string"==typeof O&&(-1!=O.indexOf("<")&&(O=O.replace(/<(\/)?([a-zA-Z]+)( [^<>]+)?>/gi,"")),O=this._textToTag(O.trim())),null!=O&&""!==O){var T=O;if(u){var L=s.title;null!=L&&""!==L&&(T=T+"\n"+L),s.setAttribute("title",T)}else{var k=i.title;null!=k&&""!==k&&(T=T+"\n"+k),i.setAttribute("title",T)}}}if((null==this.getOption().treeKey&&1==h||this.getOption().treeKey===f)&&0!=this.option.treeGrid)this._refreshTreeCol(i,s,u,l,f,w,v,y,C,m);else if("checkBox"!=m.editType&&"onoff"!=m.editType||!this.isNotEmpty(i.checkBox))"radio"==m.editType&&this.isNotEmpty(i.radio)?(u?(this._refreshCheckCell(s,s.radio,1!=x.disabled&&!0!==m.disabled,m.editable,l,m,f,m.editoptions.check==v),!0!==s.radio.hasbind("onClick")&&s.radio.bind("onClick",this._onCommonRadioClick,!0),s.style.textAlign!==b&&(s.style.textAlign=b)):(this._refreshCheckCell(i,i.radio,1!=x.disabled&&!0!==m.disabled,m.editable,l,m,f,m.editoptions.check==v),!0!==i.radio.hasbind("onClick")&&i.radio.bind("onClick",this._onCommonRadioClick,!0),i.style.textAlign!==b&&(i.style.textAlign=b)),y&&(this.inputFocus=!1)):(u?""!==s.rect.style.display&&this._resetCell(s):""!==i.rect.style.display&&this._resetCell(i),y&&(this.inputFocus=!1));else{if(u){if(this._refreshCheckCell(s,s.checkBox,1!=x.disabled&&!0!==m.disabled,m.editable,l,m,f,m.editoptions.check==v),!0!==s.checkBox.hasbind("onClick")&&s.checkBox.bind("onClick",this._onCommonCheckBoxClick,!0),s.style.textAlign!==b&&(s.style.textAlign=b),"onoff"==m.editType){var B=s.checkBox.onoff._getControl();"center"==b?(B.style.marginLeft="",B.style.margin="auto"):"right"==b?(B.style.margin="",B.style.marginLeft="auto"):(B.style.margin="",B.style.marginLeft=""),s.checkBox.onoff.bind("onclick",s.checkBox,function(t,e){t.click(),this.focus=!1},!0)}}else if(this._refreshCheckCell(i,i.checkBox,1!=x.disabled&&!0!==m.disabled,m.editable,l,m,f,m.editoptions.check==v),!0!==i.checkBox.hasbind("onClick")&&i.checkBox.bind("onClick",this._onCommonCheckBoxClick,!0),i.style.textAlign!==b&&(i.style.textAlign=b),"onoff"==m.editType){B=i.checkBox.onoff._getControl();"center"==b?(B.style.marginLeft="",B.style.margin="auto"):"right"==b?(B.style.margin="",B.style.marginLeft="auto"):(B.style.margin="",B.style.marginLeft=""),i.checkBox.onoff.bind("onclick",i.checkBox,function(t,e){t.click(),this.focus=!1},!0)}y&&(this.inputFocus=!1)}if(u?this.refreshValidate(m,l,v,w,s):this.refreshValidate(m,l,v,w,i),"function"==typeof this.onCellDraw)try{u?this.onCellDraw(this.dataSet,f,s):this.onCellDraw(this.dataSet,f,i)}catch(t){this.logError("call onCellDraw Error:"+t.message+t.stack)}if(u?this.trigger("onCellDraw_"+f,[this.dataSet,f,s]):this.trigger("onCellDraw_"+f,[this.dataSet,f,i]),null!=m.alwaysText&&null!=v&&""!==v&&(w=m.alwaysText),this.hasbind("onFormat_"+f)&&(w=this.trigger("onFormat_"+f,[this.dataSet,f,w,v])),!0===m.contentFit)if(null!=this.maxTextLen&&null!=this.maxTextLen[m.name])this.strLen(w)>this.maxTextLen[m.name]&&(this.needContentFit[m.name]=!0);if((!y||C||!this.focus||this.mulCellSelect)&&"checkBox"!=m.editType&&"radio"!=m.editType&&"onoff"!=m.editType)if(this.isNotEmpty(x.link)&&(w="<a href='"+x.link+"'>"+w+"</a>"),u?s.style.textAlign!==b&&(s.style.textAlign=b):i.style.textAlign!==b&&(i.style.textAlign=b),!0===m.link&&!0===C){if(null==c.al){c.al=this.createElement("span");var Y=this;c.al.onmouseup=function(){var t=Y.dataSet.getCurNode();Y.dataSet.beginUpdate(),Y.dataSet.select(this._node),this._node.option[f].linkClick=!0,!1!==Y.trigger("onLinkClick",[Y,this._fieldName,this._node])&&Y.dataSet.select(t),Y.dataSet.endUpdate(!1)}}!0===l.option[f].linkClick?this.setStyle(c.al,"link_visited"):this.setStyle(c.al,"link"),c.al.style.display="",c.al._node=l,c.al._fieldName=f,c.al.id=this.dataSet.getIndex(),this._setHtml(c,""),c.appendChild(c.al),this._setHtml(c.al,w,!1)}else c.innerHTML!==w&&this._setHtml(c,w,!1)}!0===this.getOption().levelBorderOnly&&(-1==i.className.indexOf("gridFocusCell")&&-1==i.className.indexOf("gridNoFocusFocusCell")?(i.style.borderRightWidth="0px",null!=s&&(s.style.borderRightWidth="0px")):(i.style.borderRightWidth="",null!=s&&(s.style.borderRightWidth="")))},_refreshFzTitleWidth:function(){for(var t=0,e=0,i=this.fzGridTable.rows[0].cells.length;e<i;e++){var s=this.fzGridTable.rows[0].cells[e];"none"!=s.style.display&&(t+=this._getNumberValue(s.style.width))}this.fzGridTable.style.width=t+"px"},_setGridTableWidth:function(t){this.gridTable.style.width=t+"px",this.listDivBox.style.width="100%",this._refreshFzTitleWidth(),this.fzSumTable.style.width=this.fzGridTable.style.width,this.sumTable.style.width=this.gridTable.style.width},_hideTotalCell:function(t,e,i,s,n){var o=this.sumTable.rows[t].cells[e];o.style.width=i,o.style.borderRightWidth=s,o.rect.style.display=n,(o=this.fzSumTable.rows[t].cells[e]).style.width=i,o.style.borderRightWidth=s,o.style.display=n,o=null},refreshHiddenState:function(){var t=60,e=[],i=this._colOrder["@INDEX"];if(this.getOption().rownumbers){(o=this.gridTable.rows[0].cells[i]).style.display="",o.style.width="60px",this.fzGridTable.rows[0].cells[i].style.display="",this.fzGridTable.rows[0].cells[i].style.width="60px",!0!==this.getOption().footerrow&&!0!==this.getOption().total||this._hideTotalCell(this.totalIndex,i,"60px","",""),!0===this.getOption().subtotal&&this._hideTotalCell(this.subtotalIndex,i,"60px","",""),this.gridTable.rows[1].cells[i].style.display="",this.gridTable.rows[1].cells[i].style.width="60px",this._setHtml(this.gridTable.rows[1].cells[i],this.numberCaption),this.fzGridTable.rows[1].cells[i].style.display="",this.fzGridTable.rows[1].cells[i].style.width="60px",this._setHtml(this.fzGridTable.rows[1].cells[i],this.numberCaption);for(var s=this.titleRowCount,n=this.gridTable.rows.length;s<n;s++){(o=this.gridTable.rows[s].cells[i]).style.width="60px",o.style.display="",(h=this.fzGridTable.rows[s].cells[i]).style.width="60px",h.style.display=""}}else{this.gridTable.rows[0].cells[i].style.display="none",this.gridTable.rows[0].cells[i].style.width="1px",this.gridTable.rows[1].cells[i].style.display="none",this.fzGridTable.rows[0].cells[i].style.display="none",this.fzGridTable.rows[0].cells[i].style.width="1px",this.fzGridTable.rows[1].cells[i].style.display="none",!0!==this.getOption().footerrow&&!0!==this.getOption().total||this._hideTotalCell(this.totalIndex,i,"1px","0px","none"),!0===this.getOption().subtotal&&this._hideTotalCell(this.subtotalIndex,i,"1px","0px","none"),this.setStyle(this.fzGridTable.rows[1].cells[i],"gridNoneCell"),this.setStyle(this.gridTable.rows[1].cells[i],"gridNoneCell");for(s=this.titleRowCount,n=this.gridTable.rows.length;s<n;s++){(o=this.gridTable.rows[s].cells[i]).style.display="none",this.setStyle(o,"gridNoneCell"),(h=this.fzGridTable.rows[s].cells[i]).style.display="none",this.setStyle(h,"gridNoneCell")}e.push("@INDEX"),t=0}if(this._hasCheckCol&&0==this.treeGrid){i=this._colOrder["@MUL"];if(this.multiSelect){(o=this.gridTable.rows[0].cells[i]).style.width="30px",this.fzGridTable.rows[0].cells[i].style.width="30px",!0!==this.getOption().footerrow&&!0!==this.getOption().total||this._hideTotalCell(this.totalIndex,i,"30px","",""),!0===this.getOption().subtotal&&this._hideTotalCell(this.subtotalIndex,i,"30px","",""),this.gridTable.rows[1].cells[i].style.width="30px",null!=this.gridTable.rows[1].cells[i].checkBox&&this.gridTable.rows[1].cells[i].checkBox.show(),this.fzGridTable.rows[1].cells[i].style.width="30px",null!=this.fzGridTable.rows[1].cells[i].checkBox&&this.fzGridTable.rows[1].cells[i].checkBox.show();for(s=this.titleRowCount,n=this.gridTable.rows.length;s<n;s++){(o=this.gridTable.rows[s].cells[i]).style.width="30px",o.rect.style.display="",(h=this.fzGridTable.rows[s].cells[i]).style.width="30px",h.rect.style.display=""}t+=30}else{this.gridTable.rows[0].cells[i].style.width="1px",this.gridTable.rows[1].cells[i].style.width="1px",null!=this.gridTable.rows[1].cells[i].checkBox&&this.gridTable.rows[1].cells[i].checkBox.hide(),this.fzGridTable.rows[0].cells[i].style.width="1px",this.fzGridTable.rows[1].cells[i].style.width="1px",null!=this.fzGridTable.rows[1].cells[i].checkBox&&this.fzGridTable.rows[1].cells[i].checkBox.hide(),!0!==this.getOption().footerrow&&!0!==this.getOption().total||this._hideTotalCell(this.totalIndex,i,"1px","0px","none"),!0===this.getOption().subtotal&&this._hideTotalCell(this.subtotalIndex,i,"1px","0px","none"),this.setStyle(this.fzGridTable.rows[1].cells[i],"gridNoneCell"),this.setStyle(this.gridTable.rows[1].cells[i],"gridNoneCell");for(s=this.titleRowCount,n=this.gridTable.rows.length;s<n;s++){var o,h;(o=this.gridTable.rows[s].cells[i]).style.width="1px",o.rect.style.display="none",this.setStyle(o,"gridNoneCell"),(h=this.fzGridTable.rows[s].cells[i]).style.width="1px",h.rect.style.display="none",this.setStyle(h,"gridNoneCell")}e.push("@INDEX")}}for(var l=this.option.colModels,a=0,r=l.length;a<r;a++){(u=l[a]).hidden&&e.push(u.name)}e=e.join(",");if(this.hiddenFieldNames!==e){this.hiddenFieldNames=e;var d=this.titleRowCount;for(a=1,r=this.titleCol.length;a<=r;a++){var u=l[a-1],c=this.titleCol[a-1];if(u.hidden){if("none"!=c.style.display){c.style.display="none";for(var g=c.option.bandRowIndex,p=c.option.bandColIndex;this.isNotEmpty(g)&&g>0;){if(1==g&&(p++,p+=this._colIndexDeff()),(f=this.gridTable.rows[g].cells[p]).getAttribute("colSpan")<=1?f.style.display="none":f.setAttribute("colSpan",parseInt(f.getAttribute("colSpan"),10)-1),this.isNotEmpty(c.mainCell))(y=this.fzGridTable.rows[g].cells[p]).getAttribute("colSpan")<=1?y.style.display="none":y.setAttribute("colSpan",parseInt(y.getAttribute("colSpan"),10)-1);g=f.option.bandRowIndex,p=f.option.bandColIndex}}}else if(""!=c.style.display){c.style.display="";for(g=c.option.bandRowIndex,p=c.option.bandColIndex;this.isNotEmpty(g)&&g>0;){var f,y;if(1==g&&(p++,p+=this._colIndexDeff()),(f=this.gridTable.rows[g].cells[p]).getAttribute("colSpan")<1||"none"===f.style.display?(f.style.display="",f.setAttribute("colSpan",1)):f.setAttribute("colSpan",parseInt(f.getAttribute("colSpan"),10)+1),this.isNotEmpty(c.mainCell))(y=this.fzGridTable.rows[g].cells[p]).getAttribute("colSpan")<1||"none"===y.style.display?(y.style.display="",y.setAttribute("colSpan",1)):y.setAttribute("colSpan",parseInt(y.getAttribute("colSpan"),10)+1);g=f.option.bandRowIndex,p=f.option.bandColIndex}}if(!u.hidden){t+=this.getColWidth(a+this._colIndexDeff(),0);var m=c.getAttribute("rowSpan");(m=null!=m&&""!==m?parseInt(m,10):1)<d&&(d=m)}this.isNotEmpty(c.mainCell)&&(c.mainCell.style.display!=c.style.display&&(c.mainCell.style.display=c.style.display),this.fzGridTable.rows[0].cells[a+this._colIndexDeff()].style.display!=c.style.display&&(this.fzGridTable.rows[0].cells[a+this._colIndexDeff()].style.display=c.style.display),"none"!=c.mainCell.style.display&&null!=this.gridTable.rows[0].cells[a+this._colIndexDeff()]&&(this.gridTable.rows[0].cells[a+this._colIndexDeff()].style.width=this.fzGridTable.rows[0].cells[a+this._colIndexDeff()].style.width)),this.gridTable.rows[0].cells[a+this._colIndexDeff()].style.display!=c.style.display&&(this.gridTable.rows[0].cells[a+this._colIndexDeff()].style.display=c.style.display)}if(d>1){if(!0!==this.zipTitleHeight){var C=d-1;for(a=1,r=this.titleCol.length;a<=r;a++){u=l[a-1],c=this.titleCol[a-1];if(!u.hidden){(x=this._getNumberValue(c.getAttribute("rowSpan"),1)-C)<=0&&(x=1);var S=x*this.rowHeight;if(c.style.height=S+"px",this.isNotEmpty(c.mainCell))c.mainCell.style.height=S+"px"}}this.gridTable.rows[1].style.height=this.rowHeight+"px",this.zipTitleHeight=!0,this.initGrid()}}else if(1==this.zipTitleHeight){for(a=1,r=this.titleCol.length;a<=r;a++){u=l[a-1],c=this.titleCol[a-1];if(!u.hidden){var x;(x=this._getNumberValue(c.getAttribute("rowSpan"),1))<=0&&(x=1);S=x*this.rowHeight;if(c.style.height=S+"px",this.isNotEmpty(c.mainCell))c.mainCell.style.height=S+"px"}}this.gridTable.rows[1].style.height="",this.zipTitleHeight=!1,this.initGrid()}l=null,null,this._setGridTableWidth(t),this._asynRun(function(){this.thisWindow.offsetWidth>0&&this._suitTitleHeight()},0)}},refreshSortState:function(t){null==t&&(t=this.getFieldName());var e=this.sortTables[t],i=this.getColModel(t);if((0!=this.getOption().filter||!1!==this.getOption().sort)&&null!=e&&0!=i.filter){e.colIndex=this.colIndex,e.style.display="";var s=this.dataSet.getFilterState(t);e.filtered=s,this._sortFieldName==t?("none"==e.sortState?this.dataSet.filtered&&s?this.setStyle(e.sortIcon,"filter"):this.setStyle(e.sortIcon,"sortDefault"):"up"==e.sortState?this.dataSet.filtered&&s?this.setStyle(e.sortIcon,"filterUp"):!1===this.getOption().filter||!1===i.filter?this.setStyle(e.sortIcon,"sortUpOnly"):this.setStyle(e.sortIcon,"sortUp"):"down"==e.sortState&&(this.dataSet.filtered&&s?this.setStyle(e.sortIcon,"filterDown"):!1===this.getOption().filter||!1===i.filter?this.setStyle(e.sortIcon,"sortDownOnly"):this.setStyle(e.sortIcon,"sortDown")),e.state=e.sortState):(this.dataSet.filtered&&s?!1===this.getOption().sort||!1===i.sort?this.setStyle(e.sortIcon,"filterOnly"):this.setStyle(e.sortIcon,"filter"):this.setStyle(e.sortIcon,"sortDefault"),e.state="none")}var n=!1===this.getOption().filter&&!1===this.getOption().sort;for(var o in this.sortTables){var h=this.sortTables[o];(o!==t||n)&&(1!=h.filtered&&(h.style.display="none"),o!=this._sortFieldName&&null!=h&&"none"!=h.sortState&&(h.sortState="none")),h=null}},refreshScrollBar:function(){var t=this.dataSet.getVisibleCount(),e=(!0===this.getOption().footerrow||this.getOption().total,0);this.hafRow&&(e++,!0===this.getOption().subtotal&&e++);var i=this._getNumberValue(this.gridTable.style.width,0);if(this._addNew&&(this.getOption().width-i<18&&this.getOption().width>i&&0==this.scrollBar.visible?this.rowCount-e+1==t&&(this.rowCount--,this._asynRun(function(){null!=this.scrollBar&&this.scrollBar.scrollNext()},50)):null!=this.bottomNode&&this.bottomNode.scrIndex==t&&this.bottomNode.recNo===this.dataSet.getCurNode().recNo&&this._asynRun(function(){null!=this.scrollBar&&this.scrollBar.scrollNext()},50)),this.visibleCount!=t||this.rowCount-e!=this.scrollBar.visibleCount){if(this.rowCount-e<t){var s=this.getHScrollHide();this.scrollBar.setVisible(!0),!0===s&&!1===this.getHScrollHide()&&this.rowCount--,this.scrollBar.setScrollCount(t,this.rowCount-e)}else null!=this.topNode&&0===this.topNode.level&&0===this.topNode.index&&(this.topNode.scrIndex=1),this.getRecordCount()>0&&null!=this.topNode&&this.topNode.scrIndex>1&&(this.topNode=this.dataSet.getChildNode(0,this.dataSet.rootNode),this.topNode.scrIndex=1,this.refresh()),this.scrollBar.scrollIndex=0,this.scrollBar.setScrollCount(0,0),this.scrollBar.setVisible(!1);this.visibleCount=t}else 0==this.visibleCount&&this.scrollBar.setVisible(!1);this.base()},getPageIndex:function(){return this.pageObj.getPageIndex()},getPageSize:function(){return this.pageObj.getPageSize()},getPageCount:function(){return this.pageObj.getPageCount()},getColModel:function(t){if(null==t){for(var e=[],i=0,s=this.option.colModels.length;i<s;i++){var n=this.option.colModels[i];1!=n.hidden&&e.push({dataType:n.dataType,style:this.getColAlign(n.name)})}return e}return this.option.colModelJson[t]},_getColModel:function(t){return this.option.colModels[t-1-this._colIndexDeff()]||{}},getFieldName:function(t){return null==t&&(t=this.colIndex),this._getColModel(t).name},setContainer:function(t){null!=t.length&&(t=t[0]),this.container=t},saveChangeSet:function(t){if(null==t||""===t)return!1;null!=this._cacheKey&&""!==this._cacheKey&&(null==this._cacheChangeSet&&(this._cacheChangeSet={}),this._cacheChangeSet[this._cacheKey]=this.getChangeSet(!0),null==this._cacheEcpChangeSet&&(this._cacheEcpChangeSet={}),this._cacheEcpChangeSet[this._cacheKey]=this.getEcpChangeSet(!0)),this._cacheKey=t},loadChangeSet:function(t,e){if(null!=t&&""!==t&&null!=this._cacheChangeSet){var i=this._cacheChangeSet[t];if(null!=this._cacheChangeSet&&null!=i){for(var s=this.getOption().idkey,n={},o=[],h={},l={},a=0,r=i.length;a<r;a++){var d=i[a];(d.modelState&this.dataSet.modelState.NEW)>0?(o.push(d),l[d._index]=!0,null!=this.getOption().pidkey&&(h[d[this.getOption().pidkey]]=!0)):n[d[s]]=d}var u=this;this.dataSet.each(function(t){var e=this.getValue(this.getOption().idkey,t),i=n[e];if(null!=i){var s=i.modelState;if((s&this.modelState.DELETE)>0)this.delRecord(t);else if((s&this.modelState.MODIFY)>0){var o=i._oldValue;for(var l in o)this.setValue(l,i[l])}if(null!=this.getOption().pidkey&&""!==this.getOption().pidkey){var a=this.getValue(this.getOption().pidkey);!0===h[a]&&(h[a]=t)}}},function(){for(var t=0,i=o.length;t<i;t++){var s=o[t],n=s._index,l=u.dataSet.rootNode;null!=u.getOption().pidkey&&""!==u.getOption().pidkey&&(l=h[s[u.getOption().pidkey]]),null==n||n>l.getCount()-1?u.dataSet.appendItem(s,l):u.dataSet.insertItem(n,s,l)}u.refresh(),u=null,"function"==typeof e&&e.apply(this)})}else"function"==typeof e&&e.apply(this)}else"function"==typeof e&&e.apply(this)},initValue:function(t,e,i,s){try{if(1==this._hasDestroy)return;if(1!=this.rendered)return;if(1==this._lockValue)return void("function"==typeof this._icpData&&this._icpData(t));var n=void 0===e?"undefined":_typeof(e);"function"==n?(s=e,e=null):"string"==n?(i=e,e=null):"function"==typeof i&&(s=i,i=null);var o=this;this.dataSet.initSort=(null==e||e)&&0!=this.treeGrid&&!1!==this.getOption().initSort,this.dataSet.isTree=0!=this.treeGrid,this.dataSet.clearFilterText();var h=this.getOption().treeId||this.getOption().idkey||this.getOption().idKey;null==h&&(h=this.getPKeyName()),this.dataSet.getOption().idkey=h;var l=this.getOption().parentKeyId||this.getOption().pidkey||this.getOption().pidKey;this.getOption().treePidData||null!=l&&""!==l?(this.dataSet.initSort=!1,this.dataSet.setIDPID(h,l)):this.dataSet.setItemCode(h),this.multiSelect&&this.setTitleChecked("@MUL",!1);var a=!1;for(var r in this.sortTables)this.sortTables[r].sortState="none";if(null!=this.transState)for(var r in this.transState)this.transState[r].transed=!1;this.dataSet.PKeyName=[],this.dataSet.clearExpress(),this.dataSet.clearGJExpress(),this.radioCheck={},this.editObjects={},this.editObject=null,this._lockDestroy=!0,null!=i&&""!==i||!0!==this.getOption().cacheChangeSet||!0!==this.getOption().pager||(i=this.getPageSize()+"_"+this.getPageIndex()),null!=i&&""!==i&&this.saveChangeSet(i),this.initMaxText(),this.dataSet.setItemList(t,function(){if(null!=o.gridTable&&0!=o.gridTable.rows.length){o.getOption().pager&&o.pageObj&&o.pageObj.resetCount();var t=o._getNumberValue(o.thisWindow.style.width,o.getOption().width);o.isShow()&&t>0&&(t>o.getOption().width+2||t<o.getOption().width)&&o.setWidth(t),o.refreshScrollBar();for(var e=o.option.colModels,n=[],h=[],l={},r=!1,d=0,u=e.length;d<u;d++){var c=e[d];!0===c.contentFit&&n.push(c.name),!0===c.titleFit&&h.push(c.name),!0===c.selectAll&&o._updateTitleCheck(c,d),"radio"==c.editType&&(l[c.name]=!0,r=!0)}r&&o.dataSet.each(function(t){for(var e in l){this.getValue(e,t)==c.editoptions.check&&!0===l[e]&&(o.radioCheck[e]=t)}}),e=null;var g=o;if(0==o.getOption().isExpanded&&o.dataSet.fullCollapse(function(){g.getOption().defSelect?g.first():g.noSelect(),!0===g.getOption().suitToFit&&g.suitToFit(),g=null}),o.dataSet.caculateSum(!0),null!=o.gridTable&&0!=o.gridTable.rows.length){if(o.getOption().defSelect?o.first():o.noSelect(),o._tmpScrollVisible=null,h.length>0&&o.setTitleFit(h,null),n.length>0?o.setContentFit(n,null,function(){!1!==this.getOption().shrinkToFit&&this.gridTable.rows.length>0&&this.shrinkToFit(),(!0===this.getOption().suitToFit||!0===o.shrinkAdd&&o.gridTable.offsetWidth-o.getWidth()<20)&&this.suitToFit(),o.shrinkAdd=!1}):(!1!==o.getOption().shrinkToFit&&o.shrinkToFit(),(!0===o.getOption().suitToFit||!0===o.shrinkAdd&&o.gridTable.offsetWidth-o.getWidth()<20)&&o.suitToFit(),o.shrinkAdd=!1),"function"==typeof o.onAfterLoad)try{o.onAfterLoad()}catch(t){o.logError("[onAfterLoad] error:"+t.message+t.stack)}if(null!=i&&""!==i)o.loadChangeSet(i,function(){if(o.trigger("onAfterLoad",[]),o.trigger("gridComplete",[]),o.dataSet.getRecordCount()>0){if(o.hasbind("rowChanged")&&o.trigger("rowChanged",[o.dataSet]),"function"==typeof o.onRowChanged)try{o.onRowChanged(o.dataSet)}catch(t){o.logError("onRowChanged event fire error!")}o.trigger("onRowChanged",[o.dataSet])}"function"==typeof s&&s.apply(o),a=!0,o._lockDestroy=!1,o=null});else{if(o.trigger("onAfterLoad",[]),o.trigger("gridComplete",[]),o.dataSet.getRecordCount()>0){if(o.hasbind("rowChanged")&&o.trigger("rowChanged",[o.dataSet]),"function"==typeof o.onRowChanged)try{o.onRowChanged(o.dataSet)}catch(t){o.logError("onRowChanged event fire error!")}o.trigger("onRowChanged",[o.dataSet])}"function"==typeof s&&s.apply(o),a=!0,o._lockDestroy=!1,o=null}}}})}catch(t){o.trigger("loadError",[null,t,t.message]),o.logError("[initValue] error:"+t.message+t.stack)}a||(this.topNode=this.dataSet.getCurNode(),this.selRect.beginRowNode=this.topNode,this.selRect.endRowNode=this.topNode,this.topCount=0),a||0==this.getOption().isExpanded||(this.getOption().defSelect?this.first():this.noSelect()),this._suitTitleHeight()},value:function(t){function e(e,i,s,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e,i,s){if(1!=this._hasDestroy){if(1!=this._lockValue)return arguments.length?void this.initValue(t,e,i,s):this.getDisplayAsJson(!0);"function"==typeof this._icpData&&this._icpData(t)}}),getPrintData:function(t,e){"function"==typeof t&&(e=t,t="all");var i={},s=this;this.getRangeData(t,!0,function(t){i[s.getName()]=t;for(var n={rn:s.summaryText},o=s.getOption().colModels,h=0,l=o.length;h<l;h++){var a=o[h];n[a.name]=s.dataSet.getDisplay(a.name,s.dataSet.getSummary(a.name))}i[s.getName()+"_sum"]=[n],"function"==typeof e&&e(i)})},addJSONData:function(t){this.initValue(t.data)},select:function(t){if(this.dataSet.select(t),this._saveSelRect(),this.selRect.beginRowNode=t,this.selRect.endRowNode=t,this.refresh(),this.scrollToFocus(),"function"==typeof this.onSelect&&1!=this.focusSelect)try{this.onSelect(this.dataSet.curNode,this.getFieldName())}catch(t){this.logError("[onSelect]ERR:"+t.message)}this.trigger("onCellSelect",[this.getPKeyName(),this.colIndex,this]),this.trigger("onSelectEcpRow",[this.getSelectRowIds(),this.getFieldName()])},_checkValidate:function(t){if(null!=this.editObject&&this.inputFocus){var e=this.getColModel(t);if(null!=e.validate&&(1===e.validateLevel||2==e.validateLevel)){var i=this.dataSet.getCurNode();this.editObject.setBlur();var s=this.editObject.getValue(),n=this.validateValue(i,t,s);if(!1===n.state)if(this.titleTip.setText(this._tagToText(n.message)),this.titleTip.execute("right",this.editObject.getContainer().parentElement),1==e.validateLevel){var o=this.dataSet.getValue(t);this.editObject.setValue(o)}else!1}}},doSelect:function(t){var e=this._option._this,i=this.parentNode._node;if(!0!==e.isTreePointClick){if(e.mouseEdit=!1,e.isSelect){if(!1===e.trigger("beforeSelectRow",[e.dataSet.getCurNode(),i]))return;var s=e.getFieldName();if(!1===e._checkValidate(s))return;if(0!=e.dataPost){if(e.dataSet.getCurNode().recNo!=i.recNo||e.shiftKeyDown){var n=e.dataSet.getIndex(),o=i.getIndex();e.shiftKeyDown&&!1!==e.getOption().rectSelect?n==e.selRect.beginRowNode.getIndex()?o>=e.selRect.beginRowNode.getIndex()?(e.selRect.endRowNode=i,e.dataSet.select(e.selRect.beginRowNode)):(e.selRect.endRowNode=e.selRect.beginRowNode,e.selRect.beginRowNode=i,e.dataSet.select(e.selRect.endRowNode)):o<=e.selRect.endRowNode.getIndex()?(e.selRect.beginRowNode=i,e.dataSet.select(e.selRect.endRowNode)):(e.selRect.beginRowNode=e.selRect.endRowNode,e.selRect.endRowNode=i,e.dataSet.select(e.selRect.beginRowNode)):(e.post(),e.dataSet.select(i),e.selRect.beginRowNode=i,e.selRect.endRowNode=e.selRect.beginRowNode),this.tmpClassName=""}else e.selRect.beginRowNode=i,e.selRect.endRowNode=e.selRect.beginRowNode;if(this._cellIndex!==e._colOrder["@INDEX"]||e.shiftKeyDown){var h=e.colIndex;e.colIndex=this._cellIndex;var l=e.colIndex;e.shiftKeyDown&&!1!==e.getOption().rectSelect?0==l?(e.selRect.beginColIndex=1,e.selRect.endColIndex=e.colCount-1,e.colIndex=1):h==e.selRect.beginColIndex?l>=e.selRect.beginColIndex?(e.selRect.endColIndex=l,e.colIndex=e.selRect.beginColIndex):(e.selRect.endColIndex=e.selRect.beginColIndex,e.selRect.beginColIndex=l,e.colIndex=e.selRect.endColIndex):l<=e.selRect.endColIndex?(e.selRect.beginColIndex=l,e.colIndex=e.selRect.endColIndex):(e.selRect.beginColIndex=e.selRect.endColIndex,e.selRect.endColIndex=l,e.colIndex=e.selRect.beginColIndex):(e.post(),e.selRect.beginColIndex=e.colIndex,e.selRect.endColIndex=e.colIndex,e.colIndex=e.selRect.beginColIndex)}else if(!1!==e.getOption().rectSelect){e.post(),e.selRect.beginColIndex=1+e._colIndexDeff(),e.selRect.endColIndex=e.colCount-1,e.colIndex=1+e._colIndexDeff();for(var a=[],r=0,d=e.getOption().colModels.length;r<d;r++){var u=e.getOption().colModels[r];!0===u.groups&&a.push(u.name)}e._refreshMulSelect(a)}if(e.logInfo("select cell"),e.refresh(null,!0),null!=e._lastNode&&e.dataSet.getCurNode().recNo==e._lastNode.recNo&&e.scrollBar.scrollNext(),"doCellMouseDown"!==e._priorClickFrom){if("function"==typeof e.onSelect&&1!=this.focusSelect)try{e.onSelect(e.dataSet.curNode,e.getFieldName())}catch(t){e.logError("[onSelect]ERR:"+t.message)}if(e.trigger("onCellSelect",[e.getPKeyName(),e.colIndex,e,t]),e.trigger("onSelectEcpRow",[e.getSelectRowIds(),e.getFieldName(),t]),"function"==typeof e.onClick&&1!=this.focusClick)try{e.onClick(e.dataSet.curNode,e.getFieldName(),t)}catch(t){e.logError("[onClick]ERR:"+t.message)}e.logInfo("doSelect onClick_"),e.trigger("onClick",[e.dataSet.curNode,e.getFieldName(),t]),e._priorClickFrom}else e._priorClickFrom;this.focusClick=!1,this.focusSelect=!1}else e.inputFocus&&!0!==e._hasScroll&&"function"==typeof e.editObject.setFocus&&e.editObject.setFocus();if(null!=e.editObject&&!0===e.inputFocus){var c=e.editObject;c.option&&!0===c.option.disInput&&"function"==typeof c.dropPopView&&c.dropPopView()}}e._isdbclick=!1,e.dataPost=!0,e.isSelect=!0}else e.isTreePointClick=!1},doScroll:function(t,e){if(0!==e){var i=this;i.post(),i.topIndex=t,i.dataSet.beginUpdate();var s=i.dataSet.curNode;if(i.dataSet.select(i.topNode),e>0)for(var n=0;n<e;n++)i.dataSet.next();else for(n=0;n>e;n--)i.dataSet.prior();if(i.topNode=i.dataSet.curNode,i.dataSet.select(s),s=null,i.dataSet.endUpdate(!1),i._update){i.refresh();var o=[];for(var h in i.needContentFit){!0===i.needContentFit[h]&&o.push(h)}if(o.length>0){var l=i.getHScrollHide();i.setContentFit(o,function(){(!0===i.getOption().suitToFit||!0===l&&!1!==i.getOption().shrinkToFit)&&i.suitToFit()})}}i=null}if(this.scrollBar.scrollIndex+this.scrollBar.visibleCount===this.scrollBar.scrollCount){if("function"==typeof this.onScrollEnd)try{this.onScrollEnd()}catch(t){this.logError("[onScrollEnd]ERR:"+t.message+t.stack)}this.trigger("onScrollEnd",[this.scrollBar.scrollCount])}if(0==this.scrollBar.scrollIndex){if("function"==typeof this.onScrollBegin)try{this.onScrollBegin()}catch(t){this.logError("[onScrollBegin]ERR:"+t.message+t.stack)}this.trigger("onScrollBegin",[this.scrollBar.scrollCount])}},doMouseWheel:function(t){this.base(t);var e=t;if(this.scrollBar.visible&&(null==this.isMouseOver||!0===this.isMouseOver())&&(null==this.editObject||!0!==this.editObject.getPopState())){return(e.wheelDelta?e.wheelDelta:-1*e.detail)>0?this.scrollBar.scrollPrior():this.scrollBar.scrollNext(),e.returnValue=!1,e=null,null,!1}return!0},showFocusCell:function(t){if(null==t&&(t=this.curCell),null!=t){var e=this.listDiv.offsetWidth,i=this.fzGridTable.offsetWidth,s=t.getBoundingClientRect(),n=this.listDiv.getBoundingClientRect().left,o=s.left-n,h=s.right-n;this.colIndex==1+this._colIndexDeff()||this.colIndex<this.fzColCount?this.listDiv.scrollLeft=0:h>e+2?this.listDiv.scrollLeft=t.offsetLeft+t.offsetWidth-e+2:o<i&&(this.listDiv.scrollLeft=this.listDiv.scrollLeft-(i-o)-2)}},_moveRight:function(t,e){this.scrollToFocus();var i=0,s=this.colIndex-this._colIndexDeff(),n=this.getOption().colModels;if(null==n[s])return!1;for(var o=n.length;s<o&&n[s].hidden;)i++,s++;n=null;var h=this.colCount-1;if(this.colIndex+i<h||t.shiftKey)t.shiftKey&&e==this.keyBoard.RIGHT?(this.colIndex>this.selRect.beginColIndex?this.selRect.beginColIndex+=i+1:this.selRect.endColIndex<h&&(this.selRect.endColIndex+=i+1),this.refresh(null,!0)):(this.post(),this.dataPost?(this.colIndex+=i+1,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh(null,!0),this.showFocusCell(this.curCell)):this.inputFocus&&!0!==this._hasScroll&&("function"==typeof this.editObject.setFocus&&this.editObject.setFocus(),this.mouseEdit=!1));else if(this.colIndex+i==h)if(this.post(),this.dataPost){this.dataSet.getRecNo();this.next();var l=this.dataSet.isEof();this.refresh(),l||(this.listDiv.scrollLeft=0,this.colIndex=1+this._colIndexDeff(),this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh())}else this.inputFocus&&!0!==this._hasScroll&&"function"==typeof this.editObject.setFocus&&this.editObject.setFocus();return!1},_moveLeft:function(t,e){this.scrollToFocus();for(var i=0,s=this.colIndex-i-2-this._colIndexDeff(),n=this.getOption().colModels;s>=0&&n[s].hidden;)i++,s=this.colIndex-i-2-this._colIndexDeff();if(n=null,this.colIndex>1+i+this._colIndexDeff()||t.shiftKey&&e==this.keyBoard.LEFT)t.shiftKey&&e==this.keyBoard.LEFT?(this.colIndex<this.selRect.endColIndex?this.selRect.endColIndex-=i+1:this.selRect.beginColIndex>1&&(this.selRect.beginColIndex-=i+1),this.refresh(null,!0)):(this.post(),this.dataPost?(this.colIndex-=i+1,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh(null,!0),this.showFocusCell(this.curCell)):this.inputFocus&&!0!==this._hasScroll&&"function"==typeof this.editObject.setFocus&&this.editObject.setFocus());else if(this.colIndex+i==1+this._colIndexDeff())if(this.post(),this.dataPost){var o=this.dataSet.getRecNo();this.dataSet.prior();var h=this.dataSet.isBof();this.topNode.recNo==o?this.scrollBar.scrollPrior():this.refresh(),h||(this.listDiv.scrollLeft=this.listDiv.scrollWidth,this.colIndex=this.colCount-1,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh(null,!0))}else this.inputFocus&&!0!==this._hasScroll&&"function"==typeof this.editObject.setFocus&&this.editObject.setFocus();return!1},doKeyDown:function(t,e){if(this.dataSet.getRecordCount()<=0)return!1;if(this.keyBoard.HOME==e)return!!this.mouseEdit||(this.first(),this.refresh(),!0);if(this.keyBoard.END==e)return!!this.mouseEdit||(this.last(),this.refresh(),this.scrollBar.scrollNext(),!0);if(this.keyBoard.ESC==e)null!=this.editObject&&(this.dataPost?"function"==typeof this.editObject.refresh&&this.editObject.refresh():("function"==typeof this.editObject.setValue&&this.editObject.setValue(this.dataSet.getDisplay(this.getFieldName())),this.dataPost=!0));else{if(t.shiftKey&&this.keyBoard.TAB==e)return this._moveLeft(t,e),!0;if(t.ctrlKey||this.priorKey===this.keyBoard.CTRL)return this.doPaste=!1,e==this.keyBoard.C?(this.hasCopy=!0,!0):(e==this.keyBoard.A&&(this.colIndex=1,this.selRect.beginColIndex=1,this.selRect.endColIndex=this.colCount-1,this.dataSet.beginUpdate(),this.dataSet.last(),this.selRect.endRowNode=this.dataSet.getCurNode(),this.dataSet.first(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.dataSet.endUpdate(!1),this.focus||this.setFocus(),this.refresh()),this.priorKey===this.keyBoard.CTRL);if(e==this.keyBoard.DOWN){if(this.mouseEdit)return!0;if(this.dataSet.getLevel()<0)return this.first(),this.mouseEdit=!1,!1;if(t.shiftKey){var i=this.dataSet.getIndex(),s=this.dataSet.getCurNode();this.dataSet.beginUpdate(),this.dataSet.next(),i>this.selRect.beginRowNode.getIndex()?(this.dataSet.select(this.selRect.beginRowNode),this.dataSet.next(),this.selRect.beginRowNode=this.dataSet.getCurNode()):(this.dataSet.select(this.selRect.endRowNode),this.dataSet.next(),this.selRect.endRowNode=this.dataSet.getCurNode()),this.dataSet.select(s),this.dataSet.endUpdate(!1),s=null,this.refresh(null,!0)}else if(this.post(),this.dataPost){this.dataSet.beginUpdate();s=this.dataSet.getCurNode();this.dataSet.next(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.dataSet.select(s),this.dataSet.endUpdate(!1),s=null,this.next()}else this.inputFocus&&!0!==this._hasScroll&&"function"==typeof this.editObject.setFocus&&this.editObject.setFocus();return this.mouseEdit=!1,!1}if(e==this.keyBoard.UP){if(this.mouseEdit)return!0;if(this.dataSet.getLevel()<0)return!1;if(t.shiftKey){this.dataSet.beginUpdate();i=this.dataSet.getIndex(),s=this.dataSet.getCurNode();i<this.selRect.endRowNode.getIndex()?(this.dataSet.select(this.selRect.endRowNode),this.dataSet.prior(),this.selRect.endRowNode=this.dataSet.getCurNode()):(this.dataSet.select(this.selRect.beginRowNode),this.dataSet.prior(),this.selRect.beginRowNode=this.dataSet.getCurNode()),this.dataSet.select(s),this.dataSet.endUpdate(!1),this.refresh()}else if(this.post(),this.dataPost){this.dataSet.beginUpdate();s=this.dataSet.getCurNode();this.dataSet.prior(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.dataSet.select(s),s=null,this.dataSet.endUpdate(!1),this.prior()}else this.inputFocus&&!0!==this._hasScroll&&"function"==typeof this.editObject.setFocus&&this.editObject.setFocus();return this.mouseEdit=!1,!1}if(e==this.keyBoard.RIGHT||e==this.keyBoard.TAB)return!(!this.mouseEdit||e!=this.keyBoard.RIGHT)||!(this.dataSet.getLevel()<0)&&(e==this.keyBoard.TAB&&(this.mouseEdit=!1),this._moveRight(t,e),!1);if(e==this.keyBoard.LEFT)return!!this.mouseEdit||!(this.dataSet.getLevel()<0)&&(this._moveLeft(t,e),!1);e==this.keyBoard.F2?null!=this.editObject&&"ComboBox"!==this.editObject.className&&"BottonEdit"!==this.editObject.className&&(this.mouseEdit=!this.mouseEdit):t.shiftKey&&(this.shiftKeyDown=!0)}},post:function(){},doKeyUp:function(t,e){if(this.overKey)return this.overKey=!1,!1;if(t.ctrlKey||this.hasCopy||this.doPaste)if(e==this.keyBoard.C)this.clearMark=null,this.refresh();else{if(e==this.keyBoard.PgUp){for(var i=0;i<this.rowCount-1;i++)this.scrollBar.scrollPrior();return!0}if(e==this.keyBoard.PgDn){for(i=0;i<this.rowCount-1;i++)this.scrollBar.scrollNext();return!0}}else if(e==this.keyBoard.ENTER){if(this.mouseEdit=!1,this.dataSet.getLevel()<0)return!1;if(this.post(),this.getOption().EnterDown){if(this.dataPost)if(t.shiftKey){var s=this.dataSet.getRecNo();this.dataSet.prior();var n=this.dataSet.isBof();this.topNode.recNo==s?this.scrollBar.scrollPrior():this.refresh(),n&&this.colIndex>1&&(this.colIndex=this.colIndex-1,this.last(),this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.selRect.beginColIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.scrollBar.scrollNext())}else{s=this.dataSet.getRecNo();this.dataSet.next(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode;var o=this.dataSet.isEof();o||this.bottomNode.recNo!=s?this.refresh():this.scrollBar.scrollNext(),o&&this.colIndex<this.colCount-1&&(this.colIndex=this.colIndex+1,this.first(),this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.selRect.beginColIndex)}else this.inputFocus&&!0!==this._hasScroll&&"function"==typeof this.editObject.setFocus&&this.editObject.setFocus();return!1}t.shiftKey?this._moveLeft(t,e):this._moveRight(t,e),this.setFocus()}else t.shiftKey||(this.shiftKeyDown=!1);this.pasteKeyPress=!1,this.priorKey=e},addTreeNode:function(t,e,i){if(!this.isEmpty(e)&&"string"!=typeof e||"object"!=(void 0===t?"undefined":_typeof(t))||(i=e,e=t,t=null),this.isEmpty(e))return!1;var s=1;this.isArray(e)&&(s=e.length),this._addNew=!0;var n=this;"brother"===(i=i||"brother")?this.dataSet.append(e,null,function(){s>50&&n.refresh()}):"child"===i&&this.dataSet.appendChild(e,null,function(){s>50&&n.refresh()}),this.trigger("afterInsertRow",[this.getPKeyName(),e,i]),this.trigger("onChanged",[this]),s<=50&&this.refresh()},delTreeNode:function(t){this.delEcpRowData(t)},delRecord:function(t){this.delEcpRowData(t)},delEcpRowData:function(t){var e=!0===this.scrollBar.visible;if(this.dataSet.getRecordCount()>0){var i=this.dataSet.getCurNode(),s=null!=i&&this.topNode.recNo===i.recNo,n=0,o=this.selRect.endRowNode.recNo==i.recNo,h=this.selRect.beginRowNode.recNo==i.recNo;if(null!=t){var l=this.getPKeyName();if(this.isArray(l)){if(!(l.length>0))return;l=l[0]}if(this.isArray(t)){for(var a=!1,r=0,d=t.length;r<d;r++){var u=t[r];(this.dataSet.getValue(l)==u||this.dataSet.locate(l,u,!0))&&(this.dataSet.getValue(l,i)==this.dataSet.getValue(l)&&(a=!0),this.dataSet.delRecord(),n++)}s=a}else(this.dataSet.getValue(l)==t||this.dataSet.locate(l,t,!0))&&(this.dataSet.getValue(l,i)!=this.dataSet.getValue(l)&&(s=!1),this.dataSet.delRecord(),n++)}else this.dataSet.delRecord(),n++;if(this.dataSet.getRecordCount()>0){if(this.hasbind("rowChanged")&&this.trigger("rowChanged",[this.dataSet]),"function"==typeof this.onRowChanged)try{this.onRowChanged(this.dataSet)}catch(t){this.logError("onRowChanged event fire error!")}this.trigger("onRowChanged",[this.dataSet])}i=this.dataSet.getCurNode(),o&&(this.selRect.endRowNode=i),h&&(this.selRect.beginRowNode=i),s&&this.dataSet.getRecordCount()>0&&(this.topNode=this.dataSet.getCurNode(),this.topNode.scrIndex>1&&this.topNode.scrIndex--),n>0&&!0===this.getOption().pager&&this.pageObj.delCount(n),!0===this.getOption().multiSelect&&this._refreshMulTitleCheck(),i=null,this.refresh()}!0===this.multiSelect&&0==this.dataSet.getRecordCount()&&this.setTitleChecked("@MUL",!1),e&&!0===this.getOption().suitToFit&&!1===this.scrollBar.visible&&this.suitToFit(),this.trigger("onChanged",[this])},getScrollIndex:function(){return null!=this.topNode?this.topNode.scrIndex:1},scrollToIndex:function(t){if(t>1){t>this.dataSet.getRecordCount()&&(t=this.dataSet.getRecordCount());var e=!0;if(t>1){this.dataSet.beginUpdate();var i=this.dataSet.getCurNode(),s=0;if(this.dataSet.select(this.topNode),t>this.topNode.scrIndex)for(;!this.dataSet.isEof()&&t!=this.dataSet.getIndex();){if(t<this.dataSet.getIndex()){e=!1;break}s++,this.dataSet.next()}else for(;!this.dataSet.isBof()&&t!=this.dataSet.getIndex();){if(t>this.dataSet.getIndex()){e=!1;break}s--,this.dataSet.prior()}this.dataSet.select(i),this.dataSet.endUpdate(!1),!0===e&&this.scrollBar.setScrollIndex(this.scrollBar.scrollIndex+s),this.refresh()}else this.first()}else this.first()},scrollToFocus:function(){if(!this.selRowInShow&&this.getRecordCount()>0){var t=this.dataSet.getCurNode(),e=t.scrIndex<this.topNode.scrIndex;if(this.dataSet.beginUpdate(),e){var i=0;for(this.dataSet.first();!this.dataSet.isEof()&&this.dataSet.getRecNo()!==t.recNo;)this.dataSet.next(),i++;this.topNode=t,this.scrollBar.setScrollIndex(i,!1)}else{this.dataSet.select(this.topNode);for(i=0;!this.dataSet.isEof()&&this.dataSet.getRecNo()!==t.recNo;)this.dataSet.next(),i++;i-=this.rowCount-2,this.scrollBar.setScrollIndex(this.scrollBar.scrollIndex+i)}return this.dataSet.endUpdate(!1),!0}return!1},getValue:function(t,e){return this.dataSet.getRecordCount()>0?this.dataSet.getValue(t,e):null},setValue:function(t,e,i,s){this.dataSet.getRecordCount()>0&&this.dataSet.setValue(t,e,i,s)},setTransIDName:function(t,e){this.dataSet.setTransIDName(t,e)},getTransIDName:function(t,e){return this.dataSet.getTransIDName(t,e)},addTransIDName:function(t,e,i,s){this.dataSet.addTransIDName(t,e,i,s)},getSelectedRowData:function(t){return this.dataSet.getRecordCount()>0?this.multiSelect&&!0!==t?this.dataSet.getSelectedData():this.dataSet.getCurNode().level>=0?this.dataSet.getCurNode().data:null:null},next:function(){this.scrollToFocus(),this.post();var t=this.dataSet.getRecNo();this.dataSet.next(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,null!=this.bottomNode&&this.bottomNode.recNo==t?this.scrollBar.scrollNext():this.refresh(null,!0)},prior:function(){this.scrollToFocus(),this.post();var t=this.dataSet.getRecNo();this.dataSet.prior(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.topNode.recNo==t?this.scrollBar.scrollPrior():this.refresh(null,!0)},setHeight:function(t,e){this._fzSumTableTop=null,this.base(t,e),this.rendered&&this._update&&!1!==e&&(this.initGrid(),this.refresh())},setWidth:function(t,e){this.base(t,e),this.rendered&&this._update&&!1!==e&&this.refresh()},first:function(){this.dataSet.first(),this.topNode=this.dataSet.getCurNode(),this.selRect.beginRowNode=this.topNode,this.selRect.endRowNode=this.topNode,this.topNode.level>=0&&(this.topNode.scrIndex=1),this.beginUpdate(),0!=this.scrollBar.thisWindow.scrollTop&&(this.scrollBar.scrollIndex=-1),this.scrollBar.setScrollIndex(0),this.endUpdate(!1),this.refresh()},last:function(){this.dataSet.last(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh(),this.scrollToFocus()},noSelect:function(){this.dataSet.select(this.dataSet.rootNode),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh()},getEditCellEcpUI:function(){return!1},getSelectRowIds:function(t){return this.multiSelect&&!0!==t?this.dataSet.getSelectRowIds().join(","):this.dataSet.getRecordCount()>0?this.dataSet.getValue(this.getPKeyName()):null},getSelRowsAsArray:function(){var t=[];return this.multiSelect&&!0!==curOnly?t=this.dataSet.getSelectRowIds():this.dataSet.getRecordCount()>0&&(t=[this.dataSet.getValue(this.getPKeyName())]),t},getPKeyValue:function(t){null==t&&(t=this.getCurNode());var e=this.getOption().primaryKey;if(this.isEmpty(e)||this.isArray(e)&&0==e.length)return"";var i=null;if("string"==typeof e)i=this.dataSet.getValue(e,t);else if(this.isArray(e)){i=[];for(var s=0,n=e.length;s<n;s++){var o=e[s];i.push(this.dataSet.getValue(o,t))}}return i},getPKeyName:function(){if(!this.isEmpty(this.getOption().primaryKey))return this.isArray(this.getOption().primaryKey)?this.getOption().primaryKey.length>0?this.getOption().primaryKey[0]:(this.getOption().primaryKey="gid","gid"):this.getOption().primaryKey;this.getOption().primaryKey="gid"},addEcpRowData:function(t,e,i){var s=null;0==this.treeGrid&&(s=this.dataSet.rootNode);var n=!1===this.getHScrollHide(),o=0;if(this._addNew=!0,null==e||isNaN(e))this.dataSet.appendItemList(t,s,!1,i),this.isArray(t)?o+=t.length:o++;else{var h=this.topNode.recNo==this.dataSet.getRecNo();this.dataSet.insertItemList(e,t,s),!0===h&&null!=s&&null!=s.cNode[e]&&(this.topNode=s.cNode[e],this.dataSet.curNode=this.topNode),this.isArray(t)?o+=t.length:o++}!0===this.getOption().pager&&this.pageObj.delCount(o),!0===this.getOption().multiSelect&&!0===this.getTitleChecked("@MUL")&&this.setTitleChecked("@MUL",!0,!0),!0!==this.hasbind("onScrollEnd")?this.last():this.refresh(),n||!0===this.getOption().suitToFit&&!1===this.getHScrollHide()&&this.suitToFit(),this.trigger("onChanged",[this])},_insertGroupValue:function(){for(var t=[],e=0,i=this.getOption().colModels.length;e<i;e++){var s=this.getOption().colModels[e];!0===s.groups&&t.push(s.name)}if(t.length>0){this.dataSet.beginUpdate();var n=this.dataSet.getCurNode(),o=null;this.dataSet.prior(),this.dataSet.isBof()||(o=this.dataSet.getCurNode()).level!=n.level&&(o=null),this.dataSet.select(n);var h=null;if(this.dataSet.next(),this.dataSet.isEof()||(h=this.dataSet.getCurNode()).level!=n.level&&(h=null),this.dataSet.select(n),null!=o&&null!=h)for(e=0,i=t.length;e<i;e++){var l=t[e],a=this.getValue(l,o);null!=a&&""!==a&&a===this.getValue(l,h)&&this.dataSet.setValue(l,a)}this.dataSet.endUpdate(!1)}},insert:function(t,e){null==e&&null!=t&&"object"==(void 0===t?"undefined":_typeof(t))&&(e=t,t=null);var i=!1===this.getHScrollHide(),s=-1,n=this.dataSet.getCurNode();null!=t&&(n=this.getChildNode(t,this.dataSet.getParentNode())),null!=n&&(s=n.recNo);var o=this.topNode.recNo==s;null!=e&&this.isArray(e)?(null==t&&(t=this.dataSet.getCurNode().index),1==e.length?(this.dataSet.insertItem(t,e[0]),!0===this.getOption().autoGroups&&this._insertGroupValue(),!0===o&&(this.topNode=this.dataSet.getCurNode()),null==this.topNode?this.first():this.refresh(),this.scrollToFocus(),!0===this.getOption().pager&&this.pageObj.addCount()):(this.addEcpRowData(e,t),!0===o&&(this.topNode=this.dataSet.getCurNode()))):(this.dataSet.insertItem(t,e),!0===this.getOption().autoGroups&&this._insertGroupValue(),!0===o&&(this.topNode=this.dataSet.getCurNode()),null==this.topNode?this.first():this.refresh(),this.scrollToFocus(),!0===this.getOption().pager&&this.pageObj.addCount()),i||!0===this.getOption().suitToFit&&!1===this.getHScrollHide()&&this.suitToFit(),this.trigger("onChanged",[this])},append:function(t){if(null!=t&&this.isArray(t))this.addEcpRowData(t);else{var e=!1===this.getHScrollHide();this.dataSet.appendItem(t),null==this.topNode||1==this.dataSet.getRecordCount()?this.first():this.refresh(),this.scrollToFocus(),!0===this.getOption().pager&&this.pageObj.addCount(),e||!0===this.getOption().suitToFit&&!1===this.getHScrollHide()&&this.suitToFit(),!0===this.getOption().multiSelect&&!0===this.getTitleChecked("@MUL")&&this.setTitleChecked("@MUL",!0,!0),this.trigger("onChanged",[this])}},appendChild:function(t,e){if(null!=t&&this.isArray(t))this.addEcpRowData(t);else{var i=!1===this.getHScrollHide();this.dataSet.appendChildItem(t,e),null==this.topNode?this.first():this.refresh(),this.scrollToFocus(),!0===this.getOption().pager&&this.pageObj.addCount(),i||!0===this.getOption().suitToFit&&!1===this.getHScrollHide()&&this.suitToFit(),this.trigger("onChanged",[this])}},getGridParam:function(){return null==this.option.colModels&&(this.option.colModels=[]),this.option},setReadOnly:function(t){t=!0===t;this.getOption().cellEdit=!t,this.refresh()},setRowReadOnly:function(t,e){t=!0===t;this.dataSet.setReadOnly(t,e)},setColReadOnly:function(t,e){this.getColModel(t).editable=!0!==e,this.refresh()},isColReadOnly:function(t){return!1===this.getColModel(t).editable},isReadOnly:function(){return this.getReadOnly()},getReadOnly:function(){var t=!1;return this.isEmpty(t)?t=!0:"string"==typeof t&&(t=this.getBooleanValue(t,!0)),t=!t},isRowReadOnly:function(t){return this.dataSet.getReadOnly(t)},isCellReadOnly:function(t,e){return this.getCellReadOnly(t,e)},getCellReadOnly:function(t,e){return!0},_yuiGridFit:function(t){},_getGridParent:function(t){var e=this.thisWindow.parentElement;if(s={},t){for(var i=e,s=null;"BODY"!==i.tagName.toUpperCase();)if("string"==typeof i.className&&i.className.indexOf(".tabs-panels")>=0){s=i;break}null==s&&(s=e.parentElement)}else s=e;return this._toJqueryObj(s)},setVisible:function(t,e){},setTreeGrid:function(t,e,i){if(null==this.option&&(this.option={}),!1===t?this.getOption().treeGrid=!1:(this.getOption().treeGrid=!0,null!=e&&""!==e&&(this.getOption().idkey=e),null!=i&&""!==i&&(this.getOption().pidkey=i)),null!=this.option.colModels)for(var s=0,n=this.option.colModels.length;s<n;s++){var o=this.option.colModels[s];o.width=o._defWidth||o.width}this._createTitle(!1),this.initGrid()},_doResize:function(t){this._resizeState=!0,this._gridTableHeight=null,this._sumTableHeight=null,this._update?this._comRect=this.thisWindow.getBoundingClientRect():this._asynRun(function(){this._comRect=this.thisWindow.getBoundingClientRect()},10),this.base(t),this.rendered&&this._update&&this.initGrid(),this.rendered&&!1!==this.getOption().shrinkToFit&&this.shrinkToFit(),this.rendered&&!0===this.getOption().suitToFit&&this.suitToFit(),this._suitTitleHeight(),null!=this.emptyDiv&&(this.emptyDiv.style.left=parseInt((this.getWidth()-100)/2,10)+"px",this.emptyDiv.style.top=parseInt((this.getHeight()-20-this.getTitleHeight())/2,10)+this.getTitleHeight()+"px"),this._refreshSumTab(),this._asynRun(function(){this._resizeState=!1},100)},setTitleFit:function(t,e,i){var s=null;"string"==typeof t&&(t=[t]);var n={},o={};if(null==e)for(var h=0,l=this.option.colModels.length;h<l;h++){s=this.option.colModels[h];for(var a=0,r=t.length;a<r;a++)1!=s.hidden&&s.name==t[a]&&(n[s.name]=this.titleCol[h],o[s.name]=this._getNumberValue(s.minWidth,0))}else this.isArray(e)||(n[t[0]]=e,o[t[0]]=this.getColModel(t[0]).minWidth);if(t.length>0){var d=this._getNumberValue(this.listDiv.style.width),u=this._getNumberValue(this.gridTable.style.width);for(a=0,r=t.length;a<r;a++){var c=t[a],g=n[c];if(null!=g){var p=this.getInnerText(g);""===p&&null!=g.checkBox&&(p+=".");var f=this.getFontSize(c)+"px",y=this.getTextWidth(p,f,"bold")+8;null!=o[c]&&y<o[c]&&(y=o[c]);var m=g.offsetWidth;if(m>0){if(this.getOption().shrinkToFit&&null!=this._oldGridWidth&&this._oldGridWidth<this._width&&u<d&&m>y)continue;this._setColWidth(g,y-m,[m],this._getNumberValue(this.gridTable.style.width,1),a==r-1)}}}this._suitTitleHeight(),this._oldGridWidth=null,this._tmpWidth=null}"function"==typeof i&&i.apply(this)},doShow:function(){this.base(),null!=this.thisWindow.parentElement&&this._doResize(this.thisWindow.parentElement),this.refresh();var t=this;this.setContentFit(function(){!1!==t.getOption().shrinkToFit&&t.shrinkToFit(),!0===t.getOption().suitToFit&&t.suitToFit()})},initMaxText:function(){this.maxText={},this.maxTextLen={},this.maxCapWidth={},this.maxLevel=0},getMaxText:function(t,e,i){if("string"==typeof t&&(t=[t]),this.isArray(t)&&t.length>0){if(!0===i){for(var s=!0,n=0,o=t.length;s&&n<o;n++)null!=this.maxText&&null!=this.maxText[t[n]]||(s=!1);if(1==s)return void("function"==typeof e&&e(t,this.maxText))}this.isEmpty(this.maxText)&&this.initMaxText();var h=[];for(n=0,o=t.length;n<o;n++){var l=t[n];null!=this.maxText&&null==this.maxText[l]&&(this.maxText[l]="",this.maxTextLen[l]=0,h.push(l))}var a={};if(this.dataSet.getRecordCount()>0){var r=this.dataSet;r.savemark(),r.select(this.topNode);var d=0,u=this.sheets.length;for(o=t.length;!r.isEof()&&d<u;){for(n=0;n<o;n++){l=t[n];var c=r.getDisplay(l),g=r.getValue(l);this.hasbind("onFormat_"+l)&&(null==a[g]?(c=this.trigger("onFormat_"+l,[r,l,c,g]),a[g]=c):c=a[g]),"string"==typeof c&&-1!=c.indexOf("<")&&(c=c.replace(/<(\/)?(a|span|div|li|ul|table|tr|td|input|font)( [^<>]+)?>/gi,""));var p=this.strLen(c);p>this.maxTextLen[l]&&(this.maxTextLen[l]=p,this.maxText[l]=c)}r.getLevel()>this.maxLevel&&(this.maxLevel=r.getLevel()),d++,this.dataSet.next()}this.dataSet.loadmark()}"function"==typeof e&&e(t,this.maxText),a=null}},setContentFit:function(t,e,i){"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null);var s=null==t||""===t;s&&(t=[]),"string"==typeof t&&(t=[t]);var n=null,o={},h={};if(null==e)for(var l=0,a=this.option.colModels.length;l<a;l++)if(n=this.option.colModels[l],s)1!=n.hidden&&!0===n.contentFit&&(t.push(n.name),o[n.name]=this.titleCol[l],h[n.name]=this._getNumberValue(n.minWidth,0));else for(var r=0,d=t.length;r<d;r++)1!=n.hidden&&n.name==t[r]&&(o[n.name]=this.titleCol[l],h[n.name]=this._getNumberValue(n.minWidth,0));else this.isArray(e)||(o[t[0]]=e,h[t[0]]=this.getColModel(t[0]).minWidth);var u=this;if(t.length>0){var c=u._getNumberValue(u.listDiv.style.width),g=u._getNumberValue(u.gridTable.style.width);this.getMaxText(t,function(t,e){for(var s=0,n=t.length;s<n;s++){var l=t[s],a=o[l];if(null!=a){var r=u.getInnerText(a);""===r&&null!=a.checkBox&&(r+=".");var d=u.dataSet.getSummary(l),p=0,f=u.getFontSize(l)+"px";null!=d&&""!==d&&(d=u.dataSet.getDisplay(l,d),p=u.getTextWidth(d,f,"bold")+16);var y=u.getTextWidth(r,f,"bold")+12,m=u.getTextWidth(e[l])+12;m<y&&(m=y),p>m&&(m=p),0!=u.treeGrid&&0==a.option.cIndex&&(m+=16*u.maxLevel+16,u.multiSelect&&(m+=12)),null!=h[l]&&m<h[l]&&(m=h[l]);var C=a.offsetWidth;if(0===C&&a.option&&null!=a.option.cIndex){var S=a.option.cIndex+1+u._colIndexDeff(),x=u.gridTable.rows[0].cells[S];x&&(C=x.offsetWidth)}if(C>0){if(u.getOption().shrinkToFit&&null!=u._oldGridWidth&&u._oldGridWidth<u._width&&g<c&&C>m)continue;u._setColWidth(a,m-C,[C],u._getNumberValue(u.gridTable.style.width,1),s==n-1)}}}u._suitTitleHeight(),u._oldGridWidth=null,u._tmpWidth=null,"function"==typeof i&&i.apply(u)})}else"function"==typeof i&&i.apply(u)},doTitleDBClick:function(t,e){if(this.resizeState)if(t.option.isBand);else{var i=t.option.cIndex+1+this._colIndexDeff(),s=this._getColModel(i);this.setContentFit(s.name,t)}},doTitleMouseDown:function(t,e){this.getMouseButton(e)!=this.mouseType.mtLeft||this.sortClick||(this.titleMouseDown=!0,this.curTitleCell=t,this.curTitleCellWidth=this._getColWidth(t),this.curTableWidth=this.gridTable.offsetWidth,this.curFzTableWidth=this.fzGridTable.offsetWidth,this.curMouseLeft=this.mouseLeft,this._isHScrollHide=this.getHScrollHide()),this.post(),this.focus||this.setFocus()},doTitleMouseUp:function(t,e){this.getMouseButton(e)!=this.mouseType.mtLeft||this.sortClick||this.resizeState||!1===this.getOption().rectSelect?this.resizeState&&this.refresh():this.titleMouseDown&&!this.titleDragState&&this.curTitleCell.cellIndex==t.cellIndex&&this.curTitleCell.parentNode.rowIndex==t.parentNode.rowIndex&&(t.cellIndex==this._colOrder["@INDEX"]&&-1==t.option.cIndex?(this.colIndex=1+this._colIndexDeff(),this.selRect.beginColIndex=1+this._colIndexDeff(),this.selRect.endColIndex=this.colCount-1):(this.selRect.beginColIndex=t.option.cIndex+1+this._colIndexDeff(),this.selRect.endColIndex=t.option.cIndex+parseInt(t.getAttribute("colSpan"),10)+this._colIndexDeff(),this.colIndex=t.option.cIndex+1+this._colIndexDeff()),this.dataSet.beginUpdate(),this.dataSet.last(),this.selRect.endRowNode=this.dataSet.getCurNode(),this.dataSet.first(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.dataSet.endUpdate(!1),this.focus||this.setFocus(),this.refresh()),this.trigger("onHeaderClick",[])},doTitleMouseMove:function(t,e){if(!this.titleMouseDown){var i=0;this.isEmpty(t.mainCell)&&(i=this.listDiv.scrollLeft);var s=t.getBoundingClientRect(),n=(e.clientX,t.offsetWidth),o=n-(e.clientX-s.left);o<10?(this.resizeState=!0,this.titleDragState=!0,this.getBrowser("safari")?this.thisWindow.style.cursor="e-resize":this.thisWindow.style.cursor="col-resize"):(this.titleDragState=!1,this.resizeState=!1,this.thisWindow.style.cursor=""),this.mouseLeft=e.clientX,i=null,s=null,null,n=null,o=null}},doTitleMouseOver:function(t,e){this.titleMouseDown&&!this.titleDragState&&!1!==this.getOption().rectSelect&&(this.curTitleCell.option.cIndex<=t.option.cIndex?(this.selRect.beginColIndex=this.curTitleCell.option.cIndex+1+this._colIndexDeff(),this.selRect.endColIndex=t.option.cIndex+this._getNumberValue(t.getAttribute("colSpan"),1)+this._colIndexDeff()):(this.selRect.beginColIndex=t.option.cIndex+1+this._colIndexDeff(),this.selRect.endColIndex=this.curTitleCell.option.cIndex+1+this._colIndexDeff()),this.selRect.beginColIndex<1&&(this.selRect.beginColIndex=1),this.colIndex=this.curTitleCell.option.cIndex+1+this._colIndexDeff(),this.dataSet.beginUpdate(),this.dataSet.last(),this.selRect.endRowNode=this.dataSet.getCurNode(),this.dataSet.first(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.dataSet.endUpdate(!1),this.refresh())},doCellMouseDown:function(t,e){if(this.getMouseButton(e)==this.mouseType.mtLeft){var i=!1;0==this.focus&&(i=!0),this.cellMouseDown=!0;var s=!0;if(this.dataSet.getRecordCount()>=1&&!0===i&&!0===this.hasbind("beforeSelectRow")){var n=t.parentNode._node,o=this.dataSet.getCurNode();n.recNo!=o.recNo?!1!==this.trigger("beforeSelectRow",[o,n])?this.curCell=t:s=!1:this.curCell=t}else this.curCell=t;if(null!=this.curCell&&this.curCell.cellIndex==this._colOrder["@INDEX"]?this.selARow=!0:this.curColIndex=t.cellIndex,!1===this.focus&&(this.setFocus(),!0===i&&!0!==this.inputFocus&&!0===s)){this._saveSelRect(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.selRect.beginColIndex=this.curColIndex,this.selRect.endColIndex=this.selRect.beginColIndex,this.refresh(!0),this.trigger("onCellSelect",[this.getPKeyName(),this.colIndex,this,e]),this.trigger("onSelectEcpRow",[this.getSelectRowIds(),this.getFieldName(),e]),this.logInfo("doCellMouseDown onClick_"),this.trigger("onClick",[this.dataSet.getCurNode(),this.getFieldName(),e]),this._priorClickFrom="doCellMouseDown",e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1);var h=this;return setTimeout(function(){h._priorClickFrom="",h.logInfo("clear priorClickFrom value"),h=null},800),!1}}this.logInfo("mouse down")},_refreshMulSelect:function(t){null==t&&(t=[]);var e=t.length;if(e>0){this.dataSet.beginUpdate();var i=this.dataSet.getCurNode(),s=this.selRect.beginRowNode;this.dataSet.select(s),d=!0,u={},c=0;for(var n=0;n<e;n++){u[h=t[n]]=this.dataSet.getDisplay(h)}for(c=this.dataSet.getLevel(),this.dataSet.prior();!this.dataSet.isBof()&&d;){var o=!1;if(c==(g=this.dataSet.getLevel()))for(n=0;n<e;n++){var h=t[n],l=this.getColModel(h),a=this.dataSet.getDisplay(h);o=o||(!0===l.groupsEmpty||!0!==l.groupsEmpty&&null!=a&&""!==a)&&a===u[h],u[h]=a}c=g,(d=d&&o)&&(s=this.dataSet.getCurNode()),this.dataSet.prior()}this.selRect.beginRowNode=s;var r=this.selRect.endRowNode;this.dataSet.select(r);var d=!0,u={},c=0;for(n=0;n<e;n++){u[h=t[n]]=this.dataSet.getDisplay(h)}for(c=this.dataSet.getLevel(),this.dataSet.next();!this.dataSet.isEof()&&d;){var g;o=!1;if(c==(g=this.dataSet.getLevel()))for(n=0;n<e;n++){h=t[n],l=this.getColModel(h),a=this.dataSet.getDisplay(h);o=o||(!0===l.groupsEmpty||!0!==l.groupsEmpty&&null!=a&&""!==a)&&a===u[h],u[h]=a}c=g,(d=d&&o)&&(r=this.dataSet.getCurNode()),this.dataSet.next()}this.selRect.endRowNode=r,this.dataSet.select(i),this.dataSet.endUpdate(!1)}},doCellMouseOver:function(t,e){if(0!=this._enabled&&this.cellMouseDown&&null!=this.curCell&&!1!==this.getOption().rectSelect&&(null==this.editObject||!1===this.editObject.getPopState())){t.cellIndex>0?(this.curCell.cellIndex<=t.cellIndex?(this.selRect.beginColIndex=this.curCell.cellIndex,this.selRect.endColIndex=t.cellIndex):(this.selRect.beginColIndex=t.cellIndex,this.selRect.endColIndex=this.curCell.cellIndex),this.selRect.beginColIndex<=0&&(this.selRect.beginColIndex=1),this.colIndex=this.curCell.cellIndex):this.selARow&&(this.selRect.beginColIndex=1+this._colIndexDeff(),this.selRect.endColIndex=this.colCount-1,this.colIndex=1+this._colIndexDeff());for(var i=[],s=this.selRect.beginColIndex;s<=this.selRect.endColIndex;s++){var n=this._getColModel(s);!0===n.groups&&i.push(n.name)}var o=null;null!=this.curCell&&(o=this.curCell.parentNode._node);var h=t.parentNode._node;null!=o&&(o.getIndex()<h.getIndex()?(this.selRect.beginRowNode=o,this.selRect.endRowNode=h):(this.selRect.beginRowNode=h,this.selRect.endRowNode=o),this._refreshMulSelect(i)),this.post(),null!=o&&this.dataSet.select(o),this.isCellMouseOver=!0,this.refresh()}},doMouseDown:function(t){this.base(t),this.scrollMouseDown=!0,this.isCellMouseOver=!1},doMouseUp:function(t){if(this.base(t),this.scrollMouseDown=!1,this.scrollBar.ismousedown=!1,this.dataSet.initMaxText(),this.getMouseButton(t)==this.mouseType.mtRight&&this.hasSelect){if(this.getOption().hidePopMenu||0==this.popMenu._popCount)return;var e=this.getScrollXY(),i=t.clientY+e.top,s=t.clientX+e.left;"function"==typeof this.onPopMenuExt&&this.onPopMenuExt(this,this.popMenu),this.trigger("onPopMenuExt",[this,this.popMenu]),this.popMenu.execute(i,s)}else{if(null!=this.curTitleCell){var n=this.curTitleCell.getBoundingClientRect();this.curTitleCell.offsetWidth-(t.clientX-n.left)>=5&&(this.thisWindow.style.cursor=""),this._gridTableHeight=null,this._refreshSumTab(),n=null}else this.thisWindow.style.cursor="";this.titleMouseDown=!1,this.titleDragState=!1,this.curTitleCell=null,!0!==this._hasScroll&&this.cellMouseDown&&!this.inputFocus&&(this.copyInput.select(),this.copyInput.focus()),this.cellMouseDown=!1,this.selARow=!1,this.sortClick=!1,this.curCell=null;var o=this.getHScrollHide();null!=this._isHScrollHide&&o!=this._isHScrollHide&&(this.initGrid(),this.refresh()),this._isHScrollHide=o,!0===this._hasScroll&&(this.inputFocus&&null!=this.editObject&&this.post(),this.refresh()),this._hasScroll=!1}},_getColWidth:function(t){var e=[],i=parseInt(t.getAttribute("colSpan"),10);if(i>0)for(var s=0,n=0;n<i;n++){for(var o=this.gridTable.rows[0].cells[t.option.cIndex+1+n+s+this._colIndexDeff()];"none"==o.style.display;)s++,o=this.gridTable.rows[0].cells[t.option.cIndex+1+n+s+this._colIndexDeff()];e[n]=this._getNumberValue(o.style.width,0)}return e},getColWidth:function(t,e){return null==e&&(e=1),this._getNumberValue(this.gridTable.rows[0].cells[t].style.width,e)},setColWidth:function(t,e){for(var i=0,s=this.gridTable.rows[0].cells.length;i<s;i++){var n=this.gridTable.rows[0].cells[i];if(null!=n.option){var o=n.option.fzCol,h=n.option.colModel;if(null!=h&&(null==o&&(o=n),h.name===t)){var l=parseInt(e,10)-h.width;0!=l&&(this._refreshCellDivWidth(o.cellIndex,n.option.defWidth),this._setGridTableWidth(this._getNumberValue(this.gridTable.style.width)+l));break}}}},_getShrinkCol:function(t){for(var e=0,i=0,s=[],n=1,o=this.titleCol.length;n<=o;n++){var h=this.option.colModels[n-1],l=this.titleCol[n-1];if(!0!==h.hidden&&"true"!==h.hidden){var a=this.getColWidth(l.option.cIndex+1+this._colIndexDeff(),h.width);e+=a,(1==t||h.defWidth&&1!=h.contentFit)&&!0!==h.lockWidth&&(i++,s.push({col:l,width:a}))}}var r=e;return this.getOption().rownumbers&&(e+=60),0==this.treeGrid&&1==this.multiSelect&&(e+=30),{gridWidth:e,sumWidth:r,count:i,cols:s}},resetColWidth:function(){for(var t=0,e=this.gridTable.rows[0].cells.length;t<e;t++){var i=this.gridTable.rows[0].cells[t];if(null!=i.option){var s=i.option.fzCol,n=i.option.colModel;if(null!=n){null==s&&(s=i);var o=i.option.defWidth-n.width;0!=o&&(this._refreshCellDivWidth(s.cellIndex,i.option.defWidth),this._setGridTableWidth(this._getNumberValue(this.gridTable.style.width)+o))}}}},suitToFit:function(){this.shrinkToFit(null,!0)},_shrinkToFit:function(t){this.shrinkToFit(t)},shrinkToFit:function(t,e){if(this._tmpWidth!=this.getOption().width||this._tmpScrollVisible!=this.scrollBar.visible||!0===t||!0===e){this._tmpWidth=this.getOption().width,this._tmpScrollVisible=this.scrollBar.visible;var i=this._getShrinkCol(),s=i.gridWidth,n=i.sumWidth,o=i.count,h=i.cols;i=null;var l=this.getBoxWidth();l<this.getWidth()&&l++,null==this._oldGridWidth&&(this._oldGridWidth=s);if(!0===e||s<=l-2||!0===e&&null!=this._oldGridWidth&&this._oldGridWidth<l-2){if(0==o&&(s=(i=this._getShrinkCol(!0)).gridWidth,o=i.count,h=i.cols,i=null,!0===e||s<=l-2||null!=this._oldGridWidth&&this._oldGridWidth<l-2||(o=0)),o>0)if(!0===this.getOption().pecentWidth){for(var a=l-s-2,r=0,d=0;d<o-1;d++){var u=h[d];r+=c=parseInt(a*u.width/n,10),this._setColWidth(u.col,c,[u.width],s,!1),s+=c}u=h[d];var c=a-r;this._setColWidth(u.col,c,[u.width],s),s+=c}else{(c=parseInt((l-s-2)/o,10))>0&&(this.shrinkAdd=!0);a=l-s-2-c*o;a=parseInt(a,10);for(d=0;d<o;d++){u=h[d];var g=0;a>0?(g=1,a--):a<0&&(g=-1,a++),this._setColWidth(u.col,c+g,[u.width],s,d==o-1),s+=c+g}}this._calcRowCount(!0),this._asynRun(function(){"function"==typeof this.refresh&&(this.refresh(),this.refreshVScrollBar())},10)}h=null}},_refreshCellDivWidth:function(t,e){if(!(t===this._colOrder["@INDEX"]&&e<55)){var i=this.fzGridTable.rows[0].cells[t];if(null!=i&&!0!==i.noUse&&e>0){if(this._setNumberValue(i,"width",e),1==this.getOption().footerrow||!0===this.getOption().total){var s=this.fzSumTable.rows[this.totalIndex].cells[t];this._setNumberValue(s.rect.text,"width",e-8),this._setNumberValue(s.rect,"width",e-8),this._setNumberValue(s,"width",e),s=null}if(!0===this.getOption().subtotal){s=this.fzSumTable.rows[this.subtotalIndex].cells[t];this._setNumberValue(s.rect.text,"width",e-8),this._setNumberValue(s.rect,"width",e-8),this._setNumberValue(s,"width",e),s=null}}if(i=null,e>0){if(null!=(r=this.gridTable.rows[0].cells[t])&&(this._setNumberValue(r,"width",e),1==this.getOption().footerrow||!0===this.getOption().total)){s=this.sumTable.rows[this.totalIndex].cells[t];this._setNumberValue(s.rect.text,"width",e-8),this._setNumberValue(s.rect,"width",e-8),this._setNumberValue(s,"width",e),s=null}if(!0===this.getOption().subtotal){s=this.sumTable.rows[this.subtotalIndex].cells[t];var n=e-8;this._style(s.rect.text,"width",n+"px"),this._style(s.rect,"width",n+"px"),this._style(s,"width",e+"px"),s=null}}var o=0;this.multiSelect&&(o=10);for(var h=this.getFieldName(t),l=0,a=this.sheets.length;l<a;l++){var r,d=this.sheets[l].row,u=this.fzSheets[l].row,c=u.cells[t];if((null==this.getOption().treeKey&&1===t||this.getOption().treeKey===h)&&0!=this.option.treeGrid){if(null!=(r=d.cells[t])){e-8>0&&(r.levelDiv.style.width=e-8+"px",null!=c&&!0!==c.noUse&&(c.levelDiv.style.width=e-8+"px"));var g=e-8-14-o-this._getNumberValue(r.levelTd.style.width,0);g>0&&(r.rect.style.width=g+"px",r.rect.text.style.width=g+"px",null!=c&&!0!==c.noUse&&(c.rect.style.width=g+"px",c.rect.text.style.width=g+"px"))}}else if(e-8>0)null!=(r=d.cells[t])&&(r.rect.style.width=e-8+"px",r.rect.text.style.width=e-8+"px",null!=c&&!0!==c.noUse&&(c.rect.style.width=e-8+"px",c.rect.text.style.width=e-8+"px"));d=null,u=null}this._getColModel(t).width=e}},_setColWidth:function(t,e,i,s,n){for(var o=parseInt(t.getAttribute("colSpan")||1,10),h=parseInt(e/o,10),l=0,a=0,r=0,d=0,u=null;l<o-1;l++){for(u=this.gridTable.rows[0].cells[t.option.cIndex+1+l+d+this._colIndexDeff()];"none"==u.style.display;)d++,u=this.gridTable.rows[0].cells[t.option.cIndex+1+l+d+this._colIndexDeff()];u=null,a+=h;var c=i[l]+h;this._refreshCellDivWidth(t.option.cIndex+1+l+d+this._colIndexDeff(),c),r+=c-i[l]}for(u=this.gridTable.rows[0].cells[t.option.cIndex+1+l+d+this._colIndexDeff()];null!=u&&"none"==u.style.display;)d++,u=this.gridTable.rows[0].cells[t.option.cIndex+1+l+d+this._colIndexDeff()];u=null,(c=i[l]+(e-a))<0||(r+=c-i[l],this._refreshCellDivWidth(t.option.cIndex+1+l+d+this._colIndexDeff(),c),this._setGridTableWidth(s+r),!1!==n&&this.refreshVScrollBar())},_suitTitleHeight:function(){this._asynRun(function(){if(null!=this.gridTable&&0!=this.gridTable.rows.length){var t=0,e=this.gridTable.rows[1].cells[t].offsetHeight;if(e<=0&&(t=1,e=this.gridTable.rows[1].cells[t].offsetHeight),e>0&&e!=this.fzGridTable.rows[1].cells[t].offsetHeight){var i=e;this.fzGridTable.rows[1].cells[t].style.height=i+"px",this.fzGridTable.rows[1].cells[t].offsetHeight<=0&&(this.fzGridTable.rows[1].style.height=i+"px");var s=e-this.fzGridTable.rows[1].cells[t].offsetHeight;0!=s&&(this.fzGridTable.rows[1].cells[t].style.height=i+s+"px"),this.refresh()}}},10)},doMouseMove:function(t){if(this.mouseLeft=t.clientX,this.titleMouseDown&&this.titleDragState){var e=this.mouseLeft-this.curMouseLeft,i=this._getColModel(this.curTitleCell.option.cIndex+1+this._colIndexDeff());if("number"==i.dataType||"money"==i.dataType){var s=this;this.getMaxText([i.name],function(t,i){var n=t[0],o=s.dataSet.getSummary(n),h=0,l=s.getFontSize(n)+"px";null!=o&&""!==o&&(o=s.dataSet.getDisplay(n,o),h=s.getTextWidth(o,l,"bold")+16);var a=s.getTextWidth(i[n])+12;h>a&&(a=h),s._maxTextLen=a,e+s.curTitleCellWidth[0]<a&&(e=a-s.curTitleCellWidth[0]+12),s._setColWidth(s.curTitleCell,e,s.curTitleCellWidth,s.curTableWidth),s._suitTitleHeight(),s.refreshScrollBar()},!0)}else this._setColWidth(this.curTitleCell,e,this.curTitleCellWidth,this.curTableWidth),this._suitTitleHeight(),this.refreshScrollBar()}return!1},setClipboard:function(t){if(navigator.userAgent.indexOf("MSIE")>0==1)return window.clipboardData.setData("text",t),!0;if(navigator.userAgent.indexOf("Firefox")>0==1){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(t){return void this.logError(this.getI18n("qzz.copyMsg","因当前浏览器的剪贴板无法控制，请在IE上使用该功能。"))}var e=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!e)return void(e=null);var i=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!i)return i=null,void(e=null);i.addDataFlavor("text/unicode");var s=new Object,n=(new Object,t);(s=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString)).data=n,i.setTransferData("text/unicode",s,2*n.length);var o=Components.interfaces.nsIClipboard;if(!o)return i=null,e=null,void(o=null);e.setData(i,null,o.kGlobalClipboard),i=null,e=null,o=null,s=null,null,s=null,n=null}},getCopyData:function(){if(this.mulCellSelect){var t=this.dataSet.getCurNode();this.dataSet.beginUpdate(),this.dataSet.select(this.selRect.beginRowNode);for(var e=[],i=(this.option.colModels,0);!this.dataSet.isEof()&&this.dataSet.getIndex()<=this.selRect.endRowNode.getIndex();){for(var s=[],n=this.selRect.beginColIndex-1,o=0;n<=this.selRect.endColIndex-1;n++){var h=this._getColModel(n+1);if(null!=h.name&&1!=h.hidden){var l=this.dataSet.getDisplay(h.name);"string"==typeof l&&(l=l.replace(/&gt;|&lt;/g,function(t){return"&gt;"===t?">":"<"})),s[o++]=""===l?" ":l}}e[i++]=s.join("\t"),this.dataSet.next()}return this.dataSet.select(t),this.dataSet.endUpdate(!1),e.join("\n")}return this.dataSet.getDisplay(this.getFieldName())},getDisplayAsJson:function(t,e,i){"boolean"==typeof t&&(e=t,t=null),null==e&&(e=!1),null==i&&(i=!1);var s=[];if(this.dataSet.getRecordCount()>0){var n=this.dataSet.getCurNode();this.dataSet.beginUpdate(),this.dataSet.first();var o=this.getOption().colModels,h=o.length,l=[];if(this.isArray(t))l=t;else for(var a=0;a<h;a++){var r=o[a];r.hidden||l.push(r.name),r=null}h=l.length;for(var d={};!this.dataSet.isEof();){var u=this.dataSet.getCurNode();if(!1===e){var c={};for(a=0;a<h;a++){var g=this.dataSet.getDisplay(l[a],null,null,null,i);if(0==a&&this.dataSet.isTree&&u.level>0){var p=d[u.level];if(null==p){p="";for(var f=0;f<u.level;f++)p+="  ";d[u.level]=p}g=p+g}c[l[a]]=g,r=null}s.push(c),c=null}else s.push(u.data);this.dataSet.next(!0)}d=null,this.dataSet.select(n),this.dataSet.endUpdate(!1)}return s},getDisplayAsArray:function(t,e){null==e&&(e=!1);var i=[];if(this.dataSet.getRecordCount()>0){var s=this.dataSet.getCurNode();this.dataSet.beginUpdate(),this.dataSet.first();var n=this.getOption().colModels,o=n.length,h=[];if(this.isArray(t))h=t;else for(var l=0;l<o;l++){var a=n[l];a.hidden||h.push(a.name),a=null}o=h.length;for(var r={};!this.dataSet.isEof();){var d=this.dataSet.getCurNode(),u=[],c=0;for(l=0;l<o;l++){var g=this.dataSet.getDisplay(h[l],null,null,null,e);if(0==l&&this.dataSet.isTree&&d.level>0){var p=r[d.level];if(null==p){p="";for(var f=0;f<d.level;f++)p+="  ";r[d.level]=p}g=p+g}u[c++]=g}i.push(u),u=null,this.dataSet.next(!0)}r=null,this.dataSet.select(s),this.dataSet.endUpdate(!1)}return i},getHeader:function(t,e){var i=[],s=this.getOption().colModels,n=this.option.titleSheets,o=this.option.titleSheets.length,h=0;1==e&&this.getOption().rownumbers&&(h=1);for(var l=1;l<o;l++){i[l-1]=[];for(var a=null,r=n[l].length,d=0,u=0,c=0;c<r;c++){var g=s[c];if(g.hidden&&1!=t)d>0&&i[l-1][d-1].colTo==c&&(i[l-1][d-1].colTo=d),u++;else{var p=n[l][c];p.rowIndex==l&&(null!=a&&a.caption===p.caption&&p.isBand&&a.isBand?(a.colspan++,a.colTo++):(i[l-1][d]={isBand:p.isBand,caption:p.caption,text:p.caption.replace(/<[^<>]+>/g,""),colspan:p.colspan,rowspan:p.rowspan,name:g.name,colFrom:c-u+h,colTo:c-u+h,s:"h"},i[l-1][d].colspan=1,a=i[l-1][d],d++))}}}return 1==e&&this.getOption().rownumbers&&i[0].splice(0,0,{text:this.numberCaption,colspan:1,rowspan:o-1,name:"rn",colFrom:0,colTo:0,s:"h"}),i},doFocus:function(t){if(this.base(),!(null!=this.editObject&&this.editObject.focus||this.scrollBar.focus)){var e=null;null!=this.curCell&&(e=this.curCell.parentNode._node),null!=e&&(this.post(),this.dataSet.select(e),this.colIndex=this.curColIndex,this.colIndex==this._colOrder["@INDEX"]&&(this.colIndex=2),(this.colIndex<this.beginIndex||this.colIndex>this.selRect.endColIndex||e.getIndex()<this.selRect.beginRowNode.getIndex()||e.getIndex()>this.selRect.endRowNode.getIndex())&&(this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=e,this.selRect.endRowNode=e)),null==this.curCell&&(this.inputFocus&&null!=this.editObject&&this.post(),this.refresh()),this.cellMouseDown=!1}},doBlur:function(t){return(1!=this.inputFocus||null==this.editObject||"function"!=typeof this.editObject.getPopState||!0!==this.editObject.getPopState())&&(this.popMenu.hasSelect||this.isNotEmpty(this.filterWin)&&this.filterWin.hasSelect?void 0:(this.base(),this._checkValidate(this.getFieldName()),this.post(),this.popMenu.setBlur(),null!=this.calendar&&this.calendar.setBlur(),this.focus=!1,this.refresh(),!0))},_initFilterListBox:function(t,e,i){if(this.pfilter.isShow())this.pfilter.hide();else{this.pfilter.getFilterName()!==t&&(this.pfilter.setFilterName(t),this.pfilter.clearFilter());var s=this.sortTables[t].getBoundingClientRect(),n=s.left-230;n<0&&(n=0);var o=this.getScrollXY();this.pfilter.getHeight()>this._getBodyHeight()&&this.pfilter.setHeight(this._getBodyHeight()),this.getOption().sort!==this.pfilter.getOption().sort&&this.pfilter.setSort(!1!==this.getOption().sort);var h=this.pfilter._getControl().parentElement,l=h.getBoundingClientRect(),a=l.top,r=l.left;"BODY"===h.tagName.toUpperCase()&&(a=0,r=0,a-=o.top,r-=o.left),this.pfilter.execute(s.bottom-a-6,s.right-r-this.pfilter.getWidth()-2,e,i)}},doSortAndFilter:function(t,e){var i=this._getColModel(t).name;if(this.getOption().filter){var s=this;this.inputFocus&&"function"==typeof this.editObject.doBlur&&this.editObject.doBlur();var n=this.dataSet.topFilterItem;null==n||n.fieldName!==i?(this.dataSet.selectFilterList={},this.dataSet.collectFilter(i,function(){s._initFilterListBox(i,s.dataSet.filterList[i],s.dataSet.selectFilterList)})):s._initFilterListBox(i,n.all,n.sel)}else if(!1!==this.getOption().sort){s=this;var o=e;o="none"==e?"up":"up"==e?"down":"none",this.setSort(i,o)}},locateCell:function(t,e){null==e&&(e=t);for(var i=!1,s=1;s<this.colCount;s++){var n=this.option.colModels[s-1];if(null!=n&&!n.hidden&&n.name==e){this.colIndex=s+this._colIndexDeff(),i=!0;break}}return this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.selRect.beginColIndex,this.refresh(),i},_asynLocate:function(t,e,i,s,n,o,h){this.logInfo("_asynLocate:"+e.recNo);var l=this.option.colModels,a=!0,r=0,d="",u=this.colIndex-this._colIndexDeff();for(u<0&&(u=0),null==this._locateFieldName&&(this._locateFieldName=this.getFieldName());!this.dataSet.isEof()&&a&&r<s&&(null==i||this.dataSet.getIndex()<i.getIndex());){for(var c=l.length,g=u;g<c;g++){var p=l[g].name;if(null==t||null!=t[p]){var f=this.dataSet.getDisplay(p);if(!l[g].hidden&&(o&&f==n||!o&&(f+"").indexOf(n)>=0)){a=!1,d=l[g].name;break}}}a&&(r++,u=0,this.dataSet.next(!0))}if(!this.dataSet.isEof()&&a&&(null==i||this.dataSet.getIndex()<i.getIndex()))this.colIndex=1+this._colIndexDeff(),this._asynRun(function(){this._asynLocate(t,e,i,s,n,o,h)},10);else if(this.dataSet.isEof()&&a&&(null==i||this.dataSet.getIndex()<i.getIndex())){this.dataSet.first(),this.colIndex=1+this._colIndexDeff();p=l[0].name,f=this.dataSet.getDisplay(p);!l[0].hidden&&(o&&f==n||!o&&(f+"").indexOf(n)>=0)&&(a=!1,d=l[0].name),a?this._asynRun(function(){this._asynLocate(t,this.dataSet.getCurNode(),e,s,n,o,h)},10):"function"==typeof h&&h(0==a)}else a&&null!=i?this.dataSet.select(i):0==a?(this.locateCell(null,d),this.dataSet.expandToNode(this.dataSet.getCurNode())):this.locateCell(null,this._locateFieldName),this._locateFieldName=null,"function"==typeof h&&h(0==a)},locateDesc:function(t,e,i,s,n){"function"==typeof s&&(n=s,s=!1);i=this.getBooleanValue(i,!1);var o=!1;if(e=this.trim(e+""),"@ALL"==t||this.isArray(t)){var h=this.getOption().colModels,l=h.length;if("@ALL"==t){t=[];for(var a=0;a<l;a++){var r=h[a];1!=r.hidden&&t.push(r.name)}}var d=this.getFieldName(),u="",c=this.dataSet.getCurNode(),g=!1;null!=c&&c.level<0&&(d=h[l-1].name,g=!0);var p=this;this.dataSet.eachExt({startNode:c,desc:!0},function(s){for(var n=l-1;n>=0;n--){var a=h[n];if(1!=a.hidden&&g&&t.indexOf(a.name)>=0&&this._compareLocateText(a.name,i,e)){u=a.name,o=!0;break}a.name==d&&(g=!0)}return!o},function(s){!1===o?(d=p.getFieldName(),g=!0,this.eachExt({endNode:c,desc:!0},function(s){for(var n=l-1;n>=0;n--){var a=h[n];if(1!=a.hidden&&g&&t.indexOf(a.name)>=0&&this._compareLocateText(a.name,i,e)){u=a.name,o=!0;break}a.name==d&&(g=!0)}return!o},function(t){!0===o&&(this.select(t),this.expandToNode(this.getCurNode()),p.refresh(),p.scrollToFocus(),p.locateCell(null,u)),"function"==typeof n&&n.apply(p,[o])})):(this.select(s),this.expandToNode(this.getCurNode()),p.refresh(),p.scrollToFocus(),p.locateCell(null,u),"function"==typeof n&&n.apply(p,[o]))})}else{p=this;this.dataSet.locateDesc(t,e,i,s,function(e){var i=this.getCurNode();!0===e&&(p.selRect.beginRowNode=i,p.selRect.endRowNode=i),p.refresh(),p.scrollToFocus(),p.locateCell(null,t),"function"==typeof n&&n.apply(p,[e])})}},locate:function(t,e,i,s,n){"function"==typeof s&&(n=s,s=!1);i=this.getBooleanValue(i,!1);var o=!0;if(e=this.trim(e+""),"@ALL"==t||this.isArray(t)){this.beginUpdate();var h=this;i=this.getBooleanValue(i,!1);var l={};if(this.isArray(t))for(var a=0,r=t.length;a<r;a++)l[t[a]]=1;else l=null;this._asynLocate(l,this.dataSet.getCurNode(),null,50,e,i,function(t){h.endUpdate(),t&&(h.refresh(),h.scrollToFocus(),h.refresh(),h.trigger("onRowChanged",[h.dataSet])),"function"==typeof n&&n(t),h=null})}else!0===(o=this.dataSet.locate(t,e,i,s))&&(this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.trigger("onRowChanged",[this.dataSet])),"function"==typeof n&&n(o);return this.refresh(),this.scrollToFocus(),o},deleteAll:function(){this.dataSet.empty(!0),this.dataSet.first(),this.refresh()},isChecked:function(t){return this.dataSet.isChecked(t)},isSelected:function(t){return this.isChecked(t)},getColumnSetupKey:function(){var t,e=this.getOption().columnSetupId;if(!this.isEmpty(e)){var i=this.getName()||"";t=window.location.pathname+"_columnSetup_"+i+"_"+e}return t},saveColumnSetup:function(t){try{var e=this.getColumnSetupKey();this.isNotEmpty(e)&&(this.hasbind("onSaveColumnSetup")?this.trigger("onSaveColumnSetup",[e,t]):localStorage&&localStorage.setItem(e,t))}catch(t){this.logError("call saveColumnSetup error:"+t.message+t.stack)}},findColumnSetup:function(t){var e;try{var i=this.getColumnSetupKey();this.isEmpty(i)||(this.hasbind("onFindColumnSetup")?e=this.trigger("onFindColumnSetup",[i]):localStorage&&(e=localStorage.getItem(i)))}catch(t){this.logError("call findColumnSetup error:"+t.message+t.stack),e=""}return e},getCellExpObject:function(t,e){if(this.dataSet.getRecordCount()>0){var i=this.getFieldName(),s=this.dataSet.getValue(t);return{exp:this.getName()+"$"+i+"~~"+t+"_"+s,caption:this.dataSet.getValue(e)+"_"+this.dataSet.getIndex()+","+this.getTitleName(this.colIndex),value:s}}return null},getTitleName:function(t){for(var e=this.option.titleSheets,i=[],s=this.titleRowCount-1,n=1;n<=s;n++){var o=e[n][this.colIndex-1];o.rowIndex==n&&(i[n-1]=o.caption)}return i.join("_")},addExpress:function(t,e,i,s){this.dataSet.addExpress(t,e,i,s)},addGJExpress:function(t,e){this.dataSet.addGJExpress(t,e)},caculate:function(t){this.dataSet.caculate(t)},caculateGJ:function(t,e){return this.dataSet.caculateGJ(t,e)},caculateSum:function(t){this.dataSet.caculateSum(t)},showCol:function(t){if("string"==typeof t)null!=(s=this.getColModel(t))&&(s.hidden=!1),s=null;else if(this.isArray(t))for(var e=0,i=t.length;e<i;e++){var s;null!=(s=this.getColModel(t[e]))&&(s.hidden=!1)}this.refresh(),this.listDivBox.style.width="",!1!==this.getOption().shrinkToFit&&(this.resetColWidth(),this._tmpWidth=null,this.shrinkToFit()),!0===this.getOption().suitToFit&&this.suitToFit(),this.refreshVScrollBar()},isColHidden:function(t){return this.getColModel(t).hidden},isColShow:function(t){return!this.isColHidden(t)},hideCol:function(t){if("string"==typeof t)null!=(s=this.getColModel(t))&&(s.hidden=!0),s=null;else if(this.isArray(t))for(var e=0,i=t.length;e<i;e++){var s;null!=(s=this.getColModel(t[e]))&&(s.hidden=!0)}this.listDivBox.style.width="",!1!==this.getOption().shrinkToFit&&(this._tmpWidth=null,this.shrinkToFit()),!0===this.getOption().suitToFit&&this.suitToFit(),this.refresh(),this.refreshVScrollBar()},_updateColNames:function(t,e,i){for(var s=this.option.titleSheets[t][e].caption,n=s.match(/(<[^<>]+>)|([^<>]+)/g),o=n.length-1;o>=0;o--)if(n[o].indexOf("<")<0){n[o]=i;break}var h=n.join("");if(this.option.titleSheets[t][e].caption=h,null!=this.option.titleString){o=0;for(var l=this.colNames.length;o<l;o++)if(this.colNames[o]==s){this.colNames[o]=h,this.option.titleString=this.option.titleString.replace(s,h);break}}},setTitleCaption:function(t,e,i,s){this.setHeaderLabel(t,e,i,s)},setHeaderLabel:function(t,e,i,s){null==i&&(i=1);var n=this.getColModel(t);if(null!=n){var o=this.titleCol[n.colIndex];if(1==i){if(this.copyDiv.appendChild(o.dom.sortDiv),this._setTdText(o,e,s),this._updateColNames(this.titleRowCount-1,n.colIndex,e),o.insertBefore(o.dom.sortDiv,o.childNodes[0]),this.isNotEmpty(o.mainCell)){var h=o.mainCell;r==i&&(this._setTdText(h,e,s),h.insertBefore(h.dom.sortDiv,h.childNodes[0]))}return}for(var l=o.option.bandRowIndex,a=o.option.bandColIndex,r=2,d=0;this.isNotEmpty(l)&&l>0&&r<=i;){1==l&&(a++,d=this._colIndexDeff());var u=this.gridTable.rows[l].cells[a+d];if(r==i&&(this._setTdText(u,e,s),1==l?this._updateColNames(l,a-1,e):this._updateColNames(l,a,e)),this.isNotEmpty(o.mainCell)){h=this.fzGridTable.rows[l].cells[a+d];if(r==i)h.childNodes.length-1>=0&&this._setTdText(h,e,s)}l=u.option.bandRowIndex,a=u.option.bandColIndex,r++}}},setSelection:function(t,e,i,s){var n=!1;t&&(n=this.locate(this.getPKeyName(),t,!0),i&&this.trigger("onSelectRow",[])),n&&e&&this.locateCell(t,e),n&&this.trigger("onSelectEcpRow",[t,e,null])},_asynCheck:function(t,e,i,s,n,o){this.logInfo("_asynCheck:"+t+" "+i.recNo);var h=0;this.dataSet.beginUpdate();var l=this.dataSet.curNode;for(this.dataSet.select(i);!this.dataSet.isEof()&&h<e;){var a=this.dataSet.getCellOption(s);if(a.someCheck=!1,!0!==a.disabled)switch(t){case this.dataSet.checkType.all:this.dataSet.setValue(s,n.editoptions.check);break;case this.dataSet.checkType.unall:this.dataSet.setValue(s,n.editoptions.uncheck);break;case this.dataSet.checkType.rever:this.dataSet.getValue(s)===n.editoptions.uncheck?this.dataSet.setValue(s,n.editoptions.check):this.dataSet.setValue(s,n.editoptions.uncheck);break;default:this.dataSet.setValue(s,n.editoptions.check)}this.dataSet.next(!0),h++}i=this.dataSet.curNode,h=null,this.dataSet.isEof()?(this.dataSet.select(l),this.dataSet.endUpdate(!1),"function"==typeof o&&o.apply(this)):(this.dataSet.select(l),this.dataSet.endUpdate(!1),this._asynRun(function(){this._asynCheck(t,e,i,s,n,o)},10))},checkAll:function(t,e,i){"function"==typeof t&&(i=t,t="",e=!0),"function"==typeof e?(i=e,e=!0):null==e&&(e=!0);var s=this;if("string"==typeof t&&""!==t){var n=this.dataSet.getFieldOption(t);("checkBox"===n.editType||"onoff"===n.editType)&&this.dataSet.getRecordCount()>0&&this._asynCheck(this.dataSet.checkType.all,100,this.getChildNode(0,this.dataSet.rootNode),t,n,function(){s.refresh(),"function"==typeof i&&i.apply(s)})}else this.dataSet.selectAll(function(){s.refresh(),"function"==typeof i&&i.apply(s)}),e&&this.setTitleChecked("@MUL",!0)},selectAll:function(t,e,i){this.checkAll(t,e,i)},cancelCheckRow:function(t,e,i){if("function"==typeof t&&(i=t,t="",e=!0),"function"==typeof e?(i=e,e=!0):null==e&&(e=!0),"string"==typeof t&&""!==t){var s=this.dataSet.getFieldOption(t);("checkBox"===s.editType||"onoff"==s.editType)&&this.dataSet.getRecordCount()>0&&this._asynCheck(this.dataSet.checkType.unall,100,this.getChildNode(0,this.dataSet.rootNode),t,s,i)}else this.dataSet.unCheckAll(i),e&&this.setTitleChecked("@MUL",!1)},cancelSelectRow:function(t,e,i){this.cancelCheckRow(t,e,i)},setTitleChecked:function(t,e,i){"boolean"==typeof t?(i=e,e=t,t="@MUL"):""===t&&(t="@MUL"),null!=this._checkBoxs&&null!=this._checkBoxs[t]&&(!0===i?this._checkBoxs[t].setSomeCheck(e):this._checkBoxs[t].setCheck(e))},getTitleChecked:function(t,e){"boolean"==typeof t?(e=t,t="@MUL"):""===t&&(t="@MUL");var i=!1;return null!=this._checkBoxs&&null!=this._checkBoxs[t]&&(!0===e?this._checkBoxs[t].getSomeCheck()&&(i="some"):i=this._checkBoxs[t].getCheck()),i},reverCheckRow:function(t,e){if("string"==typeof t&&""!==t){var i=this.dataSet.getFieldOption(t);("checkBox"===i.editType||"onoff"==i.editType)&&this.dataSet.getRecordCount()>0&&this._asynCheck(this.dataSet.checkType.rever,100,this.getChildNode(0,this.dataSet.rootNode),t,i,e)}else this.dataSet.reverCheckAll(e)},reverSelectRow:function(t,e){this.reverCheckRow(t,e)},multiCheckRows:function(t,e,i){t?this.checkAll(e,i):this.unCheckAll(e,i)},multiSelectRows:function(t,e,i){this.multiCheckRows(t,e,i)},filterGridData:function(t,e,i,s){var n=this;this.dataSet.addFilterText(t,i,function(){n.first(),"function"==typeof s&&s(),n=null})},resizeColWidth:function(t,e){this.getColModel(t).width=e},getDataByRowId:function(t){var e=this.dataSet.curNode;this.dataSet.beginUpdate(),this.locate(this.getPKeyName(),t,!0);var i=this.dataSet.curNode.data;return this.dataSet.select(e),this.dataSet.endUpdate(!1),e=null,i},setRowData:function(t){if("object"==(void 0===t?"undefined":_typeof(t)))for(var e in t){var i=t[e];"function"!=typeof e&&this.setValue(e,i)}},updateEcpRowData:function(t,e,i){this.setRowData.apply(this,arguments)},updateRowData:function(t){this.refresh()},frozenCol:function(t){t&&(this.getColModel(t).frozen=!0,this.refresh())},setColAlign:function(t,e){t&&(this.dataSet.getFieldOption(t).align=e,this.refresh())},getGidByIndex:function(t){return this.dataSet.locate("@INDEX",t,!0),this.dataSet.getCurNode().data[this.getPKeyName()]},reloadGrid:function(t){},saveCell:function(t,e){},setCell:function(t,e,i,s,n,o){},setAmountCell:function(t,e,i,s){},getAmount:function(t){},getAmountCell:function(t,e){},searchGrid:function(){},getTitleHeight:function(){return this.titleHeight},hideTitle:function(){this.hideGridHeader()},hideGridHeader:function(){for(var t=this.titleRowCount-1;t>0;t--)this.gridTable.rows[t].style.display="none",this.fzGridTable.rows[t].style.display="none";this.titleIsHide=!0,this.initGrid(),this.dataSet.first(),this.topNode=this.dataSet.getCurNode(),this.refresh()},showTitle:function(){this.showGridHeader()},showGridHeader:function(){for(var t=this.titleRowCount;t>0;t--)this.gridTable.rows[t].style.display="",this.fzGridTable.rows[t].style.display="";this.titleIsHide=!1,this.initGrid(),this.dataSet.first(),this.topNode=this.dataSet.getCurNode(),this.refresh()},hideGridFooterrow:function(){this.getOption().footerrow=!1,this.refresh()},showGridFooterrow:function(){this.getOption().footerrow=!0,this.refresh()},setAmount:function(t,e,i){var s;s="function"==typeof e?e():e,"rn"==t?this.summaryText=s:this.dataSet.setSummary(t,s),this.refresh()},getPageData:function(){var t=[];if(this.dataSet.getRecordCount()>0){var e=this.dataSet.getCurNode();for(this.dataSet.beginUpdate(),this.dataSet.first();!this.dataSet.isEof();)t.push(this.extend({},this.dataSet.getCurNode().data)),this.dataSet.next(!0);this.dataSet.select(e),this.dataSet.endUpdate(!1)}return t},getRangeData:function(t,e,i,s){if("function"==typeof e?(s=e,e=!1,i=!1):"function"==typeof i&&(s=i,i=!1),null==e&&(e=!1),this.isNotEmpty(t)&&"function"==typeof s){var n,o,h,l=isAll=!1,a=this,r=a.option;"object"===(void 0===t?"undefined":_typeof(t))?!(l=(o=+t.begin)>(h=+t.end))&&(isAll=h+1-o===a.getOption().pageCount):"string"==typeof t?"current"!==t&&r.pager?r.pager&&"all"===t&&(isAll=!0):l=!0:!1===r.pager&&(l=!0),!l&&(a._lockValue=!0),a._icpData=function(t){if(a._lockValue=!1,e){var n=[],o=a.dataSet,h=o.getCurNode();for(var l in a.dataSet._tmpData=t,a.dataSet.transState)a.dataSet.transState[l].transed=!1;for(var r=h.data,d=0,u=t.length;d<u;d++){var c=t[d],g={};if(null!=c)for(var l in h.data=c,c){var p=c[l];if("object"==(void 0===p?"undefined":_typeof(p))){var f={};for(var y in g[l]=f,p){var m=p[y];"string"==typeof(m=o.getDisplay(l+"."+y,m,h,null,i))&&m.indexOf("<")>=0&&(m=m.replace(/<(\/)?[^<>]+>/g,"")),f[y]=m}}else"string"==typeof(p=o.getDisplay(l,p,h,null,i))&&p.indexOf("<")>=0&&(p=p.replace(/<(\/)?[^<>]+>/g,"")),g[l]=p}c=null,n.push(g)}a.dataSet._tmpData=null,h.data=r,o=null,h=null,r=null,s.call({},n)}else s.call({},t);a._icpData=null},l||isAll||!0!==r.pager?l?a._icpData(a.getPageData()):isAll&&(n=a._crPrms(),a._loadSerData(a.getOption().pageCount,n.ps,n.idx)):(n=a._crPrms(o,h),a._loadSerData(a.getOption().pageCount,n.ps,n.idx))}},_loadSerData:function(t,e,i){var s=this;if("function"==typeof s.onPageChanged)try{s.onPageChanged(t,e,i)}catch(t){s.logError("[onPageChanged] event error!"+t.message+t.stack)}else s.hasbind("onPageChanged")&&s.trigger("onPageChanged",[t,e,i])},_crPrms:function(){var t={ps:0,idx:1};if(0===arguments.length)t.ps=this.pageObj.getTotalCount();else if(2===arguments.length){var e=arguments[0],i=arguments[1]-e+1;for(e+="";e.length<5;)e=0+e;t.ps=this.pageObj.getOption().pageSize,t.idx=-+(i+e)}return t},disable:function(){this.base(),this.setReadOnly(!0)},beginUpdate:function(){this.base(),this.dataSet.beginUpdate()},endUpdate:function(t){this.dataSet.endUpdate(t),this.base()},enable:function(){this.base(),this.setReadOnly(!1)},getDisplayData:function(t,e){"function"==typeof t&&(e=t,t="array");for(var i=[],s=0,n=this.option.colModels.length;s<n;s++){var o=this.option.colModels[s];o.hidden||i.push(o.name)}this.dataSet.getDisplayData(i,t,e)},getChangeSet:function(t){if(this.post(),!0!==t&&!0===this.getOption().cacheChangeSet){var e=[];if(null!=this._cacheChangeSet)for(var i in this._cacheChangeSet){var s=this._cacheChangeSet[i];"function"!=typeof s&&(i===this._cacheKey&&(s=this.dataSet.getChangeSet()),e=e.concat(s))}else e=this.dataSet.getChangeSet();return e}return this.dataSet.getChangeSet()},getEcpChangeSet:function(t){if(this.post(),!0!==t&&!0===this.getOption().cacheChangeSet){var e={list:[],deleteList:[]};for(var i in this._cacheEcpChangeSet){var s=this._cacheEcpChangeSet[i];"function"!=typeof s&&(i===this._cacheKey&&(s=this.dataSet.getEcpChangeSet()),e.list=e.list.concat(s.list),e.deleteList=e.deleteList.concat(s.deleteList))}return e}return this.dataSet.getEcpChangeSet()},getRecordCount:function(){return this.dataSet.getRecordCount()},mergeChangeLog:function(t){!0===this.getOption().cacheChangeSet&&(this._cacheChangeSet={},this._cacheEcpChangeSet={}),this.dataSet.mergeChangeLog(t),!0===this.getOption().pager&&this.pageObj&&this.pageObj.resetCount()},mergeSomeChangeLog:function(t,e){this.dataSet.mergeSomeChangeLog(t,e)},getHScrollHide:function(){var t=this._getNumberValue(this.listDiv.style.width);return this._getNumberValue(this.gridTable.style.width)<=t},doContainerShow:function(){!1!==this.getOption().shrinkToFit&&this.shrinkToFit(),!0===this.getOption().suitToFit&&this.suitToFit(),this._suitTitleHeight(),null!=this.showHandle&&(clearInterval(this.showHandle),this.showHandle=null)},getEcpType:function(){return this.className},setPageByRowId:function(){},getDisplayFirstColModel:function(){},setEmptyRowData:function(){},setFiltered:function(t,e){var i=this;this.dataSet.setFiltered(t,function(){!0===i.getOption().multiSelect&&i._refreshMulTitleCheck(),i.first(),"function"==typeof e&&e()})},getTotalValue:function(t){return!0===this.getOption().totalRever?this.dataSet.getSubtotalValue(t):this.dataSet.getTotalValue(t)},getSubtotalValue:function(t){return!0===this.getOption().totalRever?this.dataSet.getTotalValue(t):this.dataSet.getSubtotalValue(t)},setTotalValue:function(t,e){!0===this.getOption().totalRever?this.dataSet.setSubtotalValue(t,e):this.dataSet.setTotalValue(t,e)},setSubtotalValue:function(t,e){!0===this.getOption().totalRever?this.dataSet.setTotalValue(t,e):this.dataSet.setSubtotalValue(t,e)},eachChecked:function(t,e,i,s){var n=void 0===t?"undefined":_typeof(t),o=void 0===i?"undefined":_typeof(i);if("function"===n){var h=void 0===e?"undefined":_typeof(e);"function"===h?(i=!1,s=e):"boolean"===h&&("function"===o&&(s=i),i=e),e=t,t=this.dataSet.rootNode}else"object"==n&&"function"===o&&(s=i,i=!1);if(i)this.dataSet.lastNode(t);else t;var l=this;this.dataSet.eachChecked(t,e,i,function(){!0===l.multiSelect&&0==this.getRecordCount()&&l.setTitleChecked("@MUL",!1),l.refresh(),"function"==typeof s&&s()})},each:function(t,e,i,s){var n=void 0===t?"undefined":_typeof(t),o=void 0===i?"undefined":_typeof(i);if("function"===n){var h=void 0===e?"undefined":_typeof(e);"function"===h?(i=!1,s=e):"boolean"===h&&("function"===o&&(s=i),i=e),e=t,t=this.dataSet.rootNode}else"object"==n&&"function"===o&&(s=i,i=!1);if(i)this.dataSet.lastNode(t);else t;var l=this;this.dataSet.each(t,e,i,function(){!0===l.multiSelect&&0==this.getRecordCount()&&l.setTitleChecked("@MUL",!1),l.refresh(),"function"==typeof s&&s.apply(l)})},getIndex:function(){return this.dataSet.getIndex()},colNamesToColDatas:function(t,e){var i=e.length,s=[];if(i>0){!1===this.isArray(e[0])&&(e=[e],i=1);for(var n=0,o=e.length;n<o;n++){for(var h=e[n],l=0,a=[],r=0,d=h.length;r<d;r++){var u=h[r],c=u;"string"!=typeof c&&(c=c.caption),0!==u.startIndex&&(l=u.startIndex||u.startindex);var g=u.colSpan||u.colspan||1;if(null!=l){a[l]=c;for(var p=l+1;p<l+g;p++)a[p]=c}else a[r]=c}s.push(a)}}var f=[];for(n=0,o=t.length;n<o;n++){for(var y={},m=[],C=[],S=0;S<i;S++){var x=s[S][n]||"";m.push(x),""!==x&&C.push(x)}y.rowNames=m,y.rowName=C.join("◆"),y.colModel=t[n],y.display=!0!==t[n].hidden,y.frozen=!0===t[n].frozen,y.groups=!0===t[n].groups,f.push(y)}return f},colDatasToColNames:function(t){for(var e=[],i=[],s=[],n=[],o=[],h=[],l=0;l<2;l++)for(var a=0,r=t.length;a<r;a++){var d=t[a];0==l?!0===d.frozen&&h.push(d):!0!==d.frozen&&h.push(d)}l=0;for(var u=(t=h).length;l<u;l++){var c=t[l],g=c.colModel;g.hidden=!1===c.display,g.frozen=!0===c.frozen,g.groups=!0===c.groups,e.push(g);for(var p=c.rowNames,f=0,y=p.length;f<y;f++){null==i[f]&&(i[f]=[],n[f]=-1,s[f]="");var m=p[f];f<y-1?(s[f]!==m?(""!==s[f]&&i[f].push({caption:s[f],startIndex:n[f],colSpan:o[f]}),n[f]=l,o[f]=1):""!==s[f]&&o[f]++,s[f]=m):i[f].push(m)}}for(f=0,y=s.length;f<y-1;f++)""!==s[f]&&i[f].push({caption:s[f],startIndex:n[f],colSpan:o[f]});return{colNames:i,colModels:e}},setHeightLight:function(){this.getOption().heightLight=!0,this.refresh(),this.getOption().heightLight=!1},setMultiSelect:function(t){this.multiSelect=!0===t,this.getOption().multiSelect=this.multiSelect,this.refreshTitle()},getFilterMark:function(){return this.dataSet.getFilterMark()},getCurNode:function(){return this.dataSet.getCurNode()},getParentNode:function(t){return this.dataSet.getParentNode(t)},getChildNode:function(t,e){return this.dataSet.getChildNode(t,e)},getCurData:function(t){return this.dataSet.getCurData(t)},setFilterMark:function(t,e){var i=this;this.dataSet.setFilterMark(t,function(){i.first(),"function"==typeof e&&e.apply(i)})},doCssLoaded:function(){this.refresh()},triggerEvent:function(){this.trigger("onPageChanged",[this.pageObj.getPageCount(),this.pageObj.getPageSize(),this.pageObj.getPageIndex()])},getFontSize:function(t){var e=this.getOption().fontSize;if(null!=t&&""!==t){var i=this.getColModel(t);null!=i.fontSize&&""!==i.fontSize&&(e=i.fontSize)}return null==e||""===e?e=this.getOption().defFontSize||14:/px/i.test(e+"")&&(e=parseInt(e.replace("px",""),10)),e},setTotalState:function(t){this.getOption().total=!0===t,this.initTotalRow()},setSubtotalState:function(t){this.getOption().subtotal=!0===t,this.initTotalRow()},setColDesign:function(){null!=t&&null!=t.pertain&&t.pertain.gridcoldesign(this)},fullExpand:function(t){this.dataSet.fullExpand(t),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.selRect.beginColIndex=1,this.selRect.endColIndex=this.selRect.beginColIndex,this.refresh()},fullCollapse:function(t){var e=this;this.dataSet.fullCollapse(function(){e.first(),e.selRect.beginRowNode=e.dataSet.getCurNode(),e.selRect.endRowNode=e.selRect.beginRowNode,e.selRect.beginColIndex=1,e.selRect.endColIndex=e.selRect.beginColIndex,e.refresh(),"function"==typeof t&&t()})},setAsynInitCount:function(t){this.dataSet.setAsynInitCount(t)},modelData:function(t){this.getOption().modelData=t,this._ngmodel()},_ngmodel:function(){if(null!=this.getOption().modelData){var t=this.getOption()["v-model"]||this.getOption()["ng-model"];if(null!=t&&""!==t){for(var e=t.split("."),i=this.getOption().modelData,s=0,n=!0,o=e.length;s<o-1;s++){if(null==i[h=e[s]]){n=!1;break}i=i[h]}if(n){var h,l=i[h=e[s]];null!=l&&this.isArray(l)?this.value(l):this.value([])}}}},destroy:function(){this.pfilter.hide(),this.base()}}),_bindRenderFunc("qzzquerygrid",t.ui.querygrid),t.ui.querygrid}),
/*!
 * 远光ECP平台3.4版本
 * ecp.qzz.ui.grid.js
 * 树表格控件： qzz.ui.qzz
 * @requires qzz.ui.Frame
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.querygrid","qzz.idatepicker","qzz.icombobox","qzz.icombotree","qzz.ibuttonedit","qzz.inumber","qzz.iedit","qzz.iupdown"],function(){var t=window.qzz;return t.space("ui"),t.ui.grid=t.Class(t.ui.querygrid,{_create:function(){if(this.base(),this.className="Grid",this.logBegin("Grid.create"),this.editObjects={},this.editObject,this.editType={date:t.ui.input.datepicker,comboBox:t.ui.input.combobox,comboTree:t.ui.input.combotree,buttonEdit:t.ui.input.buttonedit,number:t.ui.input.number,text:t.ui.input.edit,updown:t.ui.input.updown},this.dataType={date:"date",enum:"comboBox",gldx:"buttonEdit",dxfl:"buttonEdit",unitcode:"buttonEdit",string:"text",number:"number",money:"number"},null!=this.getOption().editType)for(var e in this.getOption().editType){var i=this.getOption().editType[e];this.editType[e]=i}},_render:function(){this.base();var e=this;this.popMenu.beginUpdate();var i=1==this.getBrowser("msie");i&&this.popMenu.addMenu("paste",this.getI18n("qzz.paste","粘贴"),function(){var t=window.clipboardData.getData("Text");e.setFocus(),e.doPasteData(t),e.hasCopy=!1,e.refresh()},"Ctrl+V",i),this.getReadOnly()||this.popMenu.addMenu("delete",this.getI18n("qzz.clear","清除"),function(){e.clearMark=e.doClearData(),e.setFocus(),e.refresh()},"Delete",!0),this.popMenu.delMenu("qzzFormat"),this.getOption().colDesign&&null!=t&&null!=t.pertain&&"function"==typeof t.pertain.gridcoldesign&&(this.popMenu._popCount>0&&this.popMenu.addMenu("split2","-"),this.popMenu.addMenu("qzzFormat",this.getI18n("qzz.colset","列设置"),function(){t.pertain.gridcoldesign(e)})),this.popMenu.endUpdate()},_loadEditObject:function(t,e){"function"==typeof t&&(t,t=null);for(var i=this.getOption().colModels,s=[],n={},o=0,h=i.length;o<h;o++){var l=i[o],a="",r=l.editType;if(null!=r&&""!==r||null==l.dataType||""===l.dataType||(r=this.dataType[l.dataType]),null!=r&&""!==r||(r="text"),"string"==typeof r&&null==this.editType[r]){switch(r){case"date":case"comboBox":case"buttonEdit":case"number":case"text":case"updown":case"radio":case"checkBox":case"onoff":break;default:a=l.editType,l.outerInput=!0}null==n[a]&&(s.push(a),n[a]=1)}else"string"!=typeof r&&(l.outerInput=!0)}if(n=null,s.length>0){var d=this;require(s,function(){for(var t=0,e=s.length;t<e;t++){var i=s[t],n=arguments[t],o=i;null==d.editType[o]&&(d.editType[o]=n),n=null}s=null})}},_createTitle:function(){this.base(),this._loadEditObject()},_mulSelectStyle:function(t,e,i,s,n,o,h,l,a,r,d){if(null==e&&null!=i&&!0!==i.noUse&&0==i.cellIndex&&this.delStyle(i,"borderRightFocus"),l)if(s.recNo===n.recNo)if(h==this.colIndex){var u="gridFocusCell";this.focus||(u="gridNoFocusFocusCell"),t.className!==u&&(this.setStyle(t,u),d&&this.setStyle(e,u)),this.curCell=t,this.curColIndex=this.colIndex}else{u="gridSelRow";1==this.focus&&this.selRect.beginRowNode.getIndex()==this.selRect.endRowNode.getIndex()||(u=o%2==1?"gridReadonly":"gridCell"),!0===this.getOption().heightLight&&(u="gridSelRow"),t.className!==u&&this.setStyle(t,u),d&&e.className!==u&&this.setStyle(e,u)}else u=o%2==1?"gridReadonly":"gridCell",t.className!==u&&this.setStyle(t,u),d&&e.className!==u&&this.setStyle(e,u);else if(r){u="gridEditFocusCell";a&&(u="gridFocusCell"),this.focus||(u="gridNoFocusFocusCell"),t.className!==u&&(this.setStyle(t,u),d&&this.setStyle(e,u)),this.curCell=t,this.curColIndex=this.colIndex}else if(this.mulCellSelect)a?("gridReadOnly"!==t.className&&this.setStyle(t,"gridReadonly"),d&&"gridReadOnly"!==e.className&&this.setStyle(e,"gridReadonly")):("gridCell"!==t.className&&this.setStyle(t,"gridCell"),d&&"gridCell"!==e.className&&this.setStyle(e,"gridCell"));else if(a){u="gridReadonly";!0===this.getOption().heightLight&&s.recNo===n.recNo&&(u="gridSelRow"),t.className!==u&&this.setStyle(t,u),d&&e.className!==u&&this.setStyle(e,u)}else{u="gridCell";!0===this.getOption().heightLight&&s.recNo===n.recNo&&(u="gridSelRow"),t.className!=u&&this.setStyle(t,u),d&&e.className!=u&&this.setStyle(e,u)}this.mulCellSelect&&s.scrIndex<=this.selRect.endRowNode.getIndex()&&s.scrIndex>=this.selRect.beginRowNode.getIndex()&&h<=this.selRect.endColIndex&&h>=this.selRect.beginColIndex&&(this.focus||!0===this.getOption().heightLight?(r?"gridCell"!==t.className&&(this.setStyle(t,"gridCell"),d&&this.setStyle(e,"gridCell")):("gridSelRow"!=t.className&&(this.setStyle(t,"gridSelRow"),d&&this.setStyle(e,"gridSelRow")),this.hasCopy&&(this.addStyle(t,"cellCopySate"),d&&this.addStyle(e,"cellCopySate"))),h==this.selRect.beginColIndex&&(this.addStyle(t,"borderLeftFocus"),d&&this.addStyle(e,"borderLeftFocus")),h==this.selRect.endColIndex&&(this.addStyle(t,"borderRightFocus"),d&&this.addStyle(e,"borderRightFocus")),h<=this.selRect.endColIndex&&h>=this.selRect.beginColIndex&&(s.getIndex()==this.selRect.beginRowNode.getIndex()&&(this.addStyle(t,"borderTopFocus"),d&&this.addStyle(e,"borderTopFocus")),s.getIndex()==this.selRect.endRowNode.getIndex()&&("none"===t.style.display&&null!=t.groupCol&&(t=t.groupCol),this.addStyle(t,"borderBottomFocus"),d&&("none"===e.style.display&&null!=e.groupCol&&(e=e.groupCol),this.addStyle(e,"borderBottomFocus"))))):("gridNoFocusSelRow"!==t.className&&(this.setStyle(t,"gridNoFocusSelRow"),d&&this.setStyle(e,"gridNoFocusSelRow")),r&&(t.className="gridNoFocusFocusCell")),r=!1)},_refreshEditObjHeight:function(t){var e=this._getColModel(t);if(null!=this.editObject&&!0===e.groups&&this.editObject.fieldName==e.name){var i=this.editObject.getParentElement();if(null!=i){var s=i.offsetHeight;s>6&&this.editObject.setHeight(s-6)}}},_refreshGroups:function(t,e,i,s,n,o,h){this.base(t,e,i,s,n,o,h),this._refreshEditObjHeight(i)},_refreshTreeCol:function(t,e,i,s,n,o,h,l,a,r){if(s.count>0||this.getOption().virtual&&1!=s.hasExpand&&1!=s.data.isLeaf){if(i)null==e.treePoint._option&&(e.treePoint._option={}),null==(g=e.treePoint._option)._this&&(g._this=this),g.node=s,e.treePoint.onclick=this._onTreePointClick;else null==t.treePoint._option&&(t.treePoint._option={}),null==(g=t.treePoint._option)._this&&(g._this=this),g.node=s,t.treePoint.onclick=this._onTreePointClick;if(l&&!a&&this.focus&&!this.mulCellSelect&&"checkBox"!=r.editType&&"radio"!=r.editType&&"onoff"!=r.editType){var d=!0;if(i){this._setHtml(e.rect.text,"",!1),e.onclick=null;var u=e.rect.parentNode.offsetWidth;null!=(c=e.levelTd.level-s.level)&&0!=c&&(u+=16*c),u<=0&&(u=40),d=this.setEditObject(n,o,h,e.rect,u-1)}else{this._setHtml(t.rect.text,"",!1),t.onclick=null;u=t.rect.parentNode.offsetWidth;null!=(c=t.levelTd.level-s.level)&&0!=c&&(u+=16*c),u<=0&&(u=40),d=this.setEditObject(n,o,h,t.rect,u-1)}!1!==d?this.inputFocus=!0:a=!0}else i?""!==e.rect.style.display&&this._resetCell(e,!0):""!==t.rect.style.display&&this._resetCell(t,!0);s.expanded&&s.count>0?i?this.setStyle(e.treePoint,"component_ui_listview_node_expand"):this.setStyle(t.treePoint,"component_ui_listview_node_expand"):(0==s.count&&(s.expanded=!1),i?this.setStyle(e.treePoint,"component_ui_listview_node_collapse"):this.setStyle(t.treePoint,"component_ui_listview_node_collapse"))}else if(i?this.clearStyle(e.treePoint):this.clearStyle(t.treePoint),l&&!a&&this.focus&&!this.mulCellSelect&&"checkBox"!=r.editType&&"radio"!=r.editType&&"onoff"!=r.editType){i?this._setHtml(e.rect.text,"",!1):this._setHtml(t.rect.text,"",!1);d=!0;if(i){e.onclick=null;u=e.rect.parentNode.offsetWidth;null!=(c=e.levelTd.level-s.level)&&0!=c&&(u+=16*c),u<=0&&(u=40),d=this.setEditObject(n,o,h,e.rect,u-1)}else{t.onclick=null;var c;u=t.rect.parentNode.offsetWidth;null!=(c=t.levelTd.level-s.level)&&0!=c&&(u+=16*c),u<=0&&(u=40),d=this.setEditObject(n,o,h,t.rect,u-1)}!1!==d?this.inputFocus=!0:a=!0}else i?""!==e.rect.style.display&&this._resetCell(e,!0):""!==t.rect.style.display&&this._resetCell(t,!0);var g;this.multiSelect?(!0!==t.checkBox.isShow()&&(t.checkBox.show(),t.checkBox.getContainer().parentElement.style.width="14px",i&&(e.checkBox.show(),e.checkBox.getContainer().parentElement.style.width="14px")),i?(s.enable?e.checkBox.setDisable(!1):e.checkBox.setDisable(!0),!0===this.getOption().someCheck&&!0===this.dataSet.autoCheckType.autoCheckAllParent&&s.childCheckCount>0&&s.childCheckCount<s.count?e.checkBox.setSomeCheck(!0):e.checkBox.setCheck(s.checkState),null==e.checkBox._option&&(e.checkBox._option={}),null==(g=e.checkBox._option)._this&&(g._this=this),g._cNode=s,e.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0)):(s.enable?t.checkBox.setDisable(!1):t.checkBox.setDisable(!0),!0===this.getOption().someCheck&&!0===this.dataSet.autoCheckType.autoCheckAllParent&&s.childCheckCount>0&&s.childCheckCount<s.count?t.checkBox.setSomeCheck(!0):t.checkBox.setCheck(s.checkState),null==t.checkBox._option&&(t.checkBox._option={}),null==(g=t.checkBox._option)._this&&(g._this=this),g._cNode=s,t.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0))):!0===t.checkBox.isShow()&&(t.checkBox.hide(),t.checkBox.getContainer().parentElement.style.width="2px",i&&(e.checkBox.hide(),e.checkBox.getContainer().parentElement.style.width="2px"));if(0==this.treeGrid)"none"!=t.levelTd.style.display&&(i?(e.levelTd.style.display="none",e.treeTd.style.display="none",this.multiSelect||(e.checkTd.style.display="none")):(t.levelTd.style.display="none",t.treeTd.style.display="none",this.multiSelect||(t.checkTd.style.display="none")));else{var p=16*s.level+4;this._setNumberValue(t.levelTd,"width",p);var f=this._getNumberValue(t.levelDiv.style.width)-p-this._getNumberValue(t.treeTd.style.width)-this._getNumberValue(t.checkTd.style.width)-4;f<=0&&(f=40),this._setNumberValue(t.rect,"width",f),t.levelTd.level=s.level,i&&(this._setNumberValue(e.levelTd,"width",p),this._setNumberValue(e.rect,"width",f),e.levelTd.level=s.level)}},refreshCell:function(t,e,i,s,n,o,h,l,a,r,d){var u=null!=s&&!0!==s.noUse,c=null;if(u?(null==s._option._this&&(s._option._this=this),this._bindCellEvent(s),c=s.rect.text):(null==i._option._this&&(i._option._this=this),this._bindCellEvent(i),c=i.rect.text),h==this._colOrder["@INDEX"]){var g="@INDEX";if(0==this.getOption().rownumbers)return void("1px"!==i.style.width&&(i.style.width="1px",s.style.width="1px"));"60px"!==i.style.width&&(i.style.width="60px",s.style.width="60px");var p=this.dataSet.getIndex();if(this.setStyle(s,"treeListIndex"),this.getOption().pager&&!isNaN(this.getPageSize())&&(p+=this.getPageSize()*(this.getPageIndex()-1)),this._setHtml(c,p,!1),"function"==typeof this.onCellDraw)try{this.onCellDraw(this.dataSet,g,s)}catch(t){this.logError("call onCellDraw Error:"+t.message+t.stack)}this.trigger("onCellDraw_"+g,[this.dataSet,g,s])}else if(h===this._colOrder["@MUL"]){if(null==i.checkBox)return;g="@MUL";if(u?(this.setStyle(s,"treeListIndex"),this._refreshCheckCell(s,s.checkBox,1==l.enable,!0,l,null,g,l.checkState),s.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0),null!=s.onclick&&(s.onclick=null,s.ondblclick=null)):(this.setStyle(i,"treeListIndex"),this._refreshCheckCell(i,i.checkBox,1==l.enable,!0,l,null,g,l.checkState),i.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0),null!=i.onclick&&(i.onclick=null,i.ondblclick=null)),"function"==typeof this.onCellDraw)try{this.onCellDraw(this.dataSet,g,s)}catch(t){this.logError("call onCellDraw Error:"+t.message+t.stack)}this.trigger("onCellDraw_"+g,[this.dataSet,g,s])}else{var f=l.recNo===a.recNo&&h==this.colIndex;f&&(this.curCell=u?s:i);var y=this._getColModel(h);if(y.hidden)return void("none"!==i.style.display&&(i.style.display="none",u&&(s.style.display="none")));"none"==i.style.display&&!0!==y.groups&&(i.style.display="",u&&(s.style.display=""));g=y.name;!1!==y.ellipsis&&"onoff"!=y.editType&&"checkBox"!==y.editType&&"radio"!=y.editType?(this.addStyle(c,"ellipsis"),c.style.lineHeight=this.rowHeight-4+"px"):c.style.lineHeight="normal";var m=r;m||(m=this.getCellReadOnly(g));var C=this._getCellOption(g,d),S=C.option;!0!==S.hasValidate||null==S.validateMessage||""===S.validateMessage||null==S.displayText||""===S.displayText||S.displayText===C.text||null!=S.value&&""!==S.value||(C.value=S.displayText),S.disabled=this.getBooleanValue(S.disabled,!1),this._mulSelectStyle(i,s,n,l,a,o,h,r,m,f,u);var x,_=this.getColAlign(g),b=C.value,v=C.text,w=S.title;if(null!=S.bgColor?u?s.style.backgroundColor!==S.bgColor&&(s.style.backgroundColor=S.bgColor):i.style.backgroundColor!==S.bgColor&&(i.style.backgroundColor=S.bgColor):null!=y.backgroundColor?u?s.style.backgroundColor!==y.backgroundColor&&(s.style.backgroundColor=y.backgroundColor):i.style.backgroundColor!==y.backgroundColor&&(i.style.backgroundColor=y.backgroundColor):u?""!==s.style.backgroundColor&&(s.style.backgroundColor=""):""!==i.style.backgroundColor&&(i.style.backgroundColor=""),null!=S.color?u?s.style.color!==S.color&&(s.style.color=S.color):i.style.color!==S.color&&(i.style.color=S.color):null!=y.color?u?s.style.color!==y.color&&(s.style.color=y.color):i.style.color!==y.color&&(i.style.color=y.color):u?""!==s.style.color&&(s.style.color=""):""!==i.style.color&&(i.style.color=""),null!=w&&""!==w?u?(s.setAttribute("title",w),this.addStyle(s,"redInfo")):(i.setAttribute("title",w),this.addStyle(i,"redInfo")):u?s.setAttribute("title",""):i.setAttribute("title",""),null!=S.GJTitle&&""!==S.GJTitle)if(u)""===(x=s.getAttribute("title"))||null==x?s.setAttribute("title",S.GJTitle):s.setAttribute("title",x+"\n"+S.GJTitle),this.addStyle(s,"redInfo");else""===(x=i.getAttribute("title"))||null==x?i.setAttribute("title",S.GJTitle):i.setAttribute("title",x+"\n"+S.GJTitle),this.addStyle(i,"redInfo");if((null==this.getOption().treeKey&&1==h||this.getOption().treeKey==g)&&0!=this.option.treeGrid)this._refreshTreeCol(i,s,u,l,g,v,b,f,m,y);else if("checkBox"!=y.editType&&"onoff"!=y.editType||!this.isNotEmpty(i.checkBox))if("radio"==y.editType&&this.isNotEmpty(i.radio))u?(this._refreshCheckCell(s,s.radio,1!=S.disabled&&!0!==y.disabled,!1===m,l,y,g,y.editoptions.check==b),!0!==s.radio.hasbind("onClick")&&s.radio.bind("onClick",this._onCommonRadioClick,!0),s.style.textAlign!==_&&(s.style.textAlign=_)):(this._refreshCheckCell(i,i.radio,1!=S.disabled&&!0!==y.disabled,!1===m,l,y,g,y.editoptions.check==b),!0!==i.radio.hasbind("onClick")&&i.radio.bind("onClick",this._onCommonRadioClick,!0),i.style.textAlign!==_&&(i.style.textAlign=_)),f&&(this.inputFocus=!1);else if(f&&!m&&this.focus&&!this.mulCellSelect&&"checkBox"!=y.editType&&"radio"!=y.editType&&"onoff"!=y.editType){var N;this._setHtml(c,"",!1),u?(s.onclick=null,N=this.setEditObject(g,v,b,s.rect)):(i.onclick=null,N=this.setEditObject(g,v,b,i.rect)),!1!==N?this.inputFocus=!0:m=!0}else u?""!==s.rect.style.display&&this._resetCell(s):""!==i.rect.style.display&&this._resetCell(i),f&&(this.inputFocus=!1);else{if(u){if(this._refreshCheckCell(s,s.checkBox,1!=S.disabled&&!0!==y.disabled,!1===m,l,y,g,y.editoptions.check==b),!0!==s.checkBox.hasbind("onClick")&&s.checkBox.bind("onClick",this._onCommonCheckBoxClick,!0),s.style.textAlign!==_&&(s.style.textAlign=_),"onoff"==y.editType){var O=s.checkBox.onoff._getControl();"center"==_?(O.style.marginLeft="",O.style.margin="auto"):"right"==_?(O.style.margin="",O.style.marginLeft="auto"):(O.style.margin="",O.style.marginLeft=""),s.checkBox.onoff.bind("onclick",s.checkBox,function(t,e){t.click()},!0)}}else if(this._refreshCheckCell(i,i.checkBox,1!=S.disabled&&!0!==y.disabled,!1===m,l,y,g,y.editoptions.check==b),!0!==i.checkBox.hasbind("onClick")&&i.checkBox.bind("onClick",this._onCommonCheckBoxClick,!0),i.style.textAlign!==_&&(i.style.textAlign=_),"onoff"==y.editType){O=i.checkBox.onoff._getControl();"center"==_?(O.style.marginLeft="",O.style.margin="auto"):"right"==_?(O.style.margin="",O.style.marginLeft="auto"):(O.style.margin="",O.style.marginLeft=""),i.checkBox.onoff.bind("onclick",i.checkBox,function(t,e){t.click()},!0)}f&&(this.inputFocus=!1)}if(u?this.refreshValidate(y,l,b,v,s):this.refreshValidate(y,l,b,v,i),"function"==typeof this.onCellDraw)try{u?this.onCellDraw(this.dataSet,g,s):this.onCellDraw(this.dataSet,g,i)}catch(t){this.logError("call onCellDraw Error:"+t.message+t.stack)}if(u?this.trigger("onCellDraw_"+g,[this.dataSet,g,s]):this.trigger("onCellDraw_"+g,[this.dataSet,g,i]),null!=y.alwaysText&&null!=b&&""!==b&&(v=y.alwaysText),this.hasbind("onFormat_"+g)&&(v=this.trigger("onFormat_"+g,[this.dataSet,g,v,b])),this.hasbind("onGetText_"+g)&&(v=this.trigger("onGetText_"+g,[this.dataSet,g,v,b])),1==y.showHint){var T=v;if("string"==typeof T&&(-1!=T.indexOf("<")&&(T=T.replace(/<(\/)?([a-zA-Z]+)( [^<>]+)?>/gi,"")),T=this._textToTag(T.trim())),null!=T&&""!==T){var L=T;if(u){var k=s.title;null!=k&&""!==k&&(L=L+"\n"+k),s.setAttribute("title",L)}else{var B=i.title;null!=B&&""!==B&&(L=L+"\n"+B),i.setAttribute("title",L)}}}if((!f||m||!this.focus||this.mulCellSelect)&&"checkBox"!=y.editType&&"radio"!=y.editType&&"onoff"!=y.editType)if("string"==typeof v&&(v=v.replace(/\n/,"<br>")),this.isNotEmpty(S.link)&&(v="<a href='"+S.link+"'>"+v+"</a>"),u?s.style.textAlign!==_&&(s.style.textAlign=_):i.style.textAlign!==_&&(i.style.textAlign=_),!0===y.link&&!0===m){if(null==c.al){c.al=this.createElement("span");var Y=this;c.al.onmouseup=function(){var t=Y.dataSet.getCurNode();Y.dataSet.beginUpdate(),Y.dataSet.select(this._node),this._node.option[g].linkClick=!0,!1!==Y.trigger("onLinkClick",[Y,this._fieldName,this._node])&&Y.dataSet.select(t),Y.dataSet.endUpdate(!1)}}!0===l.option[g].linkClick?this.setStyle(c.al,"link_visited"):this.setStyle(c.al,"link"),c.al.style.display="",c.al._node=l,c.al._fieldName=g,c.al.id=this.dataSet.getIndex(),this._setHtml(c,""),c.appendChild(c.al),this._setHtml(c.al,v)}else c.innerHTML!==v&&this._setHtml(c,v,!1)}!0===this.getOption().levelBorderOnly&&(-1==i.className.indexOf("gridEditFocusCell")&&-1==i.className.indexOf("gridNoFocusFocusCell")?(i.style.borderRightWidth="0px",null!=s&&(s.style.borderRightWidth="0px")):(i.style.borderRightWidth="",null!=s&&(s.style.borderRightWidth="")))},canEditing:function(t,e){var i=null;if("function"==typeof this.onCanEditing)try{i=this.onCanEditing(this,t,e)}catch(t){this.logError("[onCanEditing]ERR:"+t.message)}return this.hasbind("onCanEditing")&&(i=this.trigger("onCanEditing",[this,t,e])),this.isEmpty(i)&&(i=e),i},doButtonEdit:function(t,e,i){this.focus=!1;this.getColModel(t);if("function"==typeof this.onButtonEdit)try{this.onButtonEdit(this.editObject,t,e)}catch(t){this.logError("onButtonEdit error "+t.message)}this.hasbind("onButtonEdit")&&this.trigger("onButtonEdit",[this.editObject,t,e])},decodeTransName:function(t,e,i){if((null!=this.dataSet.getTransIDName(t.name,!1)||"number"!=t.dataType)&&i!==e){var s={};if(!0===t.multiSelect||!0===t.multiple){var n=[];"string"==typeof e?n=e.split(","):this.isArray(e)&&(n=e);var o=[];"string"==typeof i?o=i.split(","):this.isArray(i)&&(o=i);for(var h=0,l=n.length;h<l;h++)s[n[h]]=o[h]}else s[e]=i;this.dataSet.addTransIDName(t.name,s),s=null}},post:function(){if(this.inputFocus&&null!=this.editObject&&(!0===this.editObject._isChanged||null!=this.editObject.isChanged&&this.editObject.isChanged())){if(this.dataPost){if("function"==typeof this.editObject.setBlur){var t=this.mouseEdit;this.editObject.setBlur(),this.mouseEdit=t}if(null==this.editObject)return;this.editObject.focus=!1}var e,i,s=this.editObject.fieldName,n=this.getColModel(s);"function"==typeof this.editObject.getValue&&"string"==typeof(e=this.editObject.getValue())&&!0===n.escape&&(e=this._tagToText(e)),"function"==typeof this.editObject.getText&&"string"==typeof(i=this.editObject.getText())&&!0===n.escape&&(i=this._tagToText(i));var o=this.dataSet.getValue(s),h=this.dataSet.getCellOption(s);!0!==n.validateSumit&&null!=h.validateMessage&&(o=h.displayText);var l="";!1!==n.useTextField&&null!=n.textField&&""!==n.textField&&(l=this.dataSet.getValue(n.textField)),null!=n.transKey&&""!==n.transKey&&(l=this.dataSet.getValue(n.transKey));var a=this.dataSet.getCurNode();if(this.hasbind("onSetText_"+s)){var r=this.trigger("onSetText_"+s,[s,a,i]);null!=r&&(e=r)}this.dataPost=!0;var d=!0;if(o==e&&(null!=o&&""!==o||0!==e&&"0"!==e)&&(0!==o&&"0"!==o||null!=e&&""!==e))null!=this.editObject&&("function"==typeof this.editObject.mergeChangeLog&&this.editObject.mergeChangeLog(),this.editObject._isChanged=!1);else{if(this.isArray(e)&&(e=e.join(",")),"function"==typeof this.onEditing)try{0!=this.onEditing(n,o,e,h,a)?(!0===this.dataSet.setValue(s,e)?(!0===n.groups&&this._updateGroupValues(s,o,e),this.decodeTransName(n,e,i)):d=!1,null!=this.editObject&&"string"==typeof this.editObject.warnInfo&&(this.dataSet.getCellOption(s).title=this.editObject.warnInfo)):this.dataPost=!1}catch(t){this.logError("[onEditing]Error:"+t.message)}else if(this.hasbind("onEditing"))0!=this.trigger("onEditing",[n,o,e,h,a])?(!0===this.dataSet.setValue(s,e)?(!0===n.groups&&this._updateGroupValues(s,o,e),this.decodeTransName(n,e,i)):d=!1,null!=this.editObject&&"string"==typeof this.editObject.warnInfo&&(this.dataSet.getCellOption(s).title=this.editObject.warnInfo)):this.dataPost=!1;else{if(!0===this.dataSet.setValue(s,e))!0===n.groups&&this._updateGroupValues(s,o,e),this.decodeTransName(n,e,i);else{if(null!=n.validate&&""!==n.validate){var u=this.validateValue(a,n.name,e);!1===u.state&&(this.titleTip.setText(this._tagToText(u.message)),this.editObject&&this.titleTip.execute("right",this.editObject.getContainer().parentElement))}d=!1}null!=this.editObject&&"string"==typeof this.editObject.warnInfo&&(this.dataSet.getCellOption(s).title=this.editObject.warnInfo)}if(this.dataPost&&(null!=this.editObject&&("function"==typeof this.editObject.mergeChangeLog&&this.editObject.mergeChangeLog(),this.editObject._isChanged=!1),d)){if(!1!==n.useTextField&&null!=n.textField&&""!==n.textField&&(this.setValue(n.textField,i),!0===n.groups&&null!=l&&""!==l&&this._updateGroupValues(n.textField,l,i)),null!=n.transKey&&""!==n.transKey&&(this.setValue(n.transKey,i),!0===n.groups&&null!=l&&""!==l&&this._updateGroupValues(n.transKey,l,i)),"function"==typeof this.onAfterEdit)try{this.onAfterEdit(this.dataSet.getDataType(s),s,e,i,n,a,o)}catch(t){this.logError("[onAfterEdit]Error:"+t.message)}this.trigger("onAfterEdit",[this.dataSet.getDataType(s),s,e,i,n,a,o]),this.trigger("afterEditCell",[this.getPKeyName(),s,e]),this.trigger("onChanged",[this])}}null!=this.editObject&&this.dataPost?("function"==typeof this.editObject.setBlur&&this.editObject.setBlur(),this.editObject.focus=!1,"function"==typeof this.editObject.mergeChangeLog&&this.editObject.mergeChangeLog(),this.editObject._isChanged=!1):(this.focus=!0,null!=this.editObject&&("function"==typeof this.editObject.mergeChangeLog&&this.editObject.mergeChangeLog(),this.editObject._isChanged=!1)),h=null,n=null}},setEditObject:function(t,e,i,s,n,o){if(this.focus){var h=this.getColModel(t);(h=this.extend({},h)).viewModel=this.getOption().viewModel,h.popModel=this.getOption().popModel,1==h.popModel&&(h.popContainer=this.getPopContainer());var l=this.editObjects[t],a=this.dataSet.getDataType(t);h.hint=!0===h.hint||("string"==a||"number"==a)&&!1!==h.hint;var r=this.dataType[a];this.isNotEmpty(h.editType)&&(r=h.editType),null!=this._editTypes[t]&&(r=this._editTypes[t]);var d="",u=!1;this.dataPost=!0;var c=null;if("function"==typeof this.onBeforeEdit)try{c=this.onBeforeEdit(a,t,i,e,h,this.dataSet.getCurNode())}catch(t){this.logError("[onBeforeEdit]Error:"+t.message)}this.hasbind("onBeforeEdit")&&(c=this.trigger("onBeforeEdit",[a,t,i,e,h,this.dataSet.getCurNode()]));var g=!1;if(this.isNotEmpty(c)){for(var p in c)h[p]=c[p];if(this.isNotEmpty(c.editType)&&(r=c.editType,d=this.editType[r],u=r!=this._editTypes[t],null==d&&this._loadEditObject(r),g=!0),this.isNotEmpty(c.value)&&(i=c.value),this.isNotEmpty(c.text)&&(e=c.text),!this.getBooleanValue(c.returnValue,!0))return!1}var f=!1,y=!0;if(this.isEmpty(d)&&("string"==typeof r&&!0!==h.outerInput?d=this.editType[r]:(d=r,"string"==typeof r&&(d=this.editType[r]),!1!==g&&(null!=l&&l.isComponent&&l.destroy,l=null),!0===h.outerInput&&(f=!0)),this._editTypes[t]=r,u=f,!0===this._resizeState&&null!=l&&null!=l.getPopState&&!0===l.getPopState()&&(u=!1,y=!1)),this.isEmpty(l)||u||null!=c&&null!=c.data){if(this.isEmpty(l)||u){null!=l&&!0===l.focus&&(l.focus=!1),h.cssPrefix=this._cssPrefix;var m=this.getCurrentStyle(s),C=this.getNumberValue(m.fontSize,12);if(null!=h.fontSize&&""!==h.fontSize||null==C||(h.fontSize=C),!0===this.getOption().post){var S=this;h.onChanged=function(){S.post(),S.refresh()}}!0===f&&(null==h.idField&&(h.idField=h.idkey),null==h.textField&&(h.textField=h.capkey));var x=null;if(null!=d&&"function"==typeof d.createInstance){var _=s.parentNode;this._setHtml(_,"");var b=this.createElement("div");_.appendChild(b),_.appendChild(s),x=_,l=d.createInstance(b,h),this.hasSelect=!0,this._createEditObject=!0,y=!1}else{if(null==d)return;var v=null;if(!0===f){_=s.parentNode;this._setHtml(_,""),v=this.createElement("div"),_.appendChild(v),_.appendChild(s),x=_,this.hasSelect=!0,this._createEditObject=!0,y=!1,null!=window.$&&!0!==this.getOption().inVue&&(v=window.$(v))}l=new d(v,h)}l._twoRefresh=!1,this._editTypes[t]=r,null==l.getParentElement&&(l.getParentElement=function(){return x})}this.editObjects[t]=l}if("number"==r){l.setSize(h.length);var w=h.precision||h.dataScale||h.scale;this.isNotEmpty(h.numUnit)&&l.setNumUnit(h.numUnit),w<0&&(w=0),l.setDataScale(w),null!=h.minValue&&""!==h.minValue&&l.setMinValue(h.minValue),null!=h.maxValue&&""!==h.maxValue&&l.setMaxValue(h.maxValue)}else if("date"==r){this.isNotEmpty(h)&&("M"==h.showType&&l.setCycType("month"),null!=h.cyctype&&l.setCycType(h.cyctype)),(S=this)._justHide=!1,l.onDrop=function(t){S.focus=!1,l.mouseEdit=S.mouseEdit},l.onHide=function(t){S.focus=!0,S.mouseEdit=l.mouseEdit}}else if("buttonEdit"==r){l.getOption().dataType=a;S=this;l.onButtonClick=function(){S.focus&&S.doButtonEdit(t,a,l.getValue())};var N=S.dataSet.getTransIDName(t,!1);this.isNotEmpty(c)&&this.isNotEmpty(c.data)&&(N=c.data),null!=h.bottonStyle&&l.setBottonStyle(h.bottonStyle),this.isNotEmpty(N)&&l.setTransIDName(N),N=null}else if("comboBox"==r||"comboTree"==r){N=this.dataSet.getTransIDName(t,!1);if(this.isNotEmpty(c)&&this.isNotEmpty(c.data)&&(N=c.data),null!=c&&null!=c.data||null==h.data||(N=h.data),"comboBox"==r&&null!=N){var O=[];if(this.isArray(N))O=N;else{var T=0;for(var p in N){var L=N[p];"object"==(void 0===L?"undefined":_typeof(L))&&(L=L.name),this.isNotEmpty(p)&&(O[T++]={id:p,text:L||""})}}l.setItemList(O)}null!=h.multiSelect&&null!=l.setMultiSelect&&l.setMultiSelect(!0===h.multiSelect),l.keySelect=!1,null!=h&&(null!=h.search&&""!==h.search&&l.setSearch(h.search),null!=h.more&&""!==h.more&&l.setMore(h.more));S=this;l.onDrop=function(t){S.focus=!1,l.mouseEdit=S.mouseEdit},l.onHide=function(t,e){S.focus=!0,S.mouseEdit=l.mouseEdit},l.onSelect=function(e,i){S.hasbind("onComboBoxSelect")&&S.trigger("onComboBoxSelect",[l,t,e,i])},l.bind("onMoreClick",function(){S.hasbind("onMoreClick")&&S.trigger("onMoreClick",[l,this.fieldName]),this.popListView.hide()},!0),l.bind("onFilter",function(t,e){var i=!0;return S.hasbind("onComboBoxFilter")&&(i=S.trigger("onComboBoxFilter",[l,this.fieldName,t,e])),!0===i},!0)}else"text"==r?null!=h.length&&h.length>0&&"function"==typeof l.setSize&&l.setSize(h.length):"updown"==r&&(l.option.wheel=!1,null!=h.minValue&&""!==h.minValue&&l.setMinValue(h.minValue),null!=h.maxValue&&""!==h.maxValue&&l.setMaxValue(h.maxValue));l.dg=this,l.metaItem=h;var k=this.getBooleanValue(h.multiSelect,!1);if((k=this.getBooleanValue(h.multiple,k))&&"function"==typeof l.setMultiSelect&&l.setMultiSelect(k),"function"==typeof l.setBorder&&l.setBorder(0),"function"==typeof l.setDisInput&&(!0===h.disInput&&(l.setDisInput(!0),l._readOnly=!0),this.isNotEmpty(c)&&(!0===c.readOnly?(l.setDisInput(!0),l._readOnly=!0):(l.setDisInput(!1),l._readOnly=!1))),"function"==typeof l.setReadOnly&&this.isNotEmpty(c)&&(!0===c.readOnly?(l.setReadOnly(!0),l._readOnly=!0):!1===c.readOnly&&(l.setReadOnly(!1),l._readOnly=!1)),"function"==typeof l.setCanClear)if(!0===this.getOption().canClear&&!1!==h.canClear?l.setCanClear(!0):l.setCanClear(!1),!0!==this.getOption().post){S=this;l.onClearValue=function(){S.post()}}if(this.editObject=l,l.fieldName=t,l.notnull=this.getBooleanValue(h.notnull,!1),"function"==typeof l.beginUpdate&&l.beginUpdate(),!0===h.hint&&"function"==typeof l.setHintData)if(this.hasbind("onHintShow_"+t)){var B=this.trigger("onHintShow_"+t,[t]);l.setHintData(B)}else if(this.hasbind("onHintShow")){B=this.trigger("onHintShow",[t]);l.setHintData(B)}else this.dataSet.collectFilter(t,function(){var e=this.filterList[t],i=[];for(var s in e){var n=s;"number"==a&&(n=parseFloat(n,10)),i.push({id:n,text:e[s]})}l.setHintData(i),i=null,e=null});if("function"==typeof l.setValue){!1!==h.useTextField&&"string"==typeof h.textField&&""!==h.textField&&(e=this.dataSet.getValue(h.textField),e=this._textToTag(e)),"string"==typeof h.transKey&&""!==h.transKey&&(e=this.dataSet.getValue(h.transKey),e=this._textToTag(e)),!0===f&&(e=this._textToTag(e));var Y={},D="id",I="text";null!=h.idkey&&(D=h.idkey),null!=h.capkey&&(I=h.capkey),Y[D]=i,Y[I]=e,l.setValue(Y)}if(isNaN(n)){var R=this._getNumberValue(s.style.width);!0===f&&(R-=2),R>0&&"function"==typeof l.setWidth&&l.setWidth(R+5)}else!0===f&&(R-=2),"function"==typeof l.setWidth&&l.setWidth(n-1);if(isNaN(o)){var Z=this._getNumberValue(s.style.height);(Z-=3)>0&&"function"==typeof l.setHeight&&l.setHeight(Z)}else!0===f&&(Z-=3),"function"==typeof l.setHeight&&l.setHeight(o);if(s.style.display="none",y&&"function"==typeof l.setParent){_=s.parentNode;this._setHtml(_,""),l.setParent(_),_.appendChild(s)}return l.onEditClick=function(t){this.dg.mouseEdit=!0},"function"==typeof l.setSelectState&&l.setSelectState(!1),null!=c&&!0===c.isChanged||("function"==typeof l.mergeChangeLog?l.mergeChangeLog():this.editObject._isChanged=!0),"function"==typeof l.setComAlign&&l.setComAlign("right"),"function"==typeof l.endUpdate&&l.endUpdate(),!0!==this._hasScroll&&("function"==typeof l.setFocus&&l.setFocus(),l.focus=!0),this.trigger("onAfterEditRender",[h,this.dataSet.getCurNode(),l]),h=null,l}},_moveRight:function(t,e){this.scrollToFocus();for(var i=0,s=this.colIndex-this._colIndexDeff(),n=this.getOption().colModels,o=n.length;s<o&&n[s].hidden;)i++,s++;n=null;var h=this.colCount-1;if(this.colIndex+i<h||t.shiftKey)t.shiftKey&&e==this.keyBoard.RIGHT?(this.colIndex>this.selRect.beginColIndex?this.selRect.beginColIndex+=i+1:this.selRect.endColIndex<h&&(this.selRect.endColIndex+=i+1),this.refresh(null,!0)):(this.post(),this.dataPost?(this.colIndex+=i+1,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh(null,!0),this.showFocusCell(this.curCell)):this.inputFocus&&!0!==this._hasScroll&&("function"==typeof this.editObject.setFocus&&this.editObject.setFocus(),this.editObject.focus=!0,this.mouseEdit=!1));else if(this.colIndex+i==h)if(this.post(),this.dataPost){this.dataSet.getRecNo();this.next();var l=this.dataSet.isEof();this.refresh(),l||(this.listDiv.scrollLeft=0,this.colIndex=1+this._colIndexDeff(),this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh())}else this.inputFocus&&!0!==this._hasScroll&&("function"==typeof this.editObject.setFocus&&this.editObject.setFocus(),this.editObject.focus=!0);return!1},_moveLeft:function(t,e){this.scrollToFocus();for(var i=0,s=this.colIndex-i-2-this._colIndexDeff(),n=this.getOption().colModels;s>=0&&n[s].hidden;)i++,s=this.colIndex-i-2-this._colIndexDeff();if(n=null,this.colIndex>1+i+this._colIndexDeff()||t.shiftKey&&e==this.keyBoard.LEFT)t.shiftKey&&e==this.keyBoard.LEFT?(this.colIndex<this.selRect.endColIndex?this.selRect.endColIndex-=i+1:this.selRect.beginColIndex>1&&(this.selRect.beginColIndex-=i+1),this.refresh(null,!0)):(this.post(),this.dataPost?(this.colIndex-=i+1,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh(null,!0),this.showFocusCell(this.curCell)):this.inputFocus&&!0!==this._hasScroll&&("function"==typeof this.editObject.setFocus&&this.editObject.setFocus(),this.editObject.focus=!0));else if(this.colIndex+i==1+this._colIndexDeff())if(this.post(),this.dataPost){var o=this.dataSet.getRecNo();this.dataSet.prior();var h=this.dataSet.isBof();this.topNode.recNo==o?this.scrollBar.scrollPrior():this.refresh(),h||(this.listDiv.scrollLeft=this.listDiv.scrollWidth,this.colIndex=this.colCount-1,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.refresh(null,!0))}else this.inputFocus&&!0!==this._hasScroll&&("function"==typeof this.editObject.setFocus&&this.editObject.setFocus(),this.editObject.focus=!0);return!1},doKeyDown:function(t,e){if(this.dataSet.getRecordCount()<=0)return!1;if(!0===this.inputFocus&&null!=this.editObject&&!0===this.editObject.getPopState())return!0;if(this.keyBoard.HOME==e)return!!this.mouseEdit||(this.first(),this.refresh(),!0);if(this.keyBoard.END==e)return!!this.mouseEdit||(this.last(),this.refresh(),this.scrollBar.scrollNext(),!0);if(this.keyBoard.ESC==e)null!=this.editObject&&(this.dataPost?"function"==typeof this.editObject.refresh&&this.editObject.refresh():"function"==typeof this.editObject.setValue&&(this.editObject.setValue(this.dataSet.getDisplay(this.getFieldName())),this.dataPost=!0));else{if(t.shiftKey&&this.keyBoard.TAB==e)return this._moveLeft(t,e),!0;if(t.ctrlKey||this.priorKey===this.keyBoard.CTRL)return this.doPaste=!1,e==this.keyBoard.C?(this.hasCopy=!0,!0):e==this.keyBoard.V?(this.mulCellSelect||!this.inputFocus?this.copyInput.focus():this.inputFocus&&this.editObject._readOnly&&this.copyInput.focus(),this.pasteKeyPress=!0,this.doPaste=!0,!0):(e==this.keyBoard.A&&(this.colIndex=1,this.selRect.beginColIndex=1,this.selRect.endColIndex=this.colCount-1,this.dataSet.beginUpdate(),this.dataSet.last(),this.selRect.endRowNode=this.dataSet.getCurNode(),this.dataSet.first(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.dataSet.endUpdate(!1),this.focus||this.setFocus(),this.refresh()),this.priorKey===this.keyBoard.CTRL);if(e==this.keyBoard.DOWN){if(this.mouseEdit)return!0;if(this.dataSet.getLevel()<0)return this.first(),this.mouseEdit=!1,!1;if(t.shiftKey){var i=this.dataSet.getIndex(),s=this.dataSet.getCurNode();this.dataSet.beginUpdate(),this.dataSet.next(),i>this.selRect.beginRowNode.getIndex()?(this.dataSet.select(this.selRect.beginRowNode),this.dataSet.next(),this.selRect.beginRowNode=this.dataSet.getCurNode()):(this.dataSet.select(this.selRect.endRowNode),this.dataSet.next(),this.selRect.endRowNode=this.dataSet.getCurNode()),this.dataSet.select(s),this.dataSet.endUpdate(!1),s=null,this.refresh(null,!0)}else if(this.post(),this.dataPost){this.dataSet.beginUpdate();s=this.dataSet.getCurNode();this.dataSet.next(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.dataSet.select(s),this.dataSet.endUpdate(!1),s=null,this.next()}else this.inputFocus&&!0!==this._hasScroll&&("function"==typeof this.editObject.setFocus&&this.editObject.setFocus(),this.editObject.focus=!0);return this.mouseEdit=!1,!1}if(e==this.keyBoard.UP){if(this.mouseEdit)return!0;if(this.dataSet.getLevel()<0)return!1;if(t.shiftKey){this.dataSet.beginUpdate();i=this.dataSet.getIndex(),s=this.dataSet.getCurNode();i<this.selRect.endRowNode.getIndex()?(this.dataSet.select(this.selRect.endRowNode),this.dataSet.prior(),this.selRect.endRowNode=this.dataSet.getCurNode()):(this.dataSet.select(this.selRect.beginRowNode),this.dataSet.prior(),this.selRect.beginRowNode=this.dataSet.getCurNode()),this.dataSet.select(s),this.dataSet.endUpdate(!1),this.refresh()}else if(this.post(),this.dataPost){this.dataSet.beginUpdate();s=this.dataSet.getCurNode();this.dataSet.prior(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.colIndex,this.dataSet.select(s),s=null,this.dataSet.endUpdate(!1),this.prior()}else this.inputFocus&&!0!==this._hasScroll&&("function"==typeof this.editObject.setFocus&&this.editObject.setFocus(),this.editObject.focus=!0);return this.mouseEdit=!1,!1}if(e==this.keyBoard.RIGHT||e==this.keyBoard.TAB)return!(!this.mouseEdit||e!=this.keyBoard.RIGHT)||!(this.dataSet.getLevel()<0)&&(e==this.keyBoard.TAB&&(this.mouseEdit=!1),this._moveRight(t,e),!1);if(e==this.keyBoard.LEFT)return!!this.mouseEdit||!(this.dataSet.getLevel()<0)&&(this._moveLeft(t,e),!1);e==this.keyBoard.F2?null!=this.editObject&&"ComboBox"!==this.editObject.className&&"BottonEdit"!==this.editObject.className&&(this.mouseEdit=!this.mouseEdit):t.shiftKey?this.shiftKeyDown=!0:this.mouseEdit=!0}},doKeyUp:function(t,e){if(this.overKey)return this.overKey=!1,!1;if(!0===this.inputFocus&&null!=this.editObject&&!0===this.editObject.getPopState())return!0;var i;if(t.ctrlKey||this.hasCopy||this.doPaste)if(e==this.keyBoard.V&&!1!==this.getOption().canPaste)this.mulCellSelect||!this.inputFocus||this.inputFocus&&this.editObject._readOnly?(i=this.copyInput.value||this.copyInput.tmpValue,this.copyInput.tmpValue=null):(null!=this.editObject&&"function"==typeof this.editObject.getInputValue&&(i=this.editObject.getInputValue()||this.editObject.tmpValue,"function"==typeof this.editObject.refresh&&this.editObject.refresh(),this.editObject.tmpValue=null),this.post()),this.isEmpty(i)&&(i=""),this.doPasteData(i),t.returnValue=!1,this.doPaste=!1;else if(e==this.keyBoard.C)this.clearMark=null,this.post(),this.refresh();else if(e==this.keyBoard.X){if(this.clearMark=this.doClearData(),this.inputFocus&&this.selRect.beginColIndex==this.selRect.endColIndex&&this.selRect.beginRowNode.recNo==this.selRect.endRowNode.recNo&&"function"==typeof this.editObject.setValue){var s={},n="id",o="text";"function"==typeof this.editObject.getOption&&null!=this.editObject.getOption().idkey&&(n=this.editObject.getOption().idkey),"function"==typeof this.editObject.getOption&&null!=this.editObject.getOption().capkey&&(o=this.editObject.getOption().capkey),s[n]="",s[o]="",this.editObject.setValue(s)}this.refresh()}else if(e==this.keyBoard.Z)this.isNotEmpty(this.clearMark)&&(this.selRect.beginColIndex=this.clearMark.selRect.beginColIndex,this.selRect.endColIndex=this.clearMark.selRect.endColIndex,this.selRect.beginRowNode=this.clearMark.selRect.beginRowNode,this.selRect.endRowNode=this.clearMark.selRect.endRowNode,this.dataSet.select(this.selRect.beginRowNode),this.colIndex=this.selRect.beginColIndex,this.doPasteData(this.clearMark.text));else{if(e==this.keyBoard.PgUp){for(var h=0;h<this.rowCount-1;h++)this.scrollBar.scrollPrior();return!0}if(e==this.keyBoard.PgDn){for(h=0;h<this.rowCount-1;h++)this.scrollBar.scrollNext();return!0}}else if(e==this.keyBoard.DEL)this.mulCellSelect&&(this.clearMark=this.doClearData(),this.refresh());else if(e==this.keyBoard.ENTER){if(this.dataSet.getLevel()<0)return!1;if(this.mouseEdit=!1,this.post(),this.getOption().EnterDown){if(this.dataPost)if(t.shiftKey){var l=this.dataSet.getRecNo();this.dataSet.prior();var a=this.dataSet.isBof();this.topNode.recNo==l?this.scrollBar.scrollPrior():this.refresh(),a&&this.colIndex>1&&(this.colIndex=this.colIndex-1,this.last(),this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.selRect.beginColIndex,this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode,this.scrollBar.scrollNext())}else{l=this.dataSet.getRecNo();this.dataSet.next(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.selRect.endRowNode=this.selRect.beginRowNode;var r=this.dataSet.isEof();r||this.bottomNode.recNo!=l?this.refresh():this.scrollBar.scrollNext(),r&&this.colIndex<this.colCount-1&&(this.colIndex=this.colIndex+1,this.first(),this.selRect.beginColIndex=this.colIndex,this.selRect.endColIndex=this.selRect.beginColIndex)}else this.inputFocus&&!0!==this._hasScroll&&("function"==typeof this.editObject.setFocus&&this.editObject.setFocus(),this.editObject.focus=!0);return!1}t.shiftKey?this._moveLeft(t,e):this._moveRight(t,e),this.setFocus()}else t.shiftKey||(this.shiftKeyDown=!1);this.pasteKeyPress=!1,this.priorKey=e},getReadOnly:function(){var t=this.getOption().cellEdit;return this.isEmpty(t)?t=!0:"string"==typeof t&&(t=this.getBooleanValue(t,!0)),t=!t},setReadOnly:function(t){t=!0===t;this.getOption().cellEdit=!t,this.refresh()},setRowReadOnly:function(t,e){t=!0===t;this.dataSet.setReadOnly(t,e)},getCellReadOnly:function(t,e){var i=this.getReadOnly(),s=null;this.isNotEmpty(e)&&(s=this.dataSet.getCurNode());e=e||this.dataSet.getCurNode();if(this.dataSet.select(e),this.dataSet.getReadOnly(e)&&(i=!0),!i){var n=!0;null!=(o=this.dataSet.getFieldOption(t))&&(n=o.editable,this.isEmpty(n)&&(n=!0)),i=!this.getBooleanValue(n,!0)}if(!i){var o;n=!0;null!=(o=this.getColModel(t))&&(n=o.editable,this.isEmpty(n)&&(n=!0)),i=!this.getBooleanValue(n,!0)}if(!i)try{i=!this.canEditing(t,!i)}catch(t){this.logError("[canEditing]ERROR:"+t.message+t.stack)}return this.isNotEmpty(e)&&null!=s&&this.dataSet.select(s),s=null,i},doCellMouseDown:function(t,e){this.base(t,e),this.focus||this.setFocus()},doMouseDown:function(t){this.base(t),this.scrollMouseDown=!0},doMouseUp:function(t){this.base(t),this.getMouseButton(t)==this.mouseType.mtRight&&this.hasSelect||null!=this.copyInput&&(this.mulCellSelect=!1,this.dataSet.getRecordCount()>0&&(this.mulCellSelect=this.selRect.beginColIndex<this.selRect.endColIndex||this.selRect.beginRowNode.getIndex()<this.selRect.endRowNode.getIndex()),this.mulCellSelect&&(this.copyInput.select(),this.copyInput.focus()))},_setEditObjectWidth:function(t){if(this.inputFocus){var e=t,i=0,s=this.getFieldName(this.colIndex);(null==this.getOption().treeKey&&1==this.colIndex||this.getOption().treeKey==s)&&0!=this.option.treeGrid&&null!=this.selRow&&(i=this._getNumberValue(this.selRow.cells[1].levelTd.style.width,0)+20),(e=e-10-i)<=0&&(e=1),"function"==typeof this.editObject.setWidth&&this.editObject.setWidth(e)}},_refreshCellDivWidth:function(t,e){t===this._colOrder["@INDEX"]&&e<55||(this.colIndex==t&&this._setEditObjectWidth(e),this.base(t,e))},setClipboard:function(t){if(navigator.userAgent.indexOf("MSIE")>0==1)return window.clipboardData.setData("text",t),!0;if(navigator.userAgent.indexOf("Firefox")>0==1){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(t){return void this.logError(this.getI18n("qzz.copyMsg","因当前浏览器的剪贴板无法控制，请在IE上使用该功能。"))}var e=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!e)return void(e=null);var i=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!i)return i=null,void(e=null);i.addDataFlavor("text/unicode");var s=new Object,n=(new Object,t);(s=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString)).data=n,i.setTransferData("text/unicode",s,2*n.length);var o=Components.interfaces.nsIClipboard;if(!o)return i=null,e=null,void(o=null);e.setData(i,null,o.kGlobalClipboard),i=null,e=null,o=null,s=null,null,s=null,n=null}},doClearData:function(){if(this.mulCellSelect){var t=this.dataSet.getCurNode();this.dataSet.beginUpdate(),this.beginUpdate(),this.dataSet.select(this.selRect.beginRowNode);for(var e=[],i=(this.option.colModels,0);!this.dataSet.isEof()&&this.dataSet.getIndex()<=this.selRect.endRowNode.getIndex();){for(var s=[],n=this.selRect.beginColIndex-1,o=0;n<=this.selRect.endColIndex-1;n++){var h=(d=this._getColModel(n+1)).name;if(!d.hidden){var l=this.dataSet.getDisplay(h);if(s[o++]=""===l?" ":l,!this.getCellReadOnly(h)&&!0!==d.notnull&&"true"!==d.notnull){this.dataSet.setValue(h,"");var a=this.dataSet.getCurNode();if(this.dataPost&&"function"==typeof this.onAfterEdit)try{var r=this.dataSet.getDataType(h),d=this.getColModel(h);this.onAfterEdit(r,h,"","",d,a)}catch(t){this.logError("[onAfterEdit] error:"+t.message+t.stack)}if(this.hasbind("onAfterEdit")){r=this.dataSet.getDataType(h),d=this.getColModel(h);this.trigger("onAfterEdit",[r,h,"","",d,a])}this.hasbind("afterEditCell")&&this.trigger("afterEditCell",[this.getPKeyName(),h,""]),this.dataSet.getIndex()!==a.getIndex()&&this.dataSet.select(a),this.trigger("onChanged",[this])}}}e[i++]=s.join("\t"),this.dataSet.next()}return this.dataSet.select(t),this.dataSet.endUpdate(!1),this.endUpdate(),this.trigger("afterClearData",[this]),{text:e.join("\n"),beginColIndex:this.selRect.beginColIndex,endColIndex:this.selRect.endColIndex,beginRowNode:this.selRect.beginRowNode,endRowNode:this.selRect.endRowNode}}if(null!=this.editObject&&"function"==typeof this.editObject.setValue){var u={},c="id",g="text";"function"==typeof this.editObject.getOption&&null!=this.editObject.getOption().idkey&&(c=this.editObject.getOption().idkey),"function"==typeof this.editObject.getOption&&null!=this.editObject.getOption().capkey&&(g=this.editObject.getOption().capkey),u[c]="",u[g]="",this.editObject.setValue(u),this.post()}else this.setValue(this.getFieldName(),"")},doPasteData:function(t){var e=0;"\n"==t.charAt(t.length-1)&&(e=1);var i=(t=(t=t.replace(/""/g,"&quot;")).replace(/"([^"]+)"/gi,function(t,e){return'"'+e.replace(/\n/g,"<br/>")+'"'})).split("\n");this.dataSet.beginUpdate();var s=this.dataSet.getCurNode(),n=i.length;if(this.hasbind("beforePasteData")){for(var o=0,h=[],l=[],a=this.selRect.beginColIndex,r=0;r<n-e&&!this.dataSet.isEof();r++){var d=i[r].split("\t");if(l[r]=d,0==r)for(var u=d[r].length,c=0;c<u&&c+a+o<this.colCount;c++){(N=this._getColModel(c+a+o)).hidden?(o++,c--):h.push(N)}}this.trigger("beforePasteData",[h,i])}this.dataSet.select(s);var g=[],p=[],f=!1;if(!0!==this._isdbclick&&(n>1||-1!==i[0].indexOf("\t"))){f=!0;for(r=0;r<n-e&&!this.dataSet.isEof();r++){i[r]=i[r].split("\t");u=i[r].length;var y=0,m={};m._node=this.dataSet.getCurNode();var C={};C._node=m._node;for(c=0;c<u&&c+this.selRect.beginColIndex+y<this.colCount;c++){var S=(N=this._getColModel(c+this.selRect.beginColIndex+y)).name,x=i[r][c];if(null!=x&&""!==x&&"string"==typeof x&&(x=x.replace(/&quot;/g,'"').replace(/<br\/>/g,"\n")),N.hidden)y++,c--;else if(!this.getCellReadOnly(S)&&!0!==N.disPaste){m[S]=this.dataSet.getValue(S);var _=this.dataSet.getCurNode();if(this.hasbind("onSetText")){var b=this.trigger("onSetText",[x]);this.dataSet.setValue(S,b)}else this.dataSet.setDisplay(S,x,_);var v=this.dataSet.getValue(S);if(C[S]=v,this.dataPost&&"function"==typeof this.onAfterEdit)try{var w=this.dataSet.getDataType(S),N=this.getColModel(S);this.onAfterEdit(w,S,v,x,N,_)}catch(t){this.logError("[onAfterEdit] error:"+t.message+t.stack)}if(this.hasbind("onAfterEdit")){w=this.dataSet.getDataType(S),N=this.getColModel(S);this.trigger("onAfterEdit",[w,S,v,x,N,_])}this.hasbind("afterEditCell")&&this.trigger("afterEditCell",[this.getPKeyName(),S,v]),this.dataSet.getIndex()!==_.getIndex()&&this.dataSet.select(_)}}g.push(m),p.push(C),this.selRect.endRowNode=this.dataSet.getCurNode(),this.selRect.endColIndex!=u+this.selRect.beginColIndex-1+y&&(this.selRect.endColIndex=u+this.selRect.beginColIndex-1+y,this.selRect.endColIndex>this.colCount-1&&(this.selRect.endColIndex=this.colCount-1)),this.dataSet.next()}}else null!=this.editObject&&null!=this.editObject.inputBox&&(null!=this.editObject.option&&!0===this.editObject.option.disPaste||(t=t.replace(/<br(\/)>/gi,"\n"),this.editObject.inputBox.value=t,this.editObject._isChanged=!0,this.editObject.setFocus()));this.dataSet.select(s),this.trigger("afterPasteData",[this,g,p]),this.dataSet.endUpdate(!1),f&&(this.trigger("onChanged",[this]),this.refresh())},setEditType:function(t,e){this.getColModel(t).editType=e},deleteAll:function(){this.dataSet.empty(!0),this.dataSet.first(),this.refresh()}}),_bindRenderFunc("qzzgrid",t.ui.grid),t.ui.grid}),
/*!
 * 列表视图控件.
 * ecp.qzz.ui.gridview.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.frame","qzz.treedataset","qzz.icheckbox"],function(){var t=window.qzz;return t.space("ui"),t.ui.gridview=t.Class(t.ui.frame,{_create:function(){this.base(),this.className="GridView",this.logInfo("gridview.create"),this.dataSet=new t.treedataset,this.rowIndex=0,this.showCount=this._getNumberValue(this.getOption().showCount,6),this.topNode=null,this.topIndex=0,this.bottomNode=null,this._rowHeight=this._getNumberValue(this.getOption().rowHeight,17),this.scrollHeight=16,this.getOption().height=this._getNumberValue(this.getOption().height,this._rowHeight*this.showCount+this.scrollHeight),this.rendered=!1,this.autoHeight=!1;var e,i=this.getOption().data;if(this.treePidData=this.getBooleanValue(this.getOption().treePidData,!1),null==this.getOption().pidkey&&null==this.getOption().parentKeyId||(this.treePidData=!0),this.dataSet.getOption().fullPath=this.getOption().fullPath,this.treePidData)this.dataSet.setIDPID(this.getOption().treeId||this.getOption().idkey,this.getOption().parentKeyId||this.getOption().pidkey),this.dataSet.initSort=!1;else{var s=this.getOption().treeId;null==s&&(s="bm"),this.dataSet.setItemCode(s)}if(this.isNotEmpty(i)){var n=this;this.dataSet.setItemList(i,function(){n.setLeafOnly(!0===n.getOption().leafOnly)}),this.dataSet.first(),this.topNode=this.dataSet.getCurNode()}(i=null,this.isNotEmpty(this.getOption().checkFlag))&&((e=this.getOption().checkFlag).indexOf("p")>=0&&(this.dataSet.autoCheckType.autoCheckAllParent=!0),e.indexOf("s")>=0&&(this.dataSet.autoCheckType.autoCheckAllChild=!0),e.indexOf("b")>=0&&(this.dataSet.autoCheckType.autoCheckBrother=!0),e.indexOf("e")>=0&&(this.dataSet.autoCheckType.autoCheckAllParentExt=!0));this.isNotEmpty(this.getOption().unCheckFlag)&&((e=this.getOption().unCheckFlag).indexOf("p")>=0&&(this.dataSet.autoCheckType.autoUnCheckAllParent=!0),e.indexOf("s")>=0&&(this.dataSet.autoCheckType.autoUnCheckAllChild=!0),e.indexOf("b")>=0&&(this.dataSet.autoCheckType.autoUnCheckBrother=!0),e.indexOf("e")>=0&&(this.dataSet.autoCheckType.autoUnCheckAllParentExt=!0));this.multiSelect=this.getBooleanValue(this.getOption().multiselect,this.getOption().multiSelect),this.isEmpty(this.multiSelect)&&(this.multiSelect=!1),this.dataSet.multiSelect=this.multiSelect,this.dataSet.isTree=this.getBooleanValue(this.getOption().isTree,!0),this.getOption().itemCode=this.getOption().itemCode||"bm",this.dataSet.itemCode=this.getOption().itemCode,this.dataSet.getOption().itemCode=this.getOption().itemCode,this.groupFieldName="_groupitem",this.hasSelectState=!1},abcLocate:function(t){var e=this.getOption().capkey,i=0,s=this,n=this.dataSet.getCurNode();"☆"==t?(i=1,s.dataSet.beginUpdate(),s.scrollToIndex(i),s.dataSet.select(n),s.dataSet.endUpdate(!1),s.refresh()):this.dataSet.each(function(s){var n=this.getValue(e,s);if(null!=n&&0==(n+"").toUpperCase().indexOf(t))return i=this.getIndex(),!1},function(){i>0&&(s.dataSet.beginUpdate(),s.scrollToIndex(i),s.dataSet.select(n),s.dataSet.endUpdate(!1),s.refresh())})},_render:function(){this.base(),this.logInfo("gridview.render"),this.infoDiv=this.createElement("div"),this.setStyle(this.infoDiv,"abc_Info"),this.infoDiv.style.display="none",this.thisWindow.appendChild(this.infoDiv),this.listTab=this.createElement("table"),this.setStyle(this.listTab,"component_ui_listview_list_table"),this.listTab.style.width="100%",this.listTab._this=this,this.listDiv.appendChild(this.listTab),this.listDiv.style.paddingRight="16px",this.isSelect=!0,this.maxWidth=0;var t=["☆","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];this.abcTab=this.createElement("table"),this.abcTab.onselectstart=this._onselectstart;var e=this.getHeight()-16;e=parseInt(e/27,10);for(var i=this,s=0;s<27;s++){var n=this.abcTab.insertRow(s).insertCell(0);n.style.lineHeight=e+"px",n.onmousedown=function(){i.mouseDown=!0,i.abcLocate(this.innerHTML),i._setHtml(i.infoDiv,this.innerHTML),setTimeout(function(){if(!0===i.mouseDown){i.infoDiv.style.display="";var t=(i.getWidth()-45)/2;i.infoDiv.style.left=t+"px";var e=(i.getHeight()-45)/2;i.infoDiv.style.top=e+"px"}},100)},n.onmouseover=function(){!0===i.mouseDown&&(i.abcLocate(this.innerHTML),i._setHtml(i.infoDiv,this.innerHTML))},n.onmouseup=function(){i.mouseDown=!1,i.infoDiv.style.display="none"},n.innerHTML=t[s]}this.setStyle(this.abcTab,"abc_list"),this.addStyle(this.abcTab,"noborder"),this.thisWindow.appendChild(this.abcTab),this.refresh()},doMouseUp:function(t){this.base(t),this.mouseDown=!1,this.infoDiv.style.display="none"},_onTreeCheckBoxClick:function(t){var e=this._this,i=this._cNode;if(i.checkState?e.dataSet.setUnSelect(i):e.dataSet.setSelect(i),"function"==typeof e.onCheckChanged)try{e.onCheckChanged(this._cNode,this._cNode.checkState)}catch(t){e.logError("[onCheckChanged] error:"+t.message+t.stack)}e.trigger("onCheckChanged",[this._cNode,this._cNode.checkState]),e.refresh(),e=null},refreash:function(){this.refresh()},refreshTitle:function(t){return null!=t&&(null!=t.colNames&&(this.getOption().colNames=t.colNames),null!=t.colModels&&(this.getOption().colModels=t.colModels),this.refresh(),!0)},refresh:function(){if(!this._update)return!1;this.beginUpdate();var e=this.getHScrollHeight();this.autoHeight||(this.showCount=Math.round((this._getRectHeight()-e)/this._rowHeight)+1);var i,s,n,o=this.listTab.rows.length,h=this.dataSet.getVisibleCount(),l=this.showCount<h?this.showCount:h,a=this.topNode;this.rowIndex=-1;var r=this.dataSet.curNode;this.dataSet.beginUpdate(),this.dataSet.select(a);var d=this.getOption().colNames;"string"==typeof d&&(d=[d]);var u=this.getOption().colModels,c=u.length,g=null!=d&&d.length>0;for(n=0;n<=l&&null!=a;n++){null==(s=this.listTab.rows[n])&&(s=this.listTab.insertRow(n)),this.setStyle(s,"gridview_under_line");for(var p=0;p<c;p++){if(null==(i=s.cells[p]))i=s.insertCell(p),0==p&&(nodeTable=this.createElement("table"),nodeTable.border=0,nodeTable.cellPadding=0,nodeTable.cellSpacing=0,nodeTable.style.width="100%",i.nodeTable=nodeTable,i.nodeR=nodeTable.insertRow(0),i.nodeR.style.height=this._rowHeight+"px",i.pointTd=i.nodeR.insertCell(0),i.pointTd.style.width="16px",i.pointTd._this=this,i.pointDiv=this.createElement("div"),i.pointDiv.style.width="16px",i.pointDiv.style.height=this._rowHeight+"px",i.pointTd.appendChild(i.pointDiv),i.checkTd=i.nodeR.insertCell(1),i.checkTd.style.width="16px",i.checkBox=new t.ui.input.checkbox,i.checkBox._this=this,i.checkBox.bind("onClick",this._onTreeCheckBoxClick,!0),i.checkTd.appendChild(i.checkBox.getContainer()),i.textTd=i.nodeR.insertCell(2),i.textTd._this=this,i.appendChild(nodeTable));else if(0==p)for(var f=i.nodeR.cells.length;f>3;)i.nodeR.deleteCell(0),f--;var y=u[p];if(0==p){var m=0;if(this.multiSelect?(i.checkTd.style.display="",g&&0==n?(i.checkBox.setCheck(this.dataSet.rootNode.checkState),i.checkBox._cNode=this.dataSet.rootNode,this.dataSet.rootNode.enable?i.checkBox.setDisable(!1):i.checkBox.setDisable(!0)):(i.checkBox.setCheck(a.checkState),i.checkBox._cNode=a,m=16,a.enable?i.checkBox.setDisable(!1):i.checkBox.setDisable(!0))):i.checkTd.style.display="none",i.style.paddingLeft="8px",g&&0==n)this._setHtml(i.textTd,d[p]),this.setStyle(i,"gridview_title"),null!=y.width&&""!==y.width&&(i.style.width=y.width+"px"),1==this.getOption().isTree||(i.pointTd.style.display="none");else{var C=a.index>=a.pNode.count-1;i.textTd._node=a;var S="";S=C?"_last":"_center",a.recNo==r.recNo?(this.hasSelectState?this.setStyle(i,"gridview_td_over"):this.setStyle(i,"gridview_td"),this.rowIndex=n):this.setStyle(i,"gridview_td"),1==this.getOption().isTree?a.count>0?(a.expanded?this.setStyle(i.pointDiv,"component_ui_treeview_node_expand"+S):this.setStyle(i.pointDiv,"component_ui_treeview_node_collapse"+S),i.pointTd.node=a,i.pointTd.onclick=function(){this.node.expanded?this.node.collapse():this.node.expand(),this._this.isSelect=!1,this._this.refresh()}):(this.setStyle(i.pointDiv,"component_ui_treeview_node"+S),i.pointTd.onclick=null):i.pointTd.style.display="none",!1===a.enable&&this.addStyle(i.textTd,"component_ui_treeview_td_disable");a.pNode;var x=this.dataSet.getValue(y.name,a);if(this.hasbind("onItemDraw")&&(x=this.trigger("onItemDraw",[this.dataSet,i.textTd,x])),this._setHtml(i.textTd,x),this.setStyle(i.textTd,"gridview_ellipsis"),null!=y.width&&""!==y.width){var _=parseInt(y.width,10)-m;i.textTd.style.width=_+"px";var b=this.getOption().fontSize||12,v=this.getTextWidth(x,b+"px");i.textTd.title=v>_?x:""}i.textTd.style.lineHeight=this._rowHeight+"px",!0!==this.dataSet.getValue(this.groupFieldName)?i.textTd.onclick=this.doSelect:i.textTd.onclick=null}}else if(null==i.textTd&&(i.textTd=this.createElement("div")),i.appendChild(i.textTd),this.setStyle(i.textTd,"gridview_ellipsis"),g&&0==n)this._setHtml(i.textTd,d[p]),this.setStyle(i,"gridview_title"),null!=y.width&&""!==y.width&&(i.style.width=y.width+"px");else{x=this.dataSet.getValue(u[p].name,a);if(this.hasbind("onItemDraw")&&(x=this.trigger("onItemDraw",[this.dataSet,i,x])),this._setHtml(i.textTd,x),a.recNo==r.recNo?(this.hasSelectState?this.setStyle(i,"gridview_td_over"):this.setStyle(i,"gridview_td"),this.rowIndex=n):this.setStyle(i,"gridview_td"),null!=y.width&&""!==y.width){i.style.width=y.width+"px";b=this.getOption().fontSize||12,v=this.getTextWidth(x,b+"px");i.title=v>_?x:""}i.style.lineHeight=this._rowHeight-2+"px",i._this=this,i._node=a,!0!==this.dataSet.getValue(this.groupFieldName)?i.onclick=this.doSelect:i.onclick=null}}for(;p<s.cells.length;)s.deleteCell(p);g&&0==n||(a=this.dataSet.next()?this.dataSet.curNode:null)}for(p=o-1;p>=n;p--)this.listTab.deleteRow(p);this.bottomNode=this.dataSet.curNode,this.dataSet.endUpdate(!1),this.dataSet.select(r),o=null;var w=0;!0===g&&(w=1),this.listTab.offsetWidth>this.listDiv.offsetWidth&&w++,this.showCount-1<h?(this.scrollBar.setScrollCount(h,this.showCount-1-w),this.setVScrollHide(!1),this.abcTab.style.right=this.scrollBar.getWidth()+"px"):(this.scrollBar.setScrollCount(0,0),this.abcTab.style.right="0px",this.setVScrollHide(!0)),this.rendered=!0,this.endUpdate()},doSelect:function(t){var e=this._this;if(e.isSelect){var i=this._node;e.dataSet.curNode.recNo!=i.recNo&&(e.dataSet.select(i),this.tmpClassName="",e.refresh()),!0===e.dataSet.getValue(e.groupFieldName)||!0===e.multiSelect&&!0!==e.dataSet.isEnableCheck()||("function"==typeof e.onSelect&&e.onSelect(e.dataSet.curNode),e.trigger("onSelect",[e.dataSet.curNode]))}e.isSelect=!0},doScroll:function(t,e){if(0!==e){var i=this;i.topIndex=t,i.dataSet.beginUpdate();var s=i.dataSet.curNode;if(i.dataSet.select(i.topNode),e>0)for(var n=0;n<e;n++)i.dataSet.next();else for(n=0;n>e;n--)i.dataSet.prior();i.topNode=i.dataSet.curNode,i.dataSet.select(s),s=null,i.dataSet.endUpdate(),i.refresh(),i=null}},doMouseWheel:function(t){this.base();var e=t,i=this;return(e.wheelDelta?e.wheelDelta:-1*e.detail)>0?i.scrollBar.scrollPrior():i.scrollBar.scrollNext(),i=null,e.returnValue=!1,e=null,null,!1},doKeyDown:function(t,e){e==this.keyBoard.UP?this.prior():e==this.keyBoard.DOWN&&this.next(),e=null,_this=null},doKeyUp:function(t,e){if(e==this.keyBoard.ENTER&&"function"==typeof this.onSelect){if(!0!==this.dataSet.getValue(this.groupFieldName)&&(!0!==this.multiSelect||!0===this.dataSet.isEnableCheck())){var i=this.dataSet.getCurNode();null!=i&&(this.onSelect(i),this.trigger("onSelect",[i])),i=null}this.logInfo("key up")}},prior:function(){this.dataSet.prior(),this._scrollToFocus()},next:function(){this.dataSet.next(),this._scrollToFocus()},addNode:function(e,i,s){return e instanceof t.treenode?this.dataSet.addNode(e,i,s):"string"==typeof e?((n=new t.treenode).text=e,this.dataSet.addNode(n)):"object"==(void 0===e?"undefined":_typeof(e))?((n=new t.treenode).text=e.text,n.id=e.id,this.dataSet.addNode(n)):void 0;var n},insertNode:function(e,i,s,n){return i instanceof t.treenode?this.dataSet.insertNode(e,i,s,n):"string"==typeof i?((o=new t.treenode).text=i,this.dataSet.insertNode(e,o)):"object"==(void 0===i?"undefined":_typeof(i))?((o=new t.treenode).text=i.text,o.id=i.id,this.dataSet.insertNode(e,o)):void 0;var o},delNode:function(t,e){return this.dataSet.delNode(t,e)},setLeafOnly:function(t,e){this.dataSet.each(function(e){e.count>0&&(e.enable=!0!==t)},e)},value:function(t,e){null!=t&&this.setItemList(t,e)},toPYData:function(t){for(var e=this.getOption().capkey,i=0,s=t.length;i<s;i++){var n=t[i],o=this.hz2py(n[e]);n[e+"_CH"]=o.toUpperCase()}},_getBMCode:function(t){return t<10?"000"+t:t<100?"00"+t:t<1e3?"0"+t:""+t},sortDatas:function(t){for(var e=this.getOption().capkey,i=e+"_CH",s=0,n=t.length;s<n;s++){var o=t[s],h=o[i];for(j=s+1;j<n;j++){var l=t[j],a=l[i];this.compare(a,h)<0&&(t[j]=o,t[s]=l,h=(o=l)[i])}}var r="",d="",u=1,c=1;for(s=0,n=t.length;s<n;s++){var g=t[s],p=(h=g[i]+"")[0];if(r!==p){var f={};f[e]=p,f[i]=p,d=this._getBMCode(u),u++,f[this.dataSet.itemCode]=d,f[this.groupFieldName]=!0,t.splice(s,0,f),n++,s++,c=1,r=p}var y=this._getBMCode(c);g[this.dataSet.itemCode]=d+y,c++}},setItemList:function(t,e){var i=this;this.topNode=null,this.dataSet.initSort=!1,this.toPYData(t),this.sortDatas(t),this.dataSet.setItemList(t,function(){!0===i.dataSet.getValue(i.groupFieldName)&&i.dataSet.next(),i.setLeafOnly(!0===i.getOption().leafOnly,function(){null!=i.topNode&&i.refresh(),"function"==typeof e&&e(),i=null})}),this.dataSet.first(),this.topNode=this.dataSet.curNode,this.topCount=0,this.maxWidth=0,this.refresh()},setItemCode:function(t){this.dataSet.setItemCode(t)},setIDPID:function(t,e){this.dataSet.setIDPID(t,e)},_doResize:function(t){this.base(t),this.rendered&&this._update&&(this.refresh(),this.autoHeight&&(null==this.showCount&&(this.showCount=0),this.getOption().height=this._rowHeight*this.showCount+this.scrollHeight))},doBlur:function(){this.base(),this.refresh()},doFocus:function(){this.base(),this.hasSelectState=!0,this.refresh()},getCurNode:function(){return this.dataSet.getCurNode()},setMultiSelect:function(t){this.getOption().multiselect=t,this.multiSelect=t},getSelectedData:function(){if(this.multiSelect){this.dataSet.getCurNode();this.dataSet.first();for(var t=[];!this.dataSet.isEof();)this.dataSet.isSelected()&&!0!==this.dataSet.getValue(this.groupFieldName)&&t.push(this.getCurNode().data),this.dataSet.next(!0);return t}return this.dataSet.getCurNode().data},locate:function(t,e,i){return!!this.dataSet.locate(t,e,i)&&(this._scrollToFocus(),!0)},getDisplay:function(t,e){return this.dataSet.getDisplay(t,e)},getValue:function(t,e){return this.dataSet.getValue(t,e)},getAllCount:function(){return this.dataSet.getAllCount()},first:function(){this.dataSet.first(),this.topNode=this.dataSet.getCurNode(),this.topNode.level>=0&&(this.topNode.scrIndex=1),this.beginUpdate(),this.scrollBar.setScrollIndex(0),this.endUpdate(!1),this.refresh()},getScrollIndex:function(){return null!=this.topNode?this.topNode.scrIndex:1},scrollToIndex:function(t){if(t>1){t>this.getAllCount()&&(t=this.getAllCount());var e=!0;if(t>1){this.dataSet.beginUpdate();var i=this.dataSet.getCurNode(),s=0;if(this.dataSet.select(this.topNode),t>this.topNode.scrIndex)for(;!this.dataSet.isEof()&&t!=this.dataSet.getIndex();){if(t<this.dataSet.getIndex()){e=!1;break}s++,this.dataSet.next()}else for(;!this.dataSet.isBof()&&t!=this.dataSet.getIndex();){if(t>this.dataSet.getIndex()){e=!1;break}s--,this.dataSet.prior()}this.dataSet.select(i),this.dataSet.endUpdate(!1),!0===e&&this.scrollBar.setScrollIndex(this.scrollBar.scrollIndex+s),this.refresh()}else this.first()}else this.first()},_scrollToFocus:function(){if(this.dataSet.curNode.scrIndex<this.topNode.scrIndex){var t=this.scrollBar.scrollIndex,e=this.dataSet.curNode;for(this.dataSet.curNode=this.topNode;this.dataSet.curNode.recNo!=e.recNo&&!this.dataSet.isBof();)this.dataSet.prior(),this.dataSet.isBof()||t--;this.scrollBar.setScrollIndex(t)}else if(!this.dataSet.isEof()&&this.dataSet.curNode.scrIndex>=this.bottomNode.scrIndex){t=this.scrollBar.scrollIndex,e=this.dataSet.curNode;for(this.dataSet.curNode=this.bottomNode;this.dataSet.curNode.recNo!=e.recNo&&!this.dataSet.isEof();)this.dataSet.next(),this.dataSet.isEof()||t++;this.scrollBar.setScrollIndex(t+1)}this.refresh()}}),_bindRenderFunc("qzzgridview",t.ui.gridview),t.ui.gridview}),
/*!
 * 列表.
 * ecp.qzz.ui.listgrid.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.panel","qzz.treedataset","qzz.pfilter","qzz.paged","qzz.button","qzz.icheckbox"],function(){var t=window.qzz;return t.space("ui"),t.ui.listgrid=t.Class(t.ui.panel,{_create:function(){this.base(),this.getOption().width=700,this.getOption().autoCollapse=this.getBooleanValue(this.getOption().autoCollapse,!0),this.getOption().autoWidth=this.getBooleanValue(this.getOption().autoWidth,!0),this.getOption().autoHeight=this.getBooleanValue(this.getOption().autoHeight,!0),this.getOption().rowHeight=this.getNumberValue(this.getOption().rowHeight,36),this.getOption().boxRowHeight=this.getNumberValue(this.getOption().boxRowHeight,32),this.getOption().colNames=this.getOption().colNames||[],this.getOption().colModels=this.getOption().colModels||[],this._colModelJson={},this.getOption().defColWidth=this.getNumberValue(this.getOption().defColWidth,100),this.getOption().expandWidth=this.getNumberValue(this.getOption().expandWidth,42),this.getOption().pageSize=this._getNumberValue(this.getOption().pageSize,10),this.getOption().pageIndex=this._getNumberValue(this.getOption().pageIndex,1),null==this.getOption().pageSizeList&&(this.getOption().pageSizeList=[10,25,50,100,200,this.getI18n("qzz.all","全部")]),this.getOption().summary=this.getBooleanValue(this.getOption().summary,this.getBooleanValue(this.getOption().footerrow,!1)),this.getOption().summaryText=this.getOption().summaryText||this.getI18n("qzz.summary","合计："),this.getOption().pageSummaryText=this.getOption().pageSummaryText||this.getI18n("qzz.pageSummary","合计："),this.dataSet=new t.treedataset,this.dataSet.setViewColModels(this.getOption().colModels),this.dataSet.isTree=!1;for(var e=0,i=this.getOption().colModels.length;e<i;e++)!0===this.getOption().colModels[e].sum&&this.dataSet.addSumColumn(this.getOption().colModels[e].name);if(null==this.dataSet.onChanged){var s=this;this.dataSet.onChanged=function(t){if(s.logInfo("row changed event"),s.hasbind("rowChanged")&&s.trigger("rowChanged",[t]),"function"==typeof s.onRowChanged)try{s.onRowChanged(t)}catch(t){s.logError("onRowChanged event fire error!")}s.trigger("onRowChanged",[t])}}if(this._curSum=new t.treenode,this._curSum.data={},this._hasRender=!1,this.isArray(this.getOption().dataList)){s=this;this.dataSet.setItemList(this.getOption().dataList,function(){s.dataSet.caculateSum(!0),s._hasRender&&s.refresh(),s.getOption().totalCount=s.dataSet.length(),null!=s.pageObj&&s.pageObj.setTotalCount(s.getOption().totalCount,!1)}),this.fullCollapse()}this._showExpand=!0,this._isHeightResize=!1,this._parseTitle(),this.colIndex=1,this.selRect={beginRowNode:null,endRowNode:null,beginColIndex:1,endColIndex:1},this._selRect={},this.sortTables={},this._colModelIndex={}},_render:function(){this.base(),this.gridTable=this.createElement("TABLE"),this.thisWindow.appendChild(this.gridTable),this.gridTable.style.tableLayout="fixed",this.setStyle(this.gridTable,"treeListGrid"),this.pageObj=new t.ui.paged({totalCount:this.getOption().totalCount}),this.pageObj.setPageSizeList(this.getOption().pageSizeList),this.pageObj.setPageSize(this.getOption().pageSize);var e=this;this.pageObj.bind("onPageChanged",function(t,i,s){if(e._update)if(e.getOption().pageCount=t,e.getOption().pageSize=i,e.getOption().pageIndex=s,e.hasbind("onPageChanged")){e.trigger("onPageChanged",[t,i,s]),e.refresh();for(var n=[],o=e.getOption().colModels.length,h=0;h<o;h++){var l=e.getOption().colModels[h];"checkBox"!=l.editType&&"onoff"!=l.editType||n.push(l.name)}e._refreshCheckAll(n)}else e.refresh()}),this.gridTable.onselectstart=this._onselectstart,this._initTitleSheet(),this._autoWidth(),this.copyDiv=this.createElement("div"),this.setStyle(this.copyDiv,"fixDiv"),this.copyDiv.style.top="0px",this.copyDiv.style.left="0px",this.copyDiv.style.height="1px",this.copyDiv.style.width="1px",this.copyInput=this.createElement("textarea"),this.setStyle(this.copyInput,"editTextInputer"),this.copyInput.style.width="300px",this.copyInput.style.height="300px",this.pasteKeyPress=!1,this.copyDiv.appendChild(this.copyInput),this.thisWindow.appendChild(this.copyDiv),this.refreshLayout(),this.refresh(),this._hasRender=!0,!1!==this.getOption().filter&&this._asynRun(function(){this._initFilterWindow()},10)},refreshLayout:function(){this._createTitle(),this._createPager(),this._autoHeight()},doResize:function(){!0!==this._isHeightResize&&(this.refreshLayout(),this.refresh(),this._autoWidth())},_autoWidth:function(){this.getOption().autoWidth&&(this.thisWindow.style.width="100%",this.thisWindow.offsetWidth<650&&(this.setWidth(650),this.thisWindow.style.width="650px"))},_autoHeight:function(){this.getOption().autoHeight&&(this._isHeightResize=!0,this.setHeight(this.gridTable.offsetHeight),this._isHeightResize=!1)},setHeight:function(t){t!=this.getOption().height&&(this.base(t),this._autoWidth())},_parseTitle:function(){var t=[],e=1,i=1,s=[];this.getOption().colNames[0]instanceof Array?(e=this.getOption().colNames.length,null!=this.getOption().colNames[e-1]?i=this.getOption().colNames[e-1].length:(i=this.getOption().colNames[e-2].length,e--),s=this.getOption().colNames):(i=this.getOption().colNames.length,s=[this.getOption().colNames]);for(var n=e+1,o=i+1,h=1;h<=e;h++)t[h]=[];var l=this.getOption().colModels;for(h=e-1;h>=0;h--){for(var a=s[h],r=a.length,d=0,u=0;d<i;d++){var c=null,g=a[u];if("string"==typeof g&&(g={caption:g},h<e-1&&(g.startIndex=d,g.colSpan=i)),u<r){var p=g.startIndex;0===p||null!=p?p==d&&((c=g).isBand=!0,u++):(u++,(null==(c=g).caption||""===c.caption)&&h<e-1&&(c=null,this.logInfo(this.getI18n("qzz.mergCell","合并空的单元格"))))}if(this.isEmpty(c)){if(h<e-1)t[h+1][d]=t[h+2][d],(f=t[h+1][d]).colIndex==d&&f.rowspan++,f.rowIndex=h+1}else{var f={};t[h+1][d]=f;var y=c.caption;null==l[d].caption&&(l[d].caption=y),f.caption=y,f.rowspan=1,f.rowIndex=h+1,f.colIndex=d,f.isBand=c.isBand||!1;var m=c.colSpan;if(this.isNotEmpty(m)&&parseInt(m,10)>1){f.colspan=parseInt(m,10);var C=f.colspan+d;for(d++;d<i&&d<C;d++)t[h+1][d]=f;d--}f=null}c=null}a=null}this.getOption().titleSheets=t,this.getOption().titleRowCount=n,this.getOption().colCount=o},_initTitleSheet:function(){this._titleSheets=[],this._titleSheets.push([]),this._colModels=[];for(var t=1,e=this.getOption().titleSheets.length;t<e;t++){for(var i=[],s=this.getOption().titleSheets[t],n=null,o=null,h=0,l=0,a=s.length;l<a;l++){var r=s[l];r!=n&&((o=this.extend({},r)).colIndex=h);var d=this.getOption().colModels[l];!0!==d.hidden?(null!=o&&i.push(o),1==t&&this._colModels.push(d),h++):null!=o&&o.colspan--,n=r}this._titleSheets.push(i)}},_cacShowFields:function(){this._colCount=0;var t=this.getWidth(),e=0,i=this.getOption().defColWidth,s=this._colModels,n=0,o=0;this._firstFieldName="",this._hideCount=0;for(var h=s.length,l=0;l<h&&e<t;l++){var a=s[l];""===this._firstFieldName&&(this._firstFieldName=a.name),o=n,null!=(n=a.width)&&0!==n||(n=i,a.width=n),"checkBox"!=a.editType&&"radio"!=a.editType&&"onoff"!=a.editType||(null==a.isCheck&&0!==a.isCheck&&(a.isCheck=!0),null==a.unCheck&&0!==a.unCheck&&(a.unCheck=!1)),e+=n,this._colCount++}e>t&&(e-=n,n=o,this._colCount--),this._colCount==h?this._showExpand=!1:(this._showExpand=!0,e+this.getOption().expandWidth>t&&(this._colCount--,(e-=n)+this.getOption().expandWidth>t&&this._colCount--)),this._ysums=t-e-2,this._showExpand&&(this._ysums-=this.getOption().expandWidth)},doShow:function(){this.refresh(),this._autoHeight()},_createTitle:function(){this._cacShowFields();var e=this._titleSheets,i=this._colModels,s=null,n=null,o=null,h=parseInt(this._ysums/this._colCount,10),l=this;this._pExpandCol=null;var a=null,r=0;(p=(s=this.gridTable.rows.length>0?this.gridTable.rows[0]:this.gridTable.insertRow(0)).cells.length)>(f=0)?o=s.cells[f]:(o=s.insertCell(f),p++),this._setHtml(o,"",!1),o.style.height="1px",o.style.width="1px",o.id="common_td",f++,r++;var d=0,u=0;for(this._hideCount=0,this._colModelIndex={};r<=this._colCount;r++)a=i[r-1],p>f?o=s.cells[f]:(o=s.insertCell(f),p++),o.style.height="1px",o.id="common_td",u=a.width+h,d+=h,o.style.width=u+"px",f++;for(f>1&&(o.style.width=u+this._ysums-d+"px"),this._showExpand&&(p>f?o=s.cells[f]:(o=s.insertCell(f),p++),o.style.height="1px",o.id="common_td",o.style.width=this.getOption().expandWidth+"px",r++,f++);p>f;)s.deleteCell(p-1),p--;for(var c=this.gridTable.rows.length,g=1;g<this.getOption().titleRowCount;g++){c>g?s=this.gridTable.rows[g]:(s=this.gridTable.insertRow(g),c++);var p,f;r=0;for((p=s.cells.length)>(f=0)?o=s.cells[f]:(o=s.insertCell(f),p++),o.style.width="1px",o.id="common_td",this._setHtml(o,"",!1),o.setAttribute("rowSpan",1),o.setAttribute("colSpan",1),o.style.height=this.getOption().rowHeight+"px",f++,r++;r<=this._colCount;r++)if(a=i[r-1],(n=e[g][r-1]).rowIndex==g&&n.colIndex==r-1){p>f?o=s.cells[f]:(o=s.insertCell(f),p++);var y=this.getNumberValue(n.colspan,1);r+y>=this._colCount+1&&(y=this._colCount+1-r),o.setAttribute("colSpan",y),o.setAttribute("rowSpan",this.getNumberValue(n.rowspan,1)),o.colIndex=n.colIndex,o.rowIndex=n.rowIndex;var m=this.sortTables[a.name];if(!0!==n.isBand&&null!=m&&this.thisWindow.appendChild(m),this._setHtml(o,n.caption),!(!0!==a.checkAll&&!0!==a.selectAll||"checkBox"!=a.editType&&"onoff"!=a.editType)){null==this.allCheckBox&&(this.allCheckBox={}),this.allCheckBox[a.name]=new t.ui.input.checkbox;var C=this.allCheckBox[a.name];if(o.childNodes.length>0?o.insertBefore(C.getContainer(),o.childNodes[0]):o.appendChild(C.getContainer()),C.fieldName=a.name,C.bind("onClick",function(){l._checkAll(this.fieldName,this.getCheck())},!0),"onoff"==a.editType){C.onoff=new t.ui.button({move:!0,width:40,height:22,common:["onoff_off","onoff_on"]}),C.hide();var S=C.onoff._getControl();S.style.margin="auto",o.childNodes.length>0?o.insertBefore(S,o.childNodes[0]):o.appendChild(S),C.onoff.bind("onclick",C,function(t,e){t.click(),this.focus=!1},!0)}this._refreshCheckAll(a.name)}if(o.isBand=n.isBand,null==o.sortDiv&&(o.sortDiv=this.createElement("div"),this.setStyle(o.sortDiv,"sortDiv")),!0!==n.isBand){if(null==m){m=this.createElement("table"),this.setStyle(m,"sortTable");var x=m.insertRow(0).insertCell(0);this.setStyle(x,["sortDefault"]),m.sortIcon=x,m.onmousedown=function(){l.sortClick=!0},m.onmouseup=function(t){t=t||event;l.getMouseButton(t)===l.mouseType.mtLeft&&(this.sortState=this.state,this.sortIndex=this.colIndex,this.colIndex!=l.colIndex&&(l.colIndex=this.colIndex),l.doSortAndFilter(this.sortIndex,this.sortState))},this.sortTables[a.name]=m}m.state="none",m.style.display="none",o.sortDiv.appendChild(m),null!=o.childNodes[0]?o.insertBefore(o.sortDiv,o.childNodes[0]):o.appendChild(o.sortDiv)}this._initTitleEvent(o),this.setStyle(o,"treeListTitle"),f++}for(this._showExpand&&1==g&&(p>f?o=s.cells[f]:(o=s.insertCell(f),p++),o.style.width=this.getOption().expandWidth+"px",this._setHtml(o,"+",!1),o.setAttribute("rowSpan",this.getOption().titleRowCount-1),this.setStyle(o,"treeListTitle"),this.addStyle(o,"listbox_expand"),this._pExpandCol=o,this._clearCellEvent(o),o.onclick=function(){"-"===this.innerHTML?(l.fullCollapse(),l._setHtml(this,"+",!1)):(l.fullExpand(),l._setHtml(this,"-",!1)),l.refresh()},f++);p>f;)s.deleteCell(p-1),p--}},_createPager:function(){var t=this.gridTable.rows.length,e=null,i=null;(i=(e=t>this.getOption().titleRowCount?this.gridTable.rows[t-1]:this.gridTable.insertRow(t)).cells.length>0?e.cells[0]:e.insertCell(0)).style.height=this.getOption().rowHeight+"px",i.style.padding="0px",i.style.border="0px solid green",i=e.cells.length>1?e.cells[1]:e.insertCell(1);var s=this._colCount-this._hideCount;this._showExpand&&s++,i.setAttribute("colSpan",s),this.pageObj.setParent(i),i.style.paddingRight="8px",this.setStyle(i,"gridCell")},_mulSelectStyle:function(t,e){var i=t.parentNode.node,s=t.cellIndex;this.mulCellSelect&&i.scrIndex<=this.selRect.endRowNode.getIndex()&&i.scrIndex>=this.selRect.beginRowNode.getIndex()&&s<=this.selRect.endColIndex&&s>=this.selRect.beginColIndex&&(this.focus?(this.dataSet.getCurNode()===e&&t.colIndex==this.colIndex?"gridCell"!==t.className&&this.setStyle(t,"gridCell"):("gridSelRow"!=t.className&&this.setStyle(t,"gridSelRow"),this.hasCopy&&this.addStyle(t,"cellCopySate")),s==this.selRect.beginColIndex&&this.addStyle(t,"borderLeftFocus"),s==this.selRect.endColIndex&&this.addStyle(t,"borderRightFocus"),s<=this.selRect.endColIndex&&s>=this.selRect.beginColIndex&&(i.getIndex()==this.selRect.beginRowNode.getIndex()&&this.addStyle(t,"borderTopFocus"),i.getIndex()==this.selRect.endRowNode.getIndex()&&this.addStyle(t,"borderBottomFocus"))):"gridNoFocusSelRow"!==t.className&&this.setStyle(t,"gridNoFocusSelRow"))},_refreshRow:function(e,i,s,n,o,h){var l=this._colModels,a=null;i<e-1?a=this.gridTable.rows[i]:(a=this.gridTable.insertRow(i),e++);var r=a.cells.length;a.node=o;var d=null,u="gridReadonly";s%2==0&&(u="gridCell"),n.recNo===o.recNo&&this.focus&&null!=this.selRect.beginRowNode&&null!=this.selRect.endRowNode&&this.selRect.beginRowNode.getIndex()==this.selRect.endRowNode.getIndex()&&(u="gridSelRow");var c=this,g=null,p=0,f=0,y=null;for(r>f?y=a.cells[f]:(y=a.insertCell(f),r++),this._setHtml(y,"",!1),y.style.height=this.getOption().rowHeight+"px",y.style.width="1px",y.id="common_td",y.row=a,this.setStyle(y,""),p++,f++;p<=this._colCount;p++){g=l[p-1];var m=u;if(f==this.colIndex&&"gridSelRow"==m&&(m+=" focus"),!0!==g.hidden){f<r?y=a.cells[f]:(y=a.insertCell(f),r++),y.id="gridborder",g.name===this._firstFieldName&&(d=y);var C=this.dataSet.getValue(g.name,o);!0!==h&&!0===g.sum&&(null==this._curSum.data[g.name]&&(this._curSum.data[g.name]=0),this._curSum.data[g.name]+=parseFloat(C,10));var S=this.dataSet.getDisplay(g.name,C,o);if(this.hasbind("onFormat_"+g.name))"string"==typeof(S=this.trigger("onFormat_"+g.name,[g.name,C,S,o]))?this._setHtml(y,S,!1):S.length>0?y.appendChild(S[0]):y.appendChild(S);else if(!0===h||"checkBox"!==g.editType&&"onoff"!==g.editType)if(!0!==h&&"radio"==g.editType){this._setHtml(y,"",!1),null==y.radio&&(y.radio=new t.ui.input.checkbox({type:"radio"})),y.appendChild(y.radio.getContainer()),C===g.isCheck?y.radio.setCheck(!0):y.radio.setCheck(!1),y.radio._node=o,y.radio._cm=g,y.radio.bind("onClick",function(){var t=this._cm.isCheck;this.getCheck()||(t=this._cm.unCheck),c._doRadioClick(this._cm,t,this._node);var e=this.getContainer().parentElement;c.doSelect(e,e.colIndex)},!0)}else if(!0===g.link){var x=y;null==x.al&&(x.al=this.createElement("span"),x.al.onmouseup=function(){var t=c.dataSet.getCurNode();c.dataSet.beginUpdate(),c.dataSet.select(this._node),this._node.option[this._fieldName].linkClick=!0,!1!==c.trigger("onLinkClick",[c,this._fieldName,this._node])&&c.dataSet.select(t),c.dataSet.endUpdate(!1)}),!0===o.option[g.name].linkClick?this.setStyle(x.al,"link_visited"):this.setStyle(x.al,"link"),x.al._node=o,x.al._fieldName=g.name,x.al.id=this.dataSet.getIndex(),"string"==typeof S&&(S=S.replace(/\n/g,"<br/>")),this._setHtml(x.al,S),this._setHtml(x,""),x.appendChild(x.al)}else"string"==typeof S&&(S=S.replace(/\n/g,"<br/>")),this._setHtml(y,S,!1);else if(this._setHtml(y,"",!1),null==y.checkBox&&(y.checkBox=new t.ui.input.checkbox),y.appendChild(y.checkBox.getContainer()),C===g.isCheck?y.checkBox.setCheck(!0):y.checkBox.setCheck(!1),y.checkBox._node=o,y.checkBox._cm=g,y.checkBox.bind("onClick",function(){c._checkBox=!0;var t=c.dataSet.getValue(this._cm.name,this._node);t=t==this._cm.isCheck?this._cm.unCheck:this._cm.isCheck,c._doCheckBoxClick(this._cm,t,this._node);var e=this.getContainer().parentElement;c.doSelect(e,e.colIndex)},!0),"onoff"===g.editType){null==y.checkBox.onoff&&(y.checkBox.onoff=new t.ui.button({move:!0,width:40,height:22,common:["onoff_off","onoff_on"]})),y.checkBox.hide(),y.checkBox.onoff.setParent(y),!0===y.checkBox.getCheck()?y.checkBox.onoff.setState(1):y.checkBox.onoff.setState(0);var _=y.checkBox.onoff._getControl();"center"==g.align?(_.style.marginLeft="",_.style.margin="auto"):"right"==g.align?(_.style.margin="",_.style.marginLeft="auto"):(_.style.margin="",_.style.marginLeft=""),y.checkBox.onoff.bind("onclick",y.checkBox,function(t){c._checkBox=!0;var e=c.dataSet.getValue(t._cm.name,t._node);e=e==t._cm.isCheck?t._cm.unCheck:t._cm.isCheck,c._doCheckBoxClick(t._cm,e,t._node),t.setCheck(1===this._stateValue),this.focus=!1},!0)}y.isBox=!1,y.colIndex=y.cellIndex,y.style.textAlign=this.getColAlign(g.name),this.trigger("onCellDraw",[this.dataSet,g.name,y,o]),this.hasbind("onCellDraw_"+g.name)&&this.trigger("onCellDraw_"+g.name,[this.dataSet,g.name,y,o]),this.setStyle(y,m),y.style.paddingLeft="4px",y.style.paddingRight="4px",this._mulSelectStyle(y,n),this._clearCellEvent(y),!0!==h&&this._initCellEvent(y),f++}}for(this._showExpand?(r>f?y=a.cells[f]:(y=a.insertCell(f),r++),y.id="gridborder",y.style.width=this.getOption().expandWidth+"px",y.style.textAlign="center",!0===o._expanded?this._setHtml(y,"-",!1):this._setHtml(y,"+",!1),this.setStyle(y,u),this.addStyle(y,"listbox_expand"),this._clearCellEvent(y),y.onclick=function(){var t=this.parentNode.node;!0===t._expanded?(c.collapse(this.parentNode,this.parentNode.boxrow),c._setHtml(this,"+",!1),t._expanded=!1):(c.expand(this.parentNode,this.parentNode.boxrow),c._setHtml(this,"-",!1),t._expanded=!0),c._refreshExpandAll()},f++,p++):o._expanded=!1;r>f;)a.deleteCell(r-1),r--;var b=i+1,v=null;b<e-1?v=this.gridTable.rows[b]:(e++,(v=this.gridTable.insertRow(b)).isBox=!0),a.boxrow=v,a.firstCol=d,v.mrow=a;var w=this._colCount+1-this._hideCount;for(r=v.cells.length,f=0,v.cells.length>f?y=v.cells[f]:(y=v.insertCell(f),r++),this._setHtml(y,"",!1),this.setStyle(y,""),y.setAttribute("colSpan",1),y.id="gridborder",f++,!0===this.getOption().firstSpan&&(!0===o._expanded&&d.setAttribute("rowSpan",2),w--),v.cells.length>f?y=v.cells[f]:(y=v.insertCell(f),r++),y.id="gridborder",f++,y.setAttribute("colSpan",w),this.refreshBox(y,d,o,n,h),this.setStyle(y,u),y.onclick=!0!==h?function(){c.doSelect(this.parentNode.mrow.cells[0],c.colIndex)}:null,y.style.height=this.getOption().rowHeight+"px",!0===o._expanded?v.style.display="":(v.style.display="none",d.setAttribute("rowSpan",1));r>f;)a.deleteCell(r-1),r--;l=null},refresh:function(){this.getOption().titleSheets,this._colModels;var t=this.gridTable.rows.length,e=this.getOption().titleRowCount+2*this.getOption().pageSize,i=0,s=this.dataSet.getRecordCount();this.getOption().pageSize===this.getI18n("qzz.all","全部")||this.hasbind("onPageChanged")?i=0:(i=(this.getOption().pageIndex-1)*this.getOption().pageSize,(s=this.getOption().pageSize+i)>this.dataSet.getRecordCount()&&(s=this.dataSet.getRecordCount()));var n=0,o=this.getOption().titleRowCount,h=this.dataSet.getCurNode();this.dataSet.beginUpdate(),this.dataSet.gotoChild(i,this.dataSet.rootNode);var l=!1;for(this._curSum.data={},this.mulCellSelect=this.selRect.beginColIndex<this.selRect.endColIndex||null!=this.selRect.beginRowNode&&this.selRect.beginRowNode.getIndex()<this.selRect.endRowNode.getIndex();o<e&&i<s&&!this.dataSet.isEof();o+=2){var a=this.dataSet.getCurNode();this._refreshRow(t,o,n,h,a),l=l||a._expanded,n++,i++,this.dataSet.next()}var r="";if(!0===this.getOption().pageSummary){for(var d=0,u=this._colModels.length;d<u;d++){if(!0!==(c=this._colModels[d]).hidden){r=c.name;break}}""!==r&&(this._curSum.data[r]=this.getOption().pageSummaryText),this._refreshRow(t,o,n,h,this._curSum,!0),l=l||this._curSum._expanded,n++,i++,o+=2}if(!0===this.getOption().summary){if(""==r)for(d=0,u=this._colModels.length;d<u;d++){var c;if(!0!==(c=this._colModels[d]).hidden){r=c.name;break}}""!==r&&this.dataSet.setSummary(r,this.getOption().summaryText),this._refreshRow(t,o,n,h,this.dataSet.rootNode,!0),l=l||this.dataSet.rootNode._expanded,n++,i++,o+=2}for(this.dataSet.select(h),this.dataSet.endUpdate(!1);t-1>o;)this.gridTable.deleteRow(t-2),t--;if(null!=this._pExpandCol&&(l?this._setHtml(this._pExpandCol,"-",!1):this._setHtml(this._pExpandCol,"+",!1)),this.refreshSortState(),this._autoHeight(),this.thisWindow.style.overflow="visible",null!=this.copyInput&&this.dataSet.getRecordCount()>0&&this.focus){this.copyInput.value=this.getCopyData();var g=this.copyInput;this._asynRun(function(){0==this.cellMouseDown&&g.offsetHeight>0&&(g.select(),g.focus()),g=null,that=null},10)}},getFieldName:function(t){null==t&&(t=this.colIndex);var e=this._colModels[t-1];return null!=e?e.name:""},refreshSortState:function(t){null==t&&(t=this.getFieldName());var e=this.sortTables[t];if((!1!==this.getOption().filter||!1!==this.getOption().sort)&&null!=e&&0!=this.getColModel(t).filter){e.colIndex=this.colIndex,e.style.display="";var i=this.dataSet.getFilterState(t);e.filtered=i,this._sortFieldName==t?("none"==e.sortState?this.dataSet.filtered&&i?this.setStyle(e.sortIcon,"filter"):this.setStyle(e.sortIcon,"sortDefault"):"up"==e.sortState?this.dataSet.filtered&&i?this.setStyle(e.sortIcon,"filterUp"):this.setStyle(e.sortIcon,"sortUp"):"down"==e.sortState&&(this.dataSet.filtered&&i?this.setStyle(e.sortIcon,"filterDown"):this.setStyle(e.sortIcon,"sortDown")),e.state=e.sortState):(this.dataSet.filtered&&i?this.setStyle(e.sortIcon,"filter"):this.setStyle(e.sortIcon,"sortDefault"),e.state="none")}for(var s in this.sortTables){var n=this.sortTables[s];s!==t&&(1!=n.filtered&&(n.style.display="none"),s!=this._sortFieldName&&null!=n&&"none"!=n.sortState&&(n.sortState="none")),n=null}},getColModel:function(t){if(null==this._colModelJson&&(this._colModelJson={}),null==this._colModelJson[t])for(var e=0,i=this._colModels.length;e<i;e++){var s=this._colModels[e];if(s.name===t){this._colModelJson[t]=s;break}}return this._colModelJson[t]},getColAlign:function(t){var e="",i=this.getColModel(t),s="";if(null!=i&&(null!=i.align&&(e=i.align),s=i.dataType),null==e||""===e){null!=s&&""!==s||(s="string");e="number"===s||"int"===s||"float"===s?"right":"string"!=s?"center":"left"}return e},collapse:function(t,e){e.style.display="none",!0===this.getOption().firstSpan&&null!=t.firstCol&&t.firstCol.setAttribute("rowSpan",1),this._autoHeight()},expand:function(t,e){e.style.display="",!0===this.getOption().firstSpan&&null!=t.firstCol&&t.firstCol.setAttribute("rowSpan",2),this._autoHeight()},fullExpand:function(){this.beginUpdate();var t=this.dataSet.getCurNode();for(this.dataSet.first();!this.dataSet.isEof();)this.dataSet.getCurNode()._expanded=!0,this.dataSet.next();!0===this.getOption().pageSummary&&(this._curSum._expanded=!0),!0===this.getOption().summary&&(this.dataSet.rootNode._expanded=!0),this.dataSet.select(t),this.endUpdate(!1)},fullCollapse:function(){this.beginUpdate();var t=this.dataSet.getCurNode();for(this.dataSet.first();!this.dataSet.isEof();)this.dataSet.getCurNode()._expanded=!1,this.dataSet.next();!0===this.getOption().pageSummary&&(this._curSum._expanded=!1),!0===this.getOption().summary&&(this.dataSet.rootNode._expanded=!1),this.dataSet.select(t),this.endUpdate(!1)},_refreshExpandAll:function(){this.beginUpdate();var t=this.dataSet.getCurNode(),e=!1;for(this.dataSet.first();!this.dataSet.isEof();)e=e||this.dataSet.getCurNode()._expanded,this.dataSet.next();!0===this.getOption().pageSummary&&(e=e||this._curSum._expanded),!0===this.getOption().summary&&(e=e||this.dataSet.rootNode._expanded),e?this._setHtml(this._pExpandCol,"-",!1):this._setHtml(this._pExpandCol,"+",!1),this.dataSet.select(t),this.endUpdate(!1)},_checkAll:function(t,e){this.beginUpdate();var i=this.dataSet.getCurNode();this.dataSet.first();for(var s=this.getColModel(t);!this.dataSet.isEof();)!0===e?this.dataSet.setValue(t,s.isCheck):this.dataSet.setValue(t,s.unCheck),this.dataSet.next();this.dataSet.select(i),this.endUpdate(!1),this.refresh()},_refreshCheckAll:function(t){"string"==typeof t&&(t=[t]),this.beginUpdate();for(var e=this.dataSet.getCurNode(),i={},s=0,n=t.length;s<n;s++)i[t[s]]=!1;for(this.dataSet.first();!this.dataSet.isEof();){var o=!0;for(s=0,n=t.length;s<n;s++){var h=t[s],l=this.getColModel(h);i[h]=i[h]||this.dataSet.getValue(h)==l.unCheck,o=o&&i[h]}if(o)break;this.dataSet.next()}for(s=0,n=t.length;s<n;s++){var a=this.allCheckBox[t[s]];null!=a&&(1==i[t[s]]||0==this.dataSet.getRecordCount()?a.setCheck(!1):a.setCheck(!0))}this.dataSet.select(e),this.endUpdate(!1)},doBlur:function(){this.refresh()},doFocus:function(){!0!==this.cellMouseDown&&this.refresh()},_onselectstart:function(t){var e=t||window.event,i=e.target||e.srcElement,s=!1;if(!this.shiftKeyDown)s="INPUT"==i.tagName||"TEXTAREA"==i.tagName;return e.returnValue=s,s},doSelect:function(t,e){var i=t.parentNode.node;if(this.colIndex=e||t.cellIndex,this.dataSet.select(i),null==this.selRect.beginRowNode&&(this.selRect.beginRowNode=i,this.selRect.endRowNode=i),this.refresh(),this.trigger("onSelect",[i]),"function"==typeof this.onClick)try{this.onClick(i,this.getFieldName())}catch(t){this.logError("[onClick]ERR:"+t.message)}this.trigger("onClick",[i,this.getFieldName()])},doCellDBClick:function(t,e){if("function"==typeof this.onDBClick)try{this.onDBClick(this)}catch(t){this.logError("[onDBClick] error:"+t.message+t.stack)}this.trigger("onDBClick",[this])},refreshBox:function(e,i,s,n,o){s._expanded;var h=e.boxTable,l=this._getRectWidth();null==h&&(h=this.createElement("TABLE"),this.setStyle(h,"treeListGrid"),e.appendChild(h),e.boxTable=h,h.style.margin="8px",h.onselectstart=this._onselectstart);var a=this.getNumberValue(this.gridTable.rows[0].cells[i.cellIndex].style.width,0);h.style.width=l-18-8-a+"px";for(var r=this,d=parseInt((l-16)/250,10),u=this._colModels.length,c=this._colCount,g=0,p=h.rows.length,f=null,y=(e=null,(l-150*d-18)/d),m=this.getOption().titleSheets;c<u;){g<p?f=h.rows[g]:(f=h.insertRow(g),p++);for(var C=f.cells.length,S=0;S<d;S++){var x=2*S;for(x<C?e=f.cells[x]:(e=f.insertCell(x),C++),e.style.height=this.getOption().boxRowHeight+"px",e.style.width="150px",e.style.textAlign="right",e.style.fontWeight="bold",cm=this._colModels[c];c<u&&null!=cm&&!0===cm.hidden;)c++,cm=this._colModels[c];if(c<u){var _=this.getOption().titleRowCount-1,b=m[_][c],v=b.caption;for(_--;_>=1;)b.rowIndex!=m[_][c].rowIndex&&(v=m[_][c].caption+"/"+v,b=m[_][c]),_--;this._setHtml(e,v+":",!1)}else this._setHtml(e,"",!1),e.colIndex=-1,this.setStyle(e,"");if(++x<C?e=f.cells[x]:(e=f.insertCell(x),C++),e.style.height=this.getOption().boxRowHeight+"px",e.style.width=y+"px",e.isBox=!0,e.node=s,c<u){if(this._setHtml(e,"",!1),!0===o||"checkBox"!==cm.editType&&"onoff"!==cm.editType)if(!0!==o&&"radio"==cm.editType){this._setHtml(e,"",!1),null==e.radio&&(e.radio=new t.ui.input.checkbox({type:"radio"})),e.appendChild(e.radio.getContainer()),this.dataSet.getValue(cm.name)===cm.isCheck?e.radio.setCheck(!0):e.radio.setCheck(!1),e.radio._node=s,e.radio._cm=cm,e.radio.bind("onClick",function(){var t=this._cm.isCheck;this.getCheck()||(t=this._cm.unCheck),r._doRadioClick(this._cm,t,this._node);var e=this.getContainer().parentElement;r.doSelect(e,e.colIndex)},!0)}else{var w=this.dataSet.getDisplay(cm.name,null,s);if(!0===cm.link){var N=e;null==N.al&&(N.al=this.createElement("span"),N.al.onmouseup=function(){var t=r.dataSet.getCurNode();r.dataSet.beginUpdate(),r.dataSet.select(this._node),this._node.option[this._fieldName].linkClick=!0,!1!==r.trigger("onLinkClick",[r,this._fieldName,this._node])&&r.dataSet.select(t),r.dataSet.endUpdate(!1)}),!0===s.option[cm.name].linkClick?this.setStyle(N.al,"link_visited"):this.setStyle(N.al,"link"),N.al._node=s,N.al._fieldName=cm.name,N.al.id=this.dataSet.getIndex(),this._setHtml(N.al,w),this._setHtml(N,""),N.appendChild(N.al)}else this._setHtml(e,w,!1)}else if(null==e.checkBox&&(e.checkBox=new t.ui.input.checkbox),e.appendChild(e.checkBox.getContainer()),this.dataSet.getValue(cm.name)===cm.isCheck?e.checkBox.setCheck(!0):e.checkBox.setCheck(!1),e.checkBox._node=s,e.checkBox._cm=cm,e.checkBox.bind("onClick",function(){r._checkBox=!0;var t=r.dataSet.getValue(this._cm.name,this._node);t=t==this._cm.isCheck?this._cm.unCheck:this._cm.isCheck,r._doCheckBoxClick(this._cm,t,this._node);var e=this.getContainer().parentElement;r.doSelect(e,e.colIndex)},!0),"onoff"===cm.editType){null==e.checkBox.onoff&&(e.checkBox.onoff=new t.ui.button({move:!0,width:40,height:22,common:["onoff_off","onoff_on"]})),e.checkBox.hide(),e.checkBox.onoff.setParent(e),!0===e.checkBox.getCheck()?e.checkBox.onoff.setState(1):e.checkBox.onoff.setState(0);var O=e.checkBox.onoff._getControl();"center"==cm.align?(O.style.marginLeft="",O.style.margin="auto"):"right"==cm.align?(O.style.margin="",O.style.marginLeft="auto"):(O.style.margin="",O.style.marginLeft=""),e.checkBox.onoff.bind("onclick",e.checkBox,function(t){r._checkBox=!0;var e=r.dataSet.getValue(t._cm.name,t._node);e=e==t._cm.isCheck?t._cm.unCheck:t._cm.isCheck,r._doCheckBoxClick(t._cm,e,t._node),t.setCheck(1===this._stateValue),this.focus=!1},!0)}e.style.paddingLeft="8px",e.colIndex=c+1,this.colIndex==c+1&&s.recNo==n.recNo||c+1>=this.selRect.beginColIndex&&c+1<=this.selRect.endColIndex&&null!=this.selRect.beginRowNode&&s.getIndex()>=this.selRect.beginRowNode.getIndex()&&s.getIndex()<=this.selRect.endRowNode.getIndex()?this.focus?this.setStyle(e,"gridSelRow focus"):this.setStyle(e,"gridNoFocusSelRow"):this.setStyle(e,""),!0!==o?this._initCellEvent(e):this._clearCellEvent(e)}else this._setHtml(e,"",!1),e.colIndex=-1,this.setStyle(e,"");c++}for(;C>2*S;)f.deleteCell(C-1),C--;g++}for(;p>g;)h.deleteRow(p-1),p--},_doRadioClick:function(t,e,i){var s=t.name;if(null==this._radios&&(this._radios={}),e==t.isCheck){if(this.dataSet.getValue(s,i)!==e){if(this.dataSet.setValue(s,e,i),null==this._radios[s]){for(this.dataSet.beginUpdate(),this.dataSet.first();!this.dataSet.isEof();){if(this.dataSet.getValue(s)===t.isCheck){this._radios[s]=this.dataSet.getCurNode();break}this.dataSet.next(!0)}this.dataSet.select(i),this.dataSet.endUpdate()}null!=this._radios[s]&&this.dataSet.setValue(s,t.unCheck,this._radios[s]),this._radios[s]=i}if("function"==typeof this.onCheckChanged)try{this.onCheckChanged(i,e,s)}catch(t){this.logError("[onCheckChanged] error:"+t.message+t.stack)}this.trigger("onCheckChanged",[i,e,s,"@MUL"]),this.trigger("onSelectRow",[i,e,s,"@MUL"])}},_doCheckBoxClick:function(t,e,i){var s=t.name;if(this.dataSet.getValue(s,i)!=e&&this.dataSet.setValue(s,e,i),!0===t.checkAll&&(e==t.unCheck?this.allCheckBox[s].setCheck(!1):this._refreshCheckAll(s)),"function"==typeof this.onCheckChanged)try{this.onCheckChanged(i,e,s)}catch(t){this.logError("[onCheckChanged] error:"+t.message+t.stack)}this.trigger("onCheckChanged",[i,e,s,"@MUL"]),this.trigger("onSelectRow",[i,e,s,"@MUL"])},value:function(t,e){if(null==t)return this.getOption().dataList;if(1!=this._lockValue){if(this.getOption().dataList=t,this.isArray(this.getOption().dataList)){var i=this;this.dataSet.setItemList(this.getOption().dataList,function(){if(i.dataSet.first(),i.fullCollapse(),!1===i.hasbind("onPageChanged")&&(i.getOption().totalCount=i.dataSet.getRecordCount(),i.pageObj.setTotalCount(i.getOption().totalCount)),i.refresh(),"function"==typeof i.onAfterLoad)try{i.onAfterLoad()}catch(t){i.logError("[onAfterLoad] error:"+t.message+t.stack)}i.trigger("gridComplete",[]),"function"==typeof e&&e.apply(i)})}}else"function"==typeof this._icpData&&this._icpData(t)},getWidth:function(){var t=0;return this.getOption().autoWidth&&(t=this.thisWindow.offsetWidth),0===t&&(t=this.base()),t},_initTitleEvent:function(t){var e=this;t.onmouseover=function(t){t=t||window.event;e.doTitleMouseOver(this,t)},t.onmousemove=function(t){t=t||window.event;e.doTitleMouseMove(this,t)},t.onmousedown=function(t){t=t||window.event;e.doTitleMouseDown(this,t)},t.onmouseup=function(t){t=t||window.event;e.doTitleMouseUp(this,t)},t.ondblclick=function(t){t=t||window.event;e.doTitleDBClick(this,t)}},_clearCellEvent:function(t){t.onclick=null,t.ondblclick=null,t.onmouseup=null,t.onmousedown=null,t.onmouseover=null,t.onmousemove=null},_initCellEvent:function(t){var e=this;t.onmouseover=function(t){t=t||window.event;e.doCellMouseOver(this,t)},t.onmousedown=function(t){t=t||window.event;e.doCellMouseDown(this,t)},t.onmouseup=function(t){t=t||window.event;e.doCellMouseUp(this,t)},t.ondblclick=function(t){t=t||window.event;e.doCellDBClick(this,t)}},doTitleDBClick:function(t,e){},_getColWidth:function(t){var e=[],i=parseInt(t.getAttribute("colSpan"),10);if(i>0)for(var s=0,n=0;n<i;n++){for(var o=this.gridTable.rows[0].cells[t.colIndex+n+s+1];"none"==o.style.display;)s++,o=this.gridTable.rows[0].cells[t.colIndex+n+s+1];e[n]=this._getNumberValue(o.style.width,0)}return e},doTitleMouseDown:function(t,e){if(this.getMouseButton(e)==this.mouseType.mtLeft&&!this.sortClick){this.titleMouseDown=!0,this.curTitleCell=t,this.curTitleCellWidth=this._getColWidth(t);var i=this._getNumberValue(t.getAttribute("colspan"),1);this.curOptionWidth=[];for(var s=t.colIndex;s<t.colIndex+i;s++)this.curOptionWidth.push(this._colModels[s].width);t.colIndex+i+1<=this._colCount?(this.nextTitleCell=this.gridTable.rows[0].cells[t.colIndex+i+1],this.nextTitleCellWidth=this._getNumberValue(this.nextTitleCell.style.width),this.nextOptionWidth=this._colModels[this.nextTitleCell.cellIndex-1].width):(this.nextTitleCell=null,this.nextTitleCellWidth=0,this.nextOptionWidth=0),this.curMouseLeft=this.mouseLeft,this.selMulCol=!1}this.focus||this.setFocus()},doTitleMouseUp:function(t,e){this.getMouseButton(e)!=this.mouseType.mtLeft||this.sortClick||this.resizeState||this.titleDragState||this.selMulCol||(e.ctrlKey&&1==t.cellIndex?(this.colIndex=1,this.selRect.beginColIndex=1,this.selRect.endColIndex=this._colModels.length):(this.selRect.beginColIndex=t.colIndex+1,this.selRect.endColIndex=t.colIndex+parseInt(t.getAttribute("colSpan"),10),this.colIndex=t.colIndex+1),this.dataSet.getRecordCount()>0&&(this.dataSet.beginUpdate(),this.dataSet.last(),this.selRect.endRowNode=this.dataSet.getCurNode(),this.dataSet.first(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.dataSet.endUpdate(!1)),this.focus||this.setFocus(),this.refresh()),this.trigger("onHeaderClick",!0),this.selMulCol=!1},doTitleMouseMove:function(t,e){if(!this.titleMouseDown){var i=0,s=t.getBoundingClientRect(),n=(e.clientX,t.offsetWidth),o=n-(e.clientX-s.left),h=this.getNumberValue(t.getAttribute("colspan"),1),l=t.colIndex;o<10&&l+h<this._colCount?(this.resizeState=!0,this.titleDragState=!0,this.getBrowser("safari")?this.thisWindow.style.cursor="e-resize":this.thisWindow.style.cursor="col-resize"):(this.titleDragState=!1,this.resizeState=!1,this.thisWindow.style.cursor=""),this.mouseLeft=e.clientX,i=null,s=null,null,n=null,o=null}},doTitleMouseOver:function(t,e){this.titleMouseDown&&!this.titleDragState&&(this.selMulCol=!0,this.curTitleCell.colIndex<=t.colIndex?(this.selRect.beginColIndex=this.curTitleCell.colIndex+1,this.selRect.endColIndex=t.colIndex+this.getNumberValue(t.getAttribute("colSpan"),1)):(this.selRect.beginColIndex=t.colIndex+1,this.selRect.endColIndex=this.curTitleCell.colIndex+1),this.selRect.beginColIndex<1&&(this.selRect.beginColIndex=1),this.colIndex=this.curTitleCell.colIndex+1,this.dataSet.getRecordCount()>0&&(this.dataSet.beginUpdate(),this.dataSet.last(),this.selRect.endRowNode=this.dataSet.getCurNode(),this.dataSet.first(),this.selRect.beginRowNode=this.dataSet.getCurNode(),this.dataSet.endUpdate(!1)),this.refresh())},doCellMouseDown:function(t,e){if(this.getMouseButton(e)==this.mouseType.mtLeft&&!0!==this._checkBox){this.cellMouseDown=!0,!1===this.focus&&this.setFocus();var i=t.parentNode.node;!0===t.isBox&&(i=t.node);var s=null;null!=this.curCell&&null!=this.curCell.parentNode&&(s=this.curCell.parentNode.node,!0===this.curCell.isBox&&(s=this.curCell.node)),e.shiftKey?(t.cellIndex>=this.curCell.cellIndex?(this.selRect.beginColIndex=this.curCell.colIndex,this.selRect.endColIndex=t.colIndex):t.cellIndex<this.curCell.colIndex&&(this.selRect.endColIndex=this.curCell.colIndex,this.selRect.beginColIndex=t.colIndex),s=this.dataSet.getCurNode(),i.getIndex()>=s.getIndex()?(this.selRect.beginRowNode=s,this.selRect.endRowNode=i):i.getIndex()<s.getIndex()&&(this.selRect.beginRowNode=i,this.selRect.endRowNode=s),this.refresh()):(this.curCell=t,0==this.curCell.colIndex?this.selARow=!0:this.curColIndex=t.colIndex,this._selRect=this.selRect,this.selRect={beginColIndex:t.colIndex,endColIndex:t.colIndex,beginRowNode:i,endRowNode:i},this.doSelect(t,t.colIndex))}},doCellMouseUp:function(t,e){this.getMouseButton(e),this.mouseType.mtLeft},doCellMouseOver:function(t,e){if(0!=this._enabled&&!0===this.cellMouseDown&&null!=this.curCell){this.selARow||e.ctrlKey?(this.selRect.beginColIndex=1,this.selRect.endColIndex=this._colModels.length,this.colIndex=1):t.colIndex>0&&(this.curCell.colIndex<=t.colIndex?(this.selRect.beginColIndex=this.curCell.colIndex,this.selRect.endColIndex=t.colIndex):(this.selRect.beginColIndex=t.colIndex,this.selRect.endColIndex=this.curCell.colIndex),this.selRect.beginColIndex<=0&&(this.selRect.beginColIndex=1),this.colIndex=this.curCell.colIndex);var i=null;null!=this.curCell&&(i=this.curCell.parentNode.node,!0===this.curCell.isBox&&(i=this.curCell.node));var s=t.parentNode.node;!0===t.isBox&&(s=t.node),null!=i&&null!=s&&(i.getIndex()<=s.getIndex()?(this.selRect.beginRowNode=i,this.selRect.endRowNode=s):(this.selRect.beginRowNode=s,this.selRect.endRowNode=i)),this.isCellMouseOver=!0,this.refresh()}},doMouseDown:function(t){},doMouseUp:function(t){if(this.titleMouseDown=!1,this.sortClick=!1,this.cellMouseDown=!1,this._checkBox=!1,null!=this.copyInput&&this.dataSet.getRecordCount()>0&&this.focus){var e=this.copyInput;this._asynRun(function(){0==this.cellMouseDown&&e.offsetHeight>0&&(e.select(),e.focus()),e=null,that=null},10)}},_setColWidth:function(t,e,i,s,n){var o=parseInt(t.getAttribute("colSpan")||1,10),h=parseInt(n/o,10),l=0,a=0,r=0,d=null;if(s-n>0){for(this._setNumberValue(i,"width",s-n),this._colModels[i.cellIndex-1].width=this.nextOptionWidth-n;l<o-1;l++){for(d=this.gridTable.rows[0].cells[t.colIndex+l+r+1];"none"==d.style.display;)r++,d=this.gridTable.rows[0].cells[t.colIndex+l+r+1];d=null,a+=h;var u=e[l]+h,c=t.colIndex+l+r+1;u>0&&(this._setNumberValue(this.gridTable.rows[0].cells[c],"width",u),this._colModels[c-1].width=this.curOptionWidth[l]+h),u-e[l]}for(d=this.gridTable.rows[0].cells[t.colIndex+l+r+1];"none"==d.style.display;)r++,d=this.gridTable.rows[0].cells[t.colIndex+l+r+1];if(d=null,!((u=e[l]+(n-a))<0)){u-e[l];c=t.colIndex+l+r+1;u>0&&(this._setNumberValue(this.gridTable.rows[0].cells[c],"width",u),this._colModels[c-1].width=this.curOptionWidth[l]+u-e[l]),this._autoHeight()}}},doMouseMove:function(t){if(this.mouseLeft=t.clientX,this.titleMouseDown&&this.titleDragState){var e=this.mouseLeft-this.curMouseLeft;this._setColWidth(this.curTitleCell,this.curTitleCellWidth,this.nextTitleCell,this.nextTitleCellWidth,e)}return!1},_initFilterWindow:function(){var e=this;this.pfilter=new t.ui.drop.popfilter,this.pfilter.setParent(e._getBody()),this.pfilter.bind("onSort",function(t,i){e.setFocus(),e.setSort(t,i)}),this.pfilter.bind("onClearFilter",function(t){e.setFocus(),e.setSort(t,"none",!1,function(){e.dataSet.clearFilterText(function(){for(var t in e.sortTables){var i=e.sortTables[t];null!=i&&(i.filtered=!1),i=null}e.getOption().totalCount=e.dataSet.getRecordCount(),e.pageObj.setTotalCount(e.getOption().totalCount),e.refresh(),e.trigger("onFiltered",[e.dataSet])})})}),this.pfilter.bind("onFilter",function(t,i,s){e.setFocus(),e.setSort(t,"none",!1,function(){null!=s&&s.length<i&&"all"==s[0].id&&s.splice(0,1),e.dataSet.addFilterText(t,s,function(){e.getOption().totalCount=e.dataSet.getRecordCount(),e.pageObj.setTotalCount(e.getOption().totalCount),e.refresh(),e.trigger("onFiltered",[e.dataSet])})})}),this.pfilter.bind("onCancel",function(){e.setFocus()})},doSortAndFilter:function(t,e){var i=this.getFieldName(t);this.getColModel(i);if(!1!==this.getOption().filter){var s=this;this.inputFocus&&this.editObject.doBlur();var n=this.dataSet.topFilterItem;null==n||n.fieldName!==i?this.dataSet.collectFilter(i,function(){s._initFilterListBox(i,s.dataSet.filterList[i],s.dataSet.selectFilterList)}):s._initFilterListBox(i,n.all,n.sel)}else if(!1!==this.getOption().sort){s=this;var o=e;o="none"==e?"up":"up"==e?"down":"none",this.setSort(i,o)}},_initFilterListBox:function(t,e,i){this.pfilter.getFilterName()!==t&&(this.pfilter.setFilterName(t),this.pfilter.clearFilter());var s=this.sortTables[t].getBoundingClientRect(),n=s.left-230;n<0&&(n=0);var o=this.getScrollXY();this.pfilter.execute(o.top+s.top+13,o.left+n+16,e,i)},hideCol:function(t){"string"==typeof t&&(t=[t]);for(var e=!1,i=0,s=t.length;i<s;i++){var n=this.getColModel(t[i]);null!=n&&!1===n.hidden&&(n.hidden=!0,e=!0)}return e&&(this._initTitleSheet(),this.refreshLayout()),e},showCol:function(t){"string"==typeof t&&(t=[t]);for(var e=!1,i=0,s=t.length;i<s;i++){var n=this.getColModel(t[i]);null!=n&&!1!==n.hidden&&(n.hidden=!1,e=!0)}return e&&(this._initTitleSheet(),this.refreshLayout()),e},setSort:function(t,e,i,s){"function"==typeof i&&(s=i,i=!1);var n=this,o=n.sortTables[t];null==o||o.sortState==e?"function"==typeof s&&s.apply(n,arguments):(o.sortState=e,n.hasbind("onSort")?(n._sortFieldName=t,n.trigger("onSort",[t,e])):(n.dataSet.doSort(t,e,function(){n._sortFieldName=t,0!=i?n.refresh():n.dataSet.first(),"function"==typeof s&&s.apply(n,arguments)}),n.trigger("onSortCol",[n.colIndex-1,n.colIndex,n.state])))},getCopyData:function(){if(this.mulCellSelect){var t=this.dataSet.getCurNode();this.dataSet.beginUpdate(),this.dataSet.select(this.selRect.beginRowNode);for(var e=[],i=(this.option.colModels,0);!this.dataSet.isEof()&&this.dataSet.getIndex()<=this.selRect.endRowNode.getIndex();){for(var s=[],n=this.selRect.beginColIndex,o=0;n<=this.selRect.endColIndex;n++){var h=this._colModels[n-1];if(null!=h.name&&1!=h.hidden){var l=this.dataSet.getDisplay(h.name);"string"==typeof l&&(l=l.replace(/&gt;|&lt;/g,function(t){return"&gt;"===t?">":"<"})),s[o++]=""===l?" ":l}}e[i++]=s.join("\t"),this.dataSet.next()}return this.dataSet.select(t),this.dataSet.endUpdate(!1),e.join("\n")}return this.dataSet.getDisplay(this.getFieldName())},beginUpdate:function(){this.base(),this.dataSet.beginUpdate()},endUpdate:function(t){this.dataSet.endUpdate(t),this.base()},setTotalCount:function(t){this.getOption().totalCount=parseInt(t,10),this.pageObj.setTotalCount(this.getOption().totalCount)},getRangeData:function(t,e,i,s){if("function"==typeof e?(s=e,e=!1,i=!1):"function"==typeof i&&(s=i,i=!1),null==e&&(e=!1),this.isNotEmpty(t)&&"function"==typeof s){var n,o,h,l=isAll=!1,a=this;a.option;"object"===(void 0===t?"undefined":_typeof(t))?!(l=(o=+t.begin)>(h=+t.end))&&(isAll=h+1-o===a.getOption().pageCount):"string"==typeof t?"current"===t?l=!0:"all"===t&&(isAll=!0):l=!0,!l&&(a._lockValue=!0),a._icpData=function(t){if(a._lockValue=!1,e){var n=[],o=a.dataSet,h=o.getCurNode();for(var l in a.dataSet._tmpData=t,a.dataSet.transState)a.dataSet.transState[l].transed=!1;for(var r=h.data,d=0,u=t.length;d<u;d++){var c=t[d],g={};if(null!=c)for(var l in h.data=c,c){var p=c[l];if("object"==(void 0===p?"undefined":_typeof(p))){var f={};for(var y in g[l]=f,p){var m=p[y];"string"==typeof(m=o.getDisplay(l+"."+y,m,h,null,i))&&m.indexOf("<")>=0&&(m=m.replace(/<(\/)?[^<>]+>/g,"")),f[y]=m}}else"string"==typeof(p=o.getDisplay(l,p,h,null,i))&&p.indexOf("<")>=0&&(p=p.replace(/<(\/)?[^<>]+>/g,"")),g[l]=p}c=null,n.push(g)}a.dataSet._tmpData=null,h.data=r,o=null,h=null,r=null,s.call({},n)}else s.call({},t);a._icpData=null},l||isAll?l?a._icpData(a.getPageData()):isAll&&(n=a._crPrms(),a._loadSerData(a.getOption().pageCount,n.ps,n.idx)):(n=a._crPrms(o,h),a._loadSerData(a.getOption().pageCount,n.ps,n.idx))}},_crPrms:function(){var t={ps:0,idx:1};if(0===arguments.length)t.ps=this.pageObj.getTotalCount();else if(2===arguments.length){var e=arguments[0],i=arguments[1]-e+1;for(e+="";e.length<5;)e=0+e;t.ps=this.pageObj.getOption().pageSize,t.idx=-+(i+e)}return t},getPageData:function(){var t=[];if(this.dataSet.getRecordCount()>0){var e=this.dataSet.getCurNode();for(this.dataSet.beginUpdate(),this.dataSet.first();!this.dataSet.isEof();)t.push(this.extend({},this.dataSet.getCurNode().data)),this.dataSet.next(!0);this.dataSet.select(e),this.dataSet.endUpdate(!1)}return t},_loadSerData:function(t,e,i){var s=this,n=this.dataSet.getRecordChanged();if(0!==n){var o=this.pageObj.getTotalCount();this.pageObj.setTotalCount(o-n,!1)}if("function"==typeof s.onPageChanged)try{s.onPageChanged(t,e,i)}catch(t){s.logError("[onPageChanged] event error!"+t.message+t.stack)}else s.hasbind("onPageChanged")&&s.trigger("onPageChanged",[t,e,i])},getPrintData:function(t,e){"function"==typeof t&&(e=t,t="all");var i={},s=this;this.getRangeData(t,!0,function(t){i[s.getName()]=t;for(var n={rn:s.summaryText},o=s.getOption().colModels,h=0,l=o.length;h<l;h++){var a=o[h];n[a.name]=s.dataSet.getDisplay(a.name,s.dataSet.getSummary(a.name))}i[s.getName()+"_sum"]=[n],"function"==typeof e&&e(i)})}}),_bindRenderFunc("qzzlistgrid",t.ui.listgrid),t.ui.listgrid}),
/*!
 * 面板控件.
 * ecp.qzz.ui.design.base.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.panel"],function(){var t=window.qzz;return t.space("ui.design"),t.ui.design.base=t.Class(t.ui.panel,{_create:function(){this.base(),this.className="Base",this._selected=!1,this.getOption().scale=this._getNumberValue(this.getOption().scale,1)},_render:function(){null==this.getOption().borderStyle&&(this.getOption().borderStyle="dashed"),null==this.getOption().borderColor&&(this.getOption().borderColor="#AAAAAA"),this.base(),"absolute"==this.getOption().lock&&(this.thisWindow.style.position="absolute"),this.getOption().top=this._getNumberValue(this.getOption().top,this.getOption().top),this.getOption().left=this._getNumberValue(this.getOption().left,this.getOption().left),!1===this.isPecent(this.getOption().width)&&(this.getOption().width=this._getNumberValue(this.getOption().width,this.getOption().width)),this.getOption().height=this._getNumberValue(this.getOption().height,this.getOption().height)},refreshTop:function(){if(null!=this._parent&&"absolute"!=this.getOption().lock){var t=this._parent.childComponent;if(null!=t&&t.length>0){for(var e=-1,i=0,s=t.length;i<s;i++)if("Panel"!=t[i].className&&t[i].index==this.index){e=i;break}e<0&&(e=t.length-1);var n=0;e>0&&(n=this._getNumberValue(t[e-1]._getControl().style.top,0)),this.thisWindow.style.top=n+parseInt(this.getOption().top*this.getOption().scale,10)+"px"}}},refresh:function(){this._setNumberValue(this.thisWindow,"margin",parseInt(this._margin*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"marginLeft",parseInt(this._marginLeft*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"marginRight",parseInt(this._marginRight*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"marginTop",parseInt(this._marginTop*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"marginBottom",parseInt(this._marginBottom*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"padding",parseInt(this._padding*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"paddingLeft",parseInt(this._paddingLeft*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"paddingRight",parseInt(this._paddingRight*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"paddingTop",parseInt(this._paddingTop*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"paddingBottom",parseInt(this._paddingBottom*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"border",this._border),this._setNumberValue(this.thisWindow,"borderLeft",this._borderLeft),this._setNumberValue(this.thisWindow,"borderRight",this._borderRight),this._setNumberValue(this.thisWindow,"borderTop",this._borderTop),this._setNumberValue(this.thisWindow,"borderBottom",this._borderBottom),this._setNumberValue(this.thisWindow,"top",parseInt(this.getOption().top*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"left",parseInt(this.getOption().left*this.getOption().scale,10)),null!=this.getOption().borderStyle&&(this.thisWindow.style.borderStyle=this.getOption().borderStyle),null!=this.getOption().borderColor&&(this.thisWindow.style.borderColor=this.getOption().borderColor),!1===this.isPecent(this.getOption().width)&&this._setNumberValue(this.thisWindow,"width",parseInt(this.getOption().width*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"height",parseInt(this.getOption().height*this.getOption().scale,10)),null!=this.getOption().fontFamily&&""!==this.getOption().fontFamily&&(this.thisWindow.style.fontFamily=this.getOption().fontFamily),null!=this.getOption().fontWeight&&""!==this.getOption().fontWeight&&(this.thisWindow.style.fontWeight=this.getOption().fontWeight),null!=this.getOption().fontStyle&&""!==this.getOption().fontStyle&&(this.thisWindow.style.fontStyle=this.getOption().fontStyle),null!=this.getOption().textDecoration&&""!==this.getOption().textDecoration&&(this.thisWindow.style.textDecoration=this.getOption().textDecoration),null!=this.getOption().fontSize&&""!==this.getOption().fontSize&&this._setNumberValue(this.thisWindow,"fontSize",parseInt(this.getOption().fontSize*this.getOption().scale,10)),null!=this.getOption().textAlign&&""!==this.getOption().textAlign&&(this.thisWindow.style.textAlign=this.getOption().textAlign),this.refreshTop()},_afterRender:function(){this.base(),"function"==typeof this.refresh&&this.refresh(),this.hasbind("onAfterRender")&&this.trigger("onAfterRender",[])},setScale:function(t){"string"==typeof t&&(t=t.replace("%",""),t=parseInt(t,10)),t<=0&&(t=1),t>50&&(t/=100),this.getOption().scale=t,this.refresh(),this._scale=t},setOption:function(t,e,i){i!=e&&(this.getOption()[t]=e,this.trigger("onAttribChanged",[this,t,i,e]))},setAttribute:function(t){for(var e=0,i=t.length;e<i;e++){var s=t[e],n=null,o=s.name;"left"==s.name?(n=this.getOption().left,this.getOption().left=s.value):"top"==s.name?(n=this.getOption().top,this.getOption().top=s.value):"width"==s.name?(n=this.getOption().width,this.getOption().width=s.value):"height"==s.name?(n=this.getOption().height,this.getOption().height=s.value):n=this.getOption()[s.name],this.setOption(s.name,s.value,n),"lineStyle"==o&&(s.name=o)}this.setFocus(),this.refresh()},getAttribute:function(){return[{name:"top",value:this.getOption().top},{name:"left",value:this.getOption().left},{name:"width",value:this.getOption().width},{name:"height",value:this.getOption().height},{name:"lock",value:this._lock||"center"}]},doFocus:function(){var t=this.getOption().selectBorder||"#888888 dashed 3px";this.thisWindow.style.outline=t,this._selected=!0,this.hasbind("onFocus")&&this.trigger("onFocus",[])},_doBlur:function(){this.thisWindow.style.outline="",this.focus=!1,this._selected=!1},setHeight:function(t){this.base(t,!1)},setWidth:function(t){this.base(t,!1)},isPecent:function(t){return/^[0-9]+%/.test(t)}}),t.ui.design.base}),
/*!
 * 面板控件.
 * ecp.qzz.ui.design.image.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.dbase"],function(){var t=window.qzz;return t.space("ui.design"),t.ui.design.image=t.Class(t.ui.design.base,{_create:function(){this.base(),this.className="Image",null==this.getOption().src&&(this.getOption().src="")},_render:function(){this.base(),this._image=this.createElement("IMG"),this._image.style.width="100%",this._image.style.height="100%",this.thisWindow.appendChild(this._image)},getAttribute:function(){var t=this.base();return("TD"==this._parent.tagName||null!=this._parent&&this._parent.tagName)&&t.splice(t.length-1,1),t.push({name:"src",value:this.getOption().src}),t.push({name:"dataField",value:this.getOption().dataField}),t},refresh:function(){this.base(),this._image.src=this.getOption().src,!1===this.getOption().transparent?this.thisWindow.style.backgroundColor="#FFFFFF":this.thisWindow.style.backgroundColor=""},setScr:function(t){this.getOption().src=t,this.refresh()}}),_bindRenderFunc("qzzimage",t.ui.design.image),t.ui.design.image}),
/*!
 * 面板控件.
 * ecp.qzz.ui.design.line.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.dbase"],function(){var t=window.qzz;return t.space("ui.design"),t.ui.design.line=t.Class(t.ui.design.base,{_create:function(){this.base(),this.className="Line",this.getOption().vertical=this.getBooleanValue(this.getOption().vertical,!1),this.getOption().length=this._getNumberValue(this.getOption().length,100),this.getOption().border=this._getNumberValue(this.getOption().border,1),this.getOption().vertical?(this.getOption().width=16,this.getOption().height=this.getOption().length):(this.getOption().width=this.getOption().length,this.getOption().height=16),this._textAry=[]},refresh:function(){this.base();var t=parseInt(this.getOption().length*this.getOption().scale),e=this.getBooleanValue(this.getOption().vertical,!1);e?(this._setNumberValue(this.thisWindow,"borderTopWidth",0),this._setNumberValue(this.thisWindow,"borderBottomWidth",0),this._setNumberValue(this.thisWindow,"borderLeftWidth",0),this._setNumberValue(this.thisWindow,"borderRightWidth",this.getOption().border),this._setNumberValue(this.thisWindow,"height",parseInt(this.getOption().length*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"width",16),this._setNumberValue(this.thisWindow,"left",this.getOption().left-16)):(this._setNumberValue(this.thisWindow,"borderTopWidth",0),this._setNumberValue(this.thisWindow,"borderBottomWidth",this.getOption().border),this._setNumberValue(this.thisWindow,"borderLeftWidth",0),this._setNumberValue(this.thisWindow,"borderRightWidth",0),this._setNumberValue(this.thisWindow,"width",parseInt(this.getOption().length*this.getOption().scale,10)),this._setNumberValue(this.thisWindow,"height",16),this.refreshTop());var i=this.getOption().text;if(this._setHtml(this.thisWindow,"",!1),null!=i){for(var s=i.length,n=parseInt(t/(s+1),10),o=this._textAry.length,h=0;h<s;h++){cstr=i.charAt(h);var l=n*(h+1)+"px",a=null;h>=o?((a=this.createElement("SPAN")).style.position="absolute",this._textAry.push(a)):a=this._textAry[h],e?(a.style.top=l,a.style.right="2px",a.style.left=""):(a.style.top="1px",a.style.left=l,a.style.right=""),this._setHtml(a,cstr),this.thisWindow.appendChild(a)}this.thisWindow.style.color=this.getOption().borderColor}},getHeight:function(){var t=this.base();return this.getOption().vertical?this.getOption().length:t+16},getAttribute:function(){var t=this.base();return t.push({name:"length",value:this.getOption().length}),t.push({name:"text",value:this.getOption().text}),t.push({name:"borderStyle",value:this.getOption().borderStyle}),t.push({name:"vertical",value:this.getOption().vertical}),t.splice(2,2),t},refreshTop:function(){this.base(),this.getOption().vertical=this.getBooleanValue(this.getOption().vertical,!1);var t=this._getNumberValue(this.thisWindow.style.top,this.getOption().top);this.getOption().vertical||this._setNumberValue(this.thisWindow,"top",t-16)}}),_bindRenderFunc("qzzline",t.ui.design.line),t.ui.design.line}),
/*!
 * 面板控件.
 * ecp.qzz.ui.design.table.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.dbase"],function(){var t=window.qzz;return t.space("ui.design"),t.ui.design.table=t.Class(t.ui.design.base,{_create:function(){this.base(),this.className="Table",this.getOption().rows=this._getNumberValue(this.getOption().rows,1),this.getOption().cols=this._getNumberValue(this.getOption().cols,1),this.getOption().heads=this._getNumberValue(this.getOption().heads,1),this._rowHeight=this._getNumberValue(this.getOption().rowHeight,24),(null==this.getOption().height||""===this.getOption().height||this.getOption().height<=10)&&(this.getOption().height=this._rowHeight*this.getOption().rows),this._headRows=1,this._fixCols=0,this._table=null,this._cellMouseDown=!1,this._selRect={brow:1,erow:1,bcol:1,ecol:1},this._sheet=[],this._selectType="td"},_render:function(){this.base(),this._table=this.createElement("TABLE"),this._table.onselectstart=this._onselectstart,this.setStyle(this._table,"noborder"),this._reset(),this._table.style.width="100%",this._table.style.height="100%",this._table.style.tableLayout="fixed",null!=this.getOption().border&&""!==this.getOption().border?this.thisWindow.style.borderWidth=this.getOption().border+"px ":this.thisWindow.style.borderWidth="1px",this.thisWindow.style.borderStyle=this.getOption().borderStyle||"solid",this._setHtml(this.thisWindow,"",!1),this.thisWindow.appendChild(this._table),this._tool=this.createElement("TABLE"),this.setStyle(this._tool,"print_table_tool");var t=this;this._tool_merg=this.createElement("DIV"),this._tool_merg.title=this.getI18n("qzz.merg","合并/拆分单元格"),this.setStyle(this._tool_merg,"print_table_tool_merg");var e=0,i=this._tool.insertRow(0).insertCell(e++);i.style.padding="1px",i.appendChild(this._tool_merg),this._tool_merg.onclick=function(e){t._mergCell()},this.thisWindow.appendChild(this._tool)},_changeCol:function(){var t=this._table.rows[0].cells.length-1,e=this.getOption().cols;if(e<t){for(var i=this.getOption().rows;i>=0;i--){for(var s=this._table.rows[i],n=t;n>e;n--){var o=null;if(o=i>0?this._sheet[i][n]:this._table.rows[0].cells[n],0==i)s.deleteCell(n);else if(null!=o&&o.parentNode.rowIndex==i)if(null==o.colSpan||1==o.colSpan){var h=o.cellIndex;s.deleteCell(h)}else o.colSpan=parseInt(o.colSpan,10)-1;o=null}s=null}for(var l=1,a=(n=1,(s=this._table.rows[0]).cells.length);n<a;n++)l+=this._getNumberValue(s.cells[n].style.width,1);s=null,this._oldWidth=l,this.setWidth(parseInt(l/this.getOption().scale,10))}else{var r=1;for(l=1,s=this._table.rows[0],i=1;i<=t;i++){o=s.cells[i];l+=this._getNumberValue(o.style.width,1),1==i&&(r=this._getNumberValue(o.style.width,1)),o=null}s=null;for(i=0;i<=this.getOption().rows;i++){s=this._table.rows[i];var d=e-t;for(n=0;n<d;n++){var u=s.cells.length;o=s.insertCell(u);0==i?(o.style.height="1px",o.style.width=r+"px",l+=r):(this._initCellEvent(o),this._setCellStyle(o)),o=null}s=null}this._oldWidth=l,this.setWidth(parseInt(l/this.getOption().scale,10))}this._refreshSheet()},_changeRow:function(){var t=this._table.rows.length-1,e=this.getOption().rows;if(this.getOption().heads>e&&(this.getOption().heads=e),e<t){var i=1,s=1;for(i=1;i<=e;i++){for(var n=(r=this._table.rows[i]).cells.length-1,o=0;o<=n;o++){var h=(a=r.cells[o]).rowSpan;null!=h&&h>e-i+1&&(a.rowSpan=e-i+1)}s+=this._getNumberValue(this._table.rows[i].cells[0].style.height,1)}for(i=t;i>e;i--)this._table.deleteRow(i);this._oldHeight=s,this.setHeight(parseInt(s/this.getOption().scale,10))}else{s=1;var l=1;for(i=1;i<=t;i++){var a=(r=this._table.rows[i]).cells[0];s+=this._getNumberValue(a.style.height,1),1==i&&(l=this._getNumberValue(a.style.height,1))}for(i=t+1;i<=e;i++){var r=this._table.insertRow(i);for(o=0;o<=this.getOption().cols;o++){a=r.insertCell(o);0==o?(a.style.width="1px",a.style.height=l+"px",s+=l):(this._initCellEvent(a),this._setCellStyle(a))}}this._oldHeight=s,this.setHeight(parseInt(s/this.getOption().scale,10))}this._refreshSheet()},_reset:function(){var t=parseInt(this.getOption().width*this.getOption().scale/this.getOption().cols,10),e=parseInt(this.getOption().height*this.getOption().scale/this.getOption().rows,10),i=1,s=2;null!=this.getOption().border&&""!==this.getOption().border&&(s=parseInt(this.getOption().border,10)+2,i=parseInt(this.getOption().border,10));for(var n=this._table.rows.length-1;n>=0;n--)this._table.deleteRow(n);for(n=0;n<=this.getOption().rows;n++)for(var o=this._table.insertRow(n),h=0;h<=this.getOption().cols;h++){var l=o.insertCell(h);0==n?(l.style.height="1px",0==h?l.style.width="1px":h<this.getOption().cols?(l.style.width=t+"px",i+=t):l.style.width=parseInt(this.getOption().width*this.getOption().scale,10)-i+"px"):0==h?(l.style.width="1px",n<this.getOption().rows?(l.style.height=e+"px",s+=e):l.style.height=parseInt(this.getOption().height*this.getOption().scale,10)-s+"px"):(this._initCellEvent(l),this._setCellStyle(l))}this._refreshSheet()},_setCellStyle:function(t){this.setStyle(t,"print_table_cell"),t.style.borderStyle=this.getOption().borderStyle,t.style.borderColor=this.getOption().borderColor,null!=this.getOption().border&&""!==this.getOption().border&&(this._setNumberValue(t,"borderRightWidth",this.getOption().border),this._setNumberValue(t,"borderBottomWidth",this.getOption().border),this._setNumberValue(t,"borderTopWidth",0),this._setNumberValue(t,"borderLeftWidth",0))},_mergCell:function(){var t=this._selRect.ecol-this._selRect.bcol+1,e=this._selRect.erow-this._selRect.brow+1,i=this._sheet[this._selRect.brow][this._selRect.bcol];if(null!=i){var s=this._getNumberValue(i.colSpan,1);if(this._getNumberValue(i.rowSpan,1)==e&&s==t){i.rowSpan=1,i.colSpan=1;for(var n=this._selRect.brow;n<=this._selRect.erow;n++){for(var o=this._table.rows[n],h=this._selRect.bcol;h<=this._selRect.ecol;h++)if(n!=this._selRect.brow||h!=this._selRect.bcol){for(var l=0,a=1,r=this._sheet[n][h-a];null!=r&&r.parentNode.rowIndex!=n&&h-a>0;)a++,r=this._sheet[n][h-a];null!=r&&(l=r.cellIndex),r=o.insertCell(l+1),this._initCellEvent(r),this._setCellStyle(r),r=null}o=null}}else for(n=this._selRect.erow;n>=this._selRect.brow;n--)for(h=this._selRect.ecol;h>=this._selRect.bcol;h--){null!=(r=this._getCellObj(n,h))&&(n>this._selRect.brow||h>this._selRect.bcol?this._table.rows[n].deleteCell(r.cellIndex):(r.colSpan=t,r.rowSpan=e))}i=null,this._refreshSheet()}},_getCellObj:function(t,e){for(var i=this._table.rows[t],s=null,n=1,o=i.cells.length;n<o;n++){if(this._getCellIndex(i.cells[n])==e){s=i.cells[n];break}}return s},_doBlur:function(){0!=this._selected&&(this.base(),this.refresh())},doFocus:function(){this._selected&&!this._cellMouseDown||(this.base(),this.refresh())},_refreshSheet:function(){this._sheet=[];for(var t=1;t<=this.getOption().rows;t++){this._sheet[t]=[];for(var e=1;e<=this.getOption().cols;e++)this._sheet[t][e]=null}for(t=1;t<=this.getOption().rows;t++){for(var i=this._table.rows[t],s=1,n=this._sheet[t],o=(e=1,i.cells.length);e<o;e++){for(;null!=n[s];)s++;var h=this._table.rows[t].cells[e],l=this._getNumberValue(h.rowSpan,1),a=this._getNumberValue(h.colSpan,1);if(l>1||a>1)for(var r=t;r<t+l;r++)for(var d=s;d<s+a;d++)this._sheet[r][d]=h;else n[s]=h;h=null}n=null,i=null}},_refreshTdStyle:function(){for(var t=1;t<=this.getOption().rows;t++)for(var e=this._table.rows[t],i=1,s=e.cells.length;i<s;i++){var n=!1,o=e.cells[i],h=this._getCellIndex(o);this._selRect.brow<=t&&this._selRect.erow>=t&&this._selRect.bcol<=h&&this._selRect.ecol>=h&&(n=!0),n&&this._selected?this.setStyle(o,"print_table_sel"):null!=e.dataFields&&""!==e.dataFields?this.setStyle(o,"print_table_row_circle"):this.setStyle(o,"print_table_cell"),o.style.borderStyle=this.getOption().borderStyle,null==o._option&&(o._option={}),1==this.getOption().scale&&(o._option.fontSize=this._getNumberValue(o.style.fontSize,12)),1!=this.getOption().scale&&null!=o._option.fontSize&&(o.style.fontSize=parseInt(o._option.fontSize*this.getOption().scale,10)+"px"),o=null}},_refreshTdWidth:function(){if(this.isPecent(this.getOption().width));else{if(this.getOption().width=parseInt(this.getOption().width,10),null!=this._oldWidth&&this._oldWidth!=parseInt(this.getOption().width*this.getOption().scale,10)){for(var t=parseInt(this.getOption().width*this.getOption().scale,10)-this._oldWidth,e=parseInt(t/this.getOption().cols,10),i=0,s=1;s<this.getOption().cols;s++){var n=this._getNumberValue(this._table.rows[0].cells[s].style.width,1);this._setNumberValue(this._table.rows[0].cells[s],"width",n+e),i+=e}n=this._getNumberValue(this._table.rows[0].cells[this.getOption().cols].style.width,1);this._setNumberValue(this._table.rows[0].cells[this.getOption().cols],"width",n+t-i)}this._oldWidth=parseInt(this.getOption().width*this.getOption().scale,10)}},_refreshTdHeight:function(){if(this.getOption().height=parseInt(this.getOption().height,10),null!=this._oldHeight&&this._oldHeight!=parseInt(this.getOption().height*this.getOption().scale,10)){for(var t=parseInt(this.getOption().height*this.getOption().scale,10)-this._oldHeight,e=parseInt(t/this.getOption().rows,10),i=0,s=1;s<this.getOption().rows;s++){var n=this._getNumberValue(this._table.rows[s].cells[0].style.height,1);this._setNumberValue(this._table.rows[s].cells[0],"height",n+e),i+=e}n=this._getNumberValue(this._table.rows[this.getOption().rows].cells[0].style.height,1);this._setNumberValue(this._table.rows[this.getOption().rows].cells[0],"height",n+t-i)}this._oldHeight=parseInt(this.getOption().height*this.getOption().scale,10)},refresh:function(){if(this.base(),this._refreshTdWidth(),this._refreshTdHeight(),this._refreshTdStyle(),"td"==this._selectType&&!this._cellMouseDown&&this._selected)for(var t=this._selRect.brow;t<=this._selRect.erow;t++)for(var e=this._selRect.bcol;e<=this._selRect.ecol;e++){var i=this._getCellObj(t,e);if(null!=i){var s=this.getOption().fontSize||12,n=this._getNumberValue(i.colSpan,1),o=this._getNumberValue(i.rowSpan,1);if(i._option.fontSize=s,s=parseInt(s*this.getOption().scale,10),this._selRect.erow-this._selRect.brow==o-1&&this._selRect.ecol-this._selRect.bcol==n-1&&((null==i.childComponent||this.isArray(i.childComponent)&&0==i.childComponent.length)&&this._setHtml(i,this.getOption().text||"",!1),i.dataField=this.getOption().dataField,i.parentNode.dataFields!=this.getOption().dataFields&&(i.parentNode.dataFields=this.getOption().dataFields)),this._selRect.brow==this._selRect.erow&&null!=this.getOption().rowHeight&&""!==this.getOption().rowHeight){var h=this._table.rows[t].cells[0],l=this._getNumberValue(h.style.height),a=parseInt(parseInt(this.getOption().rowHeight,10)*this.getOption().scale,10),r=a-l;this._setNumberValue(h,"height",a),this._oldHeight=this.getOption().height+r,this.setHeight(this._oldHeight),h=null}i.style.textAlign=this.getOption().textAlign||"",i.style.fontSize=s+"px",i.style.fontWeight=this.getOption().fontWeight||"normal",i.style.fontFamily=this.getOption().fontFamily||this.getI18n("qzz.defFontFamily","宋体"),i.style.fontStyle=this.getOption().fontStyle||"normal",i.style.textDecoration=this.getOption().textDecoration||"none",i.style.color=this.getOption().color||"",i.style.backgroundColor=this.getOption().backgroundColor||""}}this.focus?this.thisWindow.style.overflow="visible":this.thisWindow.style.overflow="hidden"},_initCellEvent:function(t){var e=this;t.onmouseover=function(t){t=t||window.event;e.doCellMouseOver(this,t)},t.onmousemove=function(t){t=t||window.event;e.doCellMouseMove(this,t)},t.onmousedown=function(t){t=t||window.event;e.doCellMouseDown(this,t)},t.onmouseup=function(t){t=t||window.event;e.doCellMouseUp(this,t)}},_getCellIndex:function(t){if(null==t)return-1;var e=t.parentNode.rowIndex;if(0==e)return t.cellIndex;for(var i=1,s=1;s<=this.getOption().cols;s++)if(this._sheet[e][s]===t){i=s;break}return i},_getTopCell:function(t){var e=t;return"object"===(void 0===e?"undefined":_typeof(e))&&(e=this._getCellIndex(t)),this._table.rows[0].cells[e]},doCellMouseDown:function(t,e){if(this.getMouseButton(e)==this.mouseType.mtLeft){this.hasbind("onBeforeSelCell")&&this.trigger("onBeforeSelCell",[]),this._cellMouseDown=!0,this._selected=!0,this.curCell=t,this.curCellWidth=this._getColWidth(t);var i=this._getCellIndex(t);i>0&&i<this.getOption().cols&&(this.nextCellWidth=this._getColWidth(this._table.rows[0].cells[i+1],1)),this.curTableWidth=this.getOption().width,this.curMouseLeft=this.mouseLeft;var s=this._getNumberValue(t.colSpan,1),n=this._getNumberValue(t.rowSpan,1);this._selRect={brow:t.parentNode.rowIndex,erow:t.parentNode.rowIndex+n-1,bcol:i,ecol:i+s-1},null!=t&&this.isArray(t.childComponent)&&t.childComponent.length>0?(t.childComponent[0].setFocus(),this._cellMouseDown=!1):1!=this.focus&&this.setFocus()}},_getColWidth:function(t){return this._getNumberValue(this._table.rows[0].cells[this._getCellIndex(t)].style.width,1)},_setColWidth:function(t,e){var i=this._getNumberValue(this.getOption().border,1),s=this._getCellIndex(t);(s=s+this._getNumberValue(t.colSpan,1)-1)>0&&s<this.getOption().cols?this.nextCellWidth-e>=i&&this.curCellWidth+e>=i&&(this._setNumberValue(this._table.rows[0].cells[s],"width",this.curCellWidth+e),this._setNumberValue(this._table.rows[0].cells[s+1],"width",this.nextCellWidth-e)):s==this.getOption().cols&&(this._setNumberValue(this._table.rows[0].cells[s],"width",this.curCellWidth+e),this.getOption().width=this.curTableWidth+parseInt(e/this.getOption().scale,10),this._oldWidth=parseInt(this.getOption().width*this.getOption().scale,10),this._setNumberValue(this.thisWindow,"width",this._oldWidth),this.hasbind("onFocus")&&this.trigger("onFocus",[]))},doCellMouseUp:function(t,e){if(this.getMouseButton(e)==this.mouseType.mtLeft&&!this.resizeState&&(this.refresh(),this.hasbind("onFocus")&&"td"==this._selectType&&null!=(t=this._getCellObj(this._selRect.brow,this._selRect.bcol)))){this.getOption().text=t.innerHTML,this.getOption().textAlign=t.style.textAlign||"left",this.getOption().fontWeight=t.style.fontWeight||"normal",this.getOption().fontStyle=t.style.fontStyle||"normal",this.getOption().fontFamily=t.style.fontFamily||this.getI18n("qzz.defFontFamily","宋体"),this.getOption().textDecoration=t.style.textDecoration||"none";var i=t.style.color||"";this.getOption().color=""!==i?this.rgbToColor(i):"";var s=t.style.backgroundColor||"";if(this.getOption().backgroundColor=""!==s?this.rgbToColor(s):"",this.getOption().dataField=t.dataField||"",this.getOption().dataFields=t.parentNode.dataFields||"",this._selRect.brow==this._selRect.erow){var n=this._table.rows[this._selRect.brow].cells[0],o=this._getNumberValue(n.style.height,24);this.getOption().rowHeight=parseInt(o/this.getOption().scale,10),n=null}else this.getOption().rowHeight="";this.getOption().fontSize=t._option.fontSize,t=null,this.trigger("onFocus",[!0])}},doCellMouseMove:function(t,e){if(!this._cellMouseDown){var i=0,s=t.getBoundingClientRect(),n=(e.clientX,t.offsetWidth),o=e.clientX-s.left,h=n-o;h<5?(this.resizeState=!0,this.titleDragState=!0,this.getBrowser("safari")?t.style.cursor="e-resize":t.style.cursor="col-resize"):0==t.cellIndex&&o<5?(t.style.cursor="move",this.titleDragState=!1,this.resizeState=!1):(this.titleDragState=!1,this.resizeState=!1,t.style.cursor=""),this.mouseLeft=e.clientX,i=null,s=null,null,n=null,h=null}},doCellMouseOver:function(t,e){if(this._cellMouseDown&&this.getMouseButton(e)==this.mouseType.mtLeft&&!this.resizeState){var i=this._getCellIndex(t),s=this._getNumberValue(t.colSpan,1),n=this._getNumberValue(t.rowSpan,1),o=!1;i+s-1>this._selRect.ecol?(this._selRect.ecol=i+s-1,o=!0):i<this._selRect.bcol&&(this._selRect.bcol=i,o=!0);var h=t.parentNode.rowIndex;if(h+n-1>this._selRect.erow?(this._selRect.erow=h+n-1,o=!0):h<this._selRect.brow&&(this._selRect.brow=h,o=!0),o)for(var l=this._selRect.brow;l<=this._selRect.erow;l++)for(var a=this._sheet[l],r=this._selRect.bcol;r<=this._selRect.ecol;r++){var d=a[r];s=this._getNumberValue(d.colSpan,1),n=this._getNumberValue(d.rowSpan,1),(s>1||n>1)&&this.doCellMouseOver(d,e)}}},doMouseUp:function(){this._cellMouseDown=!1},doMouseMove:function(t){this._cellMouseDown&&this.resizeState&&t.clientX!=this.curMouseLeft&&this._setColWidth(this.curCell,t.clientX-this.curMouseLeft)},_onselectstart:function(t){var e=t||window.event;e.target||e.srcElement;return e.returnValue=!1,!1},getAttribute:function(){var t=this.base();if(t.push({name:"cols",value:this.getOption().cols}),t.push({name:"rows",value:this.getOption().rows}),t.push({name:"heads",value:this.getOption().heads}),t.push({name:"borderStyle",value:this.getOption().borderStyle}),"td"==this._selectType){t.push({name:"rowHeight",value:this.getOption().rowHeight}),t.push({name:"dataFields",value:this.getOption().dataFields});var e=this._sheet[this._selRect.brow][this._selRect.bcol];null!=e&&this.isArray(e.childComponent)&&e.childComponent.length>0||(t.push({name:"dataField",value:this.getOption().dataField}),t.push({name:"text",value:this.getOption().text})),t.push({name:"textAlign",value:this.getOption().textAlign||"left"}),t.push({name:"fontFamily",value:this.getOption().fontFamily}),t.push({name:"fontSize",value:this._getNumberValue(this.getOption().fontSize,12)}),t.push({name:"fontWeight",value:this.getOption().fontWeight||"normal"}),t.push({name:"fontStyle",value:this.getOption().fontStyle||"normal"}),t.push({name:"textDecoration",value:this.getOption().textDecoration||"none"}),t.push({name:"color",value:this.getOption().color||""}),t.push({name:"backgroundColor",value:this.getOption().backgroundColor||""})}return t},setOption:function(t,e,i){e!=i&&(this.getOption()[t]=e,"cols"==t?this._changeCol():"rows"==t&&this._changeRow(),this.trigger("onAttribChanged",[this,t,i,e]))},setColWidths:function(t){if(null!=t){"string"==typeof t&&(t=t.split(","));for(var e=t.length,i=this._table.rows[0],s=0;s<e;s++)i.cells[s+1].style.width=parseInt(parseInt(t[s],10)*this.getOption().scale,10)+"px"}},getColWidths:function(){for(var t=[],e=this._table.rows[0],i=e.cells.length-1,s=0;s<i;s++){var n=this._getNumberValue(e.cells[s+1].style.width);n=parseInt(n/this.getOption().scale,10),t.push(n)}return e=null,t},setAttribute:function(t){this._oldWidth=parseInt(this.getOption().width*this.getOption().scale,10),this._oldHeight=parseInt(this.getOption().height*this.getOption().scale,10),this.base(t)},getRow:function(t){return this._table.rows[t]},getCell:function(t,e){var i=null;return null!=t.cells?i=t.cells:"number"==typeof t&&(i=this._table.rows[t].cells),i.length>e?i[e]:null}}),_bindRenderFunc("qzztable",t.ui.design.table),t.ui.design.table}),
/*!
 * 面板控件.
 * ecp.qzz.ui.design.text.js
 * 创建：QZZ
 * 日期：2014-03-01
 */
null==window.qdefine&&(window.qdefine=define),qdefine(["qzz.dbase"],function(){var t=window.qzz;return t.space("ui.design"),t.ui.design.text=t.Class(t.ui.design.base,{_create:function(){this.base(),this.className="Text"},_setText:function(t){t!=this.getOption().text&&(this.getOption().text=t,this.refresh())},getAttribute:function(){var t=this.base();return t.push({name:"text",value:this.getOption().text}),t.push({name:"fontFamily",value:this.getOption().fontFamily}),t.push({name:"fontWeight",value:this.getOption().fontWeight||"normal"}),t.push({name:"fontStyle",value:this.getOption().fontStyle||"normal"}),t.push({name:"textDecoration",value:this.getOption().textDecoration||"none"}),t.push({name:"textAlign",value:this.getOption().textAlign||"left"}),t.push({name:"fontSize",value:this._getNumberValue(this.getOption().fontSize,12)}),t.push({name:"color",value:this.getOption().color||""}),t},refresh:function(){this.base(),null!=this.getOption().color&&""!=this.getOption().color&&(this.thisWindow.style.color=this.getOption().color),null!=this.getOption().backgroundColor&&""!=this.getOption().backgroundColor&&(this.thisWindow.style.backgroundColor=this.getOption().backgroundColor),this._setHtml(this.thisWindow,this.getOption().text),this.thisWindow.style.lineHeight=parseInt(this.getOption().height*this.getOption().scale,10)+"px"}}),_bindRenderFunc("qzztext",t.ui.design.text),t.ui.design.text}),null==window.qdefine&&(window.qdefine=define),null==window.qzz&&(window.qzz={}),qdefine(["qzz.querygrid","ecp.utils","qzz.mwindow"],function(t,e){var i=window.qzz;return null==i.pertain&&(i.pertain={}),i.pertain.gridcoldesign=function(t,e){var s="#colDesignDlg"+t.index,n=document.querySelector(s);null!=n&&n.parentNode.removeChild(n);var o=document.createElement("div");o.id="colDesignDlg"+t.index,document.body.appendChild(o);var h='<div id=\'colDesignSelect\'>              <table border="0px" cellpadding="0px" cellspacing="0px" height="">                 <tr style=\'height:30px;vertical-align: top;\'><td>                  <span class=\'spanbtn\' id="upRow"><li class="qmfa fa fa-arrow-circle-o-up"></li>'+t.getI18n("moveUp","上移")+'</span>                   <span class=\'spanbtn\' id="downRow"><li class="qmfa fa fa-arrow-circle-o-down"></li>'+t.getI18n("moveDown","下移")+'</span>                   <span class=\'spanbtn\' id="firstRow"><li class="qmfa fa fa-arrow-up" style="border-top: 2px solid black;position: relative;top: 2px;"></li>'+t.getI18n("moveFirst","最上")+'</span>                   <span class=\'spanbtn\' id="lastRow"><li class="qmfa fa fa-arrow-down" style="border-bottom: 2px solid black;position: relative;top: -2px;"></li>'+t.getI18n("moveLast","最下")+'</span>                   <span class=\'spanbtn\' id="restoreDefault" style="margin-right:8px;cursor:pointer;"><li class="qmfa fa fa-refresh"></li>'+t.getI18n("reset","重置")+'</span>                 </td></tr>                <tr><td>                   <table id="gridFormat'+t.index+'"><tr><td></td></tr></table>                 </td></tr>               </table> </div>';o.innerHTML=h;var l=o.querySelector("#colDesignSelect"),a=new i.ui.model.window(l,{width:568,height:430,title:t.getI18n("colset","列设置"),otherButtons:[t.getI18n("cancel","取消"),t.getI18n("ok","确定")],otherButtonStyles:["qmbtn-default","qmbtn-primary"],clickButton:function(e,i,s){if(1===s){var n=u.value();t.priorColNamesValue=n;var o=t.colDatasToColNames(n);t.refreshTitle(o),t.saveColumnSetup(JSON.stringify(o)),t.first(),t.trigger("onRefreshTitle",[o])}i.hide()}}),r={treeGrid:!1,filter:!1,sort:!1,hidePopMenu:!0,height:"254",width:"538",suitToFit:!0,autoEcpWidth:!1,colNames:[t.getI18n("colName","列名"),t.getI18n("display","显示"),t.getI18n("frozen","固定")],colModels:[{name:"rowName",width:172,outputEscape:!1},{name:"display",editType:"onoff",align:"center",width:78},{name:"frozen",editType:"onoff",align:"center",width:78}]};!0===t.getOption().groups&&(r.colNames.push(t.getI18n("groups","自动合并")),r.colModels.push({name:"groups",editType:"onoff",align:"center",width:78}));var d=o.querySelector("#gridFormat"+t.index),u=new i.ui.querygrid(d,r),c=t.priorColNames||t.getOption().colNames,g=t.priorColModels||t.getOption().colModels,p=t.priorColNamesValue;null==p&&(p=t.colNamesToColDatas(g,c)),u.value(p,function(){u.each(function(t){var e=t.data.colModel;null==e||!0!==e.disGroup&&"radio"!==e.editType||(this.getCellOption("groups").disabled=!0)})}),o.querySelector("#upRow").onclick=function(){u.moveRecord(-1)},o.querySelector("#downRow").onclick=function(){u.moveRecord(1)},o.querySelector("#firstRow").onclick=function(){var t=u.dataSet.getIndex()+1;u.moveRecord(-1*t)},o.querySelector("#lastRow").onclick=function(){var t=u.getRecordCount()-u.dataSet.getIndex()+1;u.moveRecord(t)},o.querySelector("#restoreDefault").onclick=function(){var e=t.extend([],t.getOption().defColNames),i=t.extend([],t.getOption().defColModels),s=t.colNamesToColDatas(i,e);t.priorColNamesValue=null,u.value(s)},u.bind("onAfterEdit",function(t,e,i,s,n,o){var h=this.getValue("frozen",o),l=this.getValue("display",o);"frozen"==e?!0===h&&!0!==l&&this.setValue("display",!0,o):"display"==e&&!0!==l&&!0===h&&this.setValue("frozen",!1,o)}),t.focus=!1,a.show()},i.pertain.gridcoldesign}),window.qdefine=null,qzz.ui.grid}(null),exports.default=qzz.ui.grid}});